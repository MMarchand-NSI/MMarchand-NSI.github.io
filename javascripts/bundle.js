"use strict";(()=>{var t2=Object.create;var Kl=Object.defineProperty;var n2=Object.getOwnPropertyDescriptor;var o2=Object.getOwnPropertyNames;var r2=Object.getPrototypeOf,i2=Object.prototype.hasOwnProperty;var p=(r,n)=>Kl(r,"name",{value:n,configurable:!0});var wt=(r,n)=>()=>(n||r((n={exports:{}}).exports,n),n.exports);var s2=(r,n,e,o)=>{if(n&&typeof n=="object"||typeof n=="function")for(let i of o2(n))!i2.call(r,i)&&i!==e&&Kl(r,i,{get:()=>n[i],enumerable:!(o=n2(n,i))||o.enumerable});return r};var pe=(r,n,e)=>(e=r!=null?t2(r2(r)):{},s2(n||!r||!r.__esModule?Kl(e,"default",{value:r,enumerable:!0}):e,r));var La=wt((ec,tc)=>{(function(r,n){typeof define=="function"&&define.amd?define([],n):typeof ec<"u"?n():(n(),r.FileSaver={})})(ec,function(){"use strict";function r(u,l){return typeof l>"u"?l={autoBom:!1}:typeof l!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(u.type)?new Blob(["\uFEFF",u],{type:u.type}):u}p(r,"b");function n(u,l,c){var d=new XMLHttpRequest;d.open("GET",u),d.responseType="blob",d.onload=function(){a(d.response,l,c)},d.onerror=function(){console.error("could not download file")},d.send()}p(n,"c");function e(u){var l=new XMLHttpRequest;l.open("HEAD",u,!1);try{l.send()}catch{}return 200<=l.status&&299>=l.status}p(e,"d");function o(u){try{u.dispatchEvent(new MouseEvent("click"))}catch{var l=document.createEvent("MouseEvents");l.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),u.dispatchEvent(l)}}p(o,"e");var i=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:void 0,s=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),a=i.saveAs||(typeof window!="object"||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(u,l,c){var d=i.URL||i.webkitURL,h=document.createElement("a");l=l||u.name||"download",h.download=l,h.rel="noopener",typeof u=="string"?(h.href=u,h.origin===location.origin?o(h):e(h.href)?n(u,l,c):o(h,h.target="_blank")):(h.href=d.createObjectURL(u),setTimeout(function(){d.revokeObjectURL(h.href)},4e4),setTimeout(function(){o(h)},0))}:"msSaveOrOpenBlob"in navigator?function(u,l,c){if(l=l||u.name||"download",typeof u!="string")navigator.msSaveOrOpenBlob(r(u,c),l);else if(e(u))n(u,l,c);else{var d=document.createElement("a");d.href=u,d.target="_blank",setTimeout(function(){o(d)})}}:function(u,l,c,d){if(d=d||open("","_blank"),d&&(d.document.title=d.document.body.innerText="downloading..."),typeof u=="string")return n(u,l,c);var h=u.type==="application/octet-stream",m=/constructor/i.test(i.HTMLElement)||i.safari,f=/CriOS\/[\d]+/.test(navigator.userAgent);if((f||h&&m||s)&&typeof FileReader<"u"){var g=new FileReader;g.onloadend=function(){var w=g.result;w=f?w:w.replace(/^data:[^;]*;/,"data:attachment/file;"),d?d.location.href=w:location=w,d=null},g.readAsDataURL(u)}else{var D=i.URL||i.webkitURL,y=D.createObjectURL(u);d?d.location=y:location.href=y,d=null,setTimeout(function(){D.revokeObjectURL(y)},4e4)}});i.saveAs=a.saveAs=a,typeof tc<"u"&&(tc.exports=a)})});var er=wt((nc,oc)=>{(function(r,n){typeof nc=="object"&&typeof oc<"u"?oc.exports=n():typeof define=="function"&&define.amd?define(n):r.JSON5=n()})(nc,function(){"use strict";function r(_,F){return F={exports:{}},_(F,F.exports),F.exports}p(r,"createCommonjsModule");var n=r(function(_){var F=_.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=F)}),e=r(function(_){var F=_.exports={version:"2.6.5"};typeof __e=="number"&&(__e=F)}),o=e.version,i=p(function(_){return typeof _=="object"?_!==null:typeof _=="function"},"_isObject"),s=p(function(_){if(!i(_))throw TypeError(_+" is not an object!");return _},"_anObject"),a=p(function(_){try{return!!_()}catch{return!0}},"_fails"),u=!a(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7}),l=n.document,c=i(l)&&i(l.createElement),d=p(function(_){return c?l.createElement(_):{}},"_domCreate"),h=!u&&!a(function(){return Object.defineProperty(d("div"),"a",{get:function(){return 7}}).a!=7}),m=p(function(_,F){if(!i(_))return _;var re,ee;if(F&&typeof(re=_.toString)=="function"&&!i(ee=re.call(_))||typeof(re=_.valueOf)=="function"&&!i(ee=re.call(_))||!F&&typeof(re=_.toString)=="function"&&!i(ee=re.call(_)))return ee;throw TypeError("Can't convert object to primitive value")},"_toPrimitive"),f=Object.defineProperty,g=u?Object.defineProperty:p(function(F,re,ee){if(s(F),re=m(re,!0),s(ee),h)try{return f(F,re,ee)}catch{}if("get"in ee||"set"in ee)throw TypeError("Accessors not supported!");return"value"in ee&&(F[re]=ee.value),F},"defineProperty"),D={f:g},y=p(function(_,F){return{enumerable:!(_&1),configurable:!(_&2),writable:!(_&4),value:F}},"_propertyDesc"),w=u?function(_,F,re){return D.f(_,F,y(1,re))}:function(_,F,re){return _[F]=re,_},x={}.hasOwnProperty,S=p(function(_,F){return x.call(_,F)},"_has"),T=0,A=Math.random(),P=p(function(_){return"Symbol(".concat(_===void 0?"":_,")_",(++T+A).toString(36))},"_uid"),R=!1,L=r(function(_){var F="__core-js_shared__",re=n[F]||(n[F]={});(_.exports=function(ee,he){return re[ee]||(re[ee]=he!==void 0?he:{})})("versions",[]).push({version:e.version,mode:R?"pure":"global",copyright:"\xA9 2019 Denis Pushkarev (zloirock.ru)"})}),O=L("native-function-to-string",Function.toString),G=r(function(_){var F=P("src"),re="toString",ee=(""+O).split(re);e.inspectSource=function(he){return O.call(he)},(_.exports=function(he,Re,Fe,rn){var Tt=typeof Fe=="function";Tt&&(S(Fe,"name")||w(Fe,"name",Re)),he[Re]!==Fe&&(Tt&&(S(Fe,F)||w(Fe,F,he[Re]?""+he[Re]:ee.join(String(Re)))),he===n?he[Re]=Fe:rn?he[Re]?he[Re]=Fe:w(he,Re,Fe):(delete he[Re],w(he,Re,Fe)))})(Function.prototype,re,p(function(){return typeof this=="function"&&this[F]||O.call(this)},"toString"))}),B=p(function(_){if(typeof _!="function")throw TypeError(_+" is not a function!");return _},"_aFunction"),Q=p(function(_,F,re){if(B(_),F===void 0)return _;switch(re){case 1:return function(ee){return _.call(F,ee)};case 2:return function(ee,he){return _.call(F,ee,he)};case 3:return function(ee,he,Re){return _.call(F,ee,he,Re)}}return function(){return _.apply(F,arguments)}},"_ctx"),oe="prototype",ne=p(function(_,F,re){var ee=_&ne.F,he=_&ne.G,Re=_&ne.S,Fe=_&ne.P,rn=_&ne.B,Tt=he?n:Re?n[F]||(n[F]={}):(n[F]||{})[oe],Nr=he?e:e[F]||(e[F]={}),Ti=Nr[oe]||(Nr[oe]={}),Xn,co,sn,Ai;he&&(re=F);for(Xn in re)co=!ee&&Tt&&Tt[Xn]!==void 0,sn=(co?Tt:re)[Xn],Ai=rn&&co?Q(sn,n):Fe&&typeof sn=="function"?Q(Function.call,sn):sn,Tt&&G(Tt,Xn,sn,_&ne.U),Nr[Xn]!=sn&&w(Nr,Xn,Ai),Fe&&Ti[Xn]!=sn&&(Ti[Xn]=sn)},"$export");n.core=e,ne.F=1,ne.G=2,ne.S=4,ne.P=8,ne.B=16,ne.W=32,ne.U=64,ne.R=128;var Ue=ne,ut=Math.ceil,$e=Math.floor,It=p(function(_){return isNaN(_=+_)?0:(_>0?$e:ut)(_)},"_toInteger"),Ct=p(function(_){if(_==null)throw TypeError("Can't call method on  "+_);return _},"_defined"),kt=p(function(_){return function(F,re){var ee=String(Ct(F)),he=It(re),Re=ee.length,Fe,rn;return he<0||he>=Re?_?"":void 0:(Fe=ee.charCodeAt(he),Fe<55296||Fe>56319||he+1===Re||(rn=ee.charCodeAt(he+1))<56320||rn>57343?_?ee.charAt(he):Fe:_?ee.slice(he,he+2):(Fe-55296<<10)+(rn-56320)+65536)}},"_stringAt"),Lt=kt(!1);Ue(Ue.P,"String",{codePointAt:p(function(F){return Lt(this,F)},"codePointAt")});var nn=e.String.codePointAt,Bn=Math.max,on=Math.min,tt=p(function(_,F){return _=It(_),_<0?Bn(_+F,0):on(_,F)},"_toAbsoluteIndex"),K=String.fromCharCode,de=String.fromCodePoint;Ue(Ue.S+Ue.F*(!!de&&de.length!=1),"String",{fromCodePoint:p(function(F){for(var re=arguments,ee=[],he=arguments.length,Re=0,Fe;he>Re;){if(Fe=+re[Re++],tt(Fe,1114111)!==Fe)throw RangeError(Fe+" is not a valid code point");ee.push(Fe<65536?K(Fe):K(((Fe-=65536)>>10)+55296,Fe%1024+56320))}return ee.join("")},"fromCodePoint")});var ge=e.String.fromCodePoint,Ye=/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,Ve=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,Tn=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/,Mo={Space_Separator:Ye,ID_Start:Ve,ID_Continue:Tn},Ze={isSpaceSeparator:p(function(F){return typeof F=="string"&&Mo.Space_Separator.test(F)},"isSpaceSeparator"),isIdStartChar:p(function(F){return typeof F=="string"&&(F>="a"&&F<="z"||F>="A"&&F<="Z"||F==="$"||F==="_"||Mo.ID_Start.test(F))},"isIdStartChar"),isIdContinueChar:p(function(F){return typeof F=="string"&&(F>="a"&&F<="z"||F>="A"&&F<="Z"||F>="0"&&F<="9"||F==="$"||F==="_"||F==="\u200C"||F==="\u200D"||Mo.ID_Continue.test(F))},"isIdContinueChar"),isDigit:p(function(F){return typeof F=="string"&&/[0-9]/.test(F)},"isDigit"),isHexDigit:p(function(F){return typeof F=="string"&&/[0-9A-Fa-f]/.test(F)},"isHexDigit")},Oo,Vt,hn,Or,Yn,fn,_t,Yl,As,Wm=p(function(F,re){Oo=String(F),Vt="start",hn=[],Or=0,Yn=1,fn=0,_t=void 0,Yl=void 0,As=void 0;do _t=Um(),qm[Vt]();while(_t.type!=="eof");return typeof re=="function"?Xl({"":As},"",re):As},"parse");function Xl(_,F,re){var ee=_[F];if(ee!=null&&typeof ee=="object")if(Array.isArray(ee))for(var he=0;he<ee.length;he++){var Re=String(he),Fe=Xl(ee,Re,re);Fe===void 0?delete ee[Re]:Object.defineProperty(ee,Re,{value:Fe,writable:!0,enumerable:!0,configurable:!0})}else for(var rn in ee){var Tt=Xl(ee,rn,re);Tt===void 0?delete ee[rn]:Object.defineProperty(ee,rn,{value:Tt,writable:!0,enumerable:!0,configurable:!0})}return re.call(_,F,ee)}p(Xl,"internalize");var Te,De,Ss,Po,Ne;function Um(){for(Te="default",De="",Ss=!1,Po=1;;){Ne=Bo();var _=$p[Te]();if(_)return _}}p(Um,"lex");function Bo(){if(Oo[Or])return String.fromCodePoint(Oo.codePointAt(Or))}p(Bo,"peek");function k(){var _=Bo();return _===`
`?(Yn++,fn=0):_?fn+=_.length:fn++,_&&(Or+=_.length),_}p(k,"read");var $p={default:p(function(){switch(Ne){case"	":case"\v":case"\f":case" ":case"\xA0":case"\uFEFF":case`
`:case"\r":case"\u2028":case"\u2029":k();return;case"/":k(),Te="comment";return;case void 0:return k(),rt("eof")}if(Ze.isSpaceSeparator(Ne)){k();return}return $p[Vt]()},"default$1"),comment:p(function(){switch(Ne){case"*":k(),Te="multiLineComment";return;case"/":k(),Te="singleLineComment";return}throw it(k())},"comment"),multiLineComment:p(function(){switch(Ne){case"*":k(),Te="multiLineCommentAsterisk";return;case void 0:throw it(k())}k()},"multiLineComment"),multiLineCommentAsterisk:p(function(){switch(Ne){case"*":k();return;case"/":k(),Te="default";return;case void 0:throw it(k())}k(),Te="multiLineComment"},"multiLineCommentAsterisk"),singleLineComment:p(function(){switch(Ne){case`
`:case"\r":case"\u2028":case"\u2029":k(),Te="default";return;case void 0:return k(),rt("eof")}k()},"singleLineComment"),value:p(function(){switch(Ne){case"{":case"[":return rt("punctuator",k());case"n":return k(),Pr("ull"),rt("null",null);case"t":return k(),Pr("rue"),rt("boolean",!0);case"f":return k(),Pr("alse"),rt("boolean",!1);case"-":case"+":k()==="-"&&(Po=-1),Te="sign";return;case".":De=k(),Te="decimalPointLeading";return;case"0":De=k(),Te="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":De=k(),Te="decimalInteger";return;case"I":return k(),Pr("nfinity"),rt("numeric",1/0);case"N":return k(),Pr("aN"),rt("numeric",NaN);case'"':case"'":Ss=k()==='"',De="",Te="string";return}throw it(k())},"value"),identifierNameStartEscape:p(function(){if(Ne!=="u")throw it(k());k();var F=jl();switch(F){case"$":case"_":break;default:if(!Ze.isIdStartChar(F))throw Yp();break}De+=F,Te="identifierName"},"identifierNameStartEscape"),identifierName:p(function(){switch(Ne){case"$":case"_":case"\u200C":case"\u200D":De+=k();return;case"\\":k(),Te="identifierNameEscape";return}if(Ze.isIdContinueChar(Ne)){De+=k();return}return rt("identifier",De)},"identifierName"),identifierNameEscape:p(function(){if(Ne!=="u")throw it(k());k();var F=jl();switch(F){case"$":case"_":case"\u200C":case"\u200D":break;default:if(!Ze.isIdContinueChar(F))throw Yp();break}De+=F,Te="identifierName"},"identifierNameEscape"),sign:p(function(){switch(Ne){case".":De=k(),Te="decimalPointLeading";return;case"0":De=k(),Te="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":De=k(),Te="decimalInteger";return;case"I":return k(),Pr("nfinity"),rt("numeric",Po*(1/0));case"N":return k(),Pr("aN"),rt("numeric",NaN)}throw it(k())},"sign$1"),zero:p(function(){switch(Ne){case".":De+=k(),Te="decimalPoint";return;case"e":case"E":De+=k(),Te="decimalExponent";return;case"x":case"X":De+=k(),Te="hexadecimal";return}return rt("numeric",Po*0)},"zero"),decimalInteger:p(function(){switch(Ne){case".":De+=k(),Te="decimalPoint";return;case"e":case"E":De+=k(),Te="decimalExponent";return}if(Ze.isDigit(Ne)){De+=k();return}return rt("numeric",Po*Number(De))},"decimalInteger"),decimalPointLeading:p(function(){if(Ze.isDigit(Ne)){De+=k(),Te="decimalFraction";return}throw it(k())},"decimalPointLeading"),decimalPoint:p(function(){switch(Ne){case"e":case"E":De+=k(),Te="decimalExponent";return}if(Ze.isDigit(Ne)){De+=k(),Te="decimalFraction";return}return rt("numeric",Po*Number(De))},"decimalPoint"),decimalFraction:p(function(){switch(Ne){case"e":case"E":De+=k(),Te="decimalExponent";return}if(Ze.isDigit(Ne)){De+=k();return}return rt("numeric",Po*Number(De))},"decimalFraction"),decimalExponent:p(function(){switch(Ne){case"+":case"-":De+=k(),Te="decimalExponentSign";return}if(Ze.isDigit(Ne)){De+=k(),Te="decimalExponentInteger";return}throw it(k())},"decimalExponent"),decimalExponentSign:p(function(){if(Ze.isDigit(Ne)){De+=k(),Te="decimalExponentInteger";return}throw it(k())},"decimalExponentSign"),decimalExponentInteger:p(function(){if(Ze.isDigit(Ne)){De+=k();return}return rt("numeric",Po*Number(De))},"decimalExponentInteger"),hexadecimal:p(function(){if(Ze.isHexDigit(Ne)){De+=k(),Te="hexadecimalInteger";return}throw it(k())},"hexadecimal"),hexadecimalInteger:p(function(){if(Ze.isHexDigit(Ne)){De+=k();return}return rt("numeric",Po*Number(De))},"hexadecimalInteger"),string:p(function(){switch(Ne){case"\\":k(),De+=zm();return;case'"':if(Ss)return k(),rt("string",De);De+=k();return;case"'":if(!Ss)return k(),rt("string",De);De+=k();return;case`
`:case"\r":throw it(k());case"\u2028":case"\u2029":$m(Ne);break;case void 0:throw it(k())}De+=k()},"string"),start:p(function(){switch(Ne){case"{":case"[":return rt("punctuator",k())}Te="value"},"start"),beforePropertyName:p(function(){switch(Ne){case"$":case"_":De=k(),Te="identifierName";return;case"\\":k(),Te="identifierNameStartEscape";return;case"}":return rt("punctuator",k());case'"':case"'":Ss=k()==='"',Te="string";return}if(Ze.isIdStartChar(Ne)){De+=k(),Te="identifierName";return}throw it(k())},"beforePropertyName"),afterPropertyName:p(function(){if(Ne===":")return rt("punctuator",k());throw it(k())},"afterPropertyName"),beforePropertyValue:p(function(){Te="value"},"beforePropertyValue"),afterPropertyValue:p(function(){switch(Ne){case",":case"}":return rt("punctuator",k())}throw it(k())},"afterPropertyValue"),beforeArrayValue:p(function(){if(Ne==="]")return rt("punctuator",k());Te="value"},"beforeArrayValue"),afterArrayValue:p(function(){switch(Ne){case",":case"]":return rt("punctuator",k())}throw it(k())},"afterArrayValue"),end:p(function(){throw it(k())},"end")};function rt(_,F){return{type:_,value:F,line:Yn,column:fn}}p(rt,"newToken");function Pr(_){for(var F=0,re=_;F<re.length;F+=1){var ee=re[F],he=Bo();if(he!==ee)throw it(k());k()}}p(Pr,"literal");function zm(){var _=Bo();switch(_){case"b":return k(),"\b";case"f":return k(),"\f";case"n":return k(),`
`;case"r":return k(),"\r";case"t":return k(),"	";case"v":return k(),"\v";case"0":if(k(),Ze.isDigit(Bo()))throw it(k());return"\0";case"x":return k(),Gm();case"u":return k(),jl();case`
`:case"\u2028":case"\u2029":return k(),"";case"\r":return k(),Bo()===`
`&&k(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":throw it(k());case void 0:throw it(k())}return k()}p(zm,"escape");function Gm(){var _="",F=Bo();if(!Ze.isHexDigit(F)||(_+=k(),F=Bo(),!Ze.isHexDigit(F)))throw it(k());return _+=k(),String.fromCodePoint(parseInt(_,16))}p(Gm,"hexEscape");function jl(){for(var _="",F=4;F-- >0;){var re=Bo();if(!Ze.isHexDigit(re))throw it(k());_+=k()}return String.fromCodePoint(parseInt(_,16))}p(jl,"unicodeEscape");var qm={start:p(function(){if(_t.type==="eof")throw Br();Ql()},"start"),beforePropertyName:p(function(){switch(_t.type){case"identifier":case"string":Yl=_t.value,Vt="afterPropertyName";return;case"punctuator":Na();return;case"eof":throw Br()}},"beforePropertyName"),afterPropertyName:p(function(){if(_t.type==="eof")throw Br();Vt="beforePropertyValue"},"afterPropertyName"),beforePropertyValue:p(function(){if(_t.type==="eof")throw Br();Ql()},"beforePropertyValue"),beforeArrayValue:p(function(){if(_t.type==="eof")throw Br();if(_t.type==="punctuator"&&_t.value==="]"){Na();return}Ql()},"beforeArrayValue"),afterPropertyValue:p(function(){if(_t.type==="eof")throw Br();switch(_t.value){case",":Vt="beforePropertyName";return;case"}":Na()}},"afterPropertyValue"),afterArrayValue:p(function(){if(_t.type==="eof")throw Br();switch(_t.value){case",":Vt="beforeArrayValue";return;case"]":Na()}},"afterArrayValue"),end:p(function(){},"end")};function Ql(){var _;switch(_t.type){case"punctuator":switch(_t.value){case"{":_={};break;case"[":_=[];break}break;case"null":case"boolean":case"numeric":case"string":_=_t.value;break}if(As===void 0)As=_;else{var F=hn[hn.length-1];Array.isArray(F)?F.push(_):Object.defineProperty(F,Yl,{value:_,writable:!0,enumerable:!0,configurable:!0})}if(_!==null&&typeof _=="object")hn.push(_),Array.isArray(_)?Vt="beforeArrayValue":Vt="beforePropertyName";else{var re=hn[hn.length-1];re==null?Vt="end":Array.isArray(re)?Vt="afterArrayValue":Vt="afterPropertyValue"}}p(Ql,"push");function Na(){hn.pop();var _=hn[hn.length-1];_==null?Vt="end":Array.isArray(_)?Vt="afterArrayValue":Vt="afterPropertyValue"}p(Na,"pop");function it(_){return Fa(_===void 0?"JSON5: invalid end of input at "+Yn+":"+fn:"JSON5: invalid character '"+Xp(_)+"' at "+Yn+":"+fn)}p(it,"invalidChar");function Br(){return Fa("JSON5: invalid end of input at "+Yn+":"+fn)}p(Br,"invalidEOF");function Yp(){return fn-=5,Fa("JSON5: invalid identifier character at "+Yn+":"+fn)}p(Yp,"invalidIdentifier");function $m(_){console.warn("JSON5: '"+Xp(_)+"' in strings is not valid ECMAScript; consider escaping")}p($m,"separatorChar");function Xp(_){var F={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(F[_])return F[_];if(_<" "){var re=_.charCodeAt(0).toString(16);return"\\x"+("00"+re).substring(re.length)}return _}p(Xp,"formatChar");function Fa(_){var F=new SyntaxError(_);return F.lineNumber=Yn,F.columnNumber=fn,F}p(Fa,"syntaxError");var Ym=p(function(F,re,ee){var he=[],Re="",Fe,rn,Tt="",Nr;if(re!=null&&typeof re=="object"&&!Array.isArray(re)&&(ee=re.space,Nr=re.quote,re=re.replacer),typeof re=="function")rn=re;else if(Array.isArray(re)){Fe=[];for(var Ti=0,Xn=re;Ti<Xn.length;Ti+=1){var co=Xn[Ti],sn=void 0;typeof co=="string"?sn=co:(typeof co=="number"||co instanceof String||co instanceof Number)&&(sn=String(co)),sn!==void 0&&Fe.indexOf(sn)<0&&Fe.push(sn)}}return ee instanceof Number?ee=Number(ee):ee instanceof String&&(ee=String(ee)),typeof ee=="number"?ee>0&&(ee=Math.min(10,Math.floor(ee)),Tt="          ".substr(0,ee)):typeof ee=="string"&&(Tt=ee.substr(0,10)),Ai("",{"":F});function Ai(Je,Xt){var ve=Xt[Je];switch(ve!=null&&(typeof ve.toJSON5=="function"?ve=ve.toJSON5(Je):typeof ve.toJSON=="function"&&(ve=ve.toJSON(Je))),rn&&(ve=rn.call(Xt,Je,ve)),ve instanceof Number?ve=Number(ve):ve instanceof String?ve=String(ve):ve instanceof Boolean&&(ve=ve.valueOf()),ve){case null:return"null";case!0:return"true";case!1:return"false"}if(typeof ve=="string")return Ia(ve,!1);if(typeof ve=="number")return String(ve);if(typeof ve=="object")return Array.isArray(ve)?Jm(ve):Km(ve)}p(Ai,"serializeProperty");function Ia(Je){for(var Xt={"'":.1,'"':.2},ve={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"},Ht="",jn=0;jn<Je.length;jn++){var jt=Je[jn];switch(jt){case"'":case'"':Xt[jt]++,Ht+=jt;continue;case"\0":if(Ze.isDigit(Je[jn+1])){Ht+="\\x00";continue}}if(ve[jt]){Ht+=ve[jt];continue}if(jt<" "){var Fr=jt.charCodeAt(0).toString(16);Ht+="\\x"+("00"+Fr).substring(Fr.length);continue}Ht+=jt}var No=Nr||Object.keys(Xt).reduce(function(Jo,Ir){return Xt[Jo]<Xt[Ir]?Jo:Ir});return Ht=Ht.replace(new RegExp(No,"g"),ve[No]),No+Ht+No}p(Ia,"quoteString");function Km(Je){if(he.indexOf(Je)>=0)throw TypeError("Converting circular structure to JSON5");he.push(Je);var Xt=Re;Re=Re+Tt;for(var ve=Fe||Object.keys(Je),Ht=[],jn=0,jt=ve;jn<jt.length;jn+=1){var Fr=jt[jn],No=Ai(Fr,Je);if(No!==void 0){var Jo=Zm(Fr)+":";Tt!==""&&(Jo+=" "),Jo+=No,Ht.push(Jo)}}var Ir;if(Ht.length===0)Ir="{}";else{var ka;if(Tt==="")ka=Ht.join(","),Ir="{"+ka+"}";else{var e2=`,
`+Re;ka=Ht.join(e2),Ir=`{
`+Re+ka+`,
`+Xt+"}"}}return he.pop(),Re=Xt,Ir}p(Km,"serializeObject");function Zm(Je){if(Je.length===0)return Ia(Je,!0);var Xt=String.fromCodePoint(Je.codePointAt(0));if(!Ze.isIdStartChar(Xt))return Ia(Je,!0);for(var ve=Xt.length;ve<Je.length;ve++)if(!Ze.isIdContinueChar(String.fromCodePoint(Je.codePointAt(ve))))return Ia(Je,!0);return Je}p(Zm,"serializeKey");function Jm(Je){if(he.indexOf(Je)>=0)throw TypeError("Converting circular structure to JSON5");he.push(Je);var Xt=Re;Re=Re+Tt;for(var ve=[],Ht=0;Ht<Je.length;Ht++){var jn=Ai(String(Ht),Je);ve.push(jn!==void 0?jn:"null")}var jt;if(ve.length===0)jt="[]";else if(Tt===""){var Fr=ve.join(",");jt="["+Fr+"]"}else{var No=`,
`+Re,Jo=ve.join(No);jt=`[
`+Re+Jo+`,
`+Xt+"]"}return he.pop(),Re=Xt,jt}p(Jm,"serializeArray")},"stringify"),Xm={parse:Wm,stringify:Ym},jm=Xm,Qm=jm;return Qm})});var cd=wt((A4,Va)=>{var ld=function(){var r=String.fromCharCode,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",o={};function i(a,u){if(!o[a]){o[a]={};for(var l=0;l<a.length;l++)o[a][a.charAt(l)]=l}return o[a][u]}p(i,"getBaseValue");var s={compressToBase64:function(a){if(a==null)return"";var u=s._compress(a,6,function(l){return n.charAt(l)});switch(u.length%4){default:case 0:return u;case 1:return u+"===";case 2:return u+"==";case 3:return u+"="}},decompressFromBase64:function(a){return a==null?"":a==""?null:s._decompress(a.length,32,function(u){return i(n,a.charAt(u))})},compressToUTF16:function(a){return a==null?"":s._compress(a,15,function(u){return r(u+32)})+" "},decompressFromUTF16:function(a){return a==null?"":a==""?null:s._decompress(a.length,16384,function(u){return a.charCodeAt(u)-32})},compressToUint8Array:function(a){for(var u=s.compress(a),l=new Uint8Array(u.length*2),c=0,d=u.length;c<d;c++){var h=u.charCodeAt(c);l[c*2]=h>>>8,l[c*2+1]=h%256}return l},decompressFromUint8Array:function(a){if(a==null)return s.decompress(a);for(var u=new Array(a.length/2),l=0,c=u.length;l<c;l++)u[l]=a[l*2]*256+a[l*2+1];var d=[];return u.forEach(function(h){d.push(r(h))}),s.decompress(d.join(""))},compressToEncodedURIComponent:function(a){return a==null?"":s._compress(a,6,function(u){return e.charAt(u)})},decompressFromEncodedURIComponent:function(a){return a==null?"":a==""?null:(a=a.replace(/ /g,"+"),s._decompress(a.length,32,function(u){return i(e,a.charAt(u))}))},compress:function(a){return s._compress(a,16,function(u){return r(u)})},_compress:function(a,u,l){if(a==null)return"";var c,d,h={},m={},f="",g="",D="",y=2,w=3,x=2,S=[],T=0,A=0,P;for(P=0;P<a.length;P+=1)if(f=a.charAt(P),Object.prototype.hasOwnProperty.call(h,f)||(h[f]=w++,m[f]=!0),g=D+f,Object.prototype.hasOwnProperty.call(h,g))D=g;else{if(Object.prototype.hasOwnProperty.call(m,D)){if(D.charCodeAt(0)<256){for(c=0;c<x;c++)T=T<<1,A==u-1?(A=0,S.push(l(T)),T=0):A++;for(d=D.charCodeAt(0),c=0;c<8;c++)T=T<<1|d&1,A==u-1?(A=0,S.push(l(T)),T=0):A++,d=d>>1}else{for(d=1,c=0;c<x;c++)T=T<<1|d,A==u-1?(A=0,S.push(l(T)),T=0):A++,d=0;for(d=D.charCodeAt(0),c=0;c<16;c++)T=T<<1|d&1,A==u-1?(A=0,S.push(l(T)),T=0):A++,d=d>>1}y--,y==0&&(y=Math.pow(2,x),x++),delete m[D]}else for(d=h[D],c=0;c<x;c++)T=T<<1|d&1,A==u-1?(A=0,S.push(l(T)),T=0):A++,d=d>>1;y--,y==0&&(y=Math.pow(2,x),x++),h[g]=w++,D=String(f)}if(D!==""){if(Object.prototype.hasOwnProperty.call(m,D)){if(D.charCodeAt(0)<256){for(c=0;c<x;c++)T=T<<1,A==u-1?(A=0,S.push(l(T)),T=0):A++;for(d=D.charCodeAt(0),c=0;c<8;c++)T=T<<1|d&1,A==u-1?(A=0,S.push(l(T)),T=0):A++,d=d>>1}else{for(d=1,c=0;c<x;c++)T=T<<1|d,A==u-1?(A=0,S.push(l(T)),T=0):A++,d=0;for(d=D.charCodeAt(0),c=0;c<16;c++)T=T<<1|d&1,A==u-1?(A=0,S.push(l(T)),T=0):A++,d=d>>1}y--,y==0&&(y=Math.pow(2,x),x++),delete m[D]}else for(d=h[D],c=0;c<x;c++)T=T<<1|d&1,A==u-1?(A=0,S.push(l(T)),T=0):A++,d=d>>1;y--,y==0&&(y=Math.pow(2,x),x++)}for(d=2,c=0;c<x;c++)T=T<<1|d&1,A==u-1?(A=0,S.push(l(T)),T=0):A++,d=d>>1;for(;;)if(T=T<<1,A==u-1){S.push(l(T));break}else A++;return S.join("")},decompress:function(a){return a==null?"":a==""?null:s._decompress(a.length,32768,function(u){return a.charCodeAt(u)})},_decompress:function(a,u,l){var c=[],d,h=4,m=4,f=3,g="",D=[],y,w,x,S,T,A,P,R={val:l(0),position:u,index:1};for(y=0;y<3;y+=1)c[y]=y;for(x=0,T=Math.pow(2,2),A=1;A!=T;)S=R.val&R.position,R.position>>=1,R.position==0&&(R.position=u,R.val=l(R.index++)),x|=(S>0?1:0)*A,A<<=1;switch(d=x){case 0:for(x=0,T=Math.pow(2,8),A=1;A!=T;)S=R.val&R.position,R.position>>=1,R.position==0&&(R.position=u,R.val=l(R.index++)),x|=(S>0?1:0)*A,A<<=1;P=r(x);break;case 1:for(x=0,T=Math.pow(2,16),A=1;A!=T;)S=R.val&R.position,R.position>>=1,R.position==0&&(R.position=u,R.val=l(R.index++)),x|=(S>0?1:0)*A,A<<=1;P=r(x);break;case 2:return""}for(c[3]=P,w=P,D.push(P);;){if(R.index>a)return"";for(x=0,T=Math.pow(2,f),A=1;A!=T;)S=R.val&R.position,R.position>>=1,R.position==0&&(R.position=u,R.val=l(R.index++)),x|=(S>0?1:0)*A,A<<=1;switch(P=x){case 0:for(x=0,T=Math.pow(2,8),A=1;A!=T;)S=R.val&R.position,R.position>>=1,R.position==0&&(R.position=u,R.val=l(R.index++)),x|=(S>0?1:0)*A,A<<=1;c[m++]=r(x),P=m-1,h--;break;case 1:for(x=0,T=Math.pow(2,16),A=1;A!=T;)S=R.val&R.position,R.position>>=1,R.position==0&&(R.position=u,R.val=l(R.index++)),x|=(S>0?1:0)*A,A<<=1;c[m++]=r(x),P=m-1,h--;break;case 2:return D.join("")}if(h==0&&(h=Math.pow(2,f),f++),c[P])g=c[P];else if(P===m)g=w+w.charAt(0);else return null;D.push(g),c[m++]=w+g.charAt(0),h--,w=g,h==0&&(h=Math.pow(2,f),f++)}}};return s}();typeof define=="function"&&define.amd?define(function(){return ld}):typeof Va<"u"&&Va!=null&&(Va.exports=ld)});var dd=wt(rc=>{var pd;(function(r){typeof DO_NOT_EXPORT_CRC>"u"?typeof rc=="object"?r(rc):typeof define=="function"&&define.amd?define(function(){var n={};return r(n),n}):r(pd={}):r(pd={})})(function(r){r.version="1.2.0";function n(){for(var u=0,l=new Array(256),c=0;c!=256;++c)u=c,u=u&1?-306674912^u>>>1:u>>>1,u=u&1?-306674912^u>>>1:u>>>1,u=u&1?-306674912^u>>>1:u>>>1,u=u&1?-306674912^u>>>1:u>>>1,u=u&1?-306674912^u>>>1:u>>>1,u=u&1?-306674912^u>>>1:u>>>1,u=u&1?-306674912^u>>>1:u>>>1,u=u&1?-306674912^u>>>1:u>>>1,l[c]=u;return typeof Int32Array<"u"?new Int32Array(l):l}p(n,"signed_crc_table");var e=n();function o(u,l){for(var c=l^-1,d=u.length-1,h=0;h<d;)c=c>>>8^e[(c^u.charCodeAt(h++))&255],c=c>>>8^e[(c^u.charCodeAt(h++))&255];return h===d&&(c=c>>>8^e[(c^u.charCodeAt(h))&255]),c^-1}p(o,"crc32_bstr");function i(u,l){if(u.length>1e4)return s(u,l);for(var c=l^-1,d=u.length-3,h=0;h<d;)c=c>>>8^e[(c^u[h++])&255],c=c>>>8^e[(c^u[h++])&255],c=c>>>8^e[(c^u[h++])&255],c=c>>>8^e[(c^u[h++])&255];for(;h<d+3;)c=c>>>8^e[(c^u[h++])&255];return c^-1}p(i,"crc32_buf");function s(u,l){for(var c=l^-1,d=u.length-7,h=0;h<d;)c=c>>>8^e[(c^u[h++])&255],c=c>>>8^e[(c^u[h++])&255],c=c>>>8^e[(c^u[h++])&255],c=c>>>8^e[(c^u[h++])&255],c=c>>>8^e[(c^u[h++])&255],c=c>>>8^e[(c^u[h++])&255],c=c>>>8^e[(c^u[h++])&255],c=c>>>8^e[(c^u[h++])&255];for(;h<d+7;)c=c>>>8^e[(c^u[h++])&255];return c^-1}p(s,"crc32_buf_8");function a(u,l){for(var c=l^-1,d=0,h=u.length,m,f;d<h;)m=u.charCodeAt(d++),m<128?c=c>>>8^e[(c^m)&255]:m<2048?(c=c>>>8^e[(c^(192|m>>6&31))&255],c=c>>>8^e[(c^(128|m&63))&255]):m>=55296&&m<57344?(m=(m&1023)+64,f=u.charCodeAt(d++)&1023,c=c>>>8^e[(c^(240|m>>8&7))&255],c=c>>>8^e[(c^(128|m>>2&63))&255],c=c>>>8^e[(c^(128|f>>6&15|(m&3)<<4))&255],c=c>>>8^e[(c^(128|f&63))&255]):(c=c>>>8^e[(c^(224|m>>12&15))&255],c=c>>>8^e[(c^(128|m>>6&63))&255],c=c>>>8^e[(c^(128|m&63))&255]);return c^-1}p(a,"crc32_str"),r.table=e,r.bstr=o,r.buf=i,r.str=a})});var xd=wt((R4,wd)=>{var md=dd(),Rt=new Uint8Array(4),gd=new Int32Array(Rt.buffer),Dd=new Uint32Array(Rt.buffer),h2={UNDEFINED:0,METERS:1,INCHES:2};function f2(r,n,e){var o=[],i=r.length;if(i===0)return o;var s=n<0?Math.max(0,n+i):n||0;for(e!==void 0&&(i=e<0?e+i:e);i-- >s;)o[i-s]=r[i];return o}p(f2,"sliced");function bd(r,n,e="tEXt"){if(r=String(r),n=String(n),n.length&&(!/^[\x00-\xFF]+$/.test(r)||!/^[\x00-\xFF]+$/.test(n)))throw new Error("Only Latin-1 characters are permitted in PNG tEXt chunks. You might want to consider base64 encoding and/or zEXt compression");if(r.length>=80)throw new Error('Keyword "'+r+'" is longer than the 79-character limit imposed by the PNG specification');let o=r.length+n.length+1,i=new Uint8Array(o),s=0,a;for(let u=0;u<r.length;u++){if(!(a=r.charCodeAt(u)))throw new Error("0x00 character is not permitted in tEXt keywords");i[s++]=a}i[s++]=0;for(let u=0;u<n.length;u++){if(!(a=n.charCodeAt(u)))throw new Error("0x00 character is not permitted in tEXt content");i[s++]=a}return{name:e,data:i}}p(bd,"textEncode");function yd(r){r.data&&r.name&&(r=r.data);let n=!0,e="",o="";for(let i=0;i<r.length;i++){let s=r[i];if(n)s?o+=String.fromCharCode(s):n=!1;else if(s)e+=String.fromCharCode(s);else throw new Error("Invalid NULL character found. 0x00 character is not permitted in tEXt content")}return{keyword:o,text:e}}p(yd,"textDecode");function ic(r){if(r[0]!==137)throw new Error("Invalid .png file header");if(r[1]!==80)throw new Error("Invalid .png file header");if(r[2]!==78)throw new Error("Invalid .png file header");if(r[3]!==71)throw new Error("Invalid .png file header");if(r[4]!==13)throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");if(r[5]!==10)throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");if(r[6]!==26)throw new Error("Invalid .png file header");if(r[7]!==10)throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");let n=!1,e=[],o=8;for(;o<r.length;){Rt[3]=r[o++],Rt[2]=r[o++],Rt[1]=r[o++],Rt[0]=r[o++];let i=Dd[0]+4,s=new Uint8Array(i);s[0]=r[o++],s[1]=r[o++],s[2]=r[o++],s[3]=r[o++];let a=String.fromCharCode(s[0])+String.fromCharCode(s[1])+String.fromCharCode(s[2])+String.fromCharCode(s[3]);if(!e.length&&a!=="IHDR")throw new Error("IHDR header missing");if(a==="IEND"){n=!0,e.push({name:a,data:new Uint8Array(0)});break}for(let d=4;d<i;d++)s[d]=r[o++];Rt[3]=r[o++],Rt[2]=r[o++],Rt[1]=r[o++],Rt[0]=r[o++];let u=gd[0];if(md.buf(s)!==u)throw new Error("CRC values for "+a+" header do not match, PNG file is likely corrupted");let c=new Uint8Array(s.buffer.slice(4));e.push({name:a,data:c})}if(!n)throw new Error(".png file ended prematurely: no IEND header was found");return e}p(ic,"extractChunks");function vd(r){let n=8,e=n,o;for(o=0;o<r.length;o++)n+=r[o].data.length,n+=12;let i=new Uint8Array(n);for(i[0]=137,i[1]=80,i[2]=78,i[3]=71,i[4]=13,i[5]=10,i[6]=26,i[7]=10,o=0;o<r.length;o++){let s=r[o],a=s.name,u=s.data,l=u.length,c=[a.charCodeAt(0),a.charCodeAt(1),a.charCodeAt(2),a.charCodeAt(3)];Dd[0]=l,i[e++]=Rt[3],i[e++]=Rt[2],i[e++]=Rt[1],i[e++]=Rt[0],i[e++]=c[0],i[e++]=c[1],i[e++]=c[2],i[e++]=c[3];for(let h=0;h<l;)i[e++]=u[h++];let d=c.concat(f2(u));gd[0]=md.buf(d),i[e++]=Rt[3],i[e++]=Rt[2],i[e++]=Rt[1],i[e++]=Rt[0]}return i}p(vd,"encodeChunks");function hd(r,n){let e,o,i,s;return e=r[n++],o=r[n++],i=r[n++],s=r[n],0|e<<24|o<<16|i<<8|s}p(hd,"readUint32");function fd(r,n,e){r[e]=(n&4278190080)>>24,r[e+1]=(n&16711680)>>16,r[e+2]=(n&65280)>>8,r[e+3]=n&255}p(fd,"writeUInt32");function m2(r){let n={};return ic(r).forEach(o=>{switch(o.name){case"tEXt":n.tEXt||(n.tEXt={});let i=yd(o.data);n.tEXt[i.keyword]=i.text;break;case"pHYs":n.pHYs={x:hd(o.data,0),y:hd(o.data,4),unit:o.data[8]};break;case"gAMA":case"cHRM":case"sRGB":case"IHDR":case"iCCP":default:n[o.name]=!0}}),n}p(m2,"readMetadata");function g2(r,n){let e=ic(r);return Cd(e,n),new Buffer.from(vd(e))}p(g2,"writeMetadata");function Cd(r,n){if(n.clear)for(let o=r.length-1;o--;)switch(r[o].name){case"IHDR":case"IDAT":case"IEND":break;default:r.splice(o,1)}if(n.tEXt)for(var e in n.tEXt)r.splice(-1,0,bd(e,n.tEXt[e]));if(n.pHYs){let o=new Uint8Array(9);fd(o,n.pHYs.x,0),fd(o,n.pHYs.y,4),o[8]=n.pHYs.units;let i=r.find(s=>s.name==="pHYs");i?i.data=o:r.splice(1,0,{name:"pHYs",data:o})}}p(Cd,"insertMetadata");wd.exports={RESOLUTION_UNITS:h2,insertMetadata:Cd,readMetadata:m2,writeMetadata:g2,textEncode:bd,textDecode:yd,extractChunks:ic,encodeChunks:vd}});var Lr=wt(ie=>{"use strict";Object.defineProperty(ie,"__esModule",{value:!0});ie.getEndomorphismMonoid=ie.not=ie.SK=ie.hole=ie.pipe=ie.untupled=ie.tupled=ie.absurd=ie.decrement=ie.increment=ie.tuple=ie.flow=ie.flip=ie.constVoid=ie.constUndefined=ie.constNull=ie.constFalse=ie.constTrue=ie.constant=ie.unsafeCoerce=ie.identity=ie.apply=ie.getRing=ie.getSemiring=ie.getMonoid=ie.getSemigroup=ie.getBooleanAlgebra=void 0;var D2=p(function(r){return function(){return{meet:function(n,e){return function(o){return r.meet(n(o),e(o))}},join:function(n,e){return function(o){return r.join(n(o),e(o))}},zero:function(){return r.zero},one:function(){return r.one},implies:function(n,e){return function(o){return r.implies(n(o),e(o))}},not:function(n){return function(e){return r.not(n(e))}}}}},"getBooleanAlgebra");ie.getBooleanAlgebra=D2;var b2=p(function(r){return function(){return{concat:function(n,e){return function(o){return r.concat(n(o),e(o))}}}}},"getSemigroup");ie.getSemigroup=b2;var y2=p(function(r){var n=(0,ie.getSemigroup)(r);return function(){return{concat:n().concat,empty:function(){return r.empty}}}},"getMonoid");ie.getMonoid=y2;var v2=p(function(r){return{add:function(n,e){return function(o){return r.add(n(o),e(o))}},zero:function(){return r.zero},mul:function(n,e){return function(o){return r.mul(n(o),e(o))}},one:function(){return r.one}}},"getSemiring");ie.getSemiring=v2;var C2=p(function(r){var n=(0,ie.getSemiring)(r);return{add:n.add,mul:n.mul,one:n.one,zero:n.zero,sub:function(e,o){return function(i){return r.sub(e(i),o(i))}}}},"getRing");ie.getRing=C2;var w2=p(function(r){return function(n){return n(r)}},"apply");ie.apply=w2;function sc(r){return r}p(sc,"identity");ie.identity=sc;ie.unsafeCoerce=sc;function _s(r){return function(){return r}}p(_s,"constant");ie.constant=_s;ie.constTrue=_s(!0);ie.constFalse=_s(!1);ie.constNull=_s(null);ie.constUndefined=_s(void 0);ie.constVoid=ie.constUndefined;function x2(r){return function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return n.length>1?r(n[1],n[0]):function(o){return r(o)(n[0])}}}p(x2,"flip");ie.flip=x2;function Td(r,n,e,o,i,s,a,u,l){switch(arguments.length){case 1:return r;case 2:return function(){return n(r.apply(this,arguments))};case 3:return function(){return e(n(r.apply(this,arguments)))};case 4:return function(){return o(e(n(r.apply(this,arguments))))};case 5:return function(){return i(o(e(n(r.apply(this,arguments)))))};case 6:return function(){return s(i(o(e(n(r.apply(this,arguments))))))};case 7:return function(){return a(s(i(o(e(n(r.apply(this,arguments)))))))};case 8:return function(){return u(a(s(i(o(e(n(r.apply(this,arguments))))))))};case 9:return function(){return l(u(a(s(i(o(e(n(r.apply(this,arguments)))))))))}}}p(Td,"flow");ie.flow=Td;function T2(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return r}p(T2,"tuple");ie.tuple=T2;function A2(r){return r+1}p(A2,"increment");ie.increment=A2;function S2(r){return r-1}p(S2,"decrement");ie.decrement=S2;function Ad(r){throw new Error("Called `absurd` function which should be uncallable")}p(Ad,"absurd");ie.absurd=Ad;function E2(r){return function(n){return r.apply(void 0,n)}}p(E2,"tupled");ie.tupled=E2;function _2(r){return function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return r(n)}}p(_2,"untupled");ie.untupled=_2;function R2(r,n,e,o,i,s,a,u,l){switch(arguments.length){case 1:return r;case 2:return n(r);case 3:return e(n(r));case 4:return o(e(n(r)));case 5:return i(o(e(n(r))));case 6:return s(i(o(e(n(r)))));case 7:return a(s(i(o(e(n(r))))));case 8:return u(a(s(i(o(e(n(r)))))));case 9:return l(u(a(s(i(o(e(n(r))))))));default:{for(var c=arguments[0],d=1;d<arguments.length;d++)c=arguments[d](c);return c}}}p(R2,"pipe");ie.pipe=R2;ie.hole=Ad;var M2=p(function(r,n){return n},"SK");ie.SK=M2;function O2(r){return function(n){return!r(n)}}p(O2,"not");ie.not=O2;var P2=p(function(){return{concat:function(r,n){return Td(r,n)},empty:sc}},"getEndomorphismMonoid");ie.getEndomorphismMonoid=P2});var Rs=wt(Ie=>{"use strict";var B2=Ie&&Ie.__spreadArray||function(r,n,e){if(e||arguments.length===2)for(var o=0,i=n.length,s;o<i;o++)(s||!(o in n))&&(s||(s=Array.prototype.slice.call(n,0,o)),s[o]=n[o]);return r.concat(s||Array.prototype.slice.call(n))};Object.defineProperty(Ie,"__esModule",{value:!0});Ie.fromReadonlyNonEmptyArray=Ie.has=Ie.emptyRecord=Ie.emptyReadonlyArray=Ie.tail=Ie.head=Ie.isNonEmpty=Ie.singleton=Ie.right=Ie.left=Ie.isRight=Ie.isLeft=Ie.some=Ie.none=Ie.isSome=Ie.isNone=void 0;var N2=p(function(r){return r._tag==="None"},"isNone");Ie.isNone=N2;var F2=p(function(r){return r._tag==="Some"},"isSome");Ie.isSome=F2;Ie.none={_tag:"None"};var I2=p(function(r){return{_tag:"Some",value:r}},"some");Ie.some=I2;var k2=p(function(r){return r._tag==="Left"},"isLeft");Ie.isLeft=k2;var L2=p(function(r){return r._tag==="Right"},"isRight");Ie.isRight=L2;var V2=p(function(r){return{_tag:"Left",left:r}},"left");Ie.left=V2;var H2=p(function(r){return{_tag:"Right",right:r}},"right");Ie.right=H2;var W2=p(function(r){return[r]},"singleton");Ie.singleton=W2;var U2=p(function(r){return r.length>0},"isNonEmpty");Ie.isNonEmpty=U2;var z2=p(function(r){return r[0]},"head");Ie.head=z2;var G2=p(function(r){return r.slice(1)},"tail");Ie.tail=G2;Ie.emptyReadonlyArray=[];Ie.emptyRecord={};Ie.has=Object.prototype.hasOwnProperty;var q2=p(function(r){return B2([r[0]],r.slice(1),!0)},"fromReadonlyNonEmptyArray");Ie.fromReadonlyNonEmptyArray=q2});var lc=wt(ht=>{"use strict";var $2=ht&&ht.__createBinding||(Object.create?function(r,n,e,o){o===void 0&&(o=e);var i=Object.getOwnPropertyDescriptor(n,e);(!i||("get"in i?!n.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return n[e]}}),Object.defineProperty(r,o,i)}:function(r,n,e,o){o===void 0&&(o=e),r[o]=n[e]}),Y2=ht&&ht.__setModuleDefault||(Object.create?function(r,n){Object.defineProperty(r,"default",{enumerable:!0,value:n})}:function(r,n){r.default=n}),X2=ht&&ht.__importStar||function(r){if(r&&r.__esModule)return r;var n={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&$2(n,r,e);return Y2(n,r),n};Object.defineProperty(ht,"__esModule",{value:!0});ht.sequenceS=ht.sequenceT=ht.getApplySemigroup=ht.apS=ht.apSecond=ht.apFirst=ht.ap=void 0;var j2=Lr(),Q2=X2(Rs());function K2(r,n){return function(e){return function(o){return r.ap(r.map(o,function(i){return function(s){return n.ap(i,s)}}),e)}}}p(K2,"ap");ht.ap=K2;function Z2(r){return function(n){return function(e){return r.ap(r.map(e,function(o){return function(){return o}}),n)}}}p(Z2,"apFirst");ht.apFirst=Z2;function J2(r){return function(n){return function(e){return r.ap(r.map(e,function(){return function(o){return o}}),n)}}}p(J2,"apSecond");ht.apSecond=J2;function eg(r){return function(n,e){return function(o){return r.ap(r.map(o,function(i){return function(s){var a;return Object.assign({},i,(a={},a[n]=s,a))}}),e)}}}p(eg,"apS");ht.apS=eg;function tg(r){return function(n){return{concat:function(e,o){return r.ap(r.map(e,function(i){return function(s){return n.concat(i,s)}}),o)}}}}p(tg,"getApplySemigroup");ht.getApplySemigroup=tg;function uc(r,n,e){return function(o){for(var i=Array(e.length+1),s=0;s<e.length;s++)i[s]=e[s];return i[e.length]=o,n===0?r.apply(null,i):uc(r,n-1,i)}}p(uc,"curried");var ac={1:function(r){return[r]},2:function(r){return function(n){return[r,n]}},3:function(r){return function(n){return function(e){return[r,n,e]}}},4:function(r){return function(n){return function(e){return function(o){return[r,n,e,o]}}}},5:function(r){return function(n){return function(e){return function(o){return function(i){return[r,n,e,o,i]}}}}}};function ng(r){return Q2.has.call(ac,r)||(ac[r]=uc(j2.tuple,r-1,[])),ac[r]}p(ng,"getTupleConstructor");function og(r){return function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];for(var o=n.length,i=ng(o),s=r.map(n[0],i),a=1;a<o;a++)s=r.ap(s,n[a]);return s}}p(og,"sequenceT");ht.sequenceT=og;function rg(r){var n=r.length;switch(n){case 1:return function(e){var o;return o={},o[r[0]]=e,o};case 2:return function(e){return function(o){var i;return i={},i[r[0]]=e,i[r[1]]=o,i}};case 3:return function(e){return function(o){return function(i){var s;return s={},s[r[0]]=e,s[r[1]]=o,s[r[2]]=i,s}}};case 4:return function(e){return function(o){return function(i){return function(s){var a;return a={},a[r[0]]=e,a[r[1]]=o,a[r[2]]=i,a[r[3]]=s,a}}}};case 5:return function(e){return function(o){return function(i){return function(s){return function(a){var u;return u={},u[r[0]]=e,u[r[1]]=o,u[r[2]]=i,u[r[3]]=s,u[r[4]]=a,u}}}}};default:return uc(function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];for(var i={},s=0;s<n;s++)i[r[s]]=e[s];return i},n-1,[])}}p(rg,"getRecordConstructor");function ig(r){return function(n){for(var e=Object.keys(n),o=e.length,i=rg(e),s=r.map(n[e[0]],i),a=1;a<o;a++)s=r.ap(s,n[e[a]]);return s}}p(ig,"sequenceS");ht.sequenceS=ig});var Ha=wt(Nn=>{"use strict";Object.defineProperty(Nn,"__esModule",{value:!0});Nn.getFunctorComposition=Nn.let=Nn.bindTo=Nn.flap=Nn.map=void 0;var sg=Lr();function Sd(r,n){return function(e){return function(o){return r.map(o,function(i){return n.map(i,e)})}}}p(Sd,"map");Nn.map=Sd;function ag(r){return function(n){return function(e){return r.map(e,function(o){return o(n)})}}}p(ag,"flap");Nn.flap=ag;function ug(r){return function(n){return function(e){return r.map(e,function(o){var i;return i={},i[n]=o,i})}}}p(ug,"bindTo");Nn.bindTo=ug;function lg(r){return function(n,e){return function(o){return r.map(o,function(i){var s;return Object.assign({},i,(s={},s[n]=e(i),s))})}}}p(lg,"let_");Nn.let=lg;function cg(r,n){var e=Sd(r,n);return{map:function(o,i){return(0,sg.pipe)(o,e(i))}}}p(cg,"getFunctorComposition");Nn.getFunctorComposition=cg});var _d=wt(Ei=>{"use strict";Object.defineProperty(Ei,"__esModule",{value:!0});Ei.getApplicativeComposition=Ei.getApplicativeMonoid=void 0;var Ed=lc(),pg=Lr(),dg=Ha();function hg(r){var n=(0,Ed.getApplySemigroup)(r);return function(e){return{concat:n(e).concat,empty:r.of(e.empty)}}}p(hg,"getApplicativeMonoid");Ei.getApplicativeMonoid=hg;function fg(r,n){var e=(0,dg.getFunctorComposition)(r,n).map,o=(0,Ed.ap)(r,n);return{map:e,of:function(i){return r.of(n.of(i))},ap:function(i,s){return(0,pg.pipe)(i,o(s))}}}p(fg,"getApplicativeComposition");Ei.getApplicativeComposition=fg});var cc=wt(_i=>{"use strict";Object.defineProperty(_i,"__esModule",{value:!0});_i.bind=_i.chainFirst=void 0;function mg(r){return function(n){return function(e){return r.chain(e,function(o){return r.map(n(o),function(){return o})})}}}p(mg,"chainFirst");_i.chainFirst=mg;function gg(r){return function(n,e){return function(o){return r.chain(o,function(i){return r.map(e(i),function(s){var a;return Object.assign({},i,(a={},a[n]=s,a))})})}}}p(gg,"bind");_i.bind=gg});var Rd=wt(Wa=>{"use strict";Object.defineProperty(Wa,"__esModule",{value:!0});Wa.tailRec=void 0;var Dg=p(function(r,n){for(var e=n(r);e._tag==="Left";)e=n(e.left);return e.right},"tailRec");Wa.tailRec=Dg});var Pd=wt(lt=>{"use strict";var bg=lt&&lt.__createBinding||(Object.create?function(r,n,e,o){o===void 0&&(o=e);var i=Object.getOwnPropertyDescriptor(n,e);(!i||("get"in i?!n.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return n[e]}}),Object.defineProperty(r,o,i)}:function(r,n,e,o){o===void 0&&(o=e),r[o]=n[e]}),yg=lt&&lt.__setModuleDefault||(Object.create?function(r,n){Object.defineProperty(r,"default",{enumerable:!0,value:n})}:function(r,n){r.default=n}),vg=lt&&lt.__importStar||function(r){if(r&&r.__esModule)return r;var n={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&bg(n,r,e);return yg(n,r),n};Object.defineProperty(lt,"__esModule",{value:!0});lt.filterOrElse=lt.chainFirstEitherK=lt.chainEitherK=lt.fromEitherK=lt.chainOptionK=lt.fromOptionK=lt.fromPredicate=lt.fromOption=void 0;var Cg=cc(),pc=Lr(),Vr=vg(Rs());function Md(r){return function(n){return function(e){return r.fromEither(Vr.isNone(e)?Vr.left(n()):Vr.right(e.value))}}}p(Md,"fromOption");lt.fromOption=Md;function wg(r){return function(n,e){return function(o){return r.fromEither(n(o)?Vr.right(o):Vr.left(e(o)))}}}p(wg,"fromPredicate");lt.fromPredicate=wg;function Od(r){var n=Md(r);return function(e){var o=n(e);return function(i){return(0,pc.flow)(i,o)}}}p(Od,"fromOptionK");lt.fromOptionK=Od;function xg(r,n){var e=Od(r);return function(o){var i=e(o);return function(s){return function(a){return n.chain(a,i(s))}}}}p(xg,"chainOptionK");lt.chainOptionK=xg;function dc(r){return function(n){return(0,pc.flow)(n,r.fromEither)}}p(dc,"fromEitherK");lt.fromEitherK=dc;function Tg(r,n){var e=dc(r);return function(o){return function(i){return n.chain(i,e(o))}}}p(Tg,"chainEitherK");lt.chainEitherK=Tg;function Ag(r,n){return(0,pc.flow)(dc(r),(0,Cg.chainFirst)(n))}p(Ag,"chainFirstEitherK");lt.chainFirstEitherK=Ag;function Sg(r,n){return function(e,o){return function(i){return n.chain(i,function(s){return r.fromEither(e(s)?Vr.right(s):Vr.left(o(s)))})}}}p(Sg,"filterOrElse");lt.filterOrElse=Sg});var Bd=wt(Oe=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0});Oe.right=Oe.left=Oe.flap=Oe.Functor=Oe.Bifunctor=Oe.URI=Oe.bimap=Oe.mapLeft=Oe.map=Oe.separated=void 0;var hc=Lr(),Eg=Ha(),_g=p(function(r,n){return{left:r,right:n}},"separated");Oe.separated=_g;var Rg=p(function(r,n){return(0,hc.pipe)(r,(0,Oe.map)(n))},"_map"),Mg=p(function(r,n){return(0,hc.pipe)(r,(0,Oe.mapLeft)(n))},"_mapLeft"),Og=p(function(r,n,e){return(0,hc.pipe)(r,(0,Oe.bimap)(n,e))},"_bimap"),Pg=p(function(r){return function(n){return(0,Oe.separated)((0,Oe.left)(n),r((0,Oe.right)(n)))}},"map");Oe.map=Pg;var Bg=p(function(r){return function(n){return(0,Oe.separated)(r((0,Oe.left)(n)),(0,Oe.right)(n))}},"mapLeft");Oe.mapLeft=Bg;var Ng=p(function(r,n){return function(e){return(0,Oe.separated)(r((0,Oe.left)(e)),n((0,Oe.right)(e)))}},"bimap");Oe.bimap=Ng;Oe.URI="Separated";Oe.Bifunctor={URI:Oe.URI,mapLeft:Mg,bimap:Og};Oe.Functor={URI:Oe.URI,map:Rg};Oe.flap=(0,Eg.flap)(Oe.Functor);var Fg=p(function(r){return r.left},"left");Oe.left=Fg;var Ig=p(function(r){return r.right},"right");Oe.right=Ig});var Fd=wt(mn=>{"use strict";var kg=mn&&mn.__createBinding||(Object.create?function(r,n,e,o){o===void 0&&(o=e);var i=Object.getOwnPropertyDescriptor(n,e);(!i||("get"in i?!n.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return n[e]}}),Object.defineProperty(r,o,i)}:function(r,n,e,o){o===void 0&&(o=e),r[o]=n[e]}),Lg=mn&&mn.__setModuleDefault||(Object.create?function(r,n){Object.defineProperty(r,"default",{enumerable:!0,value:n})}:function(r,n){r.default=n}),Vg=mn&&mn.__importStar||function(r){if(r&&r.__esModule)return r;var n={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&kg(n,r,e);return Lg(n,r),n};Object.defineProperty(mn,"__esModule",{value:!0});mn.filterE=mn.witherDefault=mn.wiltDefault=void 0;var Nd=Vg(Rs());function Hg(r,n){return function(e){var o=r.traverse(e);return function(i,s){return e.map(o(i,s),n.separate)}}}p(Hg,"wiltDefault");mn.wiltDefault=Hg;function Wg(r,n){return function(e){var o=r.traverse(e);return function(i,s){return e.map(o(i,s),n.compact)}}}p(Wg,"witherDefault");mn.witherDefault=Wg;function Ug(r){return function(n){var e=r.wither(n);return function(o){return function(i){return e(i,function(s){return n.map(o(s),function(a){return a?Nd.some(s):Nd.none})})}}}}p(Ug,"filterE");mn.filterE=Ug});var za=wt(b=>{"use strict";var zg=b&&b.__createBinding||(Object.create?function(r,n,e,o){o===void 0&&(o=e);var i=Object.getOwnPropertyDescriptor(n,e);(!i||("get"in i?!n.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return n[e]}}),Object.defineProperty(r,o,i)}:function(r,n,e,o){o===void 0&&(o=e),r[o]=n[e]}),Gg=b&&b.__setModuleDefault||(Object.create?function(r,n){Object.defineProperty(r,"default",{enumerable:!0,value:n})}:function(r,n){r.default=n}),qg=b&&b.__importStar||function(r){if(r&&r.__esModule)return r;var n={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&zg(n,r,e);return Gg(n,r),n};Object.defineProperty(b,"__esModule",{value:!0});b.fold=b.match=b.foldW=b.matchW=b.isRight=b.isLeft=b.fromOption=b.fromPredicate=b.FromEither=b.MonadThrow=b.throwError=b.ChainRec=b.Extend=b.extend=b.Alt=b.alt=b.altW=b.Bifunctor=b.mapLeft=b.bimap=b.Traversable=b.sequence=b.traverse=b.Foldable=b.reduceRight=b.foldMap=b.reduce=b.Monad=b.Chain=b.chain=b.chainW=b.Applicative=b.Apply=b.ap=b.apW=b.Pointed=b.of=b.Functor=b.map=b.getAltValidation=b.getApplicativeValidation=b.getWitherable=b.getFilterable=b.getCompactable=b.getSemigroup=b.getEq=b.getShow=b.URI=b.right=b.left=void 0;b.getValidation=b.getValidationMonoid=b.getValidationSemigroup=b.getApplyMonoid=b.getApplySemigroup=b.either=b.stringifyJSON=b.parseJSON=b.sequenceArray=b.traverseArray=b.traverseArrayWithIndex=b.traverseReadonlyArrayWithIndex=b.traverseReadonlyNonEmptyArrayWithIndex=b.ApT=b.apSW=b.apS=b.bindW=b.bind=b.let=b.bindTo=b.Do=b.exists=b.elem=b.toError=b.toUnion=b.chainNullableK=b.fromNullableK=b.tryCatchK=b.tryCatch=b.fromNullable=b.orElse=b.orElseW=b.swap=b.filterOrElseW=b.filterOrElse=b.chainOptionK=b.fromOptionK=b.duplicate=b.flatten=b.flattenW=b.chainFirstW=b.chainFirst=b.apSecondW=b.apSecond=b.apFirstW=b.apFirst=b.flap=b.getOrElse=b.getOrElseW=void 0;var kd=_d(),Ms=lc(),Ld=cc(),$g=Rd(),Os=Pd(),Mt=Lr(),fc=Ha(),tr=qg(Rs()),Fo=Bd(),Id=Fd();b.left=tr.left;b.right=tr.right;var Qt=p(function(r,n){return(0,Mt.pipe)(r,(0,b.map)(n))},"_map"),Hr=p(function(r,n){return(0,Mt.pipe)(r,(0,b.ap)(n))},"_ap"),Ri=p(function(r,n){return(0,Mt.pipe)(r,(0,b.chain)(n))},"_chain"),Ps=p(function(r,n,e){return(0,Mt.pipe)(r,(0,b.reduce)(n,e))},"_reduce"),Bs=p(function(r){return function(n,e){var o=(0,b.foldMap)(r);return(0,Mt.pipe)(n,o(e))}},"_foldMap"),Ns=p(function(r,n,e){return(0,Mt.pipe)(r,(0,b.reduceRight)(n,e))},"_reduceRight"),Ua=p(function(r){var n=(0,b.traverse)(r);return function(e,o){return(0,Mt.pipe)(e,n(o))}},"_traverse"),mc=p(function(r,n,e){return(0,Mt.pipe)(r,(0,b.bimap)(n,e))},"_bimap"),gc=p(function(r,n){return(0,Mt.pipe)(r,(0,b.mapLeft)(n))},"_mapLeft"),Vd=p(function(r,n){return(0,Mt.pipe)(r,(0,b.alt)(n))},"_alt"),Dc=p(function(r,n){return(0,Mt.pipe)(r,(0,b.extend)(n))},"_extend"),bc=p(function(r,n){return(0,$g.tailRec)(n(r),function(e){return(0,b.isLeft)(e)?(0,b.right)((0,b.left)(e.left)):(0,b.isLeft)(e.right)?(0,b.left)(n(e.right.left)):(0,b.right)((0,b.right)(e.right.right))})},"_chainRec");b.URI="Either";var Yg=p(function(r,n){return{show:function(e){return(0,b.isLeft)(e)?"left(".concat(r.show(e.left),")"):"right(".concat(n.show(e.right),")")}}},"getShow");b.getShow=Yg;var Xg=p(function(r,n){return{equals:function(e,o){return e===o||((0,b.isLeft)(e)?(0,b.isLeft)(o)&&r.equals(e.left,o.left):(0,b.isRight)(o)&&n.equals(e.right,o.right))}}},"getEq");b.getEq=Xg;var jg=p(function(r){return{concat:function(n,e){return(0,b.isLeft)(e)?n:(0,b.isLeft)(n)?e:(0,b.right)(r.concat(n.right,e.right))}}},"getSemigroup");b.getSemigroup=jg;var Qg=p(function(r){var n=(0,b.left)(r.empty);return{URI:b.URI,_E:void 0,compact:function(e){return(0,b.isLeft)(e)?e:e.right._tag==="None"?n:(0,b.right)(e.right.value)},separate:function(e){return(0,b.isLeft)(e)?(0,Fo.separated)(e,e):(0,b.isLeft)(e.right)?(0,Fo.separated)((0,b.right)(e.right.left),n):(0,Fo.separated)(n,(0,b.right)(e.right.right))}}},"getCompactable");b.getCompactable=Qg;var Kg=p(function(r){var n=(0,b.left)(r.empty),e=(0,b.getCompactable)(r),o=e.compact,i=e.separate,s=p(function(u,l){return(0,b.isLeft)(u)||l(u.right)?u:n},"filter"),a=p(function(u,l){return(0,b.isLeft)(u)?(0,Fo.separated)(u,u):l(u.right)?(0,Fo.separated)(n,(0,b.right)(u.right)):(0,Fo.separated)((0,b.right)(u.right),n)},"partition");return{URI:b.URI,_E:void 0,map:Qt,compact:o,separate:i,filter:s,filterMap:function(u,l){if((0,b.isLeft)(u))return u;var c=l(u.right);return c._tag==="None"?n:(0,b.right)(c.value)},partition:a,partitionMap:function(u,l){if((0,b.isLeft)(u))return(0,Fo.separated)(u,u);var c=l(u.right);return(0,b.isLeft)(c)?(0,Fo.separated)((0,b.right)(c.left),n):(0,Fo.separated)(n,(0,b.right)(c.right))}}},"getFilterable");b.getFilterable=Kg;var Zg=p(function(r){var n=(0,b.getFilterable)(r),e=(0,b.getCompactable)(r);return{URI:b.URI,_E:void 0,map:Qt,compact:n.compact,separate:n.separate,filter:n.filter,filterMap:n.filterMap,partition:n.partition,partitionMap:n.partitionMap,traverse:Ua,sequence:b.sequence,reduce:Ps,foldMap:Bs,reduceRight:Ns,wither:(0,Id.witherDefault)(b.Traversable,e),wilt:(0,Id.wiltDefault)(b.Traversable,e)}},"getWitherable");b.getWitherable=Zg;var Jg=p(function(r){return{URI:b.URI,_E:void 0,map:Qt,ap:function(n,e){return(0,b.isLeft)(n)?(0,b.isLeft)(e)?(0,b.left)(r.concat(n.left,e.left)):n:(0,b.isLeft)(e)?e:(0,b.right)(n.right(e.right))},of:b.of}},"getApplicativeValidation");b.getApplicativeValidation=Jg;var e3=p(function(r){return{URI:b.URI,_E:void 0,map:Qt,alt:function(n,e){if((0,b.isRight)(n))return n;var o=e();return(0,b.isLeft)(o)?(0,b.left)(r.concat(n.left,o.left)):o}}},"getAltValidation");b.getAltValidation=e3;var t3=p(function(r){return function(n){return(0,b.isLeft)(n)?n:(0,b.right)(r(n.right))}},"map");b.map=t3;b.Functor={URI:b.URI,map:Qt};b.of=b.right;b.Pointed={URI:b.URI,of:b.of};var n3=p(function(r){return function(n){return(0,b.isLeft)(n)?n:(0,b.isLeft)(r)?r:(0,b.right)(n.right(r.right))}},"apW");b.apW=n3;b.ap=b.apW;b.Apply={URI:b.URI,map:Qt,ap:Hr};b.Applicative={URI:b.URI,map:Qt,ap:Hr,of:b.of};var o3=p(function(r){return function(n){return(0,b.isLeft)(n)?n:r(n.right)}},"chainW");b.chainW=o3;b.chain=b.chainW;b.Chain={URI:b.URI,map:Qt,ap:Hr,chain:Ri};b.Monad={URI:b.URI,map:Qt,ap:Hr,of:b.of,chain:Ri};var r3=p(function(r,n){return function(e){return(0,b.isLeft)(e)?r:n(r,e.right)}},"reduce");b.reduce=r3;var i3=p(function(r){return function(n){return function(e){return(0,b.isLeft)(e)?r.empty:n(e.right)}}},"foldMap");b.foldMap=i3;var s3=p(function(r,n){return function(e){return(0,b.isLeft)(e)?r:n(e.right,r)}},"reduceRight");b.reduceRight=s3;b.Foldable={URI:b.URI,reduce:Ps,foldMap:Bs,reduceRight:Ns};var a3=p(function(r){return function(n){return function(e){return(0,b.isLeft)(e)?r.of((0,b.left)(e.left)):r.map(n(e.right),b.right)}}},"traverse");b.traverse=a3;var u3=p(function(r){return function(n){return(0,b.isLeft)(n)?r.of((0,b.left)(n.left)):r.map(n.right,b.right)}},"sequence");b.sequence=u3;b.Traversable={URI:b.URI,map:Qt,reduce:Ps,foldMap:Bs,reduceRight:Ns,traverse:Ua,sequence:b.sequence};var l3=p(function(r,n){return function(e){return(0,b.isLeft)(e)?(0,b.left)(r(e.left)):(0,b.right)(n(e.right))}},"bimap");b.bimap=l3;var c3=p(function(r){return function(n){return(0,b.isLeft)(n)?(0,b.left)(r(n.left)):n}},"mapLeft");b.mapLeft=c3;b.Bifunctor={URI:b.URI,bimap:mc,mapLeft:gc};var p3=p(function(r){return function(n){return(0,b.isLeft)(n)?r():n}},"altW");b.altW=p3;b.alt=b.altW;b.Alt={URI:b.URI,map:Qt,alt:Vd};var d3=p(function(r){return function(n){return(0,b.isLeft)(n)?n:(0,b.right)(r(n))}},"extend");b.extend=d3;b.Extend={URI:b.URI,map:Qt,extend:Dc};b.ChainRec={URI:b.URI,map:Qt,ap:Hr,chain:Ri,chainRec:bc};b.throwError=b.left;b.MonadThrow={URI:b.URI,map:Qt,ap:Hr,of:b.of,chain:Ri,throwError:b.throwError};b.FromEither={URI:b.URI,fromEither:Mt.identity};b.fromPredicate=(0,Os.fromPredicate)(b.FromEither);b.fromOption=(0,Os.fromOption)(b.FromEither);b.isLeft=tr.isLeft;b.isRight=tr.isRight;var h3=p(function(r,n){return function(e){return(0,b.isLeft)(e)?r(e.left):n(e.right)}},"matchW");b.matchW=h3;b.foldW=b.matchW;b.match=b.matchW;b.fold=b.match;var f3=p(function(r){return function(n){return(0,b.isLeft)(n)?r(n.left):n.right}},"getOrElseW");b.getOrElseW=f3;b.getOrElse=b.getOrElseW;b.flap=(0,fc.flap)(b.Functor);b.apFirst=(0,Ms.apFirst)(b.Apply);b.apFirstW=b.apFirst;b.apSecond=(0,Ms.apSecond)(b.Apply);b.apSecondW=b.apSecond;b.chainFirst=(0,Ld.chainFirst)(b.Chain);b.chainFirstW=b.chainFirst;b.flattenW=(0,b.chainW)(Mt.identity);b.flatten=b.flattenW;b.duplicate=(0,b.extend)(Mt.identity);b.fromOptionK=(0,Os.fromOptionK)(b.FromEither);b.chainOptionK=(0,Os.chainOptionK)(b.FromEither,b.Chain);b.filterOrElse=(0,Os.filterOrElse)(b.FromEither,b.Chain);b.filterOrElseW=b.filterOrElse;var m3=p(function(r){return(0,b.isLeft)(r)?(0,b.right)(r.left):(0,b.left)(r.right)},"swap");b.swap=m3;var g3=p(function(r){return function(n){return(0,b.isLeft)(n)?r(n.left):n}},"orElseW");b.orElseW=g3;b.orElse=b.orElseW;var D3=p(function(r){return function(n){return n==null?(0,b.left)(r):(0,b.right)(n)}},"fromNullable");b.fromNullable=D3;var b3=p(function(r,n){try{return(0,b.right)(r())}catch(e){return(0,b.left)(n(e))}},"tryCatch");b.tryCatch=b3;var y3=p(function(r,n){return function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];return(0,b.tryCatch)(function(){return r.apply(void 0,e)},n)}},"tryCatchK");b.tryCatchK=y3;var v3=p(function(r){var n=(0,b.fromNullable)(r);return function(e){return(0,Mt.flow)(e,n)}},"fromNullableK");b.fromNullableK=v3;var C3=p(function(r){var n=(0,b.fromNullableK)(r);return function(e){return(0,b.chain)(n(e))}},"chainNullableK");b.chainNullableK=C3;b.toUnion=(0,b.foldW)(Mt.identity,Mt.identity);function w3(r){return r instanceof Error?r:new Error(String(r))}p(w3,"toError");b.toError=w3;function Hd(r){return function(n,e){if(e===void 0){var o=Hd(r);return function(i){return o(n,i)}}return(0,b.isLeft)(e)?!1:r.equals(n,e.right)}}p(Hd,"elem");b.elem=Hd;var x3=p(function(r){return function(n){return(0,b.isLeft)(n)?!1:r(n.right)}},"exists");b.exists=x3;b.Do=(0,b.of)(tr.emptyRecord);b.bindTo=(0,fc.bindTo)(b.Functor);var T3=(0,fc.let)(b.Functor);b.let=T3;b.bind=(0,Ld.bind)(b.Chain);b.bindW=b.bind;b.apS=(0,Ms.apS)(b.Apply);b.apSW=b.apS;b.ApT=(0,b.of)(tr.emptyReadonlyArray);var A3=p(function(r){return function(n){var e=r(0,tr.head(n));if((0,b.isLeft)(e))return e;for(var o=[e.right],i=1;i<n.length;i++){var s=r(i,n[i]);if((0,b.isLeft)(s))return s;o.push(s.right)}return(0,b.right)(o)}},"traverseReadonlyNonEmptyArrayWithIndex");b.traverseReadonlyNonEmptyArrayWithIndex=A3;var S3=p(function(r){var n=(0,b.traverseReadonlyNonEmptyArrayWithIndex)(r);return function(e){return tr.isNonEmpty(e)?n(e):b.ApT}},"traverseReadonlyArrayWithIndex");b.traverseReadonlyArrayWithIndex=S3;b.traverseArrayWithIndex=b.traverseReadonlyArrayWithIndex;var E3=p(function(r){return(0,b.traverseReadonlyArrayWithIndex)(function(n,e){return r(e)})},"traverseArray");b.traverseArray=E3;b.sequenceArray=(0,b.traverseArray)(Mt.identity);function _3(r,n){return(0,b.tryCatch)(function(){return JSON.parse(r)},n)}p(_3,"parseJSON");b.parseJSON=_3;var R3=p(function(r,n){return(0,b.tryCatch)(function(){var e=JSON.stringify(r);if(typeof e!="string")throw new Error("Converting unsupported structure to JSON");return e},n)},"stringifyJSON");b.stringifyJSON=R3;b.either={URI:b.URI,map:Qt,of:b.of,ap:Hr,chain:Ri,reduce:Ps,foldMap:Bs,reduceRight:Ns,traverse:Ua,sequence:b.sequence,bimap:mc,mapLeft:gc,alt:Vd,extend:Dc,chainRec:bc,throwError:b.throwError};b.getApplySemigroup=(0,Ms.getApplySemigroup)(b.Apply);b.getApplyMonoid=(0,kd.getApplicativeMonoid)(b.Applicative);var M3=p(function(r,n){return(0,Ms.getApplySemigroup)((0,b.getApplicativeValidation)(r))(n)},"getValidationSemigroup");b.getValidationSemigroup=M3;var O3=p(function(r,n){return(0,kd.getApplicativeMonoid)((0,b.getApplicativeValidation)(r))(n)},"getValidationMonoid");b.getValidationMonoid=O3;function P3(r){var n=(0,b.getApplicativeValidation)(r).ap,e=(0,b.getAltValidation)(r).alt;return{URI:b.URI,_E:void 0,map:Qt,of:b.of,chain:Ri,bimap:mc,mapLeft:gc,reduce:Ps,foldMap:Bs,reduceRight:Ns,extend:Dc,traverse:Ua,sequence:b.sequence,chainRec:bc,throwError:b.throwError,ap:n,alt:e}}p(P3,"getValidation");b.getValidation=P3});var _e=wt(v=>{"use strict";var ze=v&&v.__extends||function(){var r=p(function(n,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,i){o.__proto__=i}||function(o,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(o[s]=i[s])},r(n,e)},"extendStatics");return function(n,e){r(n,e);function o(){this.constructor=n}p(o,"__"),n.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Mi=v&&v.__assign||function(){return Mi=Object.assign||function(r){for(var n,e=1,o=arguments.length;e<o;e++){n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},Mi.apply(this,arguments)},B3=v&&v.__spreadArrays||function(){for(var r=0,n=0,e=arguments.length;n<e;n++)r+=arguments[n].length;for(var o=Array(r),i=0,n=0;n<e;n++)for(var s=arguments[n],a=0,u=s.length;a<u;a++,i++)o[i]=s[a];return o};Object.defineProperty(v,"__esModule",{value:!0});v.partial=v.PartialType=v.type=v.InterfaceType=v.array=v.ArrayType=v.recursion=v.RecursiveType=v.Int=v.brand=v.RefinementType=v.keyof=v.KeyofType=v.literal=v.LiteralType=v.void=v.undefined=v.null=v.UnknownRecord=v.AnyDictionaryType=v.UnknownArray=v.AnyArrayType=v.boolean=v.BooleanType=v.bigint=v.BigIntType=v.number=v.NumberType=v.string=v.StringType=v.unknown=v.UnknownType=v.voidType=v.VoidType=v.UndefinedType=v.nullType=v.NullType=v.getIndex=v.getTags=v.emptyTags=v.mergeAll=v.getDomainKeys=v.appendContext=v.getContextEntry=v.getFunctionName=v.identity=v.Type=v.success=v.failure=v.failures=void 0;v.alias=v.clean=v.StrictType=v.dictionary=v.Integer=v.refinement=v.object=v.ObjectType=v.Dictionary=v.any=v.AnyType=v.never=v.NeverType=v.getDefaultContext=v.getValidationError=v.interface=v.Array=v.taggedUnion=v.TaggedUnionType=v.Function=v.FunctionType=v.exact=v.ExactType=v.strict=v.readonlyArray=v.ReadonlyArrayType=v.readonly=v.ReadonlyType=v.tuple=v.TupleType=v.intersection=v.IntersectionType=v.union=v.UnionType=v.record=v.DictionaryType=void 0;var ft=za();v.failures=ft.left;var N3=p(function(r,n,e){return v.failures([{value:r,context:n,message:e}])},"failure");v.failure=N3;v.success=ft.right;var Ge=function(){function r(n,e,o,i){this.name=n,this.is=e,this.validate=o,this.encode=i,this.decode=this.decode.bind(this)}return p(r,"Type"),r.prototype.pipe=function(n,e){var o=this;return e===void 0&&(e="pipe("+this.name+", "+n.name+")"),new r(e,n.is,function(i,s){var a=o.validate(i,s);return ft.isLeft(a)?a:n.validate(a.right,s)},this.encode===v.identity&&n.encode===v.identity?v.identity:function(i){return o.encode(n.encode(i))})},r.prototype.asDecoder=function(){return this},r.prototype.asEncoder=function(){return this},r.prototype.decode=function(n){return this.validate(n,[{key:"",type:this,actual:n}])},r}();v.Type=Ge;var F3=p(function(r){return r},"identity");v.identity=F3;function zd(r){return r.displayName||r.name||"<function"+r.length+">"}p(zd,"getFunctionName");v.getFunctionName=zd;function I3(r,n){return{key:r,type:n}}p(I3,"getContextEntry");v.getContextEntry=I3;function Qn(r,n,e,o){for(var i=r.length,s=Array(i+1),a=0;a<i;a++)s[a]=r[a];return s[i]={key:n,type:e,actual:o},s}p(Qn,"appendContext");v.appendContext=Qn;function Io(r,n){for(var e=n.length,o=0;o<e;o++)r.push(n[o])}p(Io,"pushAll");var Ga=Object.prototype.hasOwnProperty;function vc(r){return Object.keys(r).map(function(n){return n+": "+r[n].name}).join(", ")}p(vc,"getNameFromProps");function Fs(r){for(var n=0;n<r.length;n++)if(r[n].encode!==v.identity)return!1;return!0}p(Fs,"useIdentity");function Gd(r){return"{ "+vc(r)+" }"}p(Gd,"getInterfaceTypeName");function qd(r){return"Partial<"+r+">"}p(qd,"getPartialTypeName");function k3(r,n,e,o){o===void 0&&(o="{ [K in "+n.name+"]: "+e.name+" }");var i=r.length;return new Sc(o,function(s){return v.UnknownRecord.is(s)&&r.every(function(a){return e.is(s[a])})},function(s,a){var u=v.UnknownRecord.validate(s,a);if(ft.isLeft(u))return u;for(var l=u.right,c={},d=[],h=!1,m=0;m<i;m++){var f=r[m],g=l[f],D=e.validate(g,Qn(a,f,e,g));if(ft.isLeft(D))Io(d,D.left);else{var y=D.right;h=h||y!==g,c[f]=y}}return d.length>0?v.failures(d):v.success(h||Object.keys(l).length!==i?c:l)},e.encode===v.identity?v.identity:function(s){for(var a={},u=0;u<i;u++){var l=r[u];a[l]=e.encode(s[l])}return a},n,e)}p(k3,"enumerableRecord");function xc(r){var n;if(Xd(r)){var e=r.value;if(v.string.is(e))return n={},n[e]=null,n}else{if(z3(r))return r.keys;if(Qd(r)){var o=r.types.map(function(i){return xc(i)});return o.some(qa.is)?void 0:Object.assign.apply(Object,B3([{}],o))}}}p(xc,"getDomainKeys");v.getDomainKeys=xc;function L3(r,n,e){return e===void 0&&(e="{ [K in "+r.name+"]: "+n.name+" }"),new Sc(e,function(o){return v.UnknownRecord.is(o)?Object.keys(o).every(function(i){return r.is(i)&&n.is(o[i])}):Ud(n)&&Array.isArray(o)},function(o,i){if(v.UnknownRecord.is(o)){for(var s={},a=[],u=Object.keys(o),l=u.length,c=!1,d=0;d<l;d++){var h=u[d],m=o[h],f=r.validate(h,Qn(i,h,r,h));if(ft.isLeft(f))Io(a,f.left);else{var g=f.right;c=c||g!==h,h=g;var D=n.validate(m,Qn(i,h,n,m));if(ft.isLeft(D))Io(a,D.left);else{var y=D.right;c=c||y!==m,s[h]=y}}}return a.length>0?v.failures(a):v.success(c?s:o)}return Ud(n)&&Array.isArray(o)?v.success(o):v.failure(o,i)},r.encode===v.identity&&n.encode===v.identity?v.identity:function(o){for(var i={},s=Object.keys(o),a=s.length,u=0;u<a;u++){var l=s[u];i[String(r.encode(l))]=n.encode(o[l])}return i},r,n)}p(L3,"nonEnumerableRecord");function $d(r){return"("+r.map(function(n){return n.name}).join(" | ")+")"}p($d,"getUnionName");function Cc(r,n){for(var e=!0,o=!0,i=!v.UnknownRecord.is(r),s=0,a=n;s<a.length;s++){var u=a[s];u!==r&&(e=!1),v.UnknownRecord.is(u)&&(o=!1)}if(e)return r;if(o)return n[n.length-1];for(var l={},c=0,d=n;c<d.length;c++){var u=d[c];for(var h in u)(!l.hasOwnProperty(h)||i||u[h]!==r[h])&&(l[h]=u[h])}return l}p(Cc,"mergeAll");v.mergeAll=Cc;function wc(r){switch(r._tag){case"RefinementType":case"ReadonlyType":return wc(r.type);case"InterfaceType":case"StrictType":case"PartialType":return r.props;case"IntersectionType":return r.types.reduce(function(n,e){return Object.assign(n,wc(e))},{})}}p(wc,"getProps");function Wd(r,n){for(var e=Object.getOwnPropertyNames(r),o=!1,i={},s=0;s<e.length;s++){var a=e[s];Ga.call(n,a)?i[a]=r[a]:o=!0}return o?i:r}p(Wd,"stripKeys");function V3(r){return jd(r)?"{| "+vc(r.props)+" |}":G3(r)?qd("{| "+vc(r.props)+" |}"):"Exact<"+r.name+">"}p(V3,"getExactTypeName");function H3(r){return r.length>0}p(H3,"isNonEmpty");v.emptyTags={};function Yd(r,n){for(var e=[],o=0,i=r;o<i.length;o++){var s=i[o];n.indexOf(s)!==-1&&e.push(s)}return e}p(Yd,"intersect");function W3(r,n){if(r===v.emptyTags)return n;if(n===v.emptyTags)return r;var e=Object.assign({},r);for(var o in n)if(r.hasOwnProperty(o)){var i=Yd(r[o],n[o]);if(H3(i))e[o]=i;else{e=v.emptyTags;break}}else e[o]=n[o];return e}p(W3,"mergeTags");function U3(r,n){if(r===v.emptyTags||n===v.emptyTags)return v.emptyTags;var e=v.emptyTags;for(var o in r)if(n.hasOwnProperty(o)){var i=Yd(r[o],n[o]);i.length===0&&(e===v.emptyTags&&(e={}),e[o]=r[o].concat(n[o]))}return e}p(U3,"intersectTags");function Ud(r){return r._tag==="AnyType"}p(Ud,"isAnyC");function Xd(r){return r._tag==="LiteralType"}p(Xd,"isLiteralC");function z3(r){return r._tag==="KeyofType"}p(z3,"isKeyofC");function jd(r){return r._tag==="InterfaceType"}p(jd,"isTypeC");function G3(r){return r._tag==="PartialType"}p(G3,"isPartialC");function q3(r){return r._tag==="StrictType"}p(q3,"isStrictC");function $3(r){return r._tag==="ExactType"}p($3,"isExactC");function Y3(r){return r._tag==="RefinementType"}p(Y3,"isRefinementC");function X3(r){return r._tag==="IntersectionType"}p(X3,"isIntersectionC");function Qd(r){return r._tag==="UnionType"}p(Qd,"isUnionC");function j3(r){return r._tag==="RecursiveType"}p(j3,"isRecursiveC");var yc=[];function nr(r){if(yc.indexOf(r)!==-1)return v.emptyTags;if(jd(r)||q3(r)){var n=v.emptyTags;for(var e in r.props){var o=r.props[e];Xd(o)&&(n===v.emptyTags&&(n={}),n[e]=[o.value])}return n}else{if($3(r)||Y3(r))return nr(r.type);if(X3(r))return r.types.reduce(function(s,a){return W3(s,nr(a))},v.emptyTags);if(Qd(r))return r.types.slice(1).reduce(function(s,a){return U3(s,nr(a))},nr(r.types[0]));if(j3(r)){yc.push(r);var i=nr(r.type);return yc.pop(),i}}return v.emptyTags}p(nr,"getTags");v.getTags=nr;function Kd(r){var n=nr(r[0]),e=Object.keys(n),o=r.length,i=p(function(c){for(var d=n[c].slice(),h=[n[c]],m=1;m<o;m++){var f=r[m],g=nr(f),D=g[c];if(D===void 0)return"continue-keys";if(D.some(function(y){return d.indexOf(y)!==-1}))return"continue-keys";d.push.apply(d,D),h.push(D)}return{value:[c,h]}},"_loop_1");e:for(var s=0,a=e;s<a.length;s++){var u=a[s],l=i(u);if(typeof l=="object")return l.value;switch(l){case"continue-keys":continue e}}}p(Kd,"getIndex");v.getIndex=Kd;var Zd=function(r){ze(n,r);function n(){var e=r.call(this,"null",function(o){return o===null},function(o,i){return e.is(o)?v.success(o):v.failure(o,i)},v.identity)||this;return e._tag="NullType",e}return p(n,"NullType"),n}(Ge);v.NullType=Zd;v.nullType=new Zd;v.null=v.nullType;var Jd=function(r){ze(n,r);function n(){var e=r.call(this,"undefined",function(o){return o===void 0},function(o,i){return e.is(o)?v.success(o):v.failure(o,i)},v.identity)||this;return e._tag="UndefinedType",e}return p(n,"UndefinedType"),n}(Ge);v.UndefinedType=Jd;var qa=new Jd;v.undefined=qa;var e0=function(r){ze(n,r);function n(){var e=r.call(this,"void",qa.is,qa.validate,v.identity)||this;return e._tag="VoidType",e}return p(n,"VoidType"),n}(Ge);v.VoidType=e0;v.voidType=new e0;v.void=v.voidType;var t0=function(r){ze(n,r);function n(){var e=r.call(this,"unknown",function(o){return!0},v.success,v.identity)||this;return e._tag="UnknownType",e}return p(n,"UnknownType"),n}(Ge);v.UnknownType=t0;v.unknown=new t0;var n0=function(r){ze(n,r);function n(){var e=r.call(this,"string",function(o){return typeof o=="string"},function(o,i){return e.is(o)?v.success(o):v.failure(o,i)},v.identity)||this;return e._tag="StringType",e}return p(n,"StringType"),n}(Ge);v.StringType=n0;v.string=new n0;var o0=function(r){ze(n,r);function n(){var e=r.call(this,"number",function(o){return typeof o=="number"},function(o,i){return e.is(o)?v.success(o):v.failure(o,i)},v.identity)||this;return e._tag="NumberType",e}return p(n,"NumberType"),n}(Ge);v.NumberType=o0;v.number=new o0;var r0=function(r){ze(n,r);function n(){var e=r.call(this,"bigint",function(o){return typeof o=="bigint"},function(o,i){return e.is(o)?v.success(o):v.failure(o,i)},v.identity)||this;return e._tag="BigIntType",e}return p(n,"BigIntType"),n}(Ge);v.BigIntType=r0;v.bigint=new r0;var i0=function(r){ze(n,r);function n(){var e=r.call(this,"boolean",function(o){return typeof o=="boolean"},function(o,i){return e.is(o)?v.success(o):v.failure(o,i)},v.identity)||this;return e._tag="BooleanType",e}return p(n,"BooleanType"),n}(Ge);v.BooleanType=i0;v.boolean=new i0;var s0=function(r){ze(n,r);function n(){var e=r.call(this,"UnknownArray",Array.isArray,function(o,i){return e.is(o)?v.success(o):v.failure(o,i)},v.identity)||this;return e._tag="AnyArrayType",e}return p(n,"AnyArrayType"),n}(Ge);v.AnyArrayType=s0;v.UnknownArray=new s0;v.Array=v.UnknownArray;var a0=function(r){ze(n,r);function n(){var e=r.call(this,"UnknownRecord",function(o){var i=Object.prototype.toString.call(o);return i==="[object Object]"||i==="[object Window]"},function(o,i){return e.is(o)?v.success(o):v.failure(o,i)},v.identity)||this;return e._tag="AnyDictionaryType",e}return p(n,"AnyDictionaryType"),n}(Ge);v.AnyDictionaryType=a0;v.UnknownRecord=new a0;var u0=function(r){ze(n,r);function n(e,o,i,s,a){var u=r.call(this,e,o,i,s)||this;return u.value=a,u._tag="LiteralType",u}return p(n,"LiteralType"),n}(Ge);v.LiteralType=u0;function Q3(r,n){n===void 0&&(n=JSON.stringify(r));var e=p(function(o){return o===r},"is");return new u0(n,e,function(o,i){return e(o)?v.success(r):v.failure(o,i)},v.identity,r)}p(Q3,"literal");v.literal=Q3;var l0=function(r){ze(n,r);function n(e,o,i,s,a){var u=r.call(this,e,o,i,s)||this;return u.keys=a,u._tag="KeyofType",u}return p(n,"KeyofType"),n}(Ge);v.KeyofType=l0;function K3(r,n){n===void 0&&(n=Object.keys(r).map(function(o){return JSON.stringify(o)}).join(" | "));var e=p(function(o){return v.string.is(o)&&Ga.call(r,o)},"is");return new l0(n,e,function(o,i){return e(o)?v.success(o):v.failure(o,i)},v.identity,r)}p(K3,"keyof");v.keyof=K3;var c0=function(r){ze(n,r);function n(e,o,i,s,a,u){var l=r.call(this,e,o,i,s)||this;return l.type=a,l.predicate=u,l._tag="RefinementType",l}return p(n,"RefinementType"),n}(Ge);v.RefinementType=c0;function p0(r,n,e){return _c(r,n,e)}p(p0,"brand");v.brand=p0;v.Int=p0(v.number,function(r){return Number.isInteger(r)},"Int");var Tc=function(r){ze(n,r);function n(e,o,i,s,a){var u=r.call(this,e,o,i,s)||this;return u.runDefinition=a,u._tag="RecursiveType",u}return p(n,"RecursiveType"),n}(Ge);v.RecursiveType=Tc;Object.defineProperty(Tc.prototype,"type",{get:function(){return this.runDefinition()},enumerable:!0,configurable:!0});function Z3(r,n){var e,o=p(function(){return e||(e=n(i),e.name=r),e},"runDefinition"),i=new Tc(r,function(s){return o().is(s)},function(s,a){return o().validate(s,a)},function(s){return o().encode(s)},o);return i}p(Z3,"recursion");v.recursion=Z3;var d0=function(r){ze(n,r);function n(e,o,i,s,a){var u=r.call(this,e,o,i,s)||this;return u.type=a,u._tag="ArrayType",u}return p(n,"ArrayType"),n}(Ge);v.ArrayType=d0;function h0(r,n){return n===void 0&&(n="Array<"+r.name+">"),new d0(n,function(e){return v.UnknownArray.is(e)&&e.every(r.is)},function(e,o){var i=v.UnknownArray.validate(e,o);if(ft.isLeft(i))return i;for(var s=i.right,a=s.length,u=s,l=[],c=0;c<a;c++){var d=s[c],h=r.validate(d,Qn(o,String(c),r,d));if(ft.isLeft(h))Io(l,h.left);else{var m=h.right;m!==d&&(u===s&&(u=s.slice()),u[c]=m)}}return l.length>0?v.failures(l):v.success(u)},r.encode===v.identity?v.identity:function(e){return e.map(r.encode)},r)}p(h0,"array");v.array=h0;var f0=function(r){ze(n,r);function n(e,o,i,s,a){var u=r.call(this,e,o,i,s)||this;return u.props=a,u._tag="InterfaceType",u}return p(n,"InterfaceType"),n}(Ge);v.InterfaceType=f0;function Ac(r,n){n===void 0&&(n=Gd(r));var e=Object.keys(r),o=e.map(function(s){return r[s]}),i=e.length;return new f0(n,function(s){if(v.UnknownRecord.is(s)){for(var a=0;a<i;a++){var u=e[a],l=s[u];if(l===void 0&&!Ga.call(s,u)||!o[a].is(l))return!1}return!0}return!1},function(s,a){var u=v.UnknownRecord.validate(s,a);if(ft.isLeft(u))return u;for(var l=u.right,c=l,d=[],h=0;h<i;h++){var m=e[h],f=c[m],g=o[h],D=g.validate(f,Qn(a,m,g,f));if(ft.isLeft(D))Io(d,D.left);else{var y=D.right;(y!==f||y===void 0&&!Ga.call(c,m))&&(c===l&&(c=Mi({},l)),c[m]=y)}}return d.length>0?v.failures(d):v.success(c)},Fs(o)?v.identity:function(s){for(var a=Mi({},s),u=0;u<i;u++){var l=e[u],c=o[u].encode;c!==v.identity&&(a[l]=c(s[l]))}return a},r)}p(Ac,"type");v.type=Ac;v.interface=Ac;var m0=function(r){ze(n,r);function n(e,o,i,s,a){var u=r.call(this,e,o,i,s)||this;return u.props=a,u._tag="PartialType",u}return p(n,"PartialType"),n}(Ge);v.PartialType=m0;function J3(r,n){n===void 0&&(n=qd(Gd(r)));var e=Object.keys(r),o=e.map(function(s){return r[s]}),i=e.length;return new m0(n,function(s){if(v.UnknownRecord.is(s)){for(var a=0;a<i;a++){var u=e[a],l=s[u];if(l!==void 0&&!r[u].is(l))return!1}return!0}return!1},function(s,a){var u=v.UnknownRecord.validate(s,a);if(ft.isLeft(u))return u;for(var l=u.right,c=l,d=[],h=0;h<i;h++){var m=e[h],f=c[m],g=r[m],D=g.validate(f,Qn(a,m,g,f));if(ft.isLeft(D))f!==void 0&&Io(d,D.left);else{var y=D.right;y!==f&&(c===l&&(c=Mi({},l)),c[m]=y)}}return d.length>0?v.failures(d):v.success(c)},Fs(o)?v.identity:function(s){for(var a=Mi({},s),u=0;u<i;u++){var l=e[u],c=s[l];c!==void 0&&(a[l]=o[u].encode(c))}return a},r)}p(J3,"partial");v.partial=J3;var Sc=function(r){ze(n,r);function n(e,o,i,s,a,u){var l=r.call(this,e,o,i,s)||this;return l.domain=a,l.codomain=u,l._tag="DictionaryType",l}return p(n,"DictionaryType"),n}(Ge);v.DictionaryType=Sc;function g0(r,n,e){var o=xc(r);return o?k3(Object.keys(o),r,n,e):L3(r,n,e)}p(g0,"record");v.record=g0;var Ec=function(r){ze(n,r);function n(e,o,i,s,a){var u=r.call(this,e,o,i,s)||this;return u.types=a,u._tag="UnionType",u}return p(n,"UnionType"),n}(Ge);v.UnionType=Ec;function D0(r,n){n===void 0&&(n=$d(r));var e=Kd(r);if(e!==void 0&&r.length>0){var o=e[0],i=e[1],s=i.length,a=p(function(u){for(var l=0;l<s;l++)if(i[l].indexOf(u)!==-1)return l},"find_1");return new $a(n,function(u){if(v.UnknownRecord.is(u)){var l=a(u[o]);return l!==void 0?r[l].is(u):!1}return!1},function(u,l){var c=v.UnknownRecord.validate(u,l);if(ft.isLeft(c))return c;var d=c.right,h=a(d[o]);if(h===void 0)return v.failure(u,l);var m=r[h];return m.validate(d,Qn(l,String(h),m,d))},Fs(r)?v.identity:function(u){var l=a(u[o]);if(l===void 0)throw new Error("no codec found to encode value in union codec "+n);return r[l].encode(u)},r,o)}else return new Ec(n,function(u){return r.some(function(l){return l.is(u)})},function(u,l){for(var c=[],d=0;d<r.length;d++){var h=r[d],m=h.validate(u,Qn(l,String(d),h,u));if(ft.isLeft(m))Io(c,m.left);else return v.success(m.right)}return v.failures(c)},Fs(r)?v.identity:function(u){for(var l=0,c=r;l<c.length;l++){var d=c[l];if(d.is(u))return d.encode(u)}throw new Error("no codec found to encode value in union type "+n)},r)}p(D0,"union");v.union=D0;var b0=function(r){ze(n,r);function n(e,o,i,s,a){var u=r.call(this,e,o,i,s)||this;return u.types=a,u._tag="IntersectionType",u}return p(n,"IntersectionType"),n}(Ge);v.IntersectionType=b0;function eD(r,n){n===void 0&&(n="("+r.map(function(o){return o.name}).join(" & ")+")");var e=r.length;return new b0(n,function(o){return r.every(function(i){return i.is(o)})},r.length===0?v.success:function(o,i){for(var s=[],a=[],u=0;u<e;u++){var l=r[u],c=l.validate(o,Qn(i,String(u),l,o));ft.isLeft(c)?Io(a,c.left):s.push(c.right)}return a.length>0?v.failures(a):v.success(Cc(o,s))},r.length===0?v.identity:function(o){return Cc(o,r.map(function(i){return i.encode(o)}))},r)}p(eD,"intersection");v.intersection=eD;var y0=function(r){ze(n,r);function n(e,o,i,s,a){var u=r.call(this,e,o,i,s)||this;return u.types=a,u._tag="TupleType",u}return p(n,"TupleType"),n}(Ge);v.TupleType=y0;function tD(r,n){n===void 0&&(n="["+r.map(function(o){return o.name}).join(", ")+"]");var e=r.length;return new y0(n,function(o){return v.UnknownArray.is(o)&&o.length===e&&r.every(function(i,s){return i.is(o[s])})},function(o,i){var s=v.UnknownArray.validate(o,i);if(ft.isLeft(s))return s;for(var a=s.right,u=a.length>e?a.slice(0,e):a,l=[],c=0;c<e;c++){var d=a[c],h=r[c],m=h.validate(d,Qn(i,String(c),h,d));if(ft.isLeft(m))Io(l,m.left);else{var f=m.right;f!==d&&(u===a&&(u=a.slice()),u[c]=f)}}return l.length>0?v.failures(l):v.success(u)},Fs(r)?v.identity:function(o){return r.map(function(i,s){return i.encode(o[s])})},r)}p(tD,"tuple");v.tuple=tD;var v0=function(r){ze(n,r);function n(e,o,i,s,a){var u=r.call(this,e,o,i,s)||this;return u.type=a,u._tag="ReadonlyType",u}return p(n,"ReadonlyType"),n}(Ge);v.ReadonlyType=v0;function nD(r,n){return n===void 0&&(n="Readonly<"+r.name+">"),new v0(n,r.is,r.validate,r.encode,r)}p(nD,"readonly");v.readonly=nD;var C0=function(r){ze(n,r);function n(e,o,i,s,a){var u=r.call(this,e,o,i,s)||this;return u.type=a,u._tag="ReadonlyArrayType",u}return p(n,"ReadonlyArrayType"),n}(Ge);v.ReadonlyArrayType=C0;function oD(r,n){n===void 0&&(n="ReadonlyArray<"+r.name+">");var e=h0(r);return new C0(n,e.is,e.validate,e.encode,r)}p(oD,"readonlyArray");v.readonlyArray=oD;var rD=p(function(r,n){return x0(Ac(r),n)},"strict");v.strict=rD;var w0=function(r){ze(n,r);function n(e,o,i,s,a){var u=r.call(this,e,o,i,s)||this;return u.type=a,u._tag="ExactType",u}return p(n,"ExactType"),n}(Ge);v.ExactType=w0;function x0(r,n){n===void 0&&(n=V3(r));var e=wc(r);return new w0(n,r.is,function(o,i){var s=v.UnknownRecord.validate(o,i);if(ft.isLeft(s))return s;var a=r.validate(o,i);return ft.isLeft(a)?a:ft.right(Wd(a.right,e))},function(o){return r.encode(Wd(o,e))},r)}p(x0,"exact");v.exact=x0;var T0=function(r){ze(n,r);function n(){var e=r.call(this,"Function",function(o){return typeof o=="function"},function(o,i){return e.is(o)?v.success(o):v.failure(o,i)},v.identity)||this;return e._tag="FunctionType",e}return p(n,"FunctionType"),n}(Ge);v.FunctionType=T0;v.Function=new T0;var $a=function(r){ze(n,r);function n(e,o,i,s,a,u){var l=r.call(this,e,o,i,s,a)||this;return l.tag=u,l}return p(n,"TaggedUnionType"),n}(Ec);v.TaggedUnionType=$a;var iD=p(function(r,n,e){e===void 0&&(e=$d(n));var o=D0(n,e);return o instanceof $a?o:(console.warn("[io-ts] Cannot build a tagged union for "+e+", returning a de-optimized union"),new $a(e,o.is,o.validate,o.encode,n,r))},"taggedUnion");v.taggedUnion=iD;var sD=p(function(r,n){return{value:r,context:n}},"getValidationError");v.getValidationError=sD;var aD=p(function(r){return[{key:"",type:r}]},"getDefaultContext");v.getDefaultContext=aD;var A0=function(r){ze(n,r);function n(){var e=r.call(this,"never",function(o){return!1},function(o,i){return v.failure(o,i)},function(){throw new Error("cannot encode never")})||this;return e._tag="NeverType",e}return p(n,"NeverType"),n}(Ge);v.NeverType=A0;v.never=new A0;var S0=function(r){ze(n,r);function n(){var e=r.call(this,"any",function(o){return!0},v.success,v.identity)||this;return e._tag="AnyType",e}return p(n,"AnyType"),n}(Ge);v.AnyType=S0;v.any=new S0;v.Dictionary=v.UnknownRecord;var E0=function(r){ze(n,r);function n(){var e=r.call(this,"object",function(o){return o!==null&&typeof o=="object"},function(o,i){return e.is(o)?v.success(o):v.failure(o,i)},v.identity)||this;return e._tag="ObjectType",e}return p(n,"ObjectType"),n}(Ge);v.ObjectType=E0;v.object=new E0;function _c(r,n,e){return e===void 0&&(e="("+r.name+" | "+zd(n)+")"),new c0(e,function(o){return r.is(o)&&n(o)},function(o,i){var s=r.validate(o,i);if(ft.isLeft(s))return s;var a=s.right;return n(a)?v.success(a):v.failure(a,i)},r.encode,r,n)}p(_c,"refinement");v.refinement=_c;v.Integer=_c(v.number,Number.isInteger,"Integer");v.dictionary=g0;var uD=function(r){ze(n,r);function n(e,o,i,s,a){var u=r.call(this,e,o,i,s)||this;return u.props=a,u._tag="StrictType",u}return p(n,"StrictType"),n}(Ge);v.StrictType=uD;function lD(r){return r}p(lD,"clean");v.clean=lD;function cD(r){return function(){return r}}p(cD,"alias");v.alias=cD});var _0=wt((tv,Ya)=>{Ya.exports.Space_Separator=/[\u1680\u2000-\u200A\u202F\u205F\u3000]/;Ya.exports.ID_Start=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/;Ya.exports.ID_Continue=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/});var M0=wt((nv,R0)=>{var Rc=_0();R0.exports={isSpaceSeparator(r){return typeof r=="string"&&Rc.Space_Separator.test(r)},isIdStartChar(r){return typeof r=="string"&&(r>="a"&&r<="z"||r>="A"&&r<="Z"||r==="$"||r==="_"||Rc.ID_Start.test(r))},isIdContinueChar(r){return typeof r=="string"&&(r>="a"&&r<="z"||r>="A"&&r<="Z"||r>="0"&&r<="9"||r==="$"||r==="_"||r==="\u200C"||r==="\u200D"||Rc.ID_Continue.test(r))},isDigit(r){return typeof r=="string"&&/[0-9]/.test(r)},isHexDigit(r){return typeof r=="string"&&/[0-9A-Fa-f]/.test(r)}}});var B0=wt(or=>{"use strict";Object.defineProperty(or,"__esModule",{value:!0});or.PathReporter=or.success=or.failure=void 0;var pD=_e(),dD=za();function hD(r){return typeof r=="function"?pD.getFunctionName(r):typeof r=="number"&&!isFinite(r)?isNaN(r)?"NaN":r>0?"Infinity":"-Infinity":JSON.stringify(r)}p(hD,"stringify");function fD(r){return r.map(function(n){var e=n.key,o=n.type;return e+": "+o.name}).join("/")}p(fD,"getContextPath");function mD(r){return r.message!==void 0?r.message:"Invalid value "+hD(r.value)+" supplied to "+fD(r.context)}p(mD,"getMessage");function O0(r){return r.map(mD)}p(O0,"failure");or.failure=O0;function P0(){return["No errors!"]}p(P0,"success");or.success=P0;or.PathReporter={report:dD.fold(O0,P0)}});var jp=`<div id="logicEditorRoot" style="width: 100%; height: 100%; display: flex; align-items: stretch;">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"><\/script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-fQybjgWLrvvRgtW6bFlB7jaZrFsaBXjsOMm/tB9LTS58ONXgqbR9W8oWht/amnpF" crossorigin="anonymous"><\/script>

    <!-- Has to appear *after* the other bootstrap styles -->
    <style id="inlineStyle"></style>

    <div id="leftToolbar" style="flex:none; min-width: 50px; max-width: 60px;overflow-y: scroll;display: none;">
    </div>

    <div id="centerCol" style="flex: auto; display: flex; flex-direction: column; justify-content: stretch;">

        <div id="canvas-sim" style="flex: auto; position: relative; display: flex; align-items: stretch; min-width: 0; max-width: 100%; overflow: hidden;">

            <canvas id="mainCanvas" tabindex="0" style="flex:auto"></canvas>

            <div style="padding: 5px;
            position: absolute; top: 10px; right: 10px;display:flex; flex-direction: column; align-items: flex-end;">
                <div class="sim-toolbar-right" style="margin-bottom: 15px; display: none;" id="modeChangeMenu">
                </div>

                <div id="rightToolbarContainer" class="sim-toolbar-right" style="display: none;">
                    <div class="btn-group-vertical">
                        <button type="button" class="btn btn-sm btn-outline-light sim-toolbar-button-right" tool="reset" id="rightResetButton">
                            <i class="svgicon" data-icon="reset"></i>
                            <span style="margin-left: -20px">&nbsp;</span>
                        </button>
                    </div>
                </div>

                <div id="testResultsPalette">
                </div>

                <div id="settingsPalette" class="sim-toolbar-right" style="display: none; flex-direction:column; align-items: stretch; font-size: 75%; padding: 0 5px 5px" data-prev-display="flex">
                </div>


            </div>
        </div>

    </div>


    <dialog id="embedDialog" style="display: none; border: 1px solid gray; border-radius: 10px; box-shadow: 0px 0px 16px 5px rgba(0,0,0,0.2); padding: 5px 10px; width: 100%; max-width: 600px;">
        <div style="display: flex; flex-direction: column; font-size: 80%">
            <div style="flex:none; font-weight: bold; text-align: center; width: 100%;padding: 10px 0; border-bottom: 1px solid lightgrey; margin-bottom: 10px; font-size: 120%" id="shareDialogTitle"></div>
            <div style="flex: auto; display: flex; flex-direction: row;">
                <div style="flex:auto; flex-direction: column;">
                    <div>
                        <span style="font-weight: bolder" id="shareDialogUrl"></span><br>
                        <textarea id="embedUrl" readonly rows="2" style="width:100%; resize: none"></textarea>
                    </div>
                    <div style="margin-top: 10px; flex:auto">
                        <span style="font-weight: bolder" id="shareDialogIframe"></span><br>
                        <textarea id="embedIframe" readonly rows="4" style="width:100%; font-family: monospace;"></textarea>
                    </div>
                    <div style="margin-top: 10px; flex:auto">
                        <span style="font-weight: bolder" id="shareDialogWebComp"></span><br>
                        <textarea id="embedWebcomp" readonly rows="4" style="width:100%; font-family: monospace;"></textarea>
                    </div>
                    <div style="margin-top: 10px; flex:auto">
                        <span style="font-weight: bolder;" id="shareDialogMarkdown"></span><br>
                        <textarea id="embedMarkdown" readonly rows="7" style="width:100%; font-family: monospace"></textarea>
                    </div>
                </div>
                <!-- <div style="flex:none; margin-top: 10px">
                    <img id="embedUrlQRCode" style="margin-left: 10px">
                </div> -->
            </div>
            <div style="flex: none; margin-top: 15px; text-align: center;">
                <form method="dialog">
                    <button value="close" id="shareDialogClose"></button>
                </form>
            </div>
        </div>
    </dialog>

    <input id="fileChooser" type="file" style="display:none"></input>

    <div id="tooltip" role="tooltip" style="display:none">
        <div id="tooltipContents"></div>
        <div id="arrow" data-popper-arrow></div>
    </div>

    <ul class="menu" id="mainContextMenu"></ul>

</div>`;var Qp=`* {
  box-sizing: border-box;
}

canvas:focus {
  outline: none;
}

#logicEditorRoot {
  font-family: 'Roboto', sans-serif;
  background-color: #EEEEEE;
}

#logicEditorRoot.dark {
  background-color: #373737;
}

/* TODO would that go in some global CSS?
logic-editor:not(:defined) {
  opacity: 0;
  width: 100%;
  height: 20px;
}
*/

/* btn btn-sm  */


.navGroupTools {
  padding-left: 2px;
  padding-right: 2px;
  border-right-style: dotted;
  border-color: gray;
}

.nav-item {
  display: inline-flex;
}

#leftToolbar {
  display: flex;
  flex-direction: column;
  color: black;
  border-top: 1px solid rgba(0, 0, 0, 0.125);
  border-bottom: 1px solid rgba(0, 0, 0, 0.125);
}

.leftToolbarHeader {
  font-size: 80%;
  font-weight: bold;
  padding: 1px;
  /* word-break: break-all; */
  text-align: center;
  background-color: lightgray;
}

.leftToolbarMore {
  text-align: center;
  font-style: italic;
  font-size: 75%;
  padding: 3px 0;
  cursor: pointer;
  opacity: 0.6;
  color: rgb(33, 33, 33);
}

.dark a {
  color: #8e81ff;
}

.dark .leftToolbarHeader {
  background-color: rgb(56, 56, 56);
}

.dark #leftToolbar {
  background-color: #5e5e5e;
  color: rgb(181, 181, 181);
}

.dark .leftToolbarMore {
  color: rgb(204, 204, 204);
}

.dark #leftToolbar .list-group-item {
  background-color: #5e5e5e;
}

.sim-toolbar-right {
  background: rgba(136, 136, 136, 0.5);
  box-shadow: 0px 0px 10px 1px rgb(201, 201, 201);
  border-radius: 5px;
  position: relative;
  right: 0px;
  top: 0px;
}

.sim-toolbar-right .toolbar-title {
  text-align: center;
  width: 100%;
  font-weight: bold;
  font-size: 12px;
  color: #444;
  padding: 2px;
  cursor: grab;
}

.dark .sim-toolbar-right .toolbar-title {
  color: rgb(181, 181, 181);
}

.dark .sim-toolbar-right {
  color: rgb(204, 204, 204);
}

.sim-toolbar-right .toolbar-title.with-border {
  border-bottom: 1px solid rgba(255, 255, 255, 0.4);
  margin-bottom: 5px;
}

.sim-toolbar-right .close-palette {
  position: absolute;
  top: 2px;
  right: 2px;
  cursor: pointer;
  margin-left: 5px;
  color: rgb(112, 112, 112)
}

.dark .sim-toolbar-right .close-palette {
  color: rgb(204, 204, 204);
}

#settingsPalette label span,
.noselect {
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.sim-component-button {
  padding: 8px 0;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.sim-component-button-extra {
  background-color: #ededed;
}

.sim-toolbar-button-right {
  text-align: left;
  cursor: pointer;
  height: 30px;
}

.sim-toolbar-button-right>i {
  width: 16px;
}

.sim-mode-link {
  margin: -8px 0 -8px 5px;
  border: 1px solid rgba(0, 0, 0, 0);
  border-radius: 3px;
  padding: 5px;
  cursor: pointer;
}

.sim-toolbar-button-right:not(.active) .sim-mode-link {
  opacity: 0.0;
}

.sim-mode-link:hover {
  border-color: grey;
}

#leftToolbar .barLabel {
  font-size: 52%;
  font-weight: bold;
  text-align: center;
  word-break: break-all;
}

.truth-table {
  color: white;
  font-weight: normal;
  font-size: 90%;
  text-align: center;
  border: 1px solid gray;
  margin: 5px 0;
}

.truth-table th {
  padding: 3px 8px;
  margin: 0 0 2px 0;
  border-bottom: 1px solid grey;
}

.truth-table tr.current {
  background: grey;
  color: rgb(255, 192, 8);
}

.truth-table th:last-child,
.truth-table td:last-child {
  border-left: 1px solid grey;
}

/* Tooltips by Popper */

#tooltip {
  background: #333;
  color: white;
  padding: 6px;
  font-size: 13px;
  line-height: 1.2em;
  border-radius: 4px;
  display: none;
  opacity: 0.95;
}

#tooltip div+div {
  margin-top: 5px;
}

#tooltip[data-show] {
  display: block;
}

#arrow,
#arrow::before {
  position: absolute;
  width: 8px;
  height: 8px;
  background: inherit;
}

#arrow {
  visibility: hidden;
}

#arrow::before {
  visibility: visible;
  content: '';
  transform: rotate(45deg);
}

#tooltip[data-popper-placement^='top']>#arrow {
  bottom: -4px;
}

#tooltip[data-popper-placement^='bottom']>#arrow {
  top: -4px;
}

#tooltip[data-popper-placement^='left']>#arrow {
  right: -4px;
}

#tooltip[data-popper-placement^='right']>#arrow {
  left: -4px;
}

/* Menus */

.menu {
  position: absolute;
  min-width: 200px;
  padding: 2px;
  margin: 0;
  border: 1px solid #bbb;
  background: #EAEAEA;
  background: -webkit-linear-gradient(to bottom, #F2F2F2 0%, #EAEAEA 100px, #EAEAEA 100%);
  background: linear-gradient(to bottom, #F2F2F2 0%, #EAEAEA 100px, #EAEAEA 100%);
  z-index: 100;
  border-radius: 3px;
  box-shadow: 1px 1px 4px rgba(0, 0, 0, .2);
  opacity: 0;
  -webkit-transform: translate(0, 15px) scale(.95);
  transform: translate(0, 15px) scale(.95);
  transition: transform 0.1s ease-out, opacity 0.1s ease-out;
  pointer-events: none;
}

.menu-item {
  display: block;
  position: relative;
  margin: 0;
  padding: 0;
  white-space: nowrap;
}

.menu-btn {
  background: none;
  line-height: normal;
  overflow: visible;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  display: block;
  width: 100%;
  color: #444;
  font-family: 'Roboto', sans-serif;
  font-size: 13px;
  text-align: left;
  cursor: pointer;
  border: 1px solid transparent;
  white-space: nowrap;
  padding: 6px 8px;
  border-radius: 3px;
}

.menu-btn::-moz-focus-inner,
.menu-btn::-moz-focus-inner {
  border: 0;
  padding: 0;
}

.menu-text {
  margin-left: 10px;
  margin-right: 22px;
}

.menu-item-static {
  display: block;
  padding: 0 5px;
  color: rgb(150, 150, 150);
  font-size: 70%;
  font-style: italic;
  width: 100%;
  white-space: normal;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  cursor: default;
}

.menu-btn .fa {
  position: absolute;
  left: 8px;
  top: 50%;
  -webkit-transform: translateY(-50%);
  transform: translateY(-50%);
}

.menu-shortcut {
  position: absolute;
  right: 8px;
  font-size: 85%;
}

.menu-item:hover>.menu-btn {
  color: #fff;
  outline: none;
  background-color: #2865E1;
  background: -webkit-linear-gradient(to bottom, #2A6BED, #2865E1);
  background: linear-gradient(to bottom, #2A6BED, #2865E1);
  border: 1px solid #2865E1;
}

.menu-item:hover>.menu-btn.danger {
  color: #fff;
  background-color: #C1210E;
  background: -webkit-linear-gradient(to bottom, #DE2610, #C1210E);
  background: linear-gradient(to bottom, #DE2610, #C1210E);
  border: 1px solid #C1210E;
}

.menu-item.disabled {
  opacity: .5;
  pointer-events: none;
}

.menu-item.disabled .menu-btn {
  cursor: default;
}

.menu-separator {
  display: block;
  margin: 3px 5px;
  height: 1px;
  border-bottom: 1px solid #D0CFD0;
  background-color: #aaa;
}

.menu-item.submenu::after {
  content: "";
  position: absolute;
  right: 6px;
  top: 50%;
  -webkit-transform: translateY(-50%);
  transform: translateY(-50%);
  border: 5px solid transparent;
  border-left-color: #808080;
}

.menu-item.submenu:hover::after {
  border-left-color: #fff;
}

.menu .menu {
  top: 4px;
  left: 99%;
}

.show-menu,
.menu-item:hover>.menu {
  opacity: 1;
  -webkit-transform: translate(0, 0) scale(1);
  transform: translate(0, 0) scale(1);
  pointer-events: auto;
}

.menu-item:hover>.menu {
  -webkit-transition-delay: 100ms;
  transition-delay: 300ms;
}

i.svgicon {
  display: inline-block;
  width: 16px;
}

i.svgicon svg {
  width: 100%;
}

i.svgicon path {
  fill: currentColor;
}



i.svgimg svg {
  width: 100%;
  font-family: Arial, Helvetica, sans-serif;
  font-style: normal;
}

i.svgimg {
  color: black;
}

.dark i.svgimg {
  color: rgb(230, 230, 230);
}

.dark .barLabel {
  color: rgb(220, 220, 220);
}

svg text {
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  pointer-events: none;
}


/* Top bar */

.topBar {
  background-color: rgb(239, 239, 239);
  border-left: 1px solid lightgray;
  border-right: 1px solid lightgray;
  border-top: 1px solid lightgray;
}

.dark .topBar {
  background-color: rgb(94, 94, 94);
  border-left-color: #525252;
}

.topBar * {
  font: 10pt 'Roboto', sans-serif;
}

.dark .topBar * {
  color: rgb(220, 220, 220);
}

.topBar button {
  border: none;
  background: none;
  box-shadow: none;
  border-radius: 5px;
  display: inline-flex;
  align-items: center;
  gap: 3px;
}

.dark .topBar button:disabled * {
  color: #808080;
}

.topBar button:not(:disabled, .active):hover {
  background: #d5d5d5;
}

.topBar button:not(:disabled, .active):active {
  background: #b2b2b2;
  transform: translate(1px, 1px);
}

.topBar button.active {
  background: #ffffff;
  font-weight: bolder;
  cursor: unset;
}


.dark .topBar button:not(:disabled, .active):hover {
  background: #404040;
}

.dark .topBar button:not(:disabled, .active):active {
  background: #313131;
}

.dark .topBar button.active {
  background: #1E1E1E;
}

.topBar .sep {
  border-left: 1px solid #d5d5d5;
  margin: 0 4px;
}

.topBar .sep.fat {
  border-left-width: 5px;
}

.dark .topBar .sep {
  border-left-color: #525252;
}

.topBar .barLabel {
  display: inline-flex;
  align-items: center;
  white-space: pre;
  margin: 0 5px;
  cursor: default;
}

.topBar.compact .btnLabel {
  display: none;
}

.topBar a.barLabel {
  color: inherit;
  cursor: pointer;
}

.topBar .barTab {
  flex: none;
  display: inline-flex;
  margin: 0 0 -3px;
  padding: 3px;
}

.topBar .barTab.active {
  background-color: white;
  border-top-left-radius: 10px;
  border-top-right-radius: 10px;
  border: 1px solid rgb(200, 200, 200);
  border-bottom: none;
}

.dark .topBar .barTab.active {
  background-color: rgb(30, 30, 30);
  border-color: #555555;
}


.msgZone {
  position: absolute;
  top: -40px;
  width: 100%;
  display: flex;
  visibility: hidden;
  justify-content: center;
  align-items: center;
  transition: all 0.15s ease-in-out;
  pointer-events: none;
}

.msgZone.visible {
  top: 10px;
  visibility: visible;
}

.msgZone .msgBar {
  padding: 5px 10px;
  border-radius: 20px;
  text-align: center;
  max-width: 80%;
  box-shadow: 0px 0px 5px 0px rgba(128, 128, 128, 0.5);
  font-size: 10pt;
  background-color: rgb(190, 190, 190, 0.2);
  pointer-events: auto;
}

.dark .msgZone .msgBar {
  color: rgb(220, 220, 220);
}

.test-disclosable {
  cursor: pointer;
  border: none;
}

.test-disclosable::before {
  content: '\\25B6';
  /* Right-pointing triangle */
  display: inline-block;
  margin-right: 5px;
  transition: transform 0.1s;
}

.testcase-button {
  background: none;
  width: 100%;
  text-align: left;
  display: flex;
}

.testcase-button.test-disclosable::before {
  font-size: 80%;
}

.test-disclosable.expanded::before {
  transform: rotate(90deg);
  /* Down-pointing triangle */
}

.test-suite {
  background-color: #ccc;
  color: #444;
  font-weight: bold;
  padding: 5px;
  width: 100%;
}

.dark .test-suite {
  background-color: #333;
  color: #ccc;
}

.test-cases {
  padding: 0;
  display: none;
  overflow: hidden;
  background-color: #f1f1f1;
}

.dark .test-cases {
  background-color: #444;
}

.testcase {
  padding: 2px 5px;
  border-top: 1px solid #ccc;
}

.testcase.wait {
  background: #f1f1f1;
}

.dark .testcase.wait {
  background: #444;
}

.testcase.pass {
  background: #d3f3d3;
}

.dark .testcase.pass {
  background: rgb(25, 48, 25);
}

.testcase.fail {
  background: #f3d3d3;
}

.dark .testcase.fail {
  background: #412626;
}

.testcase.error {
  background: #f3f3d3;
}

.dark .testcase.error {
  background: #363616;
}

.testcase.skip {
  background: #d3d3f3;
}

.dark .testcase.skip {
  background: #666;
}

.testcase.running {
  background: repeating-linear-gradient(135deg,
      #e2e2e2,
      #e2e2e2 10px,
      #f7f6f6 10px,
      #f7f6f6 20px);
  background-size: 200% 100%;
  animation: barberpole 5s linear infinite;
}

.dark .testcase.running {
  background: repeating-linear-gradient(135deg,
      #555,
      #555 10px,
      #444 10px,
      #444 20px);
}

@keyframes barberpole {
  0% {
    background-position: 0% 0%;
  }

  100% {
    background-position: -100% 0%;
  }
}

.testcase-details {
  padding: 5px 5px 10px 20px;
}

#logicEditorRoot[nomodes~=full] .testcase-change-button {
  display: none;
}

#logicEditorRoot[nomodes~=full] .hidden-test-suite {
  display: none;
}

.testcase-table {
  width: 100%;
  font-size: 90%;
  border-collapse: collapse;
  border-bottom: 1px solid rgba(255, 255, 255, 0.6);
  border-left: 2px solid rgba(255, 255, 255, 0.6);
  opacity: 0.8;
}

.testcase-table th {
  padding-left: 5px;
}

.testcase-table td {
  padding-left: 10px;
}

.testcase-table :is(td, th) {
  white-space: nowrap;
}

.testcase-table :is(td, th):first-child {
  width: 50%;
}

.testcase-table :is(td, th):nth-child(2) {
  border-left: 1px solid rgba(255, 255, 255, 0.6);
}

.testcase-wrongvalue {
  color: #8f2626;
  font-weight: bold;
}

.dark .testcase-wrongvalue {
  color: #ff9898;
}`;var Kp=`dialog {
  position: absolute;
  left: 0; right: 0;
  width: -moz-fit-content;
  width: -webkit-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: -webkit-fit-content;
  height: fit-content;
  margin: auto;
  border: solid;
  padding: 1em;
  background: white;
  color: black;
  display: block;
}

dialog:not([open]) {
  display: none;
}

dialog + .backdrop {
  position: fixed;
  top: 0; right: 0; bottom: 0; left: 0;
  background: rgba(0,0,0,0.1);
}

._dialog_overlay {
  position: fixed;
  top: 0; right: 0; bottom: 0; left: 0;
}

dialog.fixed {
  position: fixed;
  top: 50%;
  transform: translate(0, -50%);
}`;var Si=window.CustomEvent;(!Si||typeof Si=="object")&&(Si=p(function(n,e){e=e||{};var o=document.createEvent("CustomEvent");return o.initCustomEvent(n,!!e.bubbles,!!e.cancelable,e.detail||null),o},"CustomEvent"),Si.prototype=window.Event.prototype);function od(r,n){var e="on"+n.type.toLowerCase();return typeof r[e]=="function"&&r[e](n),r.dispatchEvent(n)}p(od,"safeDispatchEvent");function c2(r){for(;r&&r!==document.body;){var n=window.getComputedStyle(r),e=p(function(o,i){return!(n[o]===void 0||n[o]===i)},"invalid");if(n.opacity<1||e("zIndex","auto")||e("transform","none")||e("mixBlendMode","normal")||e("filter","none")||e("perspective","none")||n.isolation==="isolate"||n.position==="fixed"||n.webkitOverflowScrolling==="touch")return!0;r=r.parentElement}return!1}p(c2,"createsStackingContext");function Es(r){for(;r;){if(r.localName==="dialog")return r;r.parentElement?r=r.parentElement:r.parentNode?r=r.parentNode.host:r=null}return null}p(Es,"findNearestDialog");function rd(r){for(;r&&r.shadowRoot&&r.shadowRoot.activeElement;)r=r.shadowRoot.activeElement;r&&r.blur&&r!==document.body&&r.blur()}p(rd,"safeBlur");function p2(r,n){for(var e=0;e<r.length;++e)if(r[e]===n)return!0;return!1}p(p2,"inNodeList");function Zl(r){return!r||!r.hasAttribute("method")?!1:r.getAttribute("method").toLowerCase()==="dialog"}p(Zl,"isFormMethodDialog");function id(r){var n=["button","input","keygen","select","textarea"],e=n.map(function(a){return a+":not([disabled])"});e.push('[tabindex]:not([disabled]):not([tabindex=""])');var o=r.querySelector(e.join(", "));if(!o&&"attachShadow"in Element.prototype)for(var i=r.querySelectorAll("*"),s=0;s<i.length&&!(i[s].tagName&&i[s].shadowRoot&&(o=id(i[s].shadowRoot),o));s++);return o}p(id,"findFocusableElementWithin");function Zp(r){return r.isConnected||document.body.contains(r)}p(Zp,"isConnected");function sd(r){if(r.submitter)return r.submitter;var n=r.target;if(!(n instanceof HTMLFormElement))return null;var e=He.formSubmitter;if(!e){var o=r.target,i="getRootNode"in o&&o.getRootNode()||document;e=i.activeElement}return!e||e.form!==n?null:e}p(sd,"findFormSubmitter");function d2(r){if(!r.defaultPrevented){var n=r.target,e=He.imagemapUseValue,o=sd(r);e===null&&o&&(e=o.value);var i=Es(n);if(i){var s=o&&o.getAttribute("formmethod")||n.getAttribute("method");s==="dialog"&&(r.preventDefault(),e!=null?i.close(e):i.close())}}}p(d2,"maybeHandleSubmit");function ad(r){if(this.dialog_=r,this.replacedStyleTop_=!1,this.openAsModal_=!1,r.hasAttribute("role")||r.setAttribute("role","dialog"),r.show=this.show.bind(this),r.showModal=this.showModal.bind(this),r.close=this.close.bind(this),r.addEventListener("submit",d2,!1),"returnValue"in r||(r.returnValue=""),"MutationObserver"in window){var n=new MutationObserver(this.maybeHideModal.bind(this));n.observe(r,{attributes:!0,attributeFilter:["open"]})}else{var e=!1,o=function(){e?this.downgradeModal():this.maybeHideModal(),e=!1}.bind(this),i,s=p(function(a){if(a.target===r){var u="DOMNodeRemoved";e|=a.type.substr(0,u.length)===u,window.clearTimeout(i),i=window.setTimeout(o,0)}},"delayModel");["DOMAttrModified","DOMNodeRemoved","DOMNodeRemovedFromDocument"].forEach(function(a){r.addEventListener(a,s)})}Object.defineProperty(r,"open",{set:this.setOpen.bind(this),get:r.hasAttribute.bind(r,"open")}),this.backdrop_=document.createElement("div"),this.backdrop_.className="backdrop",this.backdrop_.addEventListener("mouseup",this.backdropMouseEvent_.bind(this)),this.backdrop_.addEventListener("mousedown",this.backdropMouseEvent_.bind(this)),this.backdrop_.addEventListener("click",this.backdropMouseEvent_.bind(this))}p(ad,"dialogPolyfillInfo");ad.prototype={get dialog(){return this.dialog_},maybeHideModal:function(){this.dialog_.hasAttribute("open")&&Zp(this.dialog_)||this.downgradeModal()},downgradeModal:function(){this.openAsModal_&&(this.openAsModal_=!1,this.dialog_.style.zIndex="",this.replacedStyleTop_&&(this.dialog_.style.top="",this.replacedStyleTop_=!1),this.backdrop_.parentNode&&this.backdrop_.parentNode.removeChild(this.backdrop_),He.dm.removeDialog(this))},setOpen:function(r){r?this.dialog_.hasAttribute("open")||this.dialog_.setAttribute("open",""):(this.dialog_.removeAttribute("open"),this.maybeHideModal())},backdropMouseEvent_:function(r){if(this.dialog_.hasAttribute("tabindex"))this.dialog_.focus();else{var n=document.createElement("div");this.dialog_.insertBefore(n,this.dialog_.firstChild),n.tabIndex=-1,n.focus(),this.dialog_.removeChild(n)}var e=document.createEvent("MouseEvents");e.initMouseEvent(r.type,r.bubbles,r.cancelable,window,r.detail,r.screenX,r.screenY,r.clientX,r.clientY,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.button,r.relatedTarget),this.dialog_.dispatchEvent(e),r.stopPropagation()},focus_:function(){var r=this.dialog_.querySelector("[autofocus]:not([disabled])");!r&&this.dialog_.tabIndex>=0&&(r=this.dialog_),r||(r=id(this.dialog_)),rd(document.activeElement),r&&r.focus()},updateZIndex:function(r,n){if(r<n)throw new Error("dialogZ should never be < backdropZ");this.dialog_.style.zIndex=r,this.backdrop_.style.zIndex=n},show:function(){this.dialog_.open||(this.setOpen(!0),this.focus_())},showModal:function(){if(this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'showModal' on dialog: The element is already open, and therefore cannot be opened modally.");if(!Zp(this.dialog_))throw new Error("Failed to execute 'showModal' on dialog: The element is not in a Document.");if(!He.dm.pushDialog(this))throw new Error("Failed to execute 'showModal' on dialog: There are too many open modal dialogs.");c2(this.dialog_.parentElement)&&console.warn("A dialog is being shown inside a stacking context. This may cause it to be unusable. For more information, see this link: https://github.com/GoogleChrome/dialog-polyfill/#stacking-context"),this.setOpen(!0),this.openAsModal_=!0,He.needsCentering(this.dialog_)?(He.reposition(this.dialog_),this.replacedStyleTop_=!0):this.replacedStyleTop_=!1,this.dialog_.parentNode.insertBefore(this.backdrop_,this.dialog_.nextSibling),this.focus_()},close:function(r){if(!this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'close' on dialog: The element does not have an 'open' attribute, and therefore cannot be closed.");this.setOpen(!1),r!==void 0&&(this.dialog_.returnValue=r);var n=new Si("close",{bubbles:!1,cancelable:!1});od(this.dialog_,n)}};var He={};He.reposition=function(r){var n=document.body.scrollTop||document.documentElement.scrollTop,e=n+(window.innerHeight-r.offsetHeight)/2;r.style.top=Math.max(n,e)+"px"};He.isInlinePositionSetByStylesheet=function(r){for(var n=0;n<document.styleSheets.length;++n){var e=document.styleSheets[n],o=null;try{o=e.cssRules}catch{}if(o)for(var i=0;i<o.length;++i){var s=o[i],a=null;try{a=document.querySelectorAll(s.selectorText)}catch{}if(!(!a||!p2(a,r))){var u=s.style.getPropertyValue("top"),l=s.style.getPropertyValue("bottom");if(u&&u!=="auto"||l&&l!=="auto")return!0}}}return!1};He.needsCentering=function(r){var n=window.getComputedStyle(r);return n.position!=="absolute"||r.style.top!=="auto"&&r.style.top!==""||r.style.bottom!=="auto"&&r.style.bottom!==""?!1:!He.isInlinePositionSetByStylesheet(r)};He.forceRegisterDialog=function(r){if((window.HTMLDialogElement||r.showModal)&&console.warn("This browser already supports <dialog>, the polyfill may not work correctly",r),r.localName!=="dialog")throw new Error("Failed to register dialog: The element is not a dialog.");new ad(r)};He.registerDialog=function(r){r.showModal||He.forceRegisterDialog(r)};He.DialogManager=function(){this.pendingDialogStack=[];var r=this.checkDOM_.bind(this);this.overlay=document.createElement("div"),this.overlay.className="_dialog_overlay",this.overlay.addEventListener("click",function(n){this.forwardTab_=void 0,n.stopPropagation(),r([])}.bind(this)),this.handleKey_=this.handleKey_.bind(this),this.handleFocus_=this.handleFocus_.bind(this),this.zIndexLow_=1e5,this.zIndexHigh_=1e5+150,this.forwardTab_=void 0,"MutationObserver"in window&&(this.mo_=new MutationObserver(function(n){var e=[];n.forEach(function(o){for(var i=0,s;s=o.removedNodes[i];++i){if(s instanceof Element)s.localName==="dialog"&&e.push(s);else continue;e=e.concat(s.querySelectorAll("dialog"))}}),e.length&&r(e)}))};He.DialogManager.prototype.blockDocument=function(){document.documentElement.addEventListener("focus",this.handleFocus_,!0),document.addEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.observe(document,{childList:!0,subtree:!0})};He.DialogManager.prototype.unblockDocument=function(){document.documentElement.removeEventListener("focus",this.handleFocus_,!0),document.removeEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.disconnect()};He.DialogManager.prototype.updateStacking=function(){for(var r=this.zIndexHigh_,n=0,e;e=this.pendingDialogStack[n];++n)e.updateZIndex(--r,--r),n===0&&(this.overlay.style.zIndex=--r);var o=this.pendingDialogStack[0];if(o){var i=o.dialog.parentNode||document.body;i.appendChild(this.overlay)}else this.overlay.parentNode&&this.overlay.parentNode.removeChild(this.overlay)};He.DialogManager.prototype.containedByTopDialog_=function(r){for(;r=Es(r);){for(var n=0,e;e=this.pendingDialogStack[n];++n)if(e.dialog===r)return n===0;r=r.parentElement}return!1};He.DialogManager.prototype.handleFocus_=function(r){var n=r.composedPath?r.composedPath()[0]:r.target;if(!this.containedByTopDialog_(n)&&document.activeElement!==document.documentElement&&(r.preventDefault(),r.stopPropagation(),rd(n),this.forwardTab_!==void 0)){var e=this.pendingDialogStack[0],o=e.dialog,i=o.compareDocumentPosition(n);return i&Node.DOCUMENT_POSITION_PRECEDING&&(this.forwardTab_?e.focus_():n!==document.documentElement&&document.documentElement.focus()),!1}};He.DialogManager.prototype.handleKey_=function(r){if(this.forwardTab_=void 0,r.keyCode===27){r.preventDefault(),r.stopPropagation();var n=new Si("cancel",{bubbles:!1,cancelable:!0}),e=this.pendingDialogStack[0];e&&od(e.dialog,n)&&e.dialog.close()}else r.keyCode===9&&(this.forwardTab_=!r.shiftKey)};He.DialogManager.prototype.checkDOM_=function(r){var n=this.pendingDialogStack.slice();n.forEach(function(e){r.indexOf(e.dialog)!==-1?e.downgradeModal():e.maybeHideModal()})};He.DialogManager.prototype.pushDialog=function(r){var n=(this.zIndexHigh_-this.zIndexLow_)/2-1;return this.pendingDialogStack.length>=n?!1:(this.pendingDialogStack.unshift(r)===1&&this.blockDocument(),this.updateStacking(),!0)};He.DialogManager.prototype.removeDialog=function(r){var n=this.pendingDialogStack.indexOf(r);n!==-1&&(this.pendingDialogStack.splice(n,1),this.pendingDialogStack.length===0&&this.unblockDocument(),this.updateStacking())};He.dm=new He.DialogManager;He.formSubmitter=null;He.imagemapUseValue=null;window.HTMLDialogElement===void 0&&(Jl=document.createElement("form"),Jl.setAttribute("method","dialog"),Jl.method!=="dialog"&&(kr=Object.getOwnPropertyDescriptor(HTMLFormElement.prototype,"method"),kr&&(Jp=kr.get,kr.get=function(){return Zl(this)?"dialog":Jp.call(this)},ed=kr.set,kr.set=function(r){return typeof r=="string"&&r.toLowerCase()==="dialog"?this.setAttribute("method",r):ed.call(this,r)},Object.defineProperty(HTMLFormElement.prototype,"method",kr))),document.addEventListener("click",function(r){if(He.formSubmitter=null,He.imagemapUseValue=null,!r.defaultPrevented){var n=r.target;if("composedPath"in r){var e=r.composedPath();n=e.shift()||n}if(!(!n||!Zl(n.form))){var o=n.type==="submit"&&["button","input"].indexOf(n.localName)>-1;if(!o){if(!(n.localName==="input"&&n.type==="image"))return;He.imagemapUseValue=r.offsetX+","+r.offsetY}var i=Es(n);i&&(He.formSubmitter=n)}}},!1),document.addEventListener("submit",function(r){var n=r.target,e=Es(n);if(!e){var o=sd(r),i=o&&o.getAttribute("formmethod")||n.getAttribute("method");i==="dialog"&&r.preventDefault()}}),td=HTMLFormElement.prototype.submit,nd=p(function(){if(!Zl(this))return td.call(this);var r=Es(this);r&&r.close()},"replacementFormSubmit"),HTMLFormElement.prototype.submit=nd);var Jl,kr,Jp,ed,td,nd,ud=He;var Hm=pe(La()),qp=pe(er()),Ba=pe(cd()),Mr=pe(xd());var gm=pe(_e()),Ep=pe(er());var mp=pe(La()),Gu=pe(er()),ji=pe(M0());var F0=pe(za()),Qe=pe(_e()),I0=pe(B0()),Mc=pe(er());var Xa=typeof window!="undefined",k0=void 0;function Is(r){return Object.keys(r)}p(Is,"keysOf");var Wt=class{constructor(n){this.props=n;this._values=Is(n);for(let e=0;e<this._values.length;e++)this[e]=this._values[e]}static withProps(){return function(n){return new Wt(n)}}get type(){throw new Error}get values(){return this._values}get length(){return this._values.length}get definitions(){let n=[];for(let e of this._values)n.push([e,this.props[e]]);return n}includes(n){return this.values.includes(n)}indexOf(n){return this.values.indexOf(n)}*[Symbol.iterator](){for(let n of this._values)yield n}};p(Wt,"RichStringEnum");function M(...r){return r}p(M,"tuple");function Oc(r,n){let e={...r};for(let[o,i]of Object.entries(n))i!==void 0&&(e[o]=i);return e}p(Oc,"mergeWhereDefined");function L0(r){let n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",e="";for(let o=0;o<r;o++)e+=n[Math.floor(Math.random()*n.length)];return e}p(L0,"randomString");function V0(){return r=>r}p(V0,"brand");function gD(r,n){return{...n,...r}}p(gD,"defineADTStatics");function Z(r){return typeof r=="string"}p(Z,"isString");function ae(r){return Array.isArray(r)}p(ae,"isArray");function An(r){return typeof r=="number"}p(An,"isNumber");function Ur(r){return typeof r=="boolean"}p(Ur,"isBoolean");function Kt(r){return typeof r=="object"&&r!==null}p(Kt,"isRecord");function j(r,n){return Array(n).fill(r)}p(j,"ArrayFillWith");function At(r,n){let e=Array(n);for(let o=0;o<n;o++)e[o]=r(o);return e}p(At,"ArrayFillUsing");function N0(r,n,e){let o=n-r.length;if(o===0)return r;if(o>0)for(let i=0;i<o;i++)r.push(e);else r.splice(n,-o);return r}p(N0,"ArrayClampOrPad");function Sn(r,n){return j(r,n)}p(Sn,"FixedArrayFillWith");function H0(r,n){return r.map(n)}p(H0,"FixedArrayMap");function ja(r,n){if(r.length!==n)throw new Error(`FixedArrayAssert: expected length ${n}, got ${r.length}`);return r}p(ja,"FixedArrayAssert");function Pc(r){let n=Mc.default.parse(r);if(Kt(n))return n;throw new Error("JSONParseObject: not an object")}p(Pc,"JSONParseObject");function Bc(r){return r!=null&&(r==="1"||r.toLowerCase()==="true")}p(Bc,"isTruthyString");function Oi(r){return r!=null&&(r==="0"||r.toLowerCase()==="false")}p(Oi,"isFalsyString");function Nc(r,n){let o=window.location.search.substring(1).split("&");for(let i of o){let s=i.split("=");if(s[0]===r)return s[1]}return n}p(Nc,"getURLParameter");function W0(){try{return window.self!==window.top}catch(r){return!0}}p(W0,"isEmbeddedInIframe");function U0(r,n){new IntersectionObserver((e,o)=>{e.forEach(i=>{if(i.intersectionRatio>0){n(),o.disconnect();return}})}).observe(r)}p(U0,"onVisible");function Qa(r,n){n?r.removeAttribute("disabled"):r.setAttribute("disabled","disabled")}p(Qa,"setEnabled");function we(r,n){if(n){let e=r.getAttribute("data-prev-display");e===null?r.style.display==="none"&&r.style.removeProperty("display"):(r.removeAttribute("data-prev-display"),r.style.display=e)}else{let e=r.style.display;e.length!==0&&e!=="none"&&r.setAttribute("data-prev-display",e),r.style.display="none"}}p(we,"setVisible");function z0(r){we(r,r.style.display==="none")}p(z0,"toggleVisible");function Ka(r,n){n?r.style.visibility="hidden":r.style.removeProperty("visibility")}p(Ka,"setHidden");function zr(r,n){we(r,n!=="hide"),Ka(r,n==="inactive")}p(zr,"setDisplay");function Pi(r,n){r.classList.toggle("active",n)}p(Pi,"setActive");function G0(r){if(typeof r.showModal=="function"){r.style.display="initial",r.showModal();let n=p(()=>{r.style.display="none",r.removeEventListener("close",n)},"listener");return r.addEventListener("close",n),!0}return!1}p(G0,"showModal");var DD={NoChange:{_tag:"NoChange",isChange:!1},SimpleChange:{_tag:"SimpleChange",isChange:!0},RepeatableChange:r=>({_tag:"RepeatableChange",isChange:!0,repeat:r})},X=gD(DD,{fromBoolean:r=>r?X.SimpleChange:X.NoChange,merge:(r,n)=>r._tag==="NoChange"?n:r._tag==="RepeatableChange"?r:n._tag==="RepeatableChange"?n:r}),et={rising:"rising",falling:"falling"},Za="in",Ja="out";function q0(r,n){return Array(n+1).join(r)}p(q0,"repeatString");function $0(r,...n){if(n.length){let e=typeof n[0],o=e==="string"||e==="number"?Array.prototype.slice.call(n):n[0];for(let i in o)r=r.replace(new RegExp("\\{"+i+"\\}","gi"),o[i])}return r}p($0,"formatString");function Y0(r,n){let e=Object.keys(r),o=Object.keys(n);if(e.length!==o.length)return!1;for(let i of e)if(!rr(r[i],n[i]))return!1;return!0}p(Y0,"deepObjectEquals");function rr(r,n){if(ae(r)&&ae(n)){if(r.length!==n.length)return!1;for(let e=0;e<r.length;e++)if(r[e]!==n[e])return!1;return!0}else return r===n}p(rr,"deepArrayEquals");var N=p(r=>Qe.union([r,Qe.undefined],r.name+" | undefined"),"typeOrUndefined"),eu=p(r=>Qe.union([r,Qe.null],r.name+" | null"),"typeOrNull");function Fn(r,n,e){let o=n.decode(r);if((0,F0.isLeft)(o)){console.warn(`ERROR while parsing ${e} from %o -> %s: `,r,I0.PathReporter.report(o).join("; "));return}return o.right}p(Fn,"validateJson");var We="Z";function be(r){return r===We}p(be,"isHighImpedance");var I="?";function U(r){return r===I}p(U,"isUnknown");var iv=new Qe.Type("Unknown",U,(r,n)=>U(r)?Qe.success(r):Qe.failure(r,n),Qe.identity),Xe={invert(r){return U(r)||be(r)?r:!r},filterHighZ(r){return be(r)?I:r}},Wr=new Qe.Type("0|1|?|Z",r=>U(r)||be(r)||r===1||r===0,(r,n)=>U(r)?Qe.success(r):be(r)?Qe.success(r):r===1?Qe.success(1):r===0?Qe.success(0):Qe.failure(r,n),Qe.identity);function nt(r){switch(r){case!0:return 1;case!1:return 0;case I:return I;case We:return We;case void 0:return}}p(nt,"toLogicValueRepr");function ko(r){switch(r){case 1:return!0;case 0:return!1;case I:return I;case We:return We;case void 0:return}}p(ko,"toLogicValue");function X0(r){switch(r){case"1":return!0;case"0":return!1;case I:return I;case We:return We;default:return I}}p(X0,"toLogicValueFromChar");var ks=Qe.union([Wr,Qe.string,Qe.array(Wr)]);function tu(r){for(let n of r)if(n!==!0&&n!==!1)return!1;return!0}p(tu,"allBooleans");function Bi(r){for(let n of r)if(n!=="0")return!1;return!0}p(Bi,"isAllZeros");function po(r){return r.map(nt).reverse().join("")}p(po,"binaryStringRepr");function Fc(r){return r.length===1?nt(r[0]):po(r)}p(Fc,"valuesReprForTest");function nu(r,n){let e=po(r);return parseInt(e,2).toString(16).toUpperCase().padStart(n,"0")}p(nu,"hexStringRepr");function ou(r,n){let i=r.length===n?r:parseInt(r,16).toString(2).padStart(n,"0"),s=Array(n);for(let a=0;a<n;a++)s[a]=X0(i[n-a-1]);return s}p(ou,"valuesFromBinaryOrHexRepr");function Ni(r,n){return r===void 0||Z(r)&&r.length===0?j(!1,n):ae(r)?N0(r.map(e=>ko(e)),n,!1):An(r)?j(ko(r),n):N0(Array.from(r).reverse().map(e=>X0(e)),n,!1)}p(Ni,"valuesFromReprForInput");function Lo(r,n){let e=r.length;if(e===1){let o=r[0];return n&&o===!1?void 0:nt(o)}if(n){let o=!1;for(let i=0;i<e;i++)if(r[i]!==!1){o=!0;break}if(!o)return}return r.map(nt).reverse().join("")}p(Lo,"reprForLogicValues");async function Ic(r){try{return await navigator.clipboard.writeText(r),console.log("Text copied to clipboard with new API"),!0}catch(i){}function n(){return navigator.userAgent.match(/ipad|iphone/i)}p(n,"isOS");let e=document.createElement("textarea");if(e.readOnly=!0,e.contentEditable="true",e.value=r,document.body.appendChild(e),n()){let i=document.createRange();i.selectNodeContents(e);let s=window.getSelection();s!==null&&(s.removeAllRanges(),s.addRange(i),e.setSelectionRange(0,999999))}else e.select();let o=document.execCommand("copy");return document.body.removeChild(e),o}p(Ic,"copyToClipboard");async function j0(){try{let o=await navigator.clipboard.readText();return console.log("Text pasted from clipboard with new API"),o}catch(o){}let r=document.createElement("textarea");r.readOnly=!1,r.contentEditable="true",document.body.appendChild(r);let n;return r.focus(),document.execCommand("paste")&&r.value.length>0&&(n=r.value),document.body.removeChild(r),n}p(j0,"pasteFromClipboard");function ir(r){let n=r.composedPath(),e,o;return n.length!==0&&(e=n[0])instanceof HTMLElement&&((o=e.tagName)==="INPUT"||o==="SELECT")}p(ir,"targetIsFieldOrOtherInput");function Q0(r){let n=getComputedStyle(r),e=n.position==="absolute",o=/(auto|scroll)/;if(n.position==="fixed")return document;let i;for(i=r;i=i.parentElement;)if(n=getComputedStyle(i),!(e&&n.position==="static")&&o.test(n.overflow+n.overflowY+n.overflowX))return i;return document}p(Q0,"getScrollParent");var sv=(r=>n=>new Promise(e=>{let o=document.createElement("script"),i=`_jsonp_${r++}`;n.match(/\?/)?n+=`&callback=${i}`:n+=`?callback=${i}`,o.src=n,window[i]=s=>{o.remove(),delete window[i],e(Mc.default.stringify(s))},document.body.appendChild(o)}))(0);var Fi=6;function kc(r,n){var i;let e=Number((i=r.v)!=null?i:0),o=e;if(o>Fi)throw new Error(`Data format v${o} is newer than what this editor can load (v \u2264 ${Fi}`);for(;e<Fi;){let s=bD[++e];s(r);let a=r.defs;if(ae(a))for(let u of a){let l=u.circuit;Kt(l)&&s(l)}r.v=e}if(e!==o){let s=Pe.stringifyObject(r,!1),a=n!==void 0?` for editor '${n}'`:"";console.log(`LogicEditor${a} migrated data format from v${o} to v${e}, consider upgrading its source to this:
${s}`)}}p(kc,"migrateData");var bD={6:r=>{let n={in:"in",out:"out",gates:"gate",ic:"ic",labels:"label",layout:"layout"},e={in:"in","in.clock":"clock","in.random":"rand",out:"out","out.display":"display","out.7seg":"7seg","out.16seg":"16seg","out.ascii":"ascii","out.bar":"bar","out.shift-buffer":"shift-display","out.shift-register":"shift-reg","ic.switched-inverter":"cnot-array","ic.gate-array":"{gatetype}-array","ic.tristate-array":"tristate-array",label:"label","label.rect":"rect","layout.pass":"pass","ic.halfadder":"halfadder","ic.adder":"adder","ic.comparator":"comp","ic.adder-array":"adder-array","ic.alu":"alu","ic.mux":"mux","ic.demux":"demux","ic.latch-sr":"latch-sr","ic.flipflop-jk":"ff-jk","ic.flipflop-t":"ff-t","ic.flipflop-d":"ff-d","ic.register":"reg","ic.shift-register":"shift-reg","ic.counter":"counter","ic.ram":"ram","ic.rom":"rom","ic.decoder":"dec","ic.decoder-7seg":"dec-7seg","ic.decoder-16seg":"dec-16seg","ic.decoder-bcd4":"dec-bcd4"};function o(s,a){if(s==="gate"){if(!Z(a.type))return console.warn("Gate with no type found, assuming AND",a),"and";let u=a.type.toLowerCase();return u==="tri"?"tristate":u}else{let u=Z(a.type)?`${s}.${a.type}`:s;if(u==="ic.gate-array"){let l;return Z(a.subtype)?l=a.subtype.toLowerCase():(console.warn("Gate array with no subtype found, assuming AND",a),l="and"),delete a.subtype,`${l}-array`}else return u in e?e[u]:u.startsWith("ic.custom-")?u.substring(3):(console.error(`Unknown component type: ${u}`),u)}}p(o,"newTypeFor");let i=[];for(let[s,a]of Object.entries(n)){let u=r[s];if(ae(u)){for(let l of u)if(Kt(l)){let c=o(a,l);l.type=c,a==="gate"&&Z(l.poseAs)&&(l.poseAs=l.poseAs.toLowerCase()),i.push(l)}}delete r[s]}r.components=i},5:r=>{var l,c,d,h,m,f,g,D,y,w,x,S,T,A;let n,e,o=r.in;if(ae(o))for(let P of o)Z(n=P.type)&&(n==="nibble"?(delete P.type,P.bits=4):n==="byte"&&(delete P.type,P.bits=8));let i=r.out;if(ae(i))for(let P of i)Z(n=P.type)&&(n==="nibble"?(delete P.type,P.bits=4):n==="byte"?(delete P.type,P.bits=8):n==="nibble-display"?(P.type="display",P.bits=4):n==="byte-display"?(P.type="display",P.bits=8):n==="shiftbuffer"&&(P.type="shift-buffer"));let s=r.gates;if(ae(s)){for(let P of s)if(Z(n=P.type)){let R=n[n.length-1],L=parseInt(R);isNaN(L)||(P.bits=L,P.type=n.slice(0,-1))}}let a=r.components;if(ae(a)){let P=/^ram-(?<lines>\d+)x(?<bits>\d+)$/,R=/^mux-(?<from>\d+)to(?<to>\d+)$/,L=/^demux-(?<from>\d+)to(?<to>\d+)$/;for(let O of a)if(Z(n=O.type))if(n==="register"){let G;if(ae(G=O.state)){let B=po(G.map(ko));Bi(B)||(O.content=B),delete O.state}}else n==="quad-gate"?O.type="gate-array":n==="quad-tristate"?O.type="tristate-array":(e=P.exec(n))!==null?(O.type="ram",O.bits=parseInt((c=(l=e.groups)==null?void 0:l.bits)!=null?c:"4"),O.lines=parseInt((h=(d=e.groups)==null?void 0:d.lines)!=null?h:"16")):(e=R.exec(n))!==null?(O.type="mux",O.from=parseInt((f=(m=e.groups)==null?void 0:m.from)!=null?f:"8"),O.to=parseInt((D=(g=e.groups)==null?void 0:g.to)!=null?D:"4")):(e=L.exec(n))!==null&&(O.type="demux",O.from=parseInt((w=(y=e.groups)==null?void 0:y.from)!=null?w:"4"),O.to=parseInt((S=(x=e.groups)==null?void 0:x.to)!=null?S:"8"));r.ic=a,delete r.components}let u=r.layout;if(ae(u)){let P=/^pass-(?<bits>\d+)$/;for(let R of u)Z(n=R.type)&&(e=P.exec(n))!==null&&(R.type="pass",R.bits=parseInt((A=(T=e.groups)==null?void 0:T.bits)!=null?A:"1"))}},4:r=>{let n=K0(r),e=r.out;if(ae(e))for(let i of e)i.type==="nibble"&&(i.type="nibble-display");let o=r.components;if(ae(o)){for(let i of o)if(i.type==="alu"&&ae(i.out)){i.out.push(n++);let s=i.out[4];i.out[4]=i.out[6],i.out[6]=s}}},3:r=>{let n=K0(r),e=r.components;if(ae(e))for(let o of e)o.type==="alu"&&ae(o.in)&&o.in.push(n++)},2:r=>{let n=r.wires;if(ae(n)){for(let e of n)if(ae(e)&&e.length===3){let o=e[2];"waypoints"in o&&(o.via=o.waypoints,delete o.waypoints)}}},1:r=>{if("displays"in r){let e=r.displays;if(delete r.displays,"out"in r||(r.out=[]),ae(e)&&ae(r.out))for(let o of e)r.out.push(o)}if("clocks"in r){let e=r.clocks;if(delete r.clocks,"in"in r||(r.in=[]),ae(e)&&ae(r.in))for(let o of e)o.type="clock",r.in.push(o)}let n=r.components;if(ae(n))for(let e of n){let o;if(Z(o=e.type)&&o.startsWith("flipflop")){let i=e.in,s=i.splice(-3);e.in=[...s,...i]}}}};function K0(r){let n=-1;function e(i){for(let s of["id","in","out"])o(i[s])}p(e,"inspectComponentDef");function o(i){if(i!==void 0)if(typeof i=="number")!isNaN(i)&&isFinite(i)&&(n=Math.max(n,i));else if(typeof i=="string")for(let s of i.split("-"))o(parseInt(s));else if(ae(i))for(let s of i)o(s);else typeof i=="object"&&i!==null&&o(i.id)}p(o,"inspectValue");for(let i of Object.keys(r)){let s=r[i];if(s!==void 0&&ae(s))for(let a of s)e(a)}return n+1}p(K0,"findFirstFreeId");var st=pe(_e());var Z0='<svg viewBox="0 0 20 20"><path d="M10 14.167Q10.354 14.167 10.615 13.906Q10.875 13.646 10.875 13.292V10.875H13.312Q13.667 10.875 13.917 10.625Q14.167 10.375 14.167 10Q14.167 9.646 13.906 9.385Q13.646 9.125 13.292 9.125H10.875V6.688Q10.875 6.333 10.625 6.083Q10.375 5.833 10 5.833Q9.646 5.833 9.385 6.094Q9.125 6.354 9.125 6.708V9.125H6.688Q6.333 9.125 6.083 9.375Q5.833 9.625 5.833 10Q5.833 10.354 6.094 10.615Q6.354 10.875 6.708 10.875H9.125V13.312Q9.125 13.667 9.375 13.917Q9.625 14.167 10 14.167ZM10 18.333Q8.271 18.333 6.75 17.677Q5.229 17.021 4.104 15.896Q2.979 14.771 2.323 13.25Q1.667 11.729 1.667 10Q1.667 8.271 2.323 6.75Q2.979 5.229 4.104 4.104Q5.229 2.979 6.75 2.323Q8.271 1.667 10 1.667Q11.729 1.667 13.25 2.323Q14.771 2.979 15.896 4.104Q17.021 5.229 17.677 6.75Q18.333 8.271 18.333 10Q18.333 11.729 17.677 13.25Q17.021 14.771 15.896 15.896Q14.771 17.021 13.25 17.677Q11.729 18.333 10 18.333Z"/></svg>';var J0='<svg viewBox="0 0 20 20"><path d="M3.417 20q-.729 0-1.24-.51-.51-.511-.51-1.24t.51-1.24q.511-.51 1.24-.51h13.166q.729 0 1.24.51.51.511.51 1.24t-.51 1.24q-.511.51-1.24.51Zm1.125-5.021q-.354 0-.615-.26-.26-.261-.26-.615v-2.042q0-.166.062-.322.063-.157.188-.282l7.021-7.02 3.27 3.27-7.02 7.021q-.126.125-.282.188-.156.062-.323.062Zm10.729-8.333L12 3.375l1.458-1.458q.25-.25.646-.25t.646.25L16.833 4q.229.229.177.594-.052.364-.281.594Z"/></svg>';var e1='<svg viewBox="0 0 20 20"><path d="M10,.6h.3c0,0,.2,0,.3.2l2.6,2.6c.2.2.3.3.3.5s0,.3-.3.5-.3.3-.5.3-.3,0-.5-.3l-1.3-1.3v4.9c0,.2,0,.3-.3.5-.2.2-.3.3-.5.3s-.3,0-.5-.3c-.2-.2-.3-.3-.3-.5V3.1l-1.3,1.3c-.2.2-.3.3-.5.3s-.3,0-.5-.3-.3-.3-.3-.5,0-.3.3-.5l2.6-2.6s.2-.2.3-.2.2,0,.3,0Z"/><path d="M18.1,6.2c-.3-.3-.8-.5-1.2-.5h-3.6v3.5h3.6v8.7H3v-8.7h3.6v-3.5h-3.6c-.4,0-.9.2-1.2.5s-.5.8-.5,1.2v10.4c0,.4.2.9.5,1.2s.8.5,1.2.5h13.9c.4,0,.9-.2,1.2-.5s.5-.8.5-1.2V7.4c0-.4-.2-.9-.5-1.2Z"/></svg>';var t1='<svg viewBox="0 0 20 20"><path d="M7.979 14.646Q7.812 14.646 7.656 14.583Q7.5 14.521 7.354 14.375L3.833 10.854Q3.583 10.604 3.594 10.219Q3.604 9.833 3.854 9.583Q4.104 9.333 4.479 9.333Q4.854 9.333 5.104 9.583L8.021 12.5L14.917 5.604Q15.167 5.354 15.531 5.354Q15.896 5.354 16.146 5.604Q16.396 5.854 16.396 6.219Q16.396 6.583 16.146 6.833L8.604 14.375Q8.458 14.521 8.302 14.583Q8.146 14.646 7.979 14.646Z"/></svg>';var n1='<svg viewBox="0 0 20 20"><path d="M10 11.229 5.979 15.25q-.25.25-.604.24-.354-.011-.604-.261t-.25-.614q0-.365.25-.615l4-4L4.75 5.979q-.25-.25-.24-.614.011-.365.261-.615t.614-.25q.365 0 .615.25l4 4.021 4.021-4.021q.25-.25.614-.25.365 0 .615.25t.25.615q0 .364-.25.614L11.229 10l4.021 4.021q.25.25.25.604t-.25.604q-.25.25-.615.25-.364 0-.614-.25Z"/></svg>';var o1='<svg viewBox="0 96 960 960"><path d="M744 912q-41 0-72-24t-42-60H396q-55 0-93.5-38.5T264 696q0-55 38.5-93.5T396 564h120q34.65 0 59.325-24.748Q600 514.504 600 479.752 600 445 575.325 420.5T516 396H330q-11 36-42 60t-72 24q-50 0-85-35t-35-85q0-50 35-85t85-35q41 0 72 24t42 60h186q65 0 110.5 45.5T672 480q0 65-45.5 110.5T516 636H396q-24.75 0-42.375 17.677T336 696.177Q336 721 353.625 738.5T396 756h234q11-36 42-60t72-24q50 0 85 35t35 85q0 50-35 85t-85 35ZM216 408q20.4 0 34.2-13.8Q264 380.4 264 360q0-20.4-13.8-34.2Q236.4 312 216 312q-20.4 0-34.2 13.8Q168 339.6 168 360q0 20.4 13.8 34.2Q195.6 408 216 408Z" transform="rotate(180 480 590)"/></svg>';var r1=`<svg viewBox="0 0 20 20"><path d="M10 8.396q-.354 0-.615-.261-.26-.26-.26-.614V5.125l-.792.792q-.271.271-.635.26-.365-.01-.636-.281-.27-.271-.27-.646t.27-.646l2.313-2.312q.146-.146.302-.209.156-.062.323-.062t.323.062q.156.063.302.209l2.333 2.333q.271.271.261.635-.011.365-.281.636-.271.271-.646.271t-.646-.271l-.771-.771v2.396q0 .354-.26.614-.261.261-.615.261Zm0 9.583q-.167 0-.323-.062-.156-.063-.302-.209l-2.333-2.333q-.271-.271-.261-.635.011-.365.281-.636.271-.271.646-.271t.646.271l.771.771v-2.396q0-.354.26-.614.261-.261.615-.261t.615.261q.26.26.26.614v2.396l.792-.792q.271-.271.635-.26.365.01.636.281.27.271.27.646t-.27.646l-2.313 2.312q-.146.146-.302.209-.156.062-.323.062Zm4.104-5.041q-.271-.271-.271-.646t.271-.646l.771-.771h-2.396q-.354 0-.614-.26-.261-.261-.261-.615t.261-.615q.26-.26.614-.26h2.396l-.792-.792q-.271-.271-.26-.635.01-.365.281-.636.271-.27.646-.27t.646.27l2.312 2.313q.146.146.209.302.062.156.062.323t-.062.323q-.063.156-.209.302l-2.333 2.333q-.271.271-.635.261-.365-.011-.636-.281Zm-9.5 0-2.312-2.313q-.146-.146-.209-.302-.062-.156-.062-.323t.062-.323q.063-.156.209-.302l2.333-2.333q.271-.271.635-.261.365.011.636.281.271.271.271.646t-.271.646l-.771.771h2.396q.354 0 .614.26.261.261.261.615t-.261.615q-.26.26-.614.26H5.125l.792.792q.271.271.26.635-.01.365-.281.636-.271.27-.646.27t-.646-.27Z"/></svg>
`;var i1='<svg viewBox="0 0 20 20"><path d="M10.625 12.771 12.771 10.625Q13.042 10.354 13.042 10Q13.042 9.646 12.771 9.375L10.604 7.208Q10.354 6.958 10 6.958Q9.646 6.958 9.396 7.208Q9.125 7.479 9.125 7.833Q9.125 8.188 9.396 8.438L10.062 9.125H7.479Q7.125 9.125 6.875 9.385Q6.625 9.646 6.625 10Q6.625 10.354 6.885 10.615Q7.146 10.875 7.5 10.875H10.062L9.375 11.562Q9.125 11.812 9.125 12.167Q9.125 12.521 9.396 12.771Q9.646 13.042 10 13.042Q10.354 13.042 10.625 12.771ZM10 18.333Q8.271 18.333 6.75 17.677Q5.229 17.021 4.104 15.896Q2.979 14.771 2.323 13.25Q1.667 11.729 1.667 10Q1.667 8.271 2.323 6.75Q2.979 5.229 4.104 4.104Q5.229 2.979 6.75 2.323Q8.271 1.667 10 1.667Q11.729 1.667 13.25 2.323Q14.771 2.979 15.896 4.104Q17.021 5.229 17.677 6.75Q18.333 8.271 18.333 10Q18.333 11.729 17.677 13.25Q17.021 14.771 15.896 15.896Q14.771 17.021 13.25 17.677Q11.729 18.333 10 18.333Z"/></svg>';var s1='<svg viewBox="0 0 20 20"><path d="M10 12.917q-.167 0-.323-.063-.156-.062-.302-.208L6.333 9.604q-.271-.271-.271-.625t.271-.625q.271-.271.625-.271t.625.271l1.542 1.542V4.208q0-.354.26-.614.261-.261.615-.261t.615.261q.26.26.26.614v5.688l1.542-1.542q.271-.271.625-.271t.625.271q.271.271.271.625t-.271.625l-3.042 3.042q-.146.146-.302.208-.156.063-.323.063Zm-4.917 3.75q-.729 0-1.239-.511-.511-.51-.511-1.239v-1.542q0-.354.261-.615.26-.26.614-.26t.615.26q.26.261.26.615v1.542h9.834v-1.542q0-.354.26-.615.261-.26.615-.26t.614.26q.261.261.261.615v1.542q0 .729-.511 1.239-.51.511-1.239.511Z"/></svg>';var a1='<svg viewBox="0 0 20 20"><path d="m16.188 7.542-3.73-3.73 1.021-1.02q.521-.521 1.24-.521t1.239.521l1.25 1.25q.5.5.5 1.239 0 .74-.5 1.24ZM3.375 17.5q-.354 0-.615-.26-.26-.261-.26-.615v-2.5q0-.167.062-.323.063-.156.188-.281l8.479-8.479 3.729 3.729-8.479 8.479q-.125.125-.281.188-.156.062-.323.062Z"/></svg>';var u1='<svg height="20px" viewBox="0 -860 960 960" width="20px"><path d="M480-312q70 0 119-49t49-119q0-70-49-119t-119-49q-70 0-119 49t-49 119q0 70 49 119t119 49Zm0-72q-40 0-68-28t-28-68q0-40 28-68t68-28q40 0 68 28t28 68q0 40-28 68t-68 28Zm0 192q-130 0-239-69.5T68-445q-5-8-7-16.77t-2-18Q59-489 61-498t7-17q64-114 173-183.5T480-768q130 0 239 69.5T892-515q5 8 7 16.77t2 18q0 9.23-2 18.23t-7 17q-64 114-173 183.5T480-192Z"/></svg>';var l1='<svg height="20px" viewBox="0 -860 960 960" width="20px"><path d="M743-116 638-220q-38 12-77.5 20t-80.5 8q-131 0-240.5-69T67-445q-5-8-7-17t-2-18q0-9 2.5-18t7.5-17q25-43 54.5-82.5T190-669l-75-75q-11-11-11-25t11-25q11-11 25.5-11t25.5 11l628 628q11 11 11 25t-11 25q-11 11-25.5 11T743-116ZM480-312q14 0 28-3t28-7L322-536q-3 14-6.5 28t-3.5 28q0 70 49 119t119 49Zm0-456q131 0 241 69t173 185q5 8 7 16.5t2 17.5q0 9-2.5 17.5T894-446q-19 35-42 67t-52 60q-12 12-29 11.5T742-320l-91-91q-6-6-8-15t0-17q2-9 3.5-18.5T648-480q0-70-49-119t-119-49q-10 0-19 1.5t-18 3.5q-8 2-16.5 0t-14.5-8l-41-41q-17-17-11-40t29-28q23-5 45.5-6.5T480-768Zm73 217q8 8 13 17.5t7 20.5q2 7-4.5 10t-11.5-2l-51-52q-5-5-2-11.5t10-5.5q11 3 21 9t18 14Z"/></svg>';var c1='<svg viewBox="0 0 20 20"><path d="M7.083 16.667q-.541 0-.916-.375t-.375-.917V5.917H2.958q-.541 0-.916-.375t-.375-.917q0-.542.375-.917t.916-.375h8.25q.542 0 .917.375t.375.917q0 .542-.375.917t-.917.375H8.375v9.458q0 .542-.375.917t-.917.375Zm7.5 0q-.541 0-.916-.375t-.375-.917v-5.292h-1.167q-.542 0-.917-.375t-.375-.916q0-.542.375-.917t.917-.375h4.917q.541 0 .916.375t.375.917q0 .541-.375.916t-.916.375h-1.167v5.292q0 .542-.375.917t-.917.375Z"/></svg>';var p1='<svg viewBox="0 0 20 20"><path d="M10 17.5Q9.292 17.5 8.792 17Q8.292 16.5 8.292 15.792Q8.292 15.083 8.792 14.583Q9.292 14.083 10 14.083Q10.708 14.083 11.208 14.583Q11.708 15.083 11.708 15.792Q11.708 16.5 11.208 17Q10.708 17.5 10 17.5ZM10 12.5Q9.292 12.5 8.792 12Q8.292 11.5 8.292 10.792V4.208Q8.292 3.5 8.792 3Q9.292 2.5 10 2.5Q10.708 2.5 11.208 3Q11.708 3.5 11.708 4.208V10.792Q11.708 11.5 11.208 12Q10.708 12.5 10 12.5Z"/></svg>';var d1=`<svg viewBox="0 0 20 20"><path d="M3,7.6c0.3,0.3,0.6,0.5,0.9,0.6c0.4,0.2,0.7,0.2,1.1,0.2s0.8-0.1,1.1-0.2c0.4-0.2,0.7-0.4,0.9-0.6C7.4,7.3,7.6,7,7.8,6.7
		c0,0,0-0.1,0-0.1h9.8v-2H7.8c0,0,0-0.1,0-0.1C7.6,4,7.4,3.7,7.1,3.5C6.9,3.2,6.6,3,6.2,2.8c-0.7-0.3-1.6-0.3-2.3,0
		C3.6,3,3.3,3.2,3,3.5C2.8,3.7,2.5,4,2.4,4.4C2.2,4.7,2.2,5.1,2.2,5.5c0,0.4,0.1,0.8,0.2,1.1C2.5,7,2.8,7.3,3,7.6z M3.5,4.9
		c0.1-0.2,0.2-0.4,0.4-0.5C4,4.2,4.2,4,4.4,3.9c0.2-0.1,0.4-0.1,0.7-0.1s0.5,0,0.7,0.1C6,4,6.1,4.2,6.3,4.3c0.2,0.2,0.3,0.3,0.4,0.5
		c0.1,0.2,0.1,0.4,0.1,0.7c0,0.2,0,0.5-0.1,0.7C6.6,6.4,6.5,6.6,6.3,6.7C6.1,6.9,6,7,5.7,7.1c-0.4,0.2-0.9,0.2-1.3,0
		C4.2,7,4,6.9,3.9,6.7C3.7,6.6,3.6,6.4,3.5,6.2C3.4,6,3.4,5.8,3.4,5.5C3.4,5.3,3.4,5.1,3.5,4.9z"/><path d="M17.6,13.5H7.8c0,0,0-0.1,0-0.1c-0.2-0.4-0.4-0.7-0.6-0.9s-0.6-0.5-0.9-0.6c-0.7-0.3-1.6-0.3-2.3,0
		c-0.3,0.2-0.7,0.4-0.9,0.6c-0.3,0.3-0.5,0.6-0.6,0.9c-0.2,0.4-0.2,0.7-0.2,1.1c0,0.4,0.1,0.8,0.2,1.1C2.5,16,2.8,16.3,3,16.5
		c0.3,0.3,0.6,0.5,0.9,0.6c0.4,0.2,0.7,0.2,1.1,0.2s0.8-0.1,1.1-0.2c0.3-0.2,0.7-0.4,0.9-0.6c0.3-0.3,0.5-0.6,0.6-0.9
		c0,0,0-0.1,0-0.1h9.8V13.5z M6.7,15.1c-0.1,0.2-0.2,0.4-0.4,0.5C6.1,15.8,6,16,5.7,16c-0.4,0.2-0.9,0.2-1.3,0
		C4.2,16,4,15.8,3.9,15.7c-0.2-0.2-0.3-0.3-0.4-0.5c-0.1-0.2-0.1-0.4-0.1-0.7c0-0.2,0-0.5,0.1-0.7c0.1-0.2,0.2-0.4,0.4-0.5
		C4,13.1,4.2,13,4.4,12.9c0.2-0.1,0.4-0.1,0.7-0.1s0.5,0,0.7,0.1C6,13,6.1,13.1,6.3,13.2c0.2,0.2,0.3,0.3,0.4,0.5
		c0.1,0.2,0.1,0.4,0.1,0.7C6.8,14.7,6.8,14.9,6.7,15.1z"/></svg>`;var h1='<svg viewBox="0 0 20 20"><path d="M5.833 14.167q-1.729 0-2.948-1.219Q1.667 11.729 1.667 10q0-1.729 1.218-2.948 1.219-1.219 2.948-1.219H8.25q.354 0 .615.261.26.26.26.614t-.26.615q-.261.26-.615.26H5.833q-1.041 0-1.729.688-.687.687-.687 1.729t.687 1.729q.688.688 1.729.688H8.25q.354 0 .615.26.26.261.26.615t-.26.614q-.261.261-.615.261Zm1.709-3.292q-.354 0-.615-.26-.26-.261-.26-.615t.26-.615q.261-.26.615-.26h4.916q.354 0 .615.26.26.261.26.615t-.26.615q-.261.26-.615.26Zm4.208 3.292q-.354 0-.615-.261-.26-.26-.26-.614t.26-.615q.261-.26.615-.26h2.417q1.041 0 1.729-.688.687-.687.687-1.729t-.687-1.729q-.688-.688-1.729-.688H11.75q-.354 0-.615-.26-.26-.261-.26-.615t.26-.614q.261-.261.615-.261h2.417q1.729 0 2.948 1.219Q18.333 8.271 18.333 10q0 1.729-1.218 2.948-1.219 1.219-2.948 1.219Z"/></svg>';var f1=`<svg viewBox="0 0 20 20"><path d="M2.1,8.2H0.6V6.8h0.1c0.5,0,0.9-0.1,1.1-0.4c0.3-0.3,0.5-0.7,0.5-1.3h1.1v10.4H2.1V8.2z"/><path d="M5.3,8.6c0-0.7,0.1-1.3,0.3-1.8c0.1-0.5,0.4-0.9,0.7-1.2c0.3-0.3,0.7-0.5,1.2-0.5c0.4,0,0.8,0.1,1.1,0.3
		C8.8,5.6,9,5.9,9.2,6.3c0.2,0.4,0.3,0.9,0.4,1.6c0.1,0.6,0.1,1.4,0.1,2.3c0,0.7,0,1.4,0,2.1c0,0.7-0.1,1.3-0.3,1.8
		c-0.1,0.5-0.4,0.9-0.7,1.2c-0.3,0.3-0.7,0.4-1.2,0.4c-0.4,0-0.8-0.1-1.1-0.2c-0.3-0.2-0.5-0.4-0.7-0.8c-0.2-0.4-0.3-0.9-0.4-1.6
		c-0.1-0.6-0.1-1.4-0.1-2.3C5.2,10,5.2,9.3,5.3,8.6z M6.7,12.7c0,0.4,0.1,0.7,0.1,1C6.9,14,6.9,14.1,7,14.2c0.1,0.1,0.2,0.1,0.4,0.1
		c0.2,0,0.3-0.1,0.4-0.2C7.9,14.1,8,13.9,8,13.6c0.1-0.3,0.1-0.6,0.1-1.1c0-0.4,0-1,0-1.7V9.7c0-0.7,0-1.2,0-1.6
		c0-0.4-0.1-0.7-0.1-1C8,6.9,7.9,6.8,7.8,6.7C7.7,6.6,7.6,6.5,7.4,6.5C7.3,6.5,7.1,6.6,7,6.7C6.9,6.8,6.9,7,6.8,7.3
		C6.7,7.5,6.7,7.9,6.7,8.3c0,0.4,0,1,0,1.7v1.1C6.6,11.8,6.7,12.3,6.7,12.7z"/><path d="M11.6,8.2h-1.4V6.8h0.1c0.5,0,0.9-0.1,1.1-0.4c0.3-0.3,0.5-0.7,0.5-1.3h1.1v10.4h-1.4V8.2z"/><path d="M14.8,8.6c0-0.7,0.1-1.3,0.3-1.8s0.4-0.9,0.7-1.2c0.3-0.3,0.7-0.5,1.2-0.5c0.4,0,0.8,0.1,1.1,0.3c0.3,0.2,0.5,0.5,0.7,0.9
		c0.2,0.4,0.3,0.9,0.4,1.6c0.1,0.6,0.1,1.4,0.1,2.3c0,0.7,0,1.4,0,2.1c0,0.7-0.1,1.3-0.3,1.8c-0.1,0.5-0.4,0.9-0.7,1.2
		c-0.3,0.3-0.7,0.4-1.2,0.4c-0.4,0-0.8-0.1-1.1-0.2c-0.3-0.2-0.5-0.4-0.7-0.8c-0.2-0.4-0.3-0.9-0.4-1.6c-0.1-0.6-0.1-1.4-0.1-2.3
		C14.8,10,14.8,9.3,14.8,8.6z M16.3,12.7c0,0.4,0.1,0.7,0.1,1c0.1,0.2,0.1,0.4,0.2,0.5c0.1,0.1,0.2,0.1,0.4,0.1
		c0.2,0,0.3-0.1,0.4-0.2c0.1-0.1,0.2-0.3,0.2-0.6c0.1-0.3,0.1-0.6,0.1-1.1c0-0.4,0-1,0-1.7V9.7c0-0.7,0-1.2,0-1.6
		c0-0.4-0.1-0.7-0.1-1c-0.1-0.2-0.1-0.4-0.2-0.5c-0.1-0.1-0.2-0.1-0.4-0.1c-0.2,0-0.3,0.1-0.4,0.2c-0.1,0.1-0.2,0.3-0.2,0.6
		c-0.1,0.3-0.1,0.6-0.1,1.1c0,0.4,0,1,0,1.7v1.1C16.2,11.8,16.2,12.3,16.3,12.7z"/></svg>`;var m1=`<svg viewBox="0 0 20 20"><path d="M6.4,6h11.8c0.2,0,0.4-0.1,0.5-0.3C18.9,5.5,19,5.3,19,5.1s-0.1-0.4-0.3-0.6c-0.2-0.2-0.4-0.3-0.5-0.3H6.4
		C6.2,4.2,6,4.3,5.9,4.5C5.7,4.7,5.6,4.8,5.6,5.1s0.1,0.5,0.3,0.6C6,5.9,6.1,6,6.4,6z"/><path d="M18.2,7.7H6.4C6.2,7.7,6,7.8,5.9,8C5.7,8.2,5.6,8.3,5.6,8.6c0,0.3,0.1,0.5,0.3,0.6C6,9.4,6.1,9.5,6.4,9.5h11.8
		c0.2,0,0.4-0.1,0.5-0.3S19,8.8,19,8.6c0-0.2-0.1-0.4-0.3-0.6S18.4,7.7,18.2,7.7z"/><path d="M18.2,11.2H6.4c-0.2,0-0.4,0.1-0.5,0.3c-0.2,0.2-0.3,0.3-0.3,0.6c0,0.3,0.1,0.5,0.3,0.6C6,12.9,6.1,13,6.4,13h11.8
		c0.2,0,0.4-0.1,0.5-0.3s0.3-0.4,0.3-0.6c0-0.2-0.1-0.4-0.3-0.6S18.4,11.2,18.2,11.2z"/><path d="M18.2,14.7H6.4c-0.2,0-0.4,0.1-0.5,0.3c-0.2,0.2-0.3,0.3-0.3,0.6s0.1,0.5,0.3,0.6c0.1,0.2,0.3,0.3,0.5,0.3h11.8
		c0.2,0,0.4-0.1,0.5-0.3c0.2-0.2,0.3-0.4,0.3-0.6s-0.1-0.4-0.3-0.6C18.6,14.8,18.4,14.7,18.2,14.7z"/><path d="M0.3,7.2L5.3,5L0.2,2.7C1.6,4.4,1.6,5.7,0.3,7.2z"/></svg>`;var g1='<svg viewBox="0 0 20 20"><polygon points="5.1,14.7 5.1,1 15,11.1 10.5,11.1 13.3,17.6 11,18.6 8.1,11.8 " fill="currentColor"/></svg>';var D1='<svg viewBox="0 0 20 20"><path d="M10 8.396q-.354 0-.615-.261-.26-.26-.26-.614V5.125l-.792.792q-.271.271-.635.26-.365-.01-.636-.281-.27-.271-.27-.646t.27-.646l2.313-2.312q.146-.146.302-.209.156-.062.323-.062t.323.062q.156.063.302.209l2.333 2.333q.271.271.261.635-.011.365-.281.636-.271.271-.646.271t-.646-.271l-.771-.771v2.396q0 .354-.26.614-.261.261-.615.261Zm0 9.583q-.167 0-.323-.062-.156-.063-.302-.209l-2.333-2.333q-.271-.271-.261-.635.011-.365.281-.636.271-.271.646-.271t.646.271l.771.771v-2.396q0-.354.26-.614.261-.261.615-.261t.615.261q.26.26.26.614v2.396l.792-.792q.271-.271.635-.26.365.01.636.281.27.271.27.646t-.27.646l-2.313 2.312q-.146.146-.302.209-.156.062-.323.062Zm4.104-5.041q-.271-.271-.271-.646t.271-.646l.771-.771h-2.396q-.354 0-.614-.26-.261-.261-.261-.615t.261-.615q.26-.26.614-.26h2.396l-.792-.792q-.271-.271-.26-.635.01-.365.281-.636.271-.27.646-.27t.646.27l2.312 2.313q.146.146.209.302.062.156.062.323t-.062.323q-.063.156-.209.302l-2.333 2.333q-.271.271-.635.261-.365-.011-.636-.281Zm-9.5 0-2.312-2.313q-.146-.146-.209-.302-.062-.156-.062-.323t.062-.323q.063-.156.209-.302l2.333-2.333q.271-.271.635-.261.365.011.636.281.271.271.271.646t-.271.646l-.771.771h2.396q.354 0 .614.26.261.261.261.615t-.261.615q-.26.26-.614.26H5.125l.792.792q.271.271.26.635-.01.365-.281.636-.271.27-.646.27t-.646-.27Z"/></svg>';var b1='<svg viewBox="0 0 20 20"><path d="M3.2,1.8v16.5H17V1.8H3.2z M15.2,16.4H5V3.6h10.2V16.4z"/><polygon fill="currentColor" points="9.3,13 10.9,13 10.9,10.7 13.1,10.7 13.1,9.2 10.9,9.2 10.9,6.9 9.3,6.9 9.3,9.2 7.1,9.2 7.1,10.7 9.3,10.7"/></svg>';var y1=`<svg viewBox="0 0 20 20"></svg>
`;var v1='<svg viewBox="0 0 20 20"><path d="m17.667 18.083-1.792-1.791v.916q0 .354-.26.615-.261.26-.615.26t-.615-.26q-.26-.261-.26-.615v-3.041q0-.355.26-.615.261-.26.615-.26h3.042q.354 0 .614.26.261.26.261.615 0 .354-.261.614-.26.261-.614.261h-.938l1.813 1.812q.25.25.25.604t-.25.625q-.25.271-.615.271-.364 0-.635-.271ZM11.708 7.5h3.209l-4.084-4.083v3.208q0 .354.261.615.26.26.614.26ZM5.083 18.333q-.687 0-1.218-.531-.532-.531-.532-1.219V3.417q0-.688.532-1.219.531-.531 1.218-.531h5.855q.354 0 .677.135.323.136.573.386l3.958 3.958q.25.25.385.573.136.323.136.677v4.146h-2.542q-.729 0-1.24.51-.51.51-.51 1.24v5.041Z"/></svg>';var C1=`<svg viewBox="0 0 20 20"><path d="M12.6,6.6c0.2,0.4,0.4,0.7,0.7,1c0.2,0.2,0.6,0.4,0.9,0.6c0.3,0.1,0.7,0.2,1.1,0.2c0.4,0,0.8-0.1,1-0.3
		c0.3-0.1,0.6-0.3,0.9-0.6c0.2-0.2,0.4-0.6,0.6-0.9C17.9,6.3,18,5.9,18,5.5s0-0.8-0.2-1.1c-0.1-0.3-0.4-0.7-0.6-0.9
		s-0.6-0.4-0.9-0.6c-0.3-0.1-0.7-0.2-1.1-0.2c-0.4,0-0.8,0-1.1,0.2c-0.3,0.1-0.7,0.4-0.9,0.6s-0.4,0.6-0.6,0.9c0,0,0,0.1,0,0.1H2.8
		v2L12.6,6.6C12.6,6.5,12.6,6.6,12.6,6.6z"/><path d="M17.9,13.4c-0.1-0.3-0.4-0.7-0.6-0.9s-0.6-0.4-0.9-0.6c-0.3-0.1-0.7-0.2-1.1-0.2c-0.4,0-0.8,0.1-1.1,0.2
		c-0.3,0.1-0.7,0.4-0.9,0.6s-0.5,0.6-0.6,0.9c0,0,0,0.1,0,0.1H2.8v2h9.9c0,0,0,0.1,0,0.1c0.1,0.3,0.4,0.7,0.6,0.9s0.6,0.4,0.9,0.6
		c0.3,0.1,0.7,0.2,1.1,0.2c0.4,0,0.8-0.1,1.1-0.2c0.3-0.1,0.7-0.4,0.9-0.6s0.4-0.6,0.6-0.9c0.1-0.3,0.2-0.7,0.2-1.1
		S18.1,13.7,17.9,13.4z"/></svg>`;var w1='<svg viewBox="0 0 20 20"><path d="M9.958 18.333Q8.25 18.333 6.74 17.677Q5.229 17.021 4.104 15.885Q2.979 14.75 2.323 13.229Q1.667 11.708 1.667 10Q1.667 8.271 2.333 6.75Q3 5.229 4.156 4.104Q5.312 2.979 6.854 2.323Q8.396 1.667 10.125 1.667Q11.771 1.667 13.26 2.25Q14.75 2.833 15.875 3.854Q17 4.875 17.667 6.26Q18.333 7.646 18.333 9.25Q18.333 11.688 16.792 12.948Q15.25 14.208 13.188 14.208H11.75Q11.625 14.208 11.562 14.281Q11.5 14.354 11.5 14.458Q11.5 14.688 11.812 15.219Q12.125 15.75 12.125 16.458Q12.125 17.458 11.51 17.896Q10.896 18.333 9.958 18.333ZM5.458 10.875Q6 10.875 6.375 10.5Q6.75 10.125 6.75 9.583Q6.75 9.042 6.375 8.667Q6 8.292 5.458 8.292Q4.917 8.292 4.542 8.667Q4.167 9.042 4.167 9.583Q4.167 10.125 4.542 10.5Q4.917 10.875 5.458 10.875ZM7.917 7.583Q8.458 7.583 8.833 7.208Q9.208 6.833 9.208 6.292Q9.208 5.75 8.833 5.375Q8.458 5 7.917 5Q7.375 5 7 5.375Q6.625 5.75 6.625 6.292Q6.625 6.833 7 7.208Q7.375 7.583 7.917 7.583ZM12.021 7.583Q12.562 7.583 12.938 7.208Q13.312 6.833 13.312 6.292Q13.312 5.75 12.938 5.375Q12.562 5 12.021 5Q11.479 5 11.104 5.375Q10.729 5.75 10.729 6.292Q10.729 6.833 11.104 7.208Q11.479 7.583 12.021 7.583ZM14.479 10.875Q15.021 10.875 15.396 10.5Q15.771 10.125 15.771 9.583Q15.771 9.042 15.396 8.667Q15.021 8.292 14.479 8.292Q13.938 8.292 13.562 8.667Q13.188 9.042 13.188 9.583Q13.188 10.125 13.562 10.5Q13.938 10.875 14.479 10.875Z"/></svg>';var x1='<svg viewBox="0 0 20 20"><path d="M12.5 15.833q-.729 0-1.24-.51-.51-.511-.51-1.24V5.917q0-.729.51-1.24.511-.51 1.24-.51h1.583q.729 0 1.24.51.51.511.51 1.24v8.166q0 .729-.51 1.24-.511.51-1.24.51Zm-6.583 0q-.729 0-1.24-.51-.51-.511-.51-1.24V5.917q0-.729.51-1.24.511-.51 1.24-.51H7.5q.729 0 1.24.51.51.511.51 1.24v8.166q0 .729-.51 1.24-.511.51-1.24.51Z"/></svg>';var T1='<svg viewBox="0 0 20 20"><path d="M16.188 7.542 12.458 3.812 13.479 2.792Q14 2.271 14.719 2.271Q15.438 2.271 15.958 2.792L17.208 4.042Q17.708 4.542 17.708 5.281Q17.708 6.021 17.208 6.521ZM3.375 17.5Q3.021 17.5 2.76 17.24Q2.5 16.979 2.5 16.625V14.125Q2.5 13.958 2.562 13.802Q2.625 13.646 2.75 13.521L11.229 5.042L14.958 8.771L6.479 17.25Q6.354 17.375 6.198 17.438Q6.042 17.5 5.875 17.5Z"/></svg>';var A1=`<svg viewBox="0 0 20 20"><path d="M16.8,1.7H3.2c-0.8,0-1.5,0.7-1.5,1.5v13.6c0,0.8,0.7,1.5,1.5,1.5h13.6c0.8,0,1.5-0.7,1.5-1.5V3.2
		C18.3,2.4,17.6,1.7,16.8,1.7z M17.3,11v4.5h-1.9v1.8H11v-1.8H9v1.8H4.6v-1.8H2.7V11h1.9V9.1H2.7V4.6h1.9V2.7H9v1.9H11V2.7h4.4v1.9
		h1.9v4.5h-1.9V11H17.3z"/><rect x="9" y="9.1" width="1.9" height="1.9"/></svg>`;var S1='<svg viewBox="0 0 20 20"><path d="M8.042 14.958q-.438.292-.896.042-.458-.25-.458-.792V5.75q0-.542.458-.792T8.042 5l6.646 4.25q.416.25.416.729t-.416.729Z"/></svg>';var E1='<svg viewBox="0 0 20 20"><path d="M10.021 13.333q-.521 0-.886-.323-.364-.322-.302-.906.105-1.021.459-1.656.354-.636 1.125-1.323.854-.75 1.239-1.26.386-.511.386-1.219 0-.854-.511-1.333-.51-.48-1.531-.48-.625 0-1.052.25-.427.25-.719.605-.354.458-.802.604-.448.146-.865-.021-.541-.229-.666-.771t.229-1.021q.604-.875 1.583-1.427Q8.688 2.5 10 2.5q2.188 0 3.365 1.219t1.177 2.927q0 1.042-.448 1.781-.448.74-1.406 1.677-.688.667-.98 1.073-.291.406-.375.927-.104.542-.458.886-.354.343-.854.343Zm-.021 5q-.708 0-1.208-.5t-.5-1.208q0-.708.5-1.208t1.208-.5q.708 0 1.208.5t.5 1.208q0 .708-.5 1.208t-1.208.5Z"/></svg>';var _1='<svg viewBox="0 0 20 20"><path d="M9.958 15.021Q10.417 15.021 10.729 14.708Q11.042 14.396 11.042 13.938Q11.042 13.479 10.729 13.167Q10.417 12.854 9.958 12.854Q9.5 12.854 9.188 13.167Q8.875 13.479 8.875 13.938Q8.875 14.396 9.188 14.708Q9.5 15.021 9.958 15.021ZM10.062 6.458Q10.646 6.458 11.01 6.771Q11.375 7.083 11.375 7.562Q11.375 7.896 11.146 8.271Q10.917 8.646 10.5 9Q9.833 9.583 9.531 10.073Q9.229 10.562 9.229 11.042Q9.229 11.354 9.438 11.562Q9.646 11.771 9.979 11.771Q10.292 11.771 10.531 11.562Q10.771 11.354 10.833 11Q10.896 10.667 11.115 10.365Q11.333 10.062 11.833 9.583Q12.5 8.958 12.74 8.469Q12.979 7.979 12.979 7.396Q12.979 6.312 12.188 5.646Q11.396 4.979 10.104 4.979Q9.229 4.979 8.573 5.323Q7.917 5.667 7.438 6.354Q7.271 6.583 7.344 6.854Q7.417 7.125 7.646 7.312Q7.917 7.521 8.26 7.448Q8.604 7.375 8.833 7.062Q9.062 6.771 9.365 6.615Q9.667 6.458 10.062 6.458ZM10 18.333Q8.292 18.333 6.771 17.677Q5.25 17.021 4.115 15.896Q2.979 14.771 2.323 13.25Q1.667 11.729 1.667 10Q1.667 8.271 2.323 6.75Q2.979 5.229 4.115 4.104Q5.25 2.979 6.771 2.323Q8.292 1.667 10 1.667Q11.75 1.667 13.271 2.323Q14.792 2.979 15.917 4.104Q17.042 5.229 17.688 6.75Q18.333 8.271 18.333 10Q18.333 11.729 17.688 13.25Q17.042 14.771 15.917 15.896Q14.792 17.021 13.271 17.677Q11.75 18.333 10 18.333Z"/></svg>';var R1='<svg viewBox="0 96 960 960"><path d="M398 856q-97 0-167.5-63T160 636q0-94 70.5-156.5T398 417h242l-73-73q-12-12-11.5-29t12.5-29q12-12 29.5-12t29.5 12l143 143q7 7 10 14.5t3 15.5q0 8-3 15.5T770 489L626 633q-12 12-29 11.5T568 632q-12-12-12-29.5t12-29.5l72-72H398q-62 0-108 38t-46 97q0 60 46 98t108 38h239q17 0 29.5 12.5T679 814q0 17-12.5 29.5T637 856H398Z"/></svg>';var ru='<svg viewBox="0 0 20 20"><path d="M10 19.125Q9.646 19.125 9.385 18.865Q9.125 18.604 9.125 18.25V17.438Q6.583 17.146 4.719 15.281Q2.854 13.417 2.562 10.875H1.75Q1.396 10.875 1.135 10.615Q0.875 10.354 0.875 10Q0.875 9.646 1.135 9.385Q1.396 9.125 1.75 9.125H2.562Q2.854 6.583 4.719 4.719Q6.583 2.854 9.125 2.562V1.75Q9.125 1.396 9.385 1.135Q9.646 0.875 10 0.875Q10.354 0.875 10.615 1.135Q10.875 1.396 10.875 1.75V2.562Q13.417 2.854 15.281 4.719Q17.146 6.583 17.438 9.125H18.25Q18.604 9.125 18.865 9.385Q19.125 9.646 19.125 10Q19.125 10.354 18.865 10.615Q18.604 10.875 18.25 10.875H17.438Q17.146 13.417 15.281 15.281Q13.417 17.146 10.875 17.438V18.25Q10.875 18.604 10.615 18.865Q10.354 19.125 10 19.125ZM10 15.729Q12.396 15.729 14.062 14.062Q15.729 12.396 15.729 10Q15.729 7.604 14.062 5.938Q12.396 4.271 10 4.271Q7.604 4.271 5.938 5.938Q4.271 7.604 4.271 10Q4.271 12.396 5.938 14.062Q7.604 15.729 10 15.729Z"/></svg>';var M1='<svg viewBox="0 0 20 20"><path d="M13.188 11.104 15.354 8.938Q15.625 8.667 15.625 8.312Q15.625 7.958 15.354 7.688L13.208 5.542Q12.958 5.292 12.604 5.292Q12.25 5.292 11.979 5.562Q11.708 5.833 11.708 6.188Q11.708 6.542 11.979 6.812L12.625 7.479H10.042Q9.688 7.479 9.438 7.729Q9.188 7.979 9.188 8.354Q9.188 8.708 9.448 8.969Q9.708 9.229 10.062 9.229H12.583L11.938 9.875Q11.688 10.125 11.688 10.479Q11.688 10.833 11.958 11.104Q12.208 11.354 12.562 11.365Q12.917 11.375 13.188 11.104ZM6.792 14.438Q7.062 14.708 7.417 14.708Q7.771 14.708 8.062 14.417Q8.312 14.167 8.312 13.802Q8.312 13.438 8.042 13.167L7.396 12.521H9.979Q10.333 12.521 10.583 12.271Q10.833 12.021 10.833 11.646Q10.833 11.292 10.573 11.031Q10.312 10.771 9.958 10.771H7.438L8.104 10.104Q8.354 9.854 8.354 9.5Q8.354 9.146 8.083 8.896Q7.833 8.625 7.469 8.625Q7.104 8.625 6.833 8.896L4.667 11.062Q4.396 11.333 4.396 11.688Q4.396 12.042 4.667 12.312ZM10 18.333Q8.271 18.333 6.75 17.677Q5.229 17.021 4.104 15.896Q2.979 14.771 2.323 13.25Q1.667 11.729 1.667 10Q1.667 8.271 2.323 6.75Q2.979 5.229 4.104 4.104Q5.229 2.979 6.75 2.323Q8.271 1.667 10 1.667Q11.729 1.667 13.25 2.323Q14.771 2.979 15.896 4.104Q17.021 5.229 17.677 6.75Q18.333 8.271 18.333 10Q18.333 11.729 17.677 13.25Q17.021 14.771 15.896 15.896Q14.771 17.021 13.25 17.677Q11.729 18.333 10 18.333Z"/></svg>';var O1=`<svg viewBox="0 0 20 20"><path d="M14.8,6.1c-1.3-1.3-2.8-1.9-4.7-1.9h0l0.2-0.2c0.2-0.2,0.2-0.4,0.2-0.6c0-0.2-0.1-0.4-0.2-0.6c-0.2-0.2-0.4-0.2-0.6-0.2
				S9.2,2.5,9,2.7L7.3,4.4C7.2,4.5,7.1,4.6,7.1,4.7C7.1,4.8,7,4.9,7,5c0,0.1,0,0.2,0.1,0.3c0,0.1,0.1,0.2,0.2,0.3L9,7.4
				c0.2,0.2,0.4,0.3,0.6,0.3s0.4-0.1,0.6-0.3c0.2-0.2,0.2-0.4,0.2-0.6s-0.1-0.4-0.2-0.6L10,5.9h0c1.4,0,2.5,0.5,3.5,1.4
				s1.4,2.1,1.4,3.5c0,1.1-0.3,2.1-0.9,2.9c-0.3,0.4-0.6,0.7-1,1c-0.4,0.3-0.9,0.5-1.4,0.8c-1,0.3-1.9,0.4-2.9,0.1
				c-0.5-0.2-1-0.4-1.4-0.7c-0.1-0.1-0.2-0.1-0.3-0.2c-0.3-0.3-0.7-0.6-0.9-1c-0.6-0.9-0.9-1.8-0.9-2.9c0-0.5,0.1-1,0.2-1.5
				C5.5,8.8,5.7,8.4,6,7.9c0.1-0.2,0.2-0.4,0.2-0.6S6.1,6.9,6,6.8C5.8,6.6,5.5,6.5,5.3,6.5C5,6.5,4.8,6.6,4.7,6.8
				C4.2,7.4,3.9,8,3.7,8.7c-0.2,0.7-0.3,1.4-0.3,2.1c0,1.5,0.4,2.9,1.3,4c0.8,1.1,1.9,1.9,3.2,2.3c0.1,0,0.2,0.1,0.2,0.1
				c1.5,0.4,2.9,0.4,4.3-0.1c0.4-0.2,0.7-0.4,1-0.6c0.7-0.4,1.3-1,1.9-1.7c0.9-1.2,1.3-2.5,1.3-4C16.7,9,16,7.4,14.8,6.1z"/></svg>`;var P1='<svg viewBox="0 0 20 20"><path d="M10 14.583q1.604 0 2.698-1.093 1.094-1.094 1.094-2.678 0-1.583-1.094-2.677Q11.604 7.042 10 7.042q-1.583 0-2.667 1.093Q6.25 9.229 6.25 10.812q0 1.584 1.083 2.678Q8.417 14.583 10 14.583ZM3.417 17.5q-.729 0-1.24-.51-.51-.511-.51-1.24V5.896q0-.729.51-1.24.511-.51 1.24-.51h2.541l1-1.084q.25-.27.584-.416.333-.146.708-.146h3.521q.354 0 .687.146.334.146.584.416l1.02 1.084h2.521q.729 0 1.24.51.51.511.51 1.24v9.854q0 .729-.51 1.24-.511.51-1.24.51Z"/></svg>';var B1='<svg viewBox="0 0 20 20"><path class="st0" d="M6.4,6.3"/><path d="M2.5,6.2l4.8,4.3,1.2-6.8-2.1.9C4.7,1.7,1.3,0,.2-.5L-.3.4l-.4.9c1.9.9,4,2.3,5.3,4.1l-2,.8Z"/><path d="M6.1,16.2c.3.3.6.5.9.6.4.2.7.2,1.1.2s.8-.1,1.1-.2c.4-.2.7-.4.9-.6.4-.3.6-.6.8-.9h0c0,0,9.8,0,9.8,0v-2h-9.8c-.2-.6-.4-.9-.7-1.1-.2-.3-.5-.5-.9-.7-.7-.3-1.6-.3-2.3,0-.3.2-.6.4-.9.7s-.5.5-.6.9c-.2.3-.2.7-.2,1.1s0,.8.2,1.1c0,.4.4.7.6,1ZM6.6,13.5c0-.2.2-.4.4-.5,0-.2.3-.4.5-.5.2,0,.4,0,.7,0s.5,0,.7,0c.2,0,.3.3.5.4.2.2.3.3.4.5s0,.4,0,.7,0,.5,0,.7c-.1.2-.2.4-.4.5-.2.2-.3.3-.6.4-.4.2-.9.2-1.3,0-.2,0-.4-.2-.5-.4-.2,0-.3-.3-.4-.5,0-.2,0-.4,0-.7s0-.4,0-.6Z"/></svg>';var N1='<svg viewBox="0 0 20 20"><path d="M11.583 18.333H8.417q-.334 0-.573-.218-.24-.219-.282-.553l-.229-1.854q-.208-.125-.458-.27-.25-.146-.458-.271l-1.729.729q-.313.125-.626.021-.312-.105-.479-.396l-1.562-2.729q-.167-.292-.094-.604.073-.313.323-.521l1.458-1.125V9.458L2.25 8.333q-.25-.208-.323-.521-.073-.312.094-.604l1.562-2.729q.167-.291.479-.396.313-.104.626.021l1.729.729q.208-.125.458-.27.25-.146.458-.271l.229-1.854q.042-.334.282-.553.239-.218.573-.218h3.166q.334 0 .573.218.24.219.282.553l.229 1.854q.208.125.458.271.25.145.458.27l1.729-.729q.313-.125.626-.021.312.105.479.396L18 7.208q.167.292.104.604-.062.313-.333.521l-1.459 1.125v1.084l1.459 1.125q.271.208.333.521.063.312-.104.604l-1.583 2.729q-.167.291-.479.396-.313.104-.626-.021l-1.729-.729q-.208.125-.458.271-.25.145-.458.27l-.229 1.854q-.042.334-.282.553-.239.218-.573.218ZM10 12.979q1.229 0 2.104-.875T12.979 10q0-1.229-.875-2.104T10 7.021q-1.229 0-2.104.875T7.021 10q0 1.229.875 2.104t2.104.875Z"/></svg>';var F1=`<svg viewBox="0 0 20 20"><path style="stroke:#000000;stroke-width:2;stroke-miterlimit:10;" d="M6.4,6.3"/><g><path d="M18.9,3.4c-0.4-0.4-1-0.4-1.4,0L4.2,16.8c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3L18.9,4.8
		C19.3,4.5,19.3,3.8,18.9,3.4z"/><path d="M6.1,6.5l6.2,1.9l-1.8-6.7L9,3.4c-2.8-1.9-6.6-2-7.9-2v1v1c2.1,0,4.6,0.4,6.5,1.5L6.1,6.5z"/></g></svg>`;var I1='<svg viewBox="0 0 20 20"><path d="M14.542 15q-.354 0-.615-.26-.26-.261-.26-.615V5.896q0-.354.26-.615.261-.26.615-.26t.614.26q.261.261.261.615v8.229q0 .354-.261.615-.26.26-.614.26Zm-8.604-.896q-.438.292-.896.042-.459-.25-.459-.771V6.646q0-.521.459-.771.458-.25.896.042l5.083 3.354q.396.271.396.729 0 .458-.396.729Z"/></svg>';var k1=`<svg viewBox="0 0 20 20"><path d="M4.4,14.5c-0.5,0-1-0.2-1.4-0.6c-0.4-0.4-0.6-0.8-0.6-1.4c0-0.5,0.2-1,0.6-1.4c0.4-0.4,0.8-0.6,1.4-0.6h11.1
	c0.5,0,1,0.2,1.4,0.6c0.4,0.4,0.6,0.8,0.6,1.4c0,0.5-0.2,1-0.6,1.4c-0.4,0.4-0.8,0.6-1.4,0.6H4.4z"/><path d="M3.4,8.1C3.1,8.1,2.9,8,2.8,7.8C2.6,7.7,2.5,7.5,2.5,7.2s0.1-0.4,0.3-0.6c0.2-0.2,0.4-0.3,0.6-0.3h13.2
	c0.2,0,0.4,0.1,0.6,0.3c0.2,0.2,0.3,0.4,0.3,0.6s-0.1,0.4-0.3,0.6c-0.2,0.2-0.4,0.3-0.6,0.3H3.4z"/></svg>
`;var L1=`<svg viewBox="0 0 20 20"><path d="M15,18H2V5c0-.3,0-.4-.3-.7s-.4-.3-.7-.3-.4,0-.7.3-.3.4-.3.7v13c0,.5.2,1,.6,1.4.4.4.8.6,1.4.6h13c.3,0,.4,0,.7-.3s.3-.4.3-.7,0-.4-.3-.7-.4-.3-.7-.3Z"/>
  <path d="M19.4.6C19,.2,18.6,0,18,0H6C5.5,0,5,.2,4.6.6s-.6.8-.6,1.4v12c0,.5.2,1,.6,1.4s.8.6,1.4.6h12c.5,0,1-.2,1.4-.6s.6-.8.6-1.4V2c0-.5-.2-1-.6-1.4ZM10.1,13.8l-3.9-6.4,1.7-1.1,2.4,3.9L16.5,1.7l1.6,1.1s-8,11-8,11Z"/></svg>`;var V1='<svg viewBox="0 0 20 20"><path d="M8.375 2.583Q8.021 2.583 7.76 2.323Q7.5 2.062 7.5 1.708Q7.5 1.354 7.76 1.094Q8.021 0.833 8.375 0.833H11.625Q11.979 0.833 12.24 1.094Q12.5 1.354 12.5 1.708Q12.5 2.062 12.24 2.323Q11.979 2.583 11.625 2.583ZM10 11.583Q10.354 11.583 10.615 11.323Q10.875 11.062 10.875 10.708V7.562Q10.875 7.208 10.615 6.948Q10.354 6.688 10 6.688Q9.646 6.688 9.385 6.948Q9.125 7.208 9.125 7.562V10.708Q9.125 11.062 9.385 11.323Q9.646 11.583 10 11.583ZM10 18.333Q8.458 18.333 7.094 17.74Q5.729 17.146 4.708 16.125Q3.688 15.104 3.094 13.74Q2.5 12.375 2.5 10.833Q2.5 9.292 3.094 7.927Q3.688 6.562 4.708 5.542Q5.729 4.521 7.094 3.927Q8.458 3.333 10 3.333Q11.271 3.333 12.458 3.75Q13.646 4.167 14.667 4.958L15.25 4.375Q15.5 4.125 15.854 4.125Q16.208 4.125 16.479 4.375Q16.729 4.646 16.729 5Q16.729 5.354 16.479 5.604L15.875 6.208Q16.667 7.271 17.083 8.417Q17.5 9.562 17.5 10.833Q17.5 12.375 16.906 13.74Q16.312 15.104 15.292 16.125Q14.271 17.146 12.906 17.74Q11.542 18.333 10 18.333Z"/></svg>';var H1='<svg viewBox="0 0 20 20"><path d="M5.896 17.5q-.729 0-1.24-.51-.51-.511-.51-1.24V5.125q-.354 0-.615-.26-.26-.261-.26-.615t.26-.615q.261-.26.615-.26h3.375q0-.354.26-.615.261-.26.615-.26h3.187q.355 0 .615.26.26.261.26.615h3.375q.355 0 .615.26.26.261.26.615t-.26.615q-.26.26-.615.26V15.75q0 .729-.51 1.24-.511.51-1.24.51Zm1.542-4.375q0 .354.26.615.26.26.614.26.355 0 .615-.26.261-.261.261-.615V7.75q0-.354-.261-.615-.26-.26-.615-.26-.354 0-.614.26-.26.261-.26.615Zm3.333 0q0 .354.26.615.261.26.615.26t.614-.26q.261-.261.261-.615V7.75q0-.354-.261-.615-.26-.26-.614-.26t-.615.26q-.26.261-.26.615Z"/></svg>';var W1='<svg viewBox="0 96 960 960"><path d="M323 856q-17 0-29.5-12.5T281 814q0-17 12.5-29.5T323 772h239q62 0 108-38t46-97q0-59-46-97.5T562 501H320l73 73q12 12 11.5 29T392 632q-12 12-29.5 12T333 632L190 489q-7-7-10-14.5t-3-15.5q0-8 3-15.5t10-14.5l144-144q12-12 29.5-12t29.5 12q12 12 12 29.5T393 344l-73 73h242q97 0 167.5 62.5T800 636q0 94-70.5 157T562 856H323Z"/></svg>';var U1=`<svg viewBox="0 0 20 20"><path d="M5,8.1C4.8,8.1,4.6,8,4.4,7.9C4.3,7.7,4.2,7.5,4.2,7.2s0.1-0.4,0.3-0.6C4.6,6.5,4.8,6.4,5,6.4H15c0.2,0,0.4,0.1,0.6,0.3c0.2,0.2,0.3,0.4,0.3,0.6s-0.1,0.4-0.3,0.6C15.4,8,15.2,8.1,15,8.1H5z" /><path d="M5.1,14.2c-0.3,0-0.5-0.1-0.7-0.3c-0.3-0.4-0.3-1,0.1-1.3c2.3-1.9,3.7-2.1,5.9-1c1.8,0.9,2.7,0.7,3.8-0.7c0.3-0.4,0.9-0.4,1.3-0.1c0.4,0.3,0.4,0.9,0.1,1.3c-1.7,2.1-3.4,2.4-6,1.2c-1.4-0.7-2-0.8-4,0.8C5.5,14.2,5.3,14.2,5.1,14.2z" /></svg>
`;var z1=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" fill="currentColor">
<path d="M78.5,40v-2H66.9V20.1L30.4,0.5V9h-9.5v2h9.5v5h-9.5v2h9.5v5h-9.5v2h9.5v5h-9.5v2h9.5v8.7L41.5,50l-11.2,9.3V68h-9.5v2h9.5
	v5h-9.5v2h9.5v5h-9.5v2h9.5v5h-9.5v2h9.5v8.5l36.5-20.2V61h11.6v-2H66.9v-5h11.6v-2H66.9v-5h11.6v-2H66.9v-5H78.5z M63.9,77.6
	L33.4,94.5V60.7L46.2,50L33.4,39.3V5.5l30.5,16.4V77.6z"/>
</svg>
`;var G1=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" fill="currentColor">
	<polygon points="45,67.9 52,67.9 52,52.4 67.3,52.4 67.3,45.4 52,45.4 52,30.4 45,30.4 45,45.4 29.8,45.4 29.8,52.4 45,52.4" />
	<path d="M103.5,48.7H90V20H71.5V5.5h-2V20H30.2V5.5h-2V20H10v28.7H-3.5v2H10V80h37.9v15.5h2V80H90V50.7h13.5V48.7z M87,77H13V23h74
		V77z" />
</svg>`;var q1=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" fill="currentColor">
	<path d="M88.4,34.2v-2H73.2V1.1H28.4V5H13.2v2h15.2v8.1H13.2v2h15.2v9.2H13.2v2h15.2v9.1H13.2v2h15.2v19.8H13.2v2h15.2v8.1H13.2v2
		h15.2v9.1H13.2v2h15.2v9.2H13.2v2h15.2v4h44.8v-31h15.2v-2H73.2v-9.2h15.2v-2H73.2v-9.2h15.2v-2H73.2v-8H88.4z M70.2,94.6H31.4V4.1
		h38.8V94.6z" />
	<polygon points="47.6,64 53.6,64 53.6,53.3 65.1,53.3 65.1,47.3 53.6,47.3 53.6,36.5 47.6,36.5 47.6,47.3 37.5,47.3 37.5,53.3 
		47.6,53.3 	" />
</svg>`;var $1=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 50 25" style="enable-background:new 0 0 50 25;" fill="currentColor">
<path d="M30.3,16.8c-0.6,0.6-1.5,0.9-2.5,0.9c-1.2,0-2.2-0.4-2.9-1.2c-0.7-0.8-1.1-1.9-1.1-3.3c0-1.5,0.4-2.7,1.2-3.5
	c0.7-0.7,1.6-1.1,2.7-1.1c1.4,0,2.5,0.5,3.2,1.4c0.4,0.5,0.6,1.1,0.6,1.6h-1.8c-0.1-0.4-0.3-0.7-0.4-0.9c-0.3-0.4-0.8-0.6-1.4-0.6
	c-0.7,0-1.2,0.3-1.5,0.8c-0.4,0.5-0.6,1.3-0.6,2.2s0.2,1.7,0.6,2.2s0.9,0.7,1.5,0.7s1.1-0.2,1.4-0.6c0.2-0.2,0.3-0.6,0.5-1h1.8
	C31.3,15.4,30.9,16.2,30.3,16.8z"/>
<path d="M32.8,8.8h1.8v7h4.2v1.5h-6V8.8z"/>
<path d="M47.7,17.4h-2.3l-2.6-3.7l-0.9,0.9v2.9h-1.8V8.8h1.8v3.5l3.3-3.5h2.3L44,12.4L47.7,17.4z"/>
<polygon points="0,22.2 0,20.2 19.1,20.2 19.1,2.8 50,2.8 50,4.8 21.1,4.8 21.1,22.2 "/>
</svg>
`;var Y1=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" fill="currentColor">
	<path d="M39.3,55.3c-1.1,1.2-2.5,1.8-4.2,1.8c-2.1,0-3.8-0.8-5-2.4c-1.2-1.6-1.8-3.8-1.8-6.5c0-3,0.7-5.3,2.1-6.9
		c1.2-1.4,2.7-2.1,4.6-2.1c2.5,0,4.3,0.9,5.4,2.8c0.6,1.1,1,2.1,1,3.2h-3.1c-0.2-0.8-0.5-1.4-0.8-1.9c-0.6-0.7-1.4-1.1-2.5-1.1
		c-1.1,0-2,0.5-2.7,1.6c-0.6,1-1,2.5-1,4.5s0.3,3.4,1,4.3c0.7,1,1.6,1.4,2.6,1.4c1.1,0,1.9-0.4,2.5-1.2c0.3-0.4,0.6-1.1,0.8-2h3.1
		C41.1,52.6,40.4,54.1,39.3,55.3z" />
	<path d="M46.5,56.6h-2.9V39.5h4.5l2.7,13.5l2.7-13.5h4.4v17.1H55V45c0-0.3,0-0.8,0-1.4c0-0.6,0-1.1,0-1.4l-2.8,14.4h-3l-2.8-14.4
		c0,0.3,0,0.8,0,1.4c0,0.6,0,1.1,0,1.4V56.6z" />
	<path d="M67,50.4h-3.1v6.2h-3.1V39.5h6.4c1.5,0,2.7,0.4,3.5,1.3c0.9,0.9,1.3,2.3,1.3,4.1c0,2-0.4,3.4-1.3,4.3
		C69.9,50,68.6,50.4,67,50.4z M68.4,46.9c0.4-0.4,0.6-1.1,0.6-2c0-0.9-0.2-1.5-0.6-1.9c-0.4-0.4-1-0.6-1.7-0.6h-2.9v5h2.9
		C67.5,47.5,68,47.3,68.4,46.9z" />
	<path d="M95.5,50.1H80V10H50.7V-3.5h-2V10H20v18.5H5.5v2H20v39.3H5.5v2H20V90h28.7v13.5h2V90H80V52.1h15.5V50.1z M77,87H23V13h54V87
	z" />
</svg>`;var X1=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" fill="currentColor">
<path d="M88.4,26.1v-2H73.2V11.9H51.8V4.6h-2v7.3H28.4v12.2H13.2v2h15.2v14.2H13.2v2h15.2v14.2H13.2v2h15.2v14.2H13.2v2h15.2v12.1
	h44.8V74.7h15.2v-2H73.2V58.5h15.2v-2H73.2V42.3h15.2v-2H73.2V26.1H88.4z M70.2,83.8H31.4V14.9h18.4v28.5l-13-6.9v27.7l23.4-13.4
	c0.4,1.5,1.7,2.6,3.3,2.6c1.8,0,3.4-1.6,3.4-3.4c0-1.8-1.4-3.3-3.4-3.4c-1.5,0-2.8,1-3.2,2.4l-8.5-4.5V14.9h18.4V83.8z M57.7,49.9
	L38.8,60.8V39.9L57.7,49.9z M62.1,50c0-0.7,0.7-1.4,1.3-1.4c0.9,0.1,1.5,0.6,1.5,1.4c0,0.7-0.7,1.4-1.4,1.4S62.1,50.7,62.1,50z"/>
</svg>
`;var j1=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" fill="currentColor">
	<path d="M68.7,73.8h-34v-50h34V73.8z M36.1,72.3h31v-47h-31V72.3z" />
	<path d="M95.5,26.6v-2h-15v-20h-60V85h-15v2h15v8.6h60V75.5h15v-2h-15V59.2h15v-2h-15v-15h15v-2h-15V26.6H95.5z M23.5,83l7.1,3.1
	l-7.1,3.1V83z M77.5,92.6h-54v-1.2l12.1-5.3l-12.1-5.3V7.6h54V92.6z" />
	<defs>
		<rect id="SVGID_1_" x="35.4" y="24.6" width="32.5" height="48.5" />
	</defs>
	<clipPath id="frame">
		<use xlink:href="#SVGID_1_" style="overflow:visible;" />
	</clipPath>
	<g style="clip-path:url(#frame);">
		<path d="M45,22.6c0-2.5,0.3-4.4,0.8-5.9c0.5-1.5,1.3-2.7,2.3-3.5c1-0.8,2.2-1.2,3.8-1.2c1.1,0,2.1,0.2,2.9,0.7
				c0.8,0.4,1.5,1.1,2.1,1.9c0.5,0.8,1,1.9,1.3,3.1s0.5,2.8,0.5,4.9c0,2.4-0.2,4.4-0.8,5.9c-0.5,1.5-1.2,2.7-2.2,3.5
				s-2.3,1.2-3.8,1.2c-2,0-3.6-0.7-4.7-2.2C45.6,29.3,45,26.5,45,22.6z M47.6,22.6c0,3.4,0.4,5.7,1.2,6.8c0.8,1.1,1.8,1.7,3,1.7
				c1.2,0,2.2-0.6,3-1.7s1.2-3.4,1.2-6.8c0-3.4-0.4-5.7-1.2-6.8s-1.8-1.7-3-1.7c-1.2,0-2.1,0.5-2.8,1.5C48,16.9,47.6,19.2,47.6,22.6
				z" />
		<path d="M54.6,56.9H52V40.6c-0.6,0.6-1.4,1.2-2.4,1.8c-1,0.6-1.9,1-2.7,1.3v-2.5c1.4-0.7,2.7-1.5,3.7-2.4s1.8-1.9,2.3-2.8h1.6
				V56.9z" />
		<path d="M58.4,78.4v2.4H44.6c0-0.6,0.1-1.2,0.3-1.8c0.3-0.9,0.9-1.9,1.7-2.8c0.8-0.9,1.9-2,3.3-3.1c2.3-1.9,3.8-3.3,4.6-4.4
				s1.2-2.1,1.2-3.1c0-1-0.4-1.9-1.1-2.6c-0.7-0.7-1.7-1-2.8-1c-1.2,0-2.2,0.4-2.9,1.1s-1.1,1.8-1.1,3.1L45.1,66
				c0.2-2,0.9-3.4,2-4.5s2.7-1.5,4.7-1.5c2,0,3.6,0.6,4.7,1.7c1.2,1.1,1.7,2.5,1.7,4.1c0,0.8-0.2,1.6-0.5,2.4s-0.9,1.6-1.7,2.5
				c-0.8,0.9-2.1,2.1-3.9,3.7c-1.5,1.3-2.5,2.2-2.9,2.6s-0.8,0.9-1.1,1.4H58.4z" />
	</g>
</svg>`;var Q1=`<!-- Generator: Adobe Illustrator 26.5.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" fill="currentColor">
<path d="M71.1,90.1H26.8V10h44.3V90.1z M29.8,87.1h38.3V13H29.8V87.1z"/>
<rect x="12.8" y="37" width="16.3" height="2"/>
<rect x="12.8" y="56.4" width="16.3" height="2"/>
<rect x="70.8" y="41" width="16.3" height="2"/>
<rect x="70.8" y="54.7" width="16.3" height="2"/>
<rect x="70.8" y="68.3" width="16.3" height="2"/>
<rect x="70.8" y="27.6" width="16.3" height="2"/>
<g>
	<path d="M38.7,55.5h-5.6V40.2h5.6c0.8,0,1.5,0.1,2,0.3c0.9,0.4,1.6,1,2.2,1.9c0.5,0.8,0.8,1.6,0.9,2.5s0.2,1.7,0.2,2.5
		c0,2-0.3,3.8-1,5.2C42.1,54.5,40.7,55.5,38.7,55.5z M40.7,44.1c-0.4-0.8-1.2-1.2-2.5-1.2h-2.5v10h2.5c1.3,0,2.2-0.7,2.7-2.2
		c0.3-0.8,0.4-1.8,0.4-2.9C41.3,46.1,41.1,44.9,40.7,44.1z"/>
	<path d="M54.1,52.2c-0.1,0.7-0.4,1.4-0.9,2c-0.8,1.1-2,1.7-3.4,1.7c-1.2,0-2.3-0.5-3.2-1.4c-0.9-0.9-1.4-2.4-1.4-4.5
		c0-2,0.4-3.5,1.3-4.5s1.9-1.6,3.3-1.6c0.8,0,1.5,0.2,2.2,0.5c0.6,0.4,1.2,0.9,1.6,1.7c0.4,0.7,0.6,1.5,0.7,2.3
		c0.1,0.5,0.1,1.3,0.1,2.2h-6.6c0,1.1,0.3,1.9,0.9,2.4c0.3,0.3,0.8,0.4,1.2,0.4c0.5,0,0.9-0.2,1.3-0.5c0.2-0.2,0.3-0.4,0.5-0.8H54.1
		z M51.6,48.7c0-0.8-0.2-1.4-0.6-1.8c-0.4-0.4-0.8-0.6-1.3-0.6c-0.6,0-1,0.2-1.3,0.6s-0.5,1-0.6,1.7H51.6z"/>
	<path d="M64.2,48.2h-2.6c0-0.4-0.2-0.8-0.4-1.1c-0.3-0.5-0.7-0.7-1.3-0.7c-0.8,0-1.4,0.5-1.7,1.5C58.1,48.4,58,49.1,58,50
		c0,0.8,0.1,1.5,0.2,2c0.3,0.9,0.9,1.4,1.7,1.4c0.6,0,1-0.2,1.2-0.6s0.4-0.9,0.4-1.5h2.6c-0.1,0.9-0.3,1.8-0.8,2.6
		c-0.8,1.3-1.9,1.9-3.5,1.9s-2.7-0.5-3.4-1.6c-0.7-1.1-1.1-2.5-1.1-4.2c0-1.9,0.4-3.5,1.2-4.5s1.9-1.6,3.3-1.6c1.2,0,2.2,0.3,2.9,1
		C63.6,45.5,64.1,46.6,64.2,48.2z"/>
</g>
</svg>
`;var K1=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" fill="currentColor">
	<path d="M87.6,16v-2H73.3v-4H26.8v13H12.3v2h14.5v6.8H12.3v2h14.5v6.8H12.3v2h14.5v6.8H12.3v2h14.5v6.8H12.3v2h14.5V67H12.3v2h14.5
	v6.7H12.3v2h14.5V90h46.5v-3.3h14.3v-2H73.3V82h14.3v-2H73.3v-2.7h14.3v-2H73.3v-2.7h14.3v-2H73.3v-2.7h14.3v-2H73.3v-2.8h14.3v-2
	H73.3v-2.7h14.3v-2H73.3v-2.7h14.3v-2H73.3V49h14.3v-2H73.3v-2.7h14.3v-2H73.3v-2.7h14.3v-2H73.3v-2.8h14.3v-2H73.3v-2.7h14.3v-2
	H73.3v-2.7h14.3v-2H73.3v-2.7h14.3v-2H73.3V16H87.6z M70.3,87H29.8V13h40.5V87z" />
	<path d="M39.3,55.8h-1.8V44.6c-0.4,0.4-1,0.8-1.7,1.2s-1.3,0.7-1.9,0.9V45c1-0.5,1.8-1,2.6-1.7s1.3-1.3,1.6-1.9h1.1V55.8z" />
	<path d="M56,52.4l1.7-0.3c0.1,0.7,0.4,1.2,0.8,1.6c0.4,0.4,1.1,0.6,1.9,0.6c0.8,0,1.4-0.2,1.8-0.5s0.6-0.7,0.6-1.2
		c0-0.4-0.2-0.7-0.5-0.9c-0.2-0.2-0.8-0.4-1.8-0.6c-1.3-0.3-2.2-0.6-2.7-0.8s-0.9-0.6-1.1-1c-0.3-0.4-0.4-0.9-0.4-1.4
		c0-0.5,0.1-0.9,0.3-1.3c0.2-0.4,0.5-0.7,0.9-1c0.3-0.2,0.6-0.4,1.1-0.5c0.5-0.1,1-0.2,1.5-0.2c0.8,0,1.5,0.1,2.1,0.4s1.1,0.6,1.4,1
		s0.5,0.9,0.6,1.6L62.5,48c-0.1-0.5-0.3-1-0.7-1.2c-0.4-0.3-0.9-0.4-1.6-0.4c-0.8,0-1.4,0.1-1.7,0.4C58.2,47,58,47.3,58,47.7
		c0,0.2,0.1,0.4,0.2,0.6c0.1,0.2,0.4,0.3,0.7,0.5c0.2,0.1,0.7,0.2,1.6,0.4c1.2,0.3,2.1,0.6,2.6,0.8c0.5,0.2,0.9,0.5,1.2,0.9
		c0.3,0.4,0.4,0.9,0.4,1.5c0,0.6-0.2,1.1-0.5,1.7s-0.8,0.9-1.5,1.2s-1.4,0.4-2.2,0.4c-1.3,0-2.4-0.3-3.1-0.8
		C56.7,54.3,56.2,53.5,56,52.4z" />
	<path d="M65.9,55.8v-2h2v2H65.9z" />
	<path d="M50.3,45l-1.7,0.1c-0.2-0.7-0.4-1.2-0.7-1.5c-0.5-0.5-1.1-0.8-1.8-0.8c-0.6,0-1.1,0.2-1.5,0.5c-0.6,0.4-1,1-1.3,1.8
		s-0.5,1.9-0.5,3.3c0.4-0.6,0.9-1.1,1.6-1.4s1.3-0.5,1.9-0.5c1.2,0,2.2,0.4,3,1.3s1.2,2,1.2,3.3c0,0.9-0.2,1.7-0.6,2.5
		S49,55,48.4,55.4s-1.4,0.6-2.3,0.6c-1.5,0-2.7-0.5-3.6-1.6c-0.9-1.1-1.4-2.9-1.4-5.3c0-2.8,0.5-4.8,1.5-6c0.9-1.1,2.1-1.6,3.6-1.6
		c1.1,0,2,0.3,2.8,0.9S50.1,43.9,50.3,45z M43.1,51.2c0,0.6,0.1,1.2,0.4,1.7c0.3,0.6,0.6,1,1.1,1.3c0.5,0.3,0.9,0.4,1.5,0.4
		c0.7,0,1.4-0.3,1.9-0.9c0.5-0.6,0.8-1.4,0.8-2.4c0-1-0.3-1.8-0.8-2.3s-1.2-0.9-2-0.9c-0.8,0-1.5,0.3-2,0.9S43.1,50.3,43.1,51.2z" />
</svg>`;var Z1=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" fill="currentColor">
	<path d="M87.7,25v-2H73.3V10H26.8v13H11.1v2h15.7v15.6H11.1v2h15.7v15.6H11.1v2h15.7v15.5H11.1v2h15.7V90h46.5V77.7h14.4v-2H73.3V69
	h14.4v-2H73.3v-6.8h14.4v-2H73.3v-6.8h14.4v-2H73.3v-6.8h14.4v-2H73.3v-6.8h14.4v-2H73.3V25H87.7z M70.3,87H29.8V13h40.5V87z" />
	<path d="M35.1,42.3V40h13v1.9c-1.3,1.4-2.5,3.2-3.8,5.4c-1.3,2.3-2.2,4.6-2.9,6.9c-0.5,1.7-0.8,3.5-0.9,5.5h-2.5
		c0-1.6,0.3-3.5,0.9-5.7c0.6-2.2,1.4-4.4,2.5-6.5s2.3-3.8,3.5-5.2H35.1z" />
	<path d="M51.1,55.1l2.4-0.4c0.1,1,0.5,1.7,1.1,2.2c0.6,0.5,1.5,0.8,2.6,0.8c1.1,0,2-0.2,2.5-0.7s0.8-1,0.8-1.6c0-0.6-0.2-1-0.7-1.3
		c-0.3-0.2-1.2-0.5-2.5-0.8c-1.8-0.5-3.1-0.8-3.8-1.2s-1.2-0.8-1.6-1.4c-0.4-0.6-0.5-1.2-0.5-1.9c0-0.6,0.1-1.2,0.4-1.8
		c0.3-0.6,0.7-1,1.2-1.4c0.4-0.3,0.9-0.5,1.6-0.7c0.7-0.2,1.4-0.3,2.1-0.3c1.1,0,2.1,0.2,3,0.5s1.5,0.8,1.9,1.3s0.7,1.3,0.8,2.2
		L60.2,49c-0.1-0.7-0.4-1.3-1-1.8c-0.5-0.4-1.3-0.6-2.2-0.6c-1.1,0-1.9,0.2-2.4,0.6s-0.7,0.8-0.7,1.3c0,0.3,0.1,0.6,0.3,0.9
		c0.2,0.3,0.5,0.5,0.9,0.7c0.2,0.1,1,0.3,2.2,0.6c1.7,0.5,3,0.8,3.6,1.1c0.7,0.3,1.2,0.7,1.6,1.3s0.6,1.3,0.6,2.1
		c0,0.8-0.2,1.6-0.7,2.3s-1.2,1.3-2.1,1.7s-1.9,0.6-3.1,0.6c-1.9,0-3.3-0.4-4.3-1.2C52,57.8,51.4,56.6,51.1,55.1z" />
	<path d="M64.5,59.7v-2.8h2.8v2.8H64.5z" />
</svg>`;var J1=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" fill="currentColor">
	<path d="M92,17.4v-2H77.6V10h-55v14.7H8.1v2h14.5v14.2H8.1v2h14.5v14.2H8.1v2h14.5v14.2H8.1v2h14.5V90h55v-5.2H92v-2H77.6V66H92v-2
	H77.6V49.8H92v-2H77.6V33.6H92v-2H77.6V17.4H92z M74.6,87h-49V13h49V87z" />
	<path d="M29.7,60.5V41.4h5.6c1.1,0,2.1,0.2,2.8,0.6c0.7,0.4,1.2,1,1.6,1.8c0.4,0.8,0.6,1.6,0.6,2.5c0,0.8-0.2,1.6-0.5,2.3
		c-0.3,0.7-0.9,1.3-1.6,1.7c0.9,0.3,1.6,0.9,2.1,1.7c0.5,0.8,0.7,1.8,0.7,2.9c0,0.9-0.1,1.7-0.4,2.5c-0.3,0.8-0.7,1.4-1.1,1.8
		c-0.4,0.4-1,0.7-1.6,0.9c-0.7,0.2-1.5,0.3-2.4,0.3H29.7z M31.6,49.4h3.2c0.9,0,1.5-0.1,1.9-0.2c0.5-0.2,0.9-0.5,1.1-1
		c0.3-0.4,0.4-1,0.4-1.7c0-0.6-0.1-1.2-0.4-1.7c-0.2-0.5-0.6-0.8-1-1c-0.4-0.2-1.2-0.3-2.3-0.3h-3V49.4z M31.6,58.3h3.7
		c0.6,0,1.1,0,1.3-0.1c0.5-0.1,0.8-0.3,1.1-0.5c0.3-0.2,0.6-0.6,0.8-1.1c0.2-0.5,0.3-1,0.3-1.6c0-0.7-0.1-1.3-0.4-1.9
		c-0.3-0.5-0.7-0.9-1.2-1.1c-0.5-0.2-1.2-0.3-2.2-0.3h-3.5V58.3z" />
	<path d="M54.4,53.8l2,0.6c-0.4,2.1-1.2,3.7-2.2,4.8c-1.1,1.1-2.4,1.6-4,1.6c-1.6,0-2.9-0.4-3.9-1.3c-1-0.8-1.8-2.1-2.3-3.6
		c-0.5-1.6-0.8-3.3-0.8-5.1c0-2,0.3-3.7,0.9-5.2c0.6-1.5,1.4-2.6,2.5-3.4c1.1-0.8,2.3-1.2,3.6-1.2c1.5,0,2.8,0.5,3.8,1.5
		s1.7,2.3,2.1,4.1l-2,0.6c-0.3-1.4-0.9-2.4-1.5-3c-0.7-0.6-1.5-1-2.5-1c-1.2,0-2.1,0.4-2.9,1.1c-0.8,0.7-1.3,1.7-1.6,2.8
		c-0.3,1.2-0.5,2.4-0.5,3.7c0,1.6,0.2,3,0.6,4.3c0.4,1.2,0.9,2.1,1.7,2.7c0.8,0.6,1.6,0.9,2.5,0.9c1.1,0,2-0.4,2.8-1.2
		C53.6,56.6,54.1,55.4,54.4,53.8z" />
	<path d="M58.8,60.5V41.4H64c1.2,0,2.1,0.1,2.7,0.3c0.9,0.3,1.6,0.7,2.2,1.4c0.8,0.9,1.4,1.9,1.8,3.3c0.4,1.3,0.6,2.8,0.6,4.5
		c0,1.5-0.1,2.7-0.4,3.9s-0.6,2-1,2.8c-0.4,0.7-0.9,1.3-1.4,1.7c-0.5,0.4-1.1,0.7-1.8,1c-0.7,0.2-1.5,0.3-2.4,0.3H58.8z M60.8,58.3
		H64c1,0,1.8-0.1,2.3-0.4s1-0.6,1.3-1c0.5-0.6,0.8-1.4,1.1-2.4c0.3-1,0.4-2.2,0.4-3.7c0-2-0.3-3.5-0.8-4.6c-0.5-1.1-1.1-1.8-1.9-2.2
		c-0.5-0.3-1.4-0.4-2.6-0.4h-3.1V58.3z" />
</svg>`;var eh=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" fill="currentColor">
<path d="M80,25v-2H65V4.4l-17,9.9V1h-2v14.4l-15,8.7V43H16v2h15v9H16v2h15v19.9l34,18.6V78h15v-2H65v-9h15v-2H65V36h15v-2H65v-9H80z
	 M62,9.6v13.5c-7.3,0.8-11.3,5.7-15.2,10.5c-3.6,4.4-7,8.6-12.8,9.2v-17L62,9.6z M62,25.1v9c-6.4,0.7-9.8,5.3-13.2,9.7
	c-3.8,5-7.3,9.7-14.8,10.2v-9.1c6.7-0.5,10.6-5.3,14.3-9.9C52.1,30.3,55.7,25.9,62,25.1z M34,74.1V56c8.5-0.5,12.7-6,16.4-10.9
	c3.2-4.2,6.2-8.2,11.6-8.9v53.3L34,74.1z"/>
</svg>
`;var th=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 1792 1792" style="enable-background:new 0 0 1792 1792;" fill="currentColor">
<path d="M370.3,38.4v117.4H0.6v46.1h369.7v49.7H0.6v46.1h369.7v49.6H0.6v46.1h369.7v49.7H0.6v46.1h369.7v50.7H1.6V584h368.7v51.6
	H1.6v44.1h368.7v51.7H1.6v44.1h368.7v51.7H1.6v44.1h368.7v51.6H1.6V967h368.7v51.7H1.6v44.1h368.7v51.7H1.6v44.1h368.7v51.7H1.6
	v44.1h368.7v51.6H1.6v44.1h368.7v51.7H1.6v44.1h368.7v51.7H1.6v44.1h368.7v51.6H1.6v44.1h368.7v119.4h1289.9V38.4H370.3z
	 M1540.2,1636.8H490.3V158.4h1049.9V1636.8z"/>
<g fill="#00ff00" fill-opacity="0.65" stroke="#000000" stroke-width="7">
	<polygon points="650,313.2 694.8,268.5 954.5,268.5 1001.1,315 958.2,357.9 693.7,357.9 	"/>
	<polygon points="1034.4,313.2 1079.2,268.5 1339,268.5 1385.5,315 1342.6,357.9 1078.2,357.9 	"/>
	<polygon points="1404.5,873.1 1359.7,828.4 1359.7,380.6 1406.3,334.1 1449.2,376.9 1449.2,829.4 	"/>
	<polygon points="627.8,873.1 583.1,828.4 583.1,380.6 629.6,334.1 672.5,376.9 672.5,829.4 	"/>
	<polygon points="1404.5,1455.3 1359.7,1410.5 1359.7,962.8 1406.3,916.3 1449.2,959.1 1449.2,1411.6 	"/>
	<polygon points="627.8,1455.3 583.1,1410.5 583.1,962.8 629.6,916.3 672.5,959.1 672.5,1411.6 	"/>
	<polygon points="1015.3,873.1 970.5,828.4 970.5,380.6 1017.1,334.1 1060,376.9 1060,829.4 	"/>
	<polygon points="948.2,826 891.4,826 697,457.4 697,384.2 752.5,384.2 948.2,757.1 	"/>
	<polygon points="1084.2,757.1 1279.9,384.2 1335.5,384.2 1335.5,457.4 1141,826 1084.2,826 	"/>
	<polygon points="695.9,1337.8 891.6,964.9 947.1,964.9 947.1,1038 752.7,1406.6 695.9,1406.6 	"/>
	<polygon points="1335.6,1406.6 1278.8,1406.6 1084.3,1038 1084.3,964.9 1139.9,964.9 1335.6,1337.8 	"/>
	<polygon points="1015.3,1455.3 970.5,1410.5 970.5,962.8 1017.1,916.3 1060,959.1 1060,1411.6 	"/>
	<polygon points="650,893.6 694.8,848.9 954.5,848.9 1001.1,895.4 958.2,938.3 693.7,938.3 	"/>
	<polygon points="1034.4,893.6 1079.2,848.9 1339,848.9 1385.5,895.4 1342.6,938.3 1078.2,938.3 	"/>
	<polygon points="650,1474 694.8,1429.3 954.5,1429.3 1001.1,1475.8 958.2,1518.7 693.7,1518.7 	"/>
	<polygon points="1034.4,1474 1079.2,1429.3 1339,1429.3 1385.5,1475.8 1342.6,1518.7 1078.2,1518.7 	"/>
</g>
</svg>
`;var nh=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 1792 1792" style="enable-background:new 0 0 1792 1792;" fill="currentColor">
<path fill="#8888ff" fill-opacity="1" d="M1041.4,1259.6c-83.2,0-141.6-29.1-175-87.5c-33.5-58.3-50.2-141.3-50.2-249.1s16.7-191,50.2-249.5
	c33.5-58.5,91.9-87.9,175-87.9s141.6,29.3,175.2,87.9c33.3,58.5,50,141.7,50,249.5c0,107.8-16.7,190.8-50.2,249.1
	C1182.8,1230.4,1124.6,1259.6,1041.4,1259.6z M1116.6,1095.2c11.8-39.6,17.6-97,17.6-172c0-78.7-6-137-17.8-174.8
	c-11.9-37.8-36.8-56.7-75-56.7c-38.2,0-63.4,19-75.7,56.7c-12.3,37.8-18.4,96-18.4,174.8c0,75.1,6.1,132.6,18.4,172.3
	c12.3,39.9,37.5,59.6,75.7,59.6C1079.5,1155.2,1104.5,1135.1,1116.6,1095.2z"/>
<path d="M414.2,118v167.5H0v120h414.2v253.9H0v120h414.2v243.2H0v120h414.2v251.7H0v120h414.2V1697H1649V118H414.2z M1469,1517
	H594.2V298H1469V1517z"/>
</svg>
`;var oh=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 1792 1792" style="enable-background:new 0 0 1792 1792;" fill="currentColor">
<path d="M370.3,38.4v248.2H2.5v95h367.8v96.6H-0.6v95h370.9v85.9H2.5v95h367.8v92H2.1v95h368.2v93.1H2.5v95h367.8v92.8H2.5v95h367.8
	v99.5H0.5v95h369.8v245.3h1289.9V38.4H370.3z M1540.2,1636.8H490.3V158.4h1049.9V1636.8z"/>
	<g fill="#00ff00" fill-opacity="0.65" stroke="#000000" stroke-width="10">
<polygon points="760.4,334.1 826,268.5 1206.9,268.5 1275.1,336.7 1212.3,399.6 824.5,399.6 "/>
<polygon points="760.4,893.6 826,828.1 1206.9,828.1 1275.1,896.3 1212.3,959.1 824.5,959.1 "/>
<polygon points="760.4,1446 826,1380.4 1206.9,1380.4 1275.1,1448.6 1212.3,1511.5 824.5,1511.5 "/>
<polygon points="735.6,1416.4 670,1350.8 670,993.8 738.2,925.6 801.1,988.5 801.1,1352.3 "/>
<polygon points="735.6,864.3 670,798.8 670,441.8 738.2,373.6 801.1,436.5 801.1,800.2 "/>
<polygon points="1294.7,1416.4 1229.1,1350.8 1229.1,993.8 1297.3,925.6 1360.2,988.5 1360.2,1352.3 "/>
<polygon points="1294.7,864.3 1229.1,798.8 1229.1,441.8 1297.3,373.6 1360.2,436.5 1360.2,800.2 "/>
	</g>
</svg>
`;var rh=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 1792 1792" style="enable-background:new 0 0 1792 1792;" fill="currentColor">
	<path fill="#8888ff" fill-opacity="1" d="M1041.4,1366.5c-109.6,0-186.4-38.4-230.5-115.1c-44.1-76.7-66.2-186.1-66.2-328.1c0-142,22-251.6,66.2-328.7
		c44.1-77.1,120.9-115.7,230.5-115.7c109.6,0,186.5,38.6,230.8,115.7c43.9,77.1,65.9,186.7,65.9,328.7c0,142-22.1,251.4-66.2,328.1
		C1227.8,1328.2,1150.9,1366.5,1041.4,1366.5z M1140.4,1149.9c15.4-52.2,23.1-127.8,23.1-226.7c0-103.6-7.8-180.4-23.4-230.2
		c-15.6-49.8-48.6-74.8-98.8-74.8c-50.2,0-83.5,24.9-99.7,74.8c-16.2,49.8-24.3,126.6-24.3,230.2c0,98.9,8.1,174.5,24.3,227
		c16.2,52.4,49.4,78.6,99.7,78.6C1091.6,1228.9,1124.6,1202.6,1140.4,1149.9z" />
	<path d="M346,57.9v62.3H-2.7v120H346v90.3H-2.7v120H346v90.4H-2.7v120H346v90.3H-2.7v120H346v90.4H-2.7v120H346v90.2H-2.7v120H346
	v90.4H-5.2v120H346v90.3H-2.7v120H346v44.5h1371.2V57.9H346z M1587.2,1627.1H476V187.9h1111.2V1627.1z" />
</svg>`;var ih=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 1792 1792" style="enable-background:new 0 0 1792 1792;" fill="currentColor">
	<g fill="#8888ff" fill-opacity="1">
		<path d="M714.4,845.3H611v-76.8c0-37.1,8.8-66.1,26.4-86.9c17.6-20.8,42.8-34.4,75.6-41v37.9
		c-25,7.3-41.6,20.9-49.9,40.8c-4.6,10.7-6.4,20.8-5.5,30.2h56.8V845.3z" />
		<path d="M1256.7,1182.5h-136.2l-102-182.8l-107.8,182.8H780.3L952.9,909L788.7,645.7h134l95.8,174.5l98.3-174.5h129.7
		l-164.3,259L1256.7,1182.5z" />
		<path d="M1417.7,724.3c0,36.7-8.9,65.6-26.8,86.7c-17.8,21.1-42.9,34.8-75.2,41.2v-38.2c23.8-7.5,40.2-20.3,49.2-38.2
		c4.9-10.7,6.9-21.5,6.2-32.4h-57.2v-95.8h103.8V724.3z" />
	</g>
	<path d="M372.2,49.4v234.7H0v100h372.2v91.6H-3.1v100h375.3v80.9H0v100h372.2v87H-0.4v100h372.6v88.1H0v100h372.2v87.8H0v100h372.2
	v94.5H-2v100h374.2v231.7h1286.1V49.4H372.2z M1478.3,1565.7H552.2V229.4h926.1V1565.7z" />
	<rect x="2151.4" y="1368.3" style="fill:none;" width="0" height="4.1" />
</svg>`;var sh=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 1792 1792" style="enable-background:new 0 0 1792 1792;" fill="currentColor">
	<path d="M3.3,848.3h429.1v173.3H3.3V848.3z" />
	<path d="M435.7,1024.9H0V845h435.8V1024.9z M6.6,1018.3h422.4V851.6H6.6V1018.3z" />
	<path fill="#00ff00" fill-opacity="0.65" d="M498.1,1721.2V89.2h738.8v1632H498.1z" />
	<path d="M1301.9,1786.2H433.1V24.2h868.8V1786.2z M563.1,1656.2h608.8v-1502H563.1V1656.2z" />
</svg>`;var ah=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" fill="currentColor">
	<path d="M95,31v-2H80V10H20v19H5v2h15v38H5v2h15v19h60V71h15v-2H80V31H95z M23,66.9l7.1,3.1L23,73.1V66.9z M77,87H23V75.3L35.1,70
	L23,64.7V13h54V87z" />
	<rect x="62.4" y="60" width="11.9" height="1.5" />
	<path d="M27.3,36.3V23.4h4.4c1,0,1.8,0.1,2.3,0.2c0.7,0.2,1.4,0.5,1.9,0.9c0.7,0.6,1.2,1.3,1.5,2.2c0.3,0.9,0.5,1.9,0.5,3.1
		c0,1-0.1,1.8-0.3,2.6s-0.5,1.4-0.9,1.9c-0.4,0.5-0.7,0.9-1.2,1.2s-0.9,0.5-1.5,0.6s-1.3,0.2-2.1,0.2H27.3z M29,34.8h2.8
		c0.8,0,1.5-0.1,2-0.2s0.9-0.4,1.2-0.7c0.4-0.4,0.7-0.9,0.9-1.6c0.2-0.7,0.3-1.5,0.3-2.5c0-1.3-0.2-2.4-0.7-3.1
		c-0.4-0.7-1-1.2-1.6-1.5c-0.5-0.2-1.2-0.3-2.2-0.3H29V34.8z" />
	<path d="M72.6,35.1c0.8,0.5,1.5,0.9,2.2,1.2l-0.5,1.2c-0.9-0.3-1.8-0.9-2.8-1.6c-1,0.5-2,0.8-3.2,0.8c-1.2,0-2.2-0.3-3.2-0.8
		s-1.7-1.4-2.2-2.4s-0.8-2.2-0.8-3.4c0-1.3,0.3-2.4,0.8-3.5s1.2-1.8,2.2-2.4s2-0.8,3.2-0.8c1.2,0,2.3,0.3,3.2,0.8
		c1,0.6,1.7,1.4,2.2,2.4c0.5,1,0.8,2.2,0.8,3.4c0,1.1-0.2,2-0.5,2.9S73.2,34.5,72.6,35.1z M68.8,33c1,0.3,1.8,0.7,2.4,1.2
		c1-0.9,1.5-2.3,1.5-4.1c0-1-0.2-2-0.5-2.7s-0.9-1.4-1.6-1.8c-0.7-0.4-1.4-0.6-2.3-0.6c-1.3,0-2.3,0.4-3.2,1.3
		c-0.8,0.9-1.3,2.2-1.3,3.9c0,1.7,0.4,3,1.2,3.9s1.9,1.3,3.2,1.3c0.6,0,1.2-0.1,1.7-0.3c-0.5-0.3-1.1-0.6-1.7-0.7L68.8,33z" />
	<path d="M72.5,75.1c0.8,0.5,1.5,0.9,2.2,1.2l-0.5,1.2c-0.9-0.3-1.8-0.9-2.8-1.6c-1,0.5-2,0.8-3.2,0.8c-1.2,0-2.2-0.3-3.2-0.8
		s-1.7-1.4-2.2-2.4s-0.8-2.2-0.8-3.4c0-1.3,0.3-2.4,0.8-3.5s1.2-1.8,2.2-2.4s2-0.8,3.2-0.8c1.2,0,2.3,0.3,3.2,0.8
		c1,0.6,1.7,1.4,2.2,2.4c0.5,1,0.8,2.2,0.8,3.4c0,1.1-0.2,2-0.5,2.9S73.1,74.5,72.5,75.1z M68.7,73c1,0.3,1.8,0.7,2.4,1.2
		c1-0.9,1.5-2.3,1.5-4.1c0-1-0.2-2-0.5-2.7s-0.9-1.4-1.6-1.8c-0.7-0.4-1.4-0.6-2.3-0.6c-1.3,0-2.3,0.4-3.2,1.3
		c-0.8,0.9-1.3,2.2-1.3,3.9c0,1.7,0.4,3,1.2,3.9s1.9,1.3,3.2,1.3c0.6,0,1.2-0.1,1.7-0.3c-0.5-0.3-1.1-0.6-1.7-0.7L68.7,73z" />
</svg>`;var uh=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" fill="currentColor">
	<path d="M95,31v-2H80V10H20v19H5v2h15v18H5v2h15v18H5v2h15v19h60V71h15v-2H80V31H95z M23,46.9l7.1,3.1L23,53.1V46.9z M77,87H23V55.3
	L35.1,50L23,44.7V13h54V87z" />
	<rect x="62.4" y="60.2" width="11.9" height="1.5" />
	<path d="M26.5,32.8l1.5-0.2c0,1,0.2,1.7,0.6,2s0.8,0.5,1.4,0.5c0.4,0,0.8-0.1,1.1-0.3c0.3-0.2,0.5-0.5,0.6-0.8s0.2-0.9,0.2-1.6
		v-8.9h1.7v8.8c0,1.1-0.1,1.9-0.4,2.5s-0.7,1-1.2,1.4s-1.2,0.5-2,0.5c-1.1,0-2-0.3-2.6-1S26.4,34.1,26.5,32.8z" />
	<path d="M27,76.7V63.8h1.7v6.4l6.4-6.4h2.3L32,69l5.6,7.7h-2.2l-4.6-6.5l-2.1,2.1v4.5H27z" />
	<path d="M72.6,35.3c0.8,0.5,1.5,0.9,2.2,1.2l-0.5,1.2c-0.9-0.3-1.8-0.9-2.8-1.6c-1,0.5-2,0.8-3.2,0.8c-1.2,0-2.2-0.3-3.2-0.8
		s-1.7-1.4-2.2-2.4s-0.8-2.2-0.8-3.4c0-1.3,0.3-2.4,0.8-3.5s1.2-1.8,2.2-2.4s2-0.8,3.2-0.8c1.2,0,2.3,0.3,3.2,0.8
		c1,0.6,1.7,1.4,2.2,2.4c0.5,1,0.8,2.2,0.8,3.4c0,1.1-0.2,2-0.5,2.9S73.2,34.7,72.6,35.3z M68.8,33.1c1,0.3,1.8,0.7,2.4,1.2
		c1-0.9,1.5-2.3,1.5-4.1c0-1-0.2-2-0.5-2.7s-0.9-1.4-1.6-1.8c-0.7-0.4-1.4-0.6-2.3-0.6c-1.3,0-2.3,0.4-3.2,1.3
		c-0.8,0.9-1.3,2.2-1.3,3.9c0,1.7,0.4,3,1.2,3.9s1.9,1.3,3.2,1.3c0.6,0,1.2-0.1,1.7-0.3c-0.5-0.3-1.1-0.6-1.7-0.7L68.8,33.1z" />
	<path d="M72.5,75.3c0.8,0.5,1.5,0.9,2.2,1.2l-0.5,1.2c-0.9-0.3-1.8-0.9-2.8-1.6c-1,0.5-2,0.8-3.2,0.8c-1.2,0-2.2-0.3-3.2-0.8
		s-1.7-1.4-2.2-2.4s-0.8-2.2-0.8-3.4c0-1.3,0.3-2.4,0.8-3.5s1.2-1.8,2.2-2.4s2-0.8,3.2-0.8c1.2,0,2.3,0.3,3.2,0.8
		c1,0.6,1.7,1.4,2.2,2.4c0.5,1,0.8,2.2,0.8,3.4c0,1.1-0.2,2-0.5,2.9S73.1,74.7,72.5,75.3z M68.7,73.1c1,0.3,1.8,0.7,2.4,1.2
		c1-0.9,1.5-2.3,1.5-4.1c0-1-0.2-2-0.5-2.7s-0.9-1.4-1.6-1.8c-0.7-0.4-1.4-0.6-2.3-0.6c-1.3,0-2.3,0.4-3.2,1.3
		c-0.8,0.9-1.3,2.2-1.3,3.9c0,1.7,0.4,3,1.2,3.9s1.9,1.3,3.2,1.3c0.6,0,1.2-0.1,1.7-0.3c-0.5-0.3-1.1-0.6-1.7-0.7L68.7,73.1z" />
</svg>`;var lh=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" fill="currentColor">
	<path d="M95,31v-2H80V10H20v19H5v2h15v38H5v2h15v19h60V71h15v-2H80V31H95z M23,66.9l7.1,3.1L23,73.1V66.9z M77,87H23V75.3L35.1,70
		L23,64.7V13h54V87z" />
	<rect x="61.9" y="60.2" width="11.9" height="1.5" />
	<path d="M30.1,36.4V25h-4.2v-1.5h10.2V25h-4.3v11.4H30.1z" />
	<path d="M72,35.3c0.8,0.5,1.5,0.9,2.2,1.2l-0.5,1.2c-0.9-0.3-1.8-0.9-2.8-1.6c-1,0.5-2,0.8-3.2,0.8c-1.2,0-2.2-0.3-3.2-0.8
		s-1.7-1.4-2.2-2.4s-0.8-2.2-0.8-3.4c0-1.3,0.3-2.4,0.8-3.5s1.2-1.8,2.2-2.4s2-0.8,3.2-0.8c1.2,0,2.3,0.3,3.2,0.8
		c1,0.6,1.7,1.4,2.2,2.4c0.5,1,0.8,2.2,0.8,3.4c0,1.1-0.2,2-0.5,2.9S72.7,34.6,72,35.3z M68.3,33.1c1,0.3,1.8,0.7,2.4,1.2
		c1-0.9,1.5-2.3,1.5-4.1c0-1-0.2-2-0.5-2.7s-0.9-1.4-1.6-1.8c-0.7-0.4-1.4-0.6-2.3-0.6c-1.3,0-2.3,0.4-3.2,1.3
		c-0.8,0.9-1.3,2.2-1.3,3.9c0,1.7,0.4,3,1.2,3.9s1.9,1.3,3.2,1.3c0.6,0,1.2-0.1,1.7-0.3c-0.5-0.3-1.1-0.6-1.7-0.7L68.3,33.1z" />
	<path d="M72,75.3c0.8,0.5,1.5,0.9,2.2,1.2l-0.5,1.2c-0.9-0.3-1.8-0.9-2.8-1.6c-1,0.5-2,0.8-3.2,0.8c-1.2,0-2.2-0.3-3.2-0.8
		s-1.7-1.4-2.2-2.4s-0.8-2.2-0.8-3.4c0-1.3,0.3-2.4,0.8-3.5s1.2-1.8,2.2-2.4s2-0.8,3.2-0.8c1.2,0,2.3,0.3,3.2,0.8
		c1,0.6,1.7,1.4,2.2,2.4c0.5,1,0.8,2.2,0.8,3.4c0,1.1-0.2,2-0.5,2.9S72.6,74.6,72,75.3z M68.2,73.1c1,0.3,1.8,0.7,2.4,1.2
		c1-0.9,1.5-2.3,1.5-4.1c0-1-0.2-2-0.5-2.7s-0.9-1.4-1.6-1.8c-0.7-0.4-1.4-0.6-2.3-0.6c-1.3,0-2.3,0.4-3.2,1.3
		c-0.8,0.9-1.3,2.2-1.3,3.9c0,1.7,0.4,3,1.2,3.9s1.9,1.3,3.2,1.3c0.6,0,1.2-0.1,1.7-0.3c-0.5-0.3-1.1-0.6-1.7-0.7L68.2,73.1z" />
</svg>`;var ch=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" fill="currentColor">
	<path d="M88.4,34.2v-2H73.2V1.1H28.4V5H13.2v2h15.2v8.1H13.2v2h15.2v9.2H13.2v2h15.2v9.1H13.2v2h15.2v19.8H13.2v2h15.2v8.1H13.2v2
	h15.2v9.1H13.2v2h15.2v9.2H13.2v2h15.2v4h44.8v-31h15.2v-2H73.2v-9.2h15.2v-2H73.2v-9.2h15.2v-2H73.2v-8H88.4z M70.2,94.6H31.4V4.1
	h38.8V94.6z" />
	<path d="M38.7,35.5v25.8h13.2c7.3,0,12.9-5.8,12.9-12.9s-5.6-12.9-12.9-12.9H38.7z M40.5,37.4h11.4c6.3,0,10.8,4.9,10.8,11.1
	s-4.8,11.1-11.1,11.1H40.5C40.5,59.5,40.5,37.4,40.5,37.4z" />
</svg>`;var ph=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" fill="currentColor">
    <polygon points="46,65.9 51,65.9 51,54.3 62.2,54.3 62.2,49.3 51,49.3 51,38.2 46,38.2 46,49.3 34.9,49.3 34.9,54.3 46,54.3 	" />
    <path d="M87.2,32.4v-2H72.7V16.7H25.1v13.7H10.6v2h14.5v35.2H10.6v2h14.5v17.8h47.6V69.6h14.5v-2H72.7V32.4H87.2z M69.7,84.4H28.1
		V19.7h41.6V84.4z" />
</svg>`;var dh=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 32 24" style="enable-background:new 0 0 32 24;" fill="currentColor">
<path d="M32,10.5h-3.6c-0.8-0.8-1.9-2-2.8-2.9c-0.7-0.8-1.1-1.2-1.3-1.4C21.4,2.5,16,1,11.7,3.6c-6.4,3.5-6.4,13.2,0,16.8
	c4.1,2.5,9.4,1.2,12.3-2.2c0.1-0.1,0.2-0.1,0.3-0.2c0,0,0,0,1.6-1.6c0.9-0.9,1.9-1.9,2.6-2.6H32V10.5z M14,17.9
	C8.8,15.7,8.8,8.2,14,6c4.1-1.8,9,1.4,9,5.9C23,16.5,18.1,19.8,14,17.9z"/>
</svg>
`;var hh=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 1792 1792" style="enable-background:new 0 0 1792 1792;" fill="currentColor">
<path d="M1790.2,405.5v-120h-423.9V99H423v1579h943.3v-163.7h423.9v-120h-423.9v-251.7h423.9v-120h-423.9V779.4h423.9v-120h-423.9
	V405.5H1790.2z M603,1163.4V913h583.3v250.4H603z M603,843.9V592.6h583.3v251.3H603z M1186.3,279v239.5H603V279H1186.3z M603,1498
	v-257.3h583.3V1498H603z"/>
</svg>
`;var fh=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 1792 1792" style="enable-background:new 0 0 1792 1792;" fill="currentColor">
	<path d="M1661.1,260v-50h-324.8V37.4H453v1702.2h883.3V1582h324.2v-50h-324.2v-138.9h324.2v-50h-324.2v-138.8h324.2v-50h-324.2
	v-138.9h324.2v-50h-324.2V826.6h324.2v-50h-324.2V637.7h324.2v-50h-324.2V448.9h324.2v-50h-324.2V260H1661.1z M573,1618.9v-138.8
	h643.3v138.8H573z M573,1430.1v-138.8h643.3v138.8H573z M573,1241.3v-138.9h643.3v138.9H573z M573,1052.4V913.6h643.3v138.8H573z
	 M573,863.6V724.7h643.3v138.9H573z M573,674.7V535.9h643.3v138.8H573z M573,485.9V347h643.3v138.9H573z M573,297V158.2h643.3V297
	H573z" />
</svg>`;var mh=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 60" style="enable-background:new 0 0 100 60;" fill="currentColor">
	<path d="M7.6,44.1l14.4-15.2L13.4,14h4.4l3.9,6.8c1,1.8,1.6,2.8,1.8,3.1c0.4,0.7,0.7,1.5,1.2,2.4c1-1.4,2.6-3.2,4.7-5.4l6.6-7h5.2
		L26.7,29.5l8.2,14.5h-4.4l-4.9-8.8c-0.5-0.9-1-2-1.7-3.3c-0.7,1-1.6,2.1-2.7,3.2l-8.4,8.9H7.6z"/>
	<path d="M48.6,44.1l2.4-11.6L41.8,14h4.3l4.4,8.8c1,1.9,1.9,4,2.8,6.2c1-1.9,2.4-3.9,4.1-6.1l7.1-8.8h4.8L55,32.7l-2.4,11.3H48.6z"
		/>
	<path d="M65.9,44.1l0.4-3l15.1-18l3.1-3.8c0.6-0.8,1.2-1.5,1.8-2.1c-1.3,0.2-2.2,0.2-2.7,0.2l-1,0l-1.2,0l-1.2,0H70.2l0.7-3.4h20.7
		l-0.3,3.1L75.2,36.3c-2,2.4-3.2,3.8-3.8,4.5c0.6-0.1,1-0.1,1.2-0.1H89l-0.7,3.4H65.9z"/>
</svg>
`;var gh=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" fill="currentColor">
	<path d="M95,31v-2H80V10H20v19H5v2h15v38H5v2h15v19h60V71h15v-2H80V31H95z M77,87H23V13h54V87z" />
	<rect x="62" y="59.5" width="11.9" height="1.5" />
	<path d="M26.4,31.6l1.6-0.1c0.1,0.6,0.3,1.2,0.5,1.6c0.3,0.4,0.7,0.7,1.3,1c0.6,0.3,1.2,0.4,2,0.4c0.7,0,1.2-0.1,1.7-0.3
		s0.9-0.5,1.1-0.8s0.4-0.7,0.4-1.1c0-0.4-0.1-0.8-0.4-1.1s-0.6-0.6-1.2-0.8c-0.3-0.1-1.1-0.3-2.3-0.6s-2-0.6-2.5-0.8
		c-0.6-0.3-1.1-0.7-1.4-1.2s-0.5-1-0.5-1.6c0-0.7,0.2-1.3,0.6-1.8s0.9-1,1.6-1.3s1.5-0.4,2.4-0.4c1,0,1.8,0.2,2.5,0.5
		c0.7,0.3,1.3,0.8,1.7,1.4s0.6,1.3,0.6,2l-1.6,0.1c-0.1-0.8-0.4-1.4-0.9-1.8s-1.3-0.6-2.2-0.6c-1,0-1.8,0.2-2.3,0.6
		c-0.5,0.4-0.7,0.8-0.7,1.4c0,0.5,0.2,0.8,0.5,1.1c0.3,0.3,1.2,0.6,2.6,0.9c1.4,0.3,2.3,0.6,2.9,0.8c0.8,0.3,1.3,0.8,1.7,1.3
		s0.5,1.1,0.5,1.8c0,0.7-0.2,1.3-0.6,1.9c-0.4,0.6-1,1.1-1.7,1.4c-0.7,0.3-1.6,0.5-2.5,0.5c-1.2,0-2.1-0.2-2.9-0.5s-1.4-0.9-1.9-1.5
		C26.6,33.3,26.4,32.5,26.4,31.6z" />
	<path d="M26.7,76V63.1h5.7c1.1,0,2,0.1,2.6,0.3s1.1,0.6,1.4,1.2s0.5,1.2,0.5,1.9c0,0.9-0.3,1.7-0.9,2.3s-1.5,1-2.7,1.2
		c0.5,0.2,0.8,0.4,1,0.6c0.5,0.5,1,1,1.4,1.7L38,76h-2.1l-1.7-2.7c-0.5-0.8-0.9-1.4-1.2-1.8s-0.6-0.7-0.9-0.9s-0.5-0.3-0.8-0.3
		c-0.2,0-0.5-0.1-0.9-0.1h-2V76H26.7z M28.4,68.8H32c0.8,0,1.4-0.1,1.8-0.2s0.8-0.4,1-0.8s0.3-0.7,0.3-1.2c0-0.6-0.2-1.1-0.7-1.5
		s-1.1-0.6-2.1-0.6h-4.1V68.8z" />
	<path d="M72.2,34.6c0.8,0.5,1.5,0.9,2.2,1.2L73.9,37c-0.9-0.3-1.8-0.9-2.8-1.6c-1,0.5-2,0.8-3.2,0.8c-1.2,0-2.2-0.3-3.2-0.8
		S63.1,34,62.6,33s-0.8-2.2-0.8-3.4c0-1.3,0.3-2.4,0.8-3.5s1.2-1.8,2.2-2.4s2-0.8,3.2-0.8c1.2,0,2.3,0.3,3.2,0.8
		c1,0.6,1.7,1.4,2.2,2.4c0.5,1,0.8,2.2,0.8,3.4c0,1.1-0.2,2-0.5,2.9S72.8,34,72.2,34.6z M68.4,32.4c1,0.3,1.8,0.7,2.4,1.2
		c1-0.9,1.5-2.3,1.5-4.1c0-1-0.2-2-0.5-2.7S71,25.4,70.3,25c-0.7-0.4-1.4-0.6-2.3-0.6c-1.3,0-2.3,0.4-3.2,1.3
		c-0.8,0.9-1.3,2.2-1.3,3.9c0,1.7,0.4,3,1.2,3.9s1.9,1.3,3.2,1.3c0.6,0,1.2-0.1,1.7-0.3c-0.5-0.3-1.1-0.6-1.7-0.7L68.4,32.4z" />
	<path d="M72.1,74.6c0.8,0.5,1.5,0.9,2.2,1.2L73.8,77c-0.9-0.3-1.8-0.9-2.8-1.6c-1,0.5-2,0.8-3.2,0.8c-1.2,0-2.2-0.3-3.2-0.8
		S63,74,62.5,73s-0.8-2.2-0.8-3.4c0-1.3,0.3-2.4,0.8-3.5s1.2-1.8,2.2-2.4s2-0.8,3.2-0.8c1.2,0,2.3,0.3,3.2,0.8
		c1,0.6,1.7,1.4,2.2,2.4c0.5,1,0.8,2.2,0.8,3.4c0,1.1-0.2,2-0.5,2.9S72.7,74,72.1,74.6z M68.3,72.4c1,0.3,1.8,0.7,2.4,1.2
		c1-0.9,1.5-2.3,1.5-4.1c0-1-0.2-2-0.5-2.7s-0.9-1.4-1.6-1.8c-0.7-0.4-1.4-0.6-2.3-0.6c-1.3,0-2.3,0.4-3.2,1.3
		c-0.8,0.9-1.3,2.2-1.3,3.9c0,1.7,0.4,3,1.2,3.9s1.9,1.3,3.2,1.3c0.6,0,1.2-0.1,1.7-0.3c-0.5-0.3-1.1-0.6-1.7-0.7L68.3,72.4z" />
</svg>`;var Dh=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" fill="currentColor">
<path d="M83,44.9v-2H68V24.1l-15-8.7V1h-2v13.3L34,4.4V23H19v2h15v9H19v2h15v29H19v2h15v9H19v2h15v16.5l34-18.6V56h15v-2H68v-9.1H83
	z M37,25.1c6.5,0.7,10.1,5.1,13.9,9.8c3.7,4.6,7.5,9.3,14.1,9.9v9.1c-7.4-0.6-10.9-5.2-14.6-10.1c-3.4-4.5-6.9-9.1-13.4-9.7V25.1z
	 M65,25.9v16.9c-5.6-0.6-9-4.8-12.6-9.2c-3.9-4.9-8-9.9-15.4-10.6V9.6L65,25.9z M37,89.5V36.1c5.5,0.6,8.6,4.7,11.8,8.9
	c3.7,4.9,7.8,10.4,16.2,10.9v18.2L37,89.5z"/>
</svg>
`;var bh=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 32 24" style="enable-background:new 0 0 32 24;" fill="currentColor">
<path d="M24.1,7.2c-0.9-1.5-2-2.7-3.5-3.5c-1.5-0.9-3.1-1.3-4.9-1.3s-3.4,0.4-4.9,1.3c-1.5,0.9-2.7,2-3.5,3.5c-0.6,0.9-0.9,2-1.1,3
	L4.5,7c-0.2-0.4-0.6-0.5-1-0.4l0,0C3.1,6.7,2.9,7,2.9,7.4v0c0,0,0,0,0,0v2.8H0v3.2h2.8V16c0,0.4,0.3,0.7,0.6,0.8c0.1,0,0.2,0,0.2,0
	c0.3,0,0.6-0.2,0.7-0.4l0,0c0,0,0,0,0,0l1.7-2.9c0.2,1.2,0.6,2.3,1.2,3.4c0.9,1.5,2,2.7,3.5,3.5c1.5,0.9,3.1,1.3,4.9,1.3
	s3.4-0.4,4.9-1.3c1.5-0.9,2.7-2,3.5-3.5c0.9-1.5,1.3-3.1,1.3-4.9C25.4,10.3,25,8.7,24.1,7.2z M21.7,14.6c-0.3,0.8-0.8,1.5-1.4,2.1
	c-0.6,0.6-1.3,1-2.1,1.4c-0.8,0.3-1.6,0.5-2.5,0.5S14,18.3,13.3,18c-0.8-0.3-1.5-0.8-2.1-1.4c-0.6-0.6-1-1.3-1.4-2.1
	c-0.3-0.8-0.5-1.6-0.5-2.5c0-0.9,0.2-1.7,0.5-2.5c0.3-0.8,0.8-1.5,1.4-2.1c0.6-0.6,1.3-1,2.1-1.4c0.8-0.3,1.6-0.5,2.5-0.5
	s1.7,0.2,2.5,0.5c0.8,0.3,1.5,0.8,2.1,1.4c0.6,0.6,1,1.3,1.4,2.1c0.3,0.8,0.5,1.6,0.5,2.5C22.2,12.9,22,13.8,21.7,14.6z"/>
</svg>
`;var yh=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 1792 1792" style="enable-background:new 0 0 1792 1792;" fill="currentColor">
<path d="M419.9,115.9v163.7H-4v120h423.9v251.7H-4v120h423.9v243.2H-4v120h423.9v253.9H-4v120h423.9v186.5h943.3v-1579H419.9z
	 M599.9,1201.3V950h583.3v251.3H599.9z M1183.2,630.5v250.4H599.9V630.5H1183.2z M1183.2,295.9v257.3H599.9V295.9H1183.2z
	 M599.9,1514.9v-239.5h583.3v239.5H599.9z"/>
</svg>
`;var vh=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 1792 1792" style="enable-background:new 0 0 1792 1792;" fill="currentColor">
<path d="M323.8,47.3v157.6H-0.4v50h324.2v138.9H-0.4v50h324.2v138.8H-0.4v50h324.2v138.9H-0.4v50h324.2v138.8H-0.4v50h324.2v138.9
	H-0.4v50h324.2V1338H-0.4v50h324.2v138.9H-1v50h324.8v172.6h883.3V47.3H323.8z M443.8,1628.7v-138.8h643.3v138.8H443.8z
	 M443.8,1439.9V1301h643.3v138.9H443.8z M443.8,1251v-138.8h643.3V1251H443.8z M443.8,1062.2V923.3h643.3v138.9H443.8z M443.8,873.3
	V734.5h643.3v138.8H443.8z M443.8,684.5V545.6h643.3v138.9H443.8z M443.8,495.6V356.8h643.3v138.8H443.8z M443.8,306.8V168h643.3
	v138.8H443.8z"/>
</svg>
`;var Ch=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 50" style="enable-background:new 0 0 100 50;" fill="currentColor">
<rect x="45.8" y="5.9" fill="#9E9E9E" width="8" height="36.6"/>
<rect x="19.6" y="21.7" width="60" height="6"/>
</svg>
`;var wh=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" fill="currentColor">
<rect x="45.8" y="3.6" fill="#9E9E9E" width="8" height="91.2"/>
<rect x="19.6" y="11.6" width="60" height="5.4"/>
<rect x="19.6" y="34.3" width="60" height="5.4"/>
<rect x="19.6" y="56.9" width="60" height="5.4"/>
<rect x="19.6" y="79.6" width="60" height="5.4"/>
</svg>
`;var xh=`<?xml version="1.0" encoding="UTF-8"?>
<svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 1792 1792">
  <!-- Generator: Adobe Illustrator 29.8.1, SVG Export Plug-In . SVG Version: 2.1.1 Build 2)  -->
  <defs>
    <style>
      .st0 {
        fill: lime;
        fill-opacity: .65;
      }

      .st1 {
        fill: blue;
        fill-opacity: .65;
      }

      .st2 {
        fill: red;
        fill-opacity: .65;
      }
    </style>
  </defs>
  <path d="M3.3,848.3h429.1v173.3H3.3v-173.3Z"/>
  <path d="M1084.89,0v429.1h-173.3V0h173.3Z"/>
  <path d="M1084.89,1362.9v429.1h-173.3v-429.1h173.3Z"/>
  <path d="M435.7,1024.9H0v-179.9h435.8v179.9h-.1ZM6.6,1018.3h422.4v-166.7H6.6v166.7Z"/>
  <path class="st0" d="M548.71,1461.56V485.13h885.24v976.44h-885.24Z"/>
  <polyline class="st2" points="1125.19 498.13 548.71 1095.16 548.71 498.13"/>
  <polyline class="st1" points="784 1456.35 1431.08 796.65 1431.08 1456.35"/>
  <path d="M1563.38,1571.62H433.1V362.84h1130.28v1208.78ZM563.1,1436.33h856.17V498.13h-856.17v938.2Z"/>
</svg>`;var Th=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" fill="currentColor">
	<path d="M36.5,18.8v67h27.1v-67H36.5z M38.5,37.5h4.4V44h-4.4V37.5z M44.1,52.5v-7.2h4.6v7.2H44.1z M48.7,53.8v6.5h-4.6v-6.5H48.7z
	 M38.5,45.3h4.4v7.2h-4.4V45.3z M44.1,44v-6.5h4.6V44H44.1z M38.5,53.8h4.4v6.5h-4.4V53.8z M38.5,61.6h4.4v6.8h-4.4V61.6z
	 M44.1,61.6h4.6v6.8h-4.6V61.6z M50,61.6h5.1v6.8H50V61.6z M50,60.3v-6.5h5.1v6.5H50z M50,52.5v-7.2h5.1v7.2H50z M50,44v-6.5h5.1V44
	H50z M50,36.2v-7h5.1v7H50z M50,27.9v-7h5.1v7H50z M48.7,27.9h-4.6v-7h4.6V27.9z M48.7,29.2v7h-4.6v-7H48.7z M42.8,36.2h-4.4v-7h4.4
	V36.2z M38.5,69.7h4.4v6.5h-4.4V69.7z M44.1,69.7h4.6v6.5h-4.6V69.7z M48.7,77.5v6.3h-4.6v-6.3H48.7z M50,77.5h5.1v6.3H50V77.5z
	 M50,76.2v-6.5h5.1v6.5H50z M56.4,69.7h5.1v6.5h-5.1V69.7z M56.4,68.4v-6.8h5.1v6.8H56.4z M61.6,60.3h-5.1v-6.5h5.1V60.3z
	 M56.4,52.5v-7.2h5.1v7.2H56.4z M61.6,44h-5.1v-6.5h5.1V44z M56.4,36.2v-7h5.1v7H56.4z M61.6,27.9h-5.1v-7h5.1V27.9z M42.8,20.8v7
	h-4.4v-7H42.8z M38.5,77.5h4.4v6.3h-4.4V77.5z M56.4,83.8v-6.3h5.1v6.3H56.4z" />
	<path d="M24.9,55.7V44.3h3.9c0.9,0,1.6,0.1,2,0.2c0.7,0.2,1.2,0.4,1.7,0.8c0.6,0.5,1.1,1.2,1.4,2c0.3,0.8,0.4,1.7,0.4,2.7
		c0,0.9-0.1,1.6-0.3,2.3s-0.5,1.2-0.8,1.7c-0.3,0.4-0.7,0.8-1,1c-0.4,0.3-0.8,0.4-1.4,0.6c-0.5,0.1-1.1,0.2-1.8,0.2H24.9z
		 M26.4,54.4h2.4c0.8,0,1.3-0.1,1.8-0.2s0.8-0.3,1-0.6c0.4-0.4,0.6-0.8,0.8-1.4c0.2-0.6,0.3-1.3,0.3-2.2c0-1.2-0.2-2.1-0.6-2.8
		c-0.4-0.6-0.9-1.1-1.4-1.3c-0.4-0.2-1.1-0.2-2-0.2h-2.4V54.4z" />
	<path d="M74.5,54.5c0.7,0.5,1.4,0.8,1.9,1.1L76,56.6c-0.8-0.3-1.6-0.8-2.5-1.4c-0.8,0.5-1.8,0.7-2.8,0.7c-1,0-2-0.2-2.8-0.8
		s-1.5-1.2-1.9-2.1c-0.5-0.9-0.7-1.9-0.7-3.1c0-1.1,0.2-2.2,0.7-3.1c0.5-0.9,1.1-1.6,2-2.1c0.8-0.5,1.8-0.7,2.8-0.7
		c1.1,0,2,0.3,2.9,0.8c0.8,0.5,1.5,1.2,1.9,2.1s0.7,1.9,0.7,3.1c0,0.9-0.1,1.8-0.4,2.5C75.5,53.3,75.1,53.9,74.5,54.5z M71.1,52.6
		c0.9,0.2,1.6,0.6,2.2,1.1c0.9-0.8,1.3-2,1.3-3.7c0-0.9-0.2-1.7-0.5-2.4c-0.3-0.7-0.8-1.2-1.4-1.6c-0.6-0.4-1.3-0.6-2-0.6
		c-1.1,0-2.1,0.4-2.8,1.2c-0.7,0.8-1.1,1.9-1.1,3.5c0,1.5,0.4,2.6,1.1,3.4c0.7,0.8,1.7,1.2,2.8,1.2c0.5,0,1.1-0.1,1.5-0.3
		c-0.5-0.3-1-0.5-1.5-0.7L71.1,52.6z" />
	<path d="M94.9,24.8v-2h-15V6.5H73V0h-1.3v6.5h-12V0h-1.3v6.5H45.2V0h-1.3v6.5H31.3V0H30v6.5H19.9v16.3H5v2h14.9v13.6H5v2h14.9v15H5
	v2h14.9v14.3H5v2h14.9v15.6h-15v2h15v8.4h60v-26h15v-2h-15V57.4h15v-2h-15v-15h15v-2h-15V24.8H94.9z M22.9,87.3l7.1,3.1l-7.1,3.1
	V87.3z M76.9,96.7h-54v-1.1L35,90.4l-12.1-5.3V9.5h54V96.7z" />
</svg>`;var Ah=`<!-- Generator: Adobe Illustrator 26.5.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" fill="currentColor">
	<path d="M63.6,18.8H36.5v67h27.1V18.8z M56.4,29.2h5.1v7h-5.1V29.2z M56.4,45.3h5.1v7.2h-5.1V45.3z M38.4,20.8h4.4v7h-4.4V20.8z
		 M38.4,29.2h4.4v7h-4.4V29.2z M42.9,83.8h-4.4v-6.3h4.4V83.8z M42.9,76.2h-4.4v-6.5h4.4V76.2z M42.9,68.4h-4.4v-6.8h4.4V68.4z
		 M42.9,60.3h-4.4v-6.5h4.4V60.3z M42.9,52.5h-4.4v-7.2h4.4V52.5z M42.9,44h-4.4v-6.5h4.4V44z M48.7,83.8h-4.6v-6.3h4.6V83.8z
		 M48.7,76.2h-4.6v-6.5h4.6V76.2z M48.7,68.4h-4.6v-6.8h4.6V68.4z M48.7,60.3h-4.6v-6.5h4.6V60.3z M48.7,52.5h-4.6v-7.2h4.6V52.5z
		 M48.7,44h-4.6v-6.5h4.6V44z M48.7,36.2h-4.6v-7h4.6V36.2z M48.7,27.9h-4.6v-7h4.6V27.9z M55.1,83.8H50v-6.3h5.1V83.8z M55.1,76.2
		H50v-6.5h5.1V76.2z M55.1,68.4H50v-6.8h5.1V68.4z M55.1,60.3H50v-6.5h5.1V60.3z M55.1,52.5H50v-7.2h5.1V52.5z M55.1,44H50v-6.5h5.1
		V44z M55.1,36.2H50v-7h5.1V36.2z M55.1,27.9H50v-7h5.1V27.9z M61.5,83.8h-5.1v-6.3h5.1V83.8z M61.5,76.2h-5.1v-6.5h5.1V76.2z
		 M61.5,68.4h-5.1v-6.8h5.1V68.4z M61.6,60.3h-5.1v-6.5h5.1V60.3z M61.6,44h-5.1v-6.5h5.1V44z M61.6,27.9h-5.1v-7h5.1V27.9z" />
	<path d="M94.9,24.8v-2h-15V6.5H73V0h-1.3v6.5h-12V0h-1.3v6.5H45.2V0h-1.3v6.5H31.3V0H30v6.5H19.9v16.3v2v13.6v2v15v2v14.3v2v15.6v2
		v8.4h60v-26h15v-2h-15V57.4h15v-2h-15v-15h15v-2h-15V24.8H94.9z M76.9,96.7h-54v-1.1V85.1V9.5h54V96.7z" />
</svg>`;var Sh=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" fill="currentColor">
<g transform="translate(0.000000,1280.000000) scale(0.100000,-0.100000)">
	<path d="M475.9,12730c-2.1-0.8-339.2-191.5-340.3-192.6c-0.4-0.4-0.3-0.9,0.3-1.5c0.5-0.5,51.6-25,113.5-54.4
		c61.9-29.5,147.6-70.2,190.3-90.5c61.1-29.1,78.5-37.1,81.1-37.4c2.8-0.3,4-0.1,7.5,1.7c3.3,1.7,318.8,200.6,331.3,208.9
		c3.9,2.6,4.7,3.6,3.9,4.9c-0.4,0.7-27,12-158.6,68c-10.5,4.5-63.2,26.8-116.9,49.7c-53.7,22.8-99.4,42.1-101.5,42.8
		C482.3,12730.9,478.9,12731,475.9,12730z M482.4,12692c25.7-3.4,43.5-15.6,43.5-29.7c0-13-15.4-25.3-37.8-30.1
		c-33.4-7.2-69.1,2-78.6,20.1c-2.4,4.5-2.4,11.2-0.3,15.7c4.2,8.4,14.4,15.8,28.5,20.3C451,12692.6,467.4,12694,482.4,12692z
		 M537.5,12470.6c28.3-2.5,48.1-14.9,48.2-30c0.1-14-15.9-26-41.4-31c-8.9-1.8-27.3-2.1-35.6-0.7c-20.3,3.5-34,11.1-39.1,21.6
		c-1.9,3.8-2.1,4.8-1.8,8.7c0.3,6,2.4,9.9,7.8,15C488.1,12466.1,513.5,12472.8,537.5,12470.6z"/>
	<path d="M875.5,12541.5c-12.7-8-299.1-189-315.1-199.1c-10-6.4-19.6-12.8-21.3-14.4l-3.2-2.8v-4.9c0-2.7,0.7-54.9,1.7-115.9
		s2.3-152.7,3-203.9c1.7-123.7,1.5-116.5,3.6-116.5c0.9,0,330.4,219.1,334.9,222.7c1.4,1.2,3,2.8,3.4,3.8
		c0.7,1.3,0.7,43.6,0.4,217.8c-0.3,191.4-0.5,216.2-1.4,216.3C880.9,12544.6,878.2,12543.3,875.5,12541.5z M852.7,12462.6
		c10.3-5,15.3-16.2,14.6-33c-1.5-32.6-26.4-67.1-52.4-72.6c-6-1.3-10.7-0.7-16,1.9c-6.5,3.1-11.3,9.9-13.5,19.1
		c-1.2,5-1,18.3,0.3,24.4c6.6,29.7,27.4,55.7,49.7,61.7C841.7,12465.7,847.2,12465.3,852.7,12462.6z M754.6,12262.5
		c6.4-3.3,11.5-10.5,13.6-19.1c0.5-2.2,0.9-7,0.9-11.9c-0.1-9.3-1.9-18.1-5.5-27.3c-7.9-20.1-22.2-36.9-37.3-44.1
		c-7-3.3-11.3-4.3-17.3-3.9c-11.2,0.8-19.2,8.7-22,21.9c-1.5,6.8-0.9,19.3,1.3,27.7c7,26.7,26.3,50.6,46.3,57.3
		C741.3,12265.3,749.7,12265.1,754.6,12262.5z M642.9,12056.5c7.4-2.2,13.2-8.1,16.1-16.4c2.1-5.8,2.6-19.9,1.1-27.7
		c-5.8-29.1-27-56.2-49-62.5c-5.8-1.7-14.2-1.1-18.6,1.1c-5.7,2.9-9.6,7.9-12.4,15.7c-1.9,5.4-2.4,18.9-0.9,26.7
		c2.3,11.8,8.3,26.2,15.5,36.3c4,5.7,13.4,15.3,18.4,18.9C623.4,12056.1,634.5,12059,642.9,12056.5z"/>
	<path d="M118.7,12510.8c0-0.9,1.2-38.1,2.6-83c5.2-160.1,6.6-204.1,8.5-265.2c2.6-83.4,2.4-79.3,4.6-81.4
		c1.9-1.9,376.6-198,378.4-198c0.6,0,1.3,0.4,1.5,0.9c0.4,1-5.4,406.4-6.1,428.7l-0.4,12.8l-2.1,2.2c-1.6,1.7-24.8,13-106.7,52
		c-57.5,27.3-143.7,68.3-191.5,91c-47.7,22.7-87.3,41.3-87.9,41.3C119.1,12512.3,118.7,12511.7,118.7,12510.8z M299.3,12246.2
		c8.1-2.8,14.8-7.2,22.8-15.2c22.6-22.5,32.6-57.2,22.6-78.5c-11.9-25.2-46.5-17.1-68.5,15.9c-19.1,28.7-20.1,63.5-2.3,75.6
		c4.7,3.2,7.6,4,14,4C292.8,12248.1,294.8,12247.8,299.3,12246.2z"/>
</g>
</svg>
`;var Eh=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" fill="currentColor">
	<path fill="#888888" fill-opacity="0.3" d="M78.1,86.4H21.2c-4.4,0-8-3.6-8-8V21.6c0-4.4,3.6-8,8-8h56.9c4.4,0,8,3.6,8,8v56.9
		C86.1,82.9,82.5,86.4,78.1,86.4z" />
	<path d="M78.1,88.4H21.2c-5.5,0-10-4.5-10-10V21.6c0-5.5,4.5-10,10-10h56.9c5.5,0,10,4.5,10,10v56.9C88.1,84,83.6,88.4,78.1,88.4z
		 M21.2,15.6c-3.3,0-6,2.7-6,6v56.8c0,3.3,2.7,6,6,6h56.9c3.3,0,6-2.6,6-5.9V21.6c0-3.3-2.7-6-6-6H21.2z" />
</svg>`;var _h=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" fill="currentColor">
	<path d="M40.7,16.4v67h20.1v-67H40.7z M58.8,18.4v15.2H42.7V18.4H58.8z M42.7,50V35.1h16.1V50H42.7z M58.8,51.5v14.4H42.7V51.5H58.8
	z M42.7,81.4V67.3h16.1v14.1H42.7z" />
	<path d="M26.3,50.4V38.9h3.9c0.9,0,1.6,0.1,2,0.2c0.7,0.2,1.2,0.4,1.7,0.8c0.6,0.5,1.1,1.2,1.4,2c0.3,0.8,0.4,1.7,0.4,2.7
		c0,0.9-0.1,1.6-0.3,2.3s-0.5,1.2-0.8,1.7c-0.3,0.4-0.7,0.8-1,1c-0.4,0.3-0.8,0.4-1.4,0.6c-0.5,0.1-1.1,0.2-1.8,0.2H26.3z M27.9,49
		h2.4c0.8,0,1.3-0.1,1.8-0.2s0.8-0.3,1-0.6c0.4-0.4,0.6-0.8,0.8-1.4c0.2-0.6,0.3-1.3,0.3-2.2c0-1.2-0.2-2.1-0.6-2.8
		c-0.4-0.6-0.9-1.1-1.4-1.3c-0.4-0.2-1.1-0.2-2-0.2h-2.4V49z" />
	<path d="M72.8,49.2c0.7,0.5,1.4,0.8,1.9,1.1l-0.4,1.1c-0.8-0.3-1.6-0.8-2.5-1.4c-0.8,0.5-1.8,0.7-2.8,0.7c-1,0-2-0.2-2.8-0.8
		s-1.5-1.2-1.9-2.1c-0.5-0.9-0.7-1.9-0.7-3.1c0-1.1,0.2-2.2,0.7-3.1c0.5-0.9,1.1-1.6,2-2.1c0.8-0.5,1.8-0.7,2.8-0.7
		c1.1,0,2,0.3,2.9,0.8c0.8,0.5,1.5,1.2,1.9,2.1s0.7,1.9,0.7,3.1c0,0.9-0.1,1.8-0.4,2.5C73.8,47.9,73.4,48.6,72.8,49.2z M69.5,47.2
		c0.9,0.2,1.6,0.6,2.2,1.1c0.9-0.8,1.3-2,1.3-3.7c0-0.9-0.2-1.7-0.5-2.4c-0.3-0.7-0.8-1.2-1.4-1.6c-0.6-0.4-1.3-0.6-2-0.6
		c-1.1,0-2.1,0.4-2.8,1.2c-0.7,0.8-1.1,1.9-1.1,3.5c0,1.5,0.4,2.6,1.1,3.4c0.7,0.8,1.7,1.2,2.8,1.2c0.5,0,1.1-0.1,1.5-0.3
		c-0.5-0.3-1-0.5-1.5-0.7L69.5,47.2z" />
	<path d="M95,22.4v-2H80v-18H20v18H5.1v2H20V36H5.1v2H20v15H5.1v2H20v14.3H5.1v2H20v17.6H5v2h15v8.3h60V71.3h15v-2H80V55h15v-2H80V38
	h15v-2H80V22.4H95z M23,86.9l7.1,3.1L23,93.1V86.9z M77,96.2H23v-0.9L35.1,90L23,84.7V5.4h54V96.2z" />
</svg>`;var Rh=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 60.5" style="enable-background:new 0 0 100 60.5;" fill="currentColor">
	<path d="M17.9,15.7h3.7c0.8,0,1.5,0.1,1.9,0.2c0.6,0.2,1.1,0.5,1.5,0.9s0.7,1,1,1.6c0.2,0.6,0.3,1.4,0.3,2.4c0,0.8-0.1,1.5-0.3,2.1
		c-0.3,0.7-0.6,1.3-1.1,1.8c-0.4,0.3-0.8,0.6-1.4,0.8c-0.4,0.1-1,0.2-1.8,0.2h-3.8V15.7z M19.9,17.4V24h1.5c0.6,0,1,0,1.2-0.1
		c0.3-0.1,0.6-0.2,0.8-0.4s0.4-0.5,0.5-1c0.1-0.4,0.2-1.1,0.2-1.8s-0.1-1.4-0.2-1.8s-0.3-0.7-0.6-1s-0.6-0.4-0.9-0.5
		c-0.3-0.1-0.8-0.1-1.7-0.1H19.9z" />
	<path d="M13,10v8.5H5v2h8V40H5v2h8v9.6h83.3V10H13z M16,36.5l8.7,3.8L16,44.1V36.5z M93.3,48.6H16V46l0.1,0.2l13.6-5.9l-13.6-5.9
	L16,34.6V13h77.3V48.6z" />
	<g fill="#8888ff" fill-opacity="1">
		<path d="M43.4,38.9h-3.3V27.5h-3.9v-2.2c1,0,1.7-0.1,2.1-0.2c0.7-0.1,1.2-0.4,1.6-0.9c0.3-0.3,0.5-0.7,0.6-1.2
		c0.1-0.3,0.1-0.5,0.1-0.7h2.7V38.9z" />
		<path d="M53.9,39.3c-2.1,0-3.6-0.7-4.4-2.2c-0.8-1.5-1.3-3.6-1.3-6.3s0.4-4.8,1.3-6.3c0.8-1.5,2.3-2.2,4.4-2.2
		c2.1,0,3.6,0.7,4.4,2.2c0.8,1.5,1.3,3.6,1.3,6.3s-0.4,4.8-1.3,6.3C57.5,38.5,56,39.3,53.9,39.3z M55.8,35.1c0.3-1,0.4-2.4,0.4-4.3
		c0-2-0.1-3.5-0.4-4.4S54.9,25,53.9,25c-1,0-1.6,0.5-1.9,1.4s-0.5,2.4-0.5,4.4c0,1.9,0.2,3.3,0.5,4.3s0.9,1.5,1.9,1.5
		C54.9,36.6,55.5,36.1,55.8,35.1z" />
		<path d="M69.3,38.9H66V27.5h-3.9v-2.2c1,0,1.7-0.1,2.1-0.2c0.7-0.1,1.2-0.4,1.6-0.9c0.3-0.3,0.5-0.7,0.6-1.2
		c0.1-0.3,0.1-0.5,0.1-0.7h2.7V38.9z" />
		<path d="M79.8,39.3c-2.1,0-3.6-0.7-4.4-2.2s-1.3-3.6-1.3-6.3s0.4-4.8,1.3-6.3s2.3-2.2,4.4-2.2c2.1,0,3.6,0.7,4.4,2.2
		c0.8,1.5,1.3,3.6,1.3,6.3s-0.4,4.8-1.3,6.3C83.4,38.5,81.9,39.3,79.8,39.3z M81.7,35.1c0.3-1,0.4-2.4,0.4-4.3c0-2-0.1-3.5-0.4-4.4
		S80.8,25,79.8,25c-1,0-1.6,0.5-1.9,1.4s-0.5,2.4-0.5,4.4c0,1.9,0.2,3.3,0.5,4.3s0.9,1.5,1.9,1.5C80.8,36.6,81.4,36.1,81.7,35.1z" />
	</g>
</svg>`;var Mh=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" fill="currentColor">
	<path d="M60.8,83.4H40.7v-67h20.1V83.4z M42.7,81.4h16.1v-63H42.7V81.4z" />
	<path d="M26.3,42.2V30.8h3.9c0.9,0,1.6,0.1,2,0.2c0.7,0.2,1.2,0.4,1.7,0.8c0.6,0.5,1.1,1.2,1.4,2c0.3,0.8,0.4,1.7,0.4,2.7
		c0,0.9-0.1,1.6-0.3,2.3S35,40,34.7,40.4c-0.3,0.4-0.7,0.8-1,1c-0.4,0.3-0.8,0.4-1.4,0.6c-0.5,0.1-1.1,0.2-1.8,0.2H26.3z M27.9,40.9
		h2.4c0.8,0,1.3-0.1,1.8-0.2s0.8-0.3,1-0.6c0.4-0.4,0.6-0.8,0.8-1.4c0.2-0.6,0.3-1.3,0.3-2.2c0-1.2-0.2-2.1-0.6-2.8
		c-0.4-0.6-0.9-1.1-1.4-1.3c-0.4-0.2-1.1-0.2-2-0.2h-2.4V40.9z" />
	<path d="M26.3,79V67.6h1.5v10.1h3.6V79H26.3z" />
	<path d="M32.3,79V67.6h2.1c1,0,1.3,0.1,1.9,0.3s1,0.6,1.3,1.1s0.5,1.1,0.5,1.7c0,0.8-0.3,1.5-0.8,2.1s-0.9,0.9-2,1.1
	c0.4,0.2,0.7,0.4,0.9,0.6c0.4,0.4,0.5,0.8,0.8,1.5l1.2,3.1h-1.9l-0.7-2.4c-0.2-0.8-0.3-1.2-0.6-1.6s-0.5-0.6-0.8-0.8
	S33.6,74,33.4,74c-0.2,0-0.5-0.1-0.8-0.1h1.2V79H32.3z M33.8,72.6H34c0.7,0,0.8-0.1,1.2-0.2s0.7-0.4,0.9-0.7s0.3-0.7,0.3-1
	c0-0.5-0.2-1-0.6-1.3c-0.4-0.3-0.6-0.5-1.4-0.5h-0.6C33.8,68.9,33.8,72.6,33.8,72.6z" />
	<path d="M72.8,49.2c0.7,0.5,1.4,0.8,1.9,1.1l-0.4,1.1c-0.8-0.3-1.6-0.8-2.5-1.4c-0.8,0.5-1.8,0.7-2.8,0.7c-1,0-2-0.2-2.8-0.8
		s-1.5-1.2-1.9-2.1c-0.5-0.9-0.7-1.9-0.7-3.1c0-1.1,0.2-2.2,0.7-3.1c0.5-0.9,1.1-1.6,2-2.1c0.8-0.5,1.8-0.7,2.8-0.7
		c1.1,0,2,0.3,2.9,0.8c0.8,0.5,1.5,1.2,1.9,2.1s0.7,1.9,0.7,3.1c0,0.9-0.1,1.8-0.4,2.5C73.8,47.9,73.4,48.6,72.8,49.2z M69.5,47.2
		c0.9,0.2,1.6,0.6,2.2,1.1c0.9-0.8,1.3-2,1.3-3.7c0-0.9-0.2-1.7-0.5-2.4c-0.3-0.7-0.8-1.2-1.4-1.6c-0.6-0.4-1.3-0.6-2-0.6
		c-1.1,0-2.1,0.4-2.8,1.2c-0.7,0.8-1.1,1.9-1.1,3.5c0,1.5,0.4,2.6,1.1,3.4c0.7,0.8,1.7,1.2,2.8,1.2c0.5,0,1.1-0.1,1.5-0.3
		c-0.5-0.3-1-0.5-1.5-0.7L69.5,47.2z" />
	<path d="M95,22.4v-2H80v-18H20V36H5.1v2H20v34.6H5.1v2H20v14.3H5v2h15v8.3h60V71.3h15v-2H80V55h15v-2H80V38.7h15v-2H80V22.4H95z
	 M23,86.9l7.1,3.1L23,93.1V86.9z M77,96.2H23v-0.9L35.1,90L23,84.7V5.4h54V96.2z" />
	<polygon points="56,52.3 54.6,53.3 54.6,39.2 52.6,39.2 52.6,54.7 50.9,56 49,54.7 49,39.2 47,39.2 47,53.3 45.5,52.3 44.3,53.9 
	50.9,58.4 57.2,53.9 " />
	<rect x="26.2" y="65.9" width="5.1" height="1" />
</svg>`;var Oh=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" fill="currentColor">
<path d="M88.4,26.1v-2H73.2V11.9H51.8V5.5h-2v6.4H28.4v12.2H13.2v2h15.2v14.2H13.2v2h15.2v14.2H13.2v2h15.2v14.2H13.2v2h15.2v12.1
	h44.8V74.7h15.2v-2H73.2V58.5h15.2v-2H73.2V42.3h15.2v-2H73.2V26.1H88.4z M70.2,83.8H31.4V14.9h18.4v27l-10-5.3v27.7l25.1-14.4
	l-13.1-7v-28h18.4V83.8z M60.7,49.9L41.8,60.8V39.9L60.7,49.9z"/>
</svg>
`;var Ph=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 50" style="enable-background:new 0 0 100 50;" fill="currentColor">
<path d="M95,24H70.4c-0.5-10.5-9-19-20-19H30v9H5v2h25v18H5v2h25v9h20.5c10.9,0,19.4-8.5,20-19H95V24z M50,42.1H32.9V7.9h17.6
	c9.8,0,16.7,7.6,16.7,17.1S59.8,42.1,50,42.1z"/>
</svg>
`;var Bh=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 50" style="enable-background:new 0 0 100 50;" fill="currentColor">
<path d="M95,24H70.5c-0.5-10.5-9-19-20-19H30v9H5v2h25v7.9H5v2h25V34H5v2h25v9h20.5c11,0,19.4-8.5,20-19H95V24z M50,42.1H32.9V7.9
	h17.6c9.8,0,16.7,7.6,16.7,17.1S59.8,42.1,50,42.1z"/>
</svg>
`;var Nh=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 50" style="enable-background:new 0 0 100 50;" fill="currentColor">
<path d="M95,24H70.5c-0.5-10.5-9-19-20-19H30v4.1H5v2h25v7.7H5v2h25v8.3H5v2h25v7.7H5v2h25V45h20.5c11,0,19.4-8.5,20-19H95V24z
	 M50,42.1H32.9V7.9h17.6c9.8,0,16.7,7.6,16.7,17.1S59.8,42.1,50,42.1z"/>
</svg>
`;var Fh=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 50" style="enable-background:new 0 0 100 50;" fill="currentColor">
<path d="M95,24H72.9L31.1,3.7L29,2.6V24H5v2h24v21.4l2.2-1.1L72.5,26H95V24z M32,42.6V7.4L68.1,25L32,42.6z"/>
</svg>
`;var Ih=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 50" style="enable-background:new 0 0 100 50;" fill="currentColor">
<path d="M95,24H72.4C62.1,5.2,46,5,41.2,5H24.1l2,2.4c0,0,0.8,1,1.8,2.7C27,9.7,26.1,9.4,25,9.4c-2.7,0-5,2-5.4,4.6H5v2h14.6
	c0.5,2.5,2.7,4.4,5.4,4.4c2.6,0,4.8-1.9,5.4-4.3c0.8,2.5,1.4,5.6,1.4,9c0,3.4-0.6,6.4-1.4,9H5v2h24.7c-1.6,4.1-3.6,6.6-3.6,6.6
	l-2,2.4h17.2c2.4,0,7.7,0,13.6-2.4c5.9-2.4,12.4-7.3,17.5-16.6H95V24z M25,17.4c-1.4,0-2.5-1.1-2.5-2.5s1.1-2.5,2.5-2.5
	s2.5,1.1,2.5,2.5S26.4,17.4,25,17.4z M53.5,39.8C48.1,42,43.7,42,41.2,42H30c1.9-3.1,4.8-9,4.8-17c0-8-2.9-13.9-4.8-17h11.3
	c4.7,0,18.3-0.1,28,17C64.5,33.4,58.7,37.7,53.5,39.8z"/>
</svg>
`;var kh=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 50" style="enable-background:new 0 0 100 50;" fill="currentColor">
<path d="M95,24H80.4c-0.5-2.6-2.7-4.5-5.4-4.5c-2,0-3.8,1.1-4.7,2.7C68.9,12.5,60.8,5,50.5,5H30v9H5v2h25v18H5v2h25v9h20.5
	c10.3,0,18.5-7.5,19.8-17.2c1,1.6,2.7,2.7,4.7,2.7c2.7,0,4.9-1.9,5.4-4.5H95V24z M50,42.1H32.9V7.9h17.6c9.8,0,16.7,7.6,16.7,17.1
	S59.8,42.1,50,42.1z M75,27.5c-1.4,0-2.5-1.1-2.5-2.5c0-1.4,1.1-2.5,2.5-2.5s2.5,1.1,2.5,2.5C77.5,26.4,76.4,27.5,75,27.5z"/>
</svg>
`;var Lh=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 50" style="enable-background:new 0 0 100 50;" fill="currentColor">
<path d="M95,24H80.4c-0.5-2.6-2.7-4.5-5.4-4.5c-2,0-3.8,1.1-4.7,2.7C68.9,12.5,60.8,5,50.5,5H30v9H5v2h25v7.7H5v2h25V34H5v2h25v9
	h20.5c10.3,0,18.4-7.5,19.8-17.2c1,1.6,2.7,2.7,4.7,2.7c2.7,0,4.9-1.9,5.4-4.5H95V24z M50,42.1H32.9V7.9h17.6
	c9.8,0,16.7,7.6,16.7,17.1S59.8,42.1,50,42.1z M75,27.5c-1.4,0-2.5-1.1-2.5-2.5c0-1.4,1.1-2.5,2.5-2.5s2.5,1.1,2.5,2.5
	C77.5,26.4,76.4,27.5,75,27.5z"/>
</svg>
`;var Vh=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 50" style="enable-background:new 0 0 100 50;" fill="currentColor">
<path d="M95,24H80.4c-0.5-2.6-2.7-4.5-5.4-4.5c-2,0-3.8,1.1-4.7,2.7C68.9,12.5,60.8,5,50.5,5H30v3.8H5v2h25v8H5v2h25v8H5v2h25v8H5v2
	h25V45h20.5c10.3,0,18.4-7.5,19.8-17.2c1,1.6,2.7,2.7,4.7,2.7c2.7,0,4.9-1.9,5.4-4.5H95V24z M50,42.1H32.9V7.9h17.6
	c9.8,0,16.7,7.6,16.7,17.1S59.8,42.1,50,42.1z M75,27.5c-1.4,0-2.5-1.1-2.5-2.5c0-1.4,1.1-2.5,2.5-2.5s2.5,1.1,2.5,2.5
	C77.5,26.4,76.4,27.5,75,27.5z"/>
</svg>
`;var Hh=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 50" style="enable-background:new 0 0 100 50;" fill="currentColor">
<path d="M95,24H70.4c-0.5-10.5-9-19-20-19H30v9H5v2h25v15.9c-1-1.4-2.6-2.3-4.5-2.3c-2.7,0-4.9,1.9-5.4,4.5H5v2h15.1
	c0.5,2.6,2.7,4.5,5.4,4.5c1.9,0,3.5-0.9,4.5-2.3V45h20.5c10.9,0,19.4-8.5,20-19H95V24z M25.5,37.5c-1.4,0-2.5-1.1-2.5-2.5
	s1.1-2.5,2.5-2.5S28,33.6,28,35S26.9,37.5,25.5,37.5z M50,42.1H32.9V7.9h17.6c9.8,0,16.7,7.6,16.7,17.1S59.8,42.1,50,42.1z"/>
</svg>
`;var Wh=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 50" style="enable-background:new 0 0 100 50;" fill="currentColor">
<path d="M95,24H80.4c-0.5-2.6-2.7-4.5-5.4-4.5c-1.7,0-3.1,0.7-4.1,1.9C60.5,5.2,45.8,5,41.2,5H24.1l2,2.4c0,0,1.9,2.4,3.6,6.6H5v2
	h25.4c0.8,2.6,1.4,5.6,1.4,9c0,3.4-0.6,6.4-1.4,9H5v2h24.7c-1.6,4.1-3.6,6.6-3.6,6.6l-2,2.4h17.2c2.4,0,7.7,0,13.6-2.4
	c5.3-2.2,11.1-6.3,16-14c1,1.2,2.5,1.9,4.1,1.9c2.7,0,4.9-1.9,5.4-4.5H95V24z M53.5,39.8C48.1,42,43.7,42,41.2,42H30
	c1.9-3.1,4.8-9,4.8-17c0-8-2.9-13.9-4.8-17h11.3c4.7,0,18.3-0.1,28,17C64.5,33.4,58.7,37.7,53.5,39.8z M75,27.5
	c-1.4,0-2.5-1.1-2.5-2.5c0-1.4,1.1-2.5,2.5-2.5s2.5,1.1,2.5,2.5C77.5,26.4,76.4,27.5,75,27.5z"/>
</svg>
`;var Uh=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 50" style="enable-background:new 0 0 100 50;" fill="currentColor">
<path d="M95,24H80.4c-0.5-2.6-2.7-4.5-5.4-4.5c-1.7,0-3.2,0.8-4.2,1.9C60.6,5.2,45.7,5,41.2,5H24.1l2,2.4c0,0,2,2.4,3.6,6.6H5v2
	h25.4c0.7,2.3,1.2,4.9,1.4,7.9H5v2h26.8c-0.1,3-0.6,5.8-1.4,8.1H5v2h24.7c-1.6,4.2-3.6,6.6-3.6,6.6l-2,2.4h17.2
	c2.4,0,7.7,0,13.6-2.4c5.3-2.1,11.1-6.3,16-14c1,1.1,2.5,1.9,4.1,1.9c2.7,0,4.9-1.9,5.4-4.5H95V24z M53.6,39.8
	C48.1,42,43.7,42,41.2,42H30c1.9-3.1,4.8-9,4.8-17s-3-13.9-4.8-17h11.3c4.7,0,18.3-0.1,28,17C64.5,33.4,58.8,37.7,53.6,39.8z
	 M75,27.5c-1.4,0-2.5-1.1-2.5-2.5c0-1.4,1.1-2.5,2.5-2.5s2.5,1.1,2.5,2.5C77.5,26.4,76.4,27.5,75,27.5z"/>
</svg>
`;var zh=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 50" style="enable-background:new 0 0 100 50;" fill="currentColor">
<path d="M29.5,41H5v-2h24.5V41z M32,30.9H5v-2h27V30.9z M95,26H79v-2h16V26z M32.8,21H5v-2h27.8V21z M29.4,10.9H5v-2h24.4V10.9z"/>
<path d="M24.1,5l2,2.4c0,0,5.7,7,5.7,17.6s-5.7,17.6-5.7,17.6l-2,2.4h17.2c2.4,0,7.7,0,13.6-2.4s12.5-7.3,17.7-16.9L71.2,25l1.3-0.7
	C62.3,5.2,46,5,41.2,5H24.1z M30,8h11.3c4.7,0,18.3-0.1,28,17c-4.8,8.4-10.5,12.7-15.7,14.8C48.1,42,43.7,42,41.2,42H30
	c1.9-3.1,4.8-9,4.8-17S31.8,11.1,30,8z"/>
<path d="M75,30.5c-3,0-5.5-2.5-5.5-5.5c0-3,2.5-5.5,5.5-5.5s5.5,2.5,5.5,5.5C80.5,28,78,30.5,75,30.5z M75,22.5
	c-1.4,0-2.5,1.1-2.5,2.5c0,1.4,1.1,2.5,2.5,2.5s2.5-1.1,2.5-2.5C77.5,23.6,76.4,22.5,75,22.5z"/>
</svg>
`;var Gh=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 50" style="enable-background:new 0 0 100 50;" fill="currentColor">
<path d="M95,24H80.4c-0.5-2.6-2.7-4.5-5.4-4.5c-2.2,0-4.1,1.3-5,3.1l-38.9-19L29,2.6V24H5v2H29v21.4l2.2-1.1l38.9-19
	c0.9,1.8,2.8,3.1,5,3.1c2.7,0,4.9-1.9,5.4-4.5H95V24z M32,42.6V7.4L68.1,25L32,42.6z M75,27.5c-1.4,0-2.5-1.1-2.5-2.5
	c0-1.4,1.1-2.5,2.5-2.5s2.5,1.1,2.5,2.5C77.5,26.4,76.4,27.5,75,27.5z"/>
</svg>
`;var qh=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 50" style="enable-background:new 0 0 100 50;" fill="currentColor">
<path d="M95,24H72.4C62.1,5.2,46,5,41.2,5H24.1l2,2.4c0,0,1.9,2.4,3.6,6.6H5v2h25.4c0.8,2.6,1.4,5.6,1.4,9
	c0,3.4-0.6,6.4-1.4,9H5v2h24.7c-1.6,4.1-3.6,6.6-3.6,6.6l-2,2.4h17.2c2.4,0,7.7,0,13.6-2.4c5.9-2.4,12.4-7.3,17.5-16.6H95V24z
	 M53.5,39.8C48.1,42,43.7,42,41.2,42H30c1.9-3.1,4.8-9,4.8-17c0-8-2.9-13.9-4.8-17h11.3c4.7,0,18.3-0.1,28,17
	C64.5,33.4,58.7,37.7,53.5,39.8z"/>
</svg>
`;var $h=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 50" style="enable-background:new 0 0 100 50;" fill="currentColor">
<path d="M95,24H72.3C62.1,5.2,46,5,41.2,5H24.1l2,2.4c0,0,2,2.4,3.6,6.6H5v2h25.4c0.7,2.3,1.3,5,1.4,8H5v2h26.8
	c-0.1,3-0.6,5.7-1.4,8H5v2h24.7c-1.6,4.2-3.6,6.6-3.6,6.6l-2,2.4h17.2c2.4,0,7.7,0,13.6-2.4c5.8-2.4,12.4-7.2,17.5-16.6H95V24z
	 M53.6,39.8C48.1,42,43.7,42,41.2,42H30c1.9-3.1,4.8-9,4.8-17s-3-13.9-4.8-17h11.3c4.7,0,18.3-0.1,28,17
	C64.5,33.4,58.8,37.7,53.6,39.8z"/>
</svg>
`;var Yh=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 50" style="enable-background:new 0 0 100 50;" fill="currentColor">
<path d="M95,24H72.3C62.1,5.2,46,5,41.2,5H24.1l2,2.4c0,0,0.4,0.5,1,1.5H5v2h23.3c1,2,2.2,4.7,2.9,8H5v2h26.5
	c0.2,1.3,0.3,2.7,0.3,4.1c0,1.4-0.1,2.7-0.3,3.9H5v2h26.2c-0.7,3.3-1.8,6-2.8,8H5v2h22.3c-0.7,1.1-1.2,1.7-1.2,1.7l-2,2.4h17.2
	c2.4,0,7.7,0,13.6-2.4c5.8-2.4,12.4-7.2,17.5-16.6H95V24z M53.6,39.8C48.1,42,43.7,42,41.2,42H30c1.9-3.1,4.8-9,4.8-17
	s-3-13.9-4.8-17h11.3c4.7,0,18.3-0.1,28,17C64.5,33.4,58.8,37.7,53.6,39.8z"/>
</svg>
`;var Xh=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 50" style="enable-background:new 0 0 100 50;" fill="currentColor">
<path d="M95,24H72.9L51,13.4v-23.5h-2v22.5L31.1,3.7L29,2.6V24H5v2h24v21.4l2.2-1.1L72.5,26H95V24z M32,42.6V7.4L68.1,25L32,42.6z"
	/>
</svg>
`;var jh=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 50" style="enable-background:new 0 0 100 50;" fill="currentColor">
<path d="M95,24H70.5L29.9,4.3V14H5v2h24.9v18H5v2h24.9v10.4L70.8,26H95V24z M63.6,24H32.9V9.2L63.6,24z M32.9,41.5V26H64L32.9,41.5z
	"/>
</svg>
`;var Qh=`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="0 0 100 50" style="enable-background:new 0 0 100 50;" fill="currentColor">
  <rect x="5" y="14" width="20.7" height="2"/>
  <rect x="5" y="34.1" width="20.7" height="2"/>
  <rect x="80" y="24" width="15" height="2"/>
  <path d="M21.7,44.8l-2.4-1.7c5.1-7.1,7-11.9,7-17.9s-2.3-12.2-6.9-17.9l2.3-1.9c5.1,6.3,7.6,12.7,7.6,19.8s-2.1,12.1-7.5,19.7h-.1Z"/>
  <path d="M24.9,44.9l1.6-2.3c2.1-3.1,5.5-9.5,5.3-18-.1-7.6-3-13.3-5.3-16.8l-1.6-2.3h20c15.2,0,23.4,13,26.5,17.9.3.4.5.8.6,1l.6.8-.6.8c-.2.2-.4.6-.6,1-2.8,4.5-11.5,18.1-27.1,18.1M68.7,24.8c-2.8-4.5-10.3-16.5-23.9-16.5h-14.5c2.2,3.9,4.3,9.3,4.4,16.1,0,7.6-2.3,13.6-4.4,17.4h0c0,.1,14,.1,14,.1,13.9,0,21.6-12.2,24.5-16.7"/>
  <path d="M76,30.6c-3.1,0-5.6-2.5-5.6-5.6s2.5-5.6,5.6-5.6,5.6,2.5,5.6,5.6-2.5,5.6-5.6,5.6ZM76,22.4c-1.4,0-2.6,1.2-2.6,2.6s1.2,2.6,2.6,2.6,2.6-1.2,2.6-2.6-1.2-2.6-2.6-2.6Z"/>
</svg>`;var Kh=`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="0 0 100 50" style="enable-background:new 0 0 100 50;" fill="currentColor">
  <rect x="5" y="14" width="20.7" height="2"/>
  <rect x="5" y="24" width="23" height="2"/>
  <rect x="5" y="34.1" width="20.7" height="2"/>
  <rect x="80" y="24" width="15" height="2"/>
  <path d="M21.7,44.8l-2.4-1.7c5.1-7.1,7-11.9,7-17.9s-2.3-12.2-6.9-17.9l2.3-1.9c5.1,6.3,7.6,12.7,7.6,19.8s-2.1,12.1-7.5,19.7h-.1Z"/>
  <path d="M24.9,44.9l1.6-2.3c2.1-3.1,5.5-9.5,5.3-18-.1-7.6-3-13.3-5.3-16.8l-1.6-2.3h20c15.2,0,23.4,13,26.5,17.9.3.4.5.8.6,1l.6.8-.6.8c-.2.2-.4.6-.6,1-2.8,4.5-11.5,18.1-27.1,18.1M68.7,24.8c-2.8-4.5-10.3-16.5-23.9-16.5h-14.5c2.2,3.9,4.3,9.3,4.4,16.1,0,7.6-2.3,13.6-4.4,17.4h0c0,.1,14,.1,14,.1,13.9,0,21.6-12.2,24.5-16.7"/>
  <path d="M76,30.6c-3.1,0-5.6-2.5-5.6-5.6s2.5-5.6,5.6-5.6,5.6,2.5,5.6,5.6-2.5,5.6-5.6,5.6ZM76,22.4c-1.4,0-2.6,1.2-2.6,2.6s1.2,2.6,2.6,2.6,2.6-1.2,2.6-2.6-1.2-2.6-2.6-2.6Z"/>
</svg>`;var Zh=`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="0 0 100 50" style="enable-background:new 0 0 100 50;" fill="currentColor">
  <rect x="5" y="9.2" width="18" height="2"/>
  <rect x="5" y="19.2" width="22.2" height="2"/>
  <rect x="5" y="29.3" width="22.2" height="2"/>
  <rect x="5" y="39.4" width="18" height="2"/>
  <rect x="80" y="24" width="15" height="2"/>
  <path d="M21.7,44.8l-2.4-1.7c5.1-7.1,7-11.9,7-17.9s-2.3-12.2-6.9-17.9l2.3-1.9c5.1,6.3,7.6,12.7,7.6,19.8s-2.1,12.1-7.5,19.7h-.1Z"/>
  <path d="M24.9,44.9l1.6-2.3c2.1-3.1,5.5-9.5,5.3-18-.1-7.6-3-13.3-5.3-16.8l-1.6-2.3h20c15.2,0,23.4,13,26.5,17.9.3.4.5.8.6,1l.6.8-.6.8c-.2.2-.4.6-.6,1-2.8,4.5-11.5,18.1-27.1,18.1M68.7,24.8c-2.8-4.5-10.3-16.5-23.9-16.5h-14.5c2.2,3.9,4.3,9.3,4.4,16.1,0,7.6-2.3,13.6-4.4,17.4h0c0,.1,14,.1,14,.1,13.9,0,21.6-12.2,24.5-16.7"/>
  <path d="M76,30.6c-3.1,0-5.6-2.5-5.6-5.6s2.5-5.6,5.6-5.6,5.6,2.5,5.6,5.6-2.5,5.6-5.6,5.6ZM76,22.4c-1.4,0-2.6,1.2-2.6,2.6s1.2,2.6,2.6,2.6,2.6-1.2,2.6-2.6-1.2-2.6-2.6-2.6Z"/>
</svg>`;var Jh=`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="0 0 100 50" style="enable-background:new 0 0 100 50;" fill="currentColor">
  <rect x="5" y="14" width="20.7" height="2"/>
  <rect x="5" y="34.1" width="20.7" height="2"/>
  <rect x="71.2" y="24" width="23.8" height="2"/>
  <path d="M21.7,44.8l-2.4-1.7c5.1-7.1,7-11.9,7-17.9s-2.3-12.2-6.9-17.9l2.3-1.9c5.1,6.3,7.6,12.7,7.6,19.8s-2.1,12.1-7.5,19.7h-.1Z"/>
  <path d="M24.9,44.9l1.6-2.3c2.1-3.1,5.5-9.5,5.3-18-.1-7.6-3-13.3-5.3-16.8l-1.6-2.3h20c15.2,0,23.4,13,26.5,17.9.3.4.5.8.6,1l.6.8-.6.8c-.2.2-.4.6-.6,1-2.8,4.5-11.5,18.1-27.1,18.1M68.7,24.8c-2.8-4.5-10.3-16.5-23.9-16.5h-14.5c2.2,3.9,4.3,9.3,4.4,16.1,0,7.6-2.3,13.6-4.4,17.4h0c0,.1,14,.1,14,.1,13.9,0,21.6-12.2,24.5-16.7"/>
</svg>`;var ef=`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="0 0 100 50" style="enable-background:new 0 0 100 50;" fill="currentColor">
  <rect x="5" y="14" width="20.7" height="2"/>
  <rect x="5" y="24" width="23" height="2"/>
  <rect x="5" y="34.1" width="20.7" height="2"/>
  <rect x="71.2" y="24" width="23.8" height="2"/>
  <path d="M21.7,44.8l-2.4-1.7c5.1-7.1,7-11.9,7-17.9s-2.3-12.2-6.9-17.9l2.3-1.9c5.1,6.3,7.6,12.7,7.6,19.8s-2.1,12.1-7.5,19.7h-.1Z"/>
  <path d="M24.9,44.9l1.6-2.3c2.1-3.1,5.5-9.5,5.3-18-.1-7.6-3-13.3-5.3-16.8l-1.6-2.3h20c15.2,0,23.4,13,26.5,17.9.3.4.5.8.6,1l.6.8-.6.8c-.2.2-.4.6-.6,1-2.8,4.5-11.5,18.1-27.1,18.1M68.7,24.8c-2.8-4.5-10.3-16.5-23.9-16.5h-14.5c2.2,3.9,4.3,9.3,4.4,16.1,0,7.6-2.3,13.6-4.4,17.4h0c0,.1,14,.1,14,.1,13.9,0,21.6-12.2,24.5-16.7"/>
</svg>`;var tf=`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="0 0 100 50" style="enable-background:new 0 0 100 50;" fill="currentColor">
  <rect x="5" y="9.2" width="18" height="2"/>
  <rect x="5" y="19.2" width="22.2" height="2"/>
  <rect x="5" y="29.3" width="22.2" height="2"/>
  <rect x="5" y="39.4" width="18" height="2"/>
  <rect x="71.2" y="24" width="23.8" height="2"/>
  <path d="M21.7,44.8l-2.4-1.7c5.1-7.1,7-11.9,7-17.9s-2.3-12.2-6.9-17.9l2.3-1.9c5.1,6.3,7.6,12.7,7.6,19.8s-2.1,12.1-7.5,19.7h-.1Z"/>
  <path d="M24.9,44.9l1.6-2.3c2.1-3.1,5.5-9.5,5.3-18-.1-7.6-3-13.3-5.3-16.8l-1.6-2.3h20c15.2,0,23.4,13,26.5,17.9.3.4.5.8.6,1l.6.8-.6.8c-.2.2-.4.6-.6,1-2.8,4.5-11.5,18.1-27.1,18.1M68.7,24.8c-2.8-4.5-10.3-16.5-23.9-16.5h-14.5c2.2,3.9,4.3,9.3,4.4,16.1,0,7.6-2.3,13.6-4.4,17.4h0c0,.1,14,.1,14,.1,13.9,0,21.6-12.2,24.5-16.7"/>
</svg>`;var Lc={add:Z0,bordercolor:J0,browserload:e1,check:t1,close:n1,connect:o1,dimensions:r1,direction:i1,download:s1,edit:a1,eye:u1,eyecrossed:l1,font:c1,force:p1,inputs:d1,link:h1,memcontent:f1,memlines:m1,mouse:g1,move:D1,newcomponent:b1,none:y1,open:v1,outputs:C1,palette:w1,pause:x1,pen:T1,placement:A1,play:S1,question:E1,questioncircled:_1,redo:R1,ref:ru,regroup:ru,replace:M1,reset:O1,screenshot:P1,setinput:B1,settings:N1,slanted:F1,step:I1,strokewidth:k1,testcase:L1,timer:V1,trash:H1,undo:W1,wirestyle:U1},Tb={Adder:G1,AdderArray:q1,ALU:z1,and:Ph,and3:Bh,and4:Nh,buf:Fh,Clock:$1,Comparator:Y1,Counter:j1,Decoder:Q1,Decoder7Seg:Z1,Decoder16Seg:K1,DecoderBCD4:J1,Demux:eh,FlipflopD:ah,FlipflopJK:uh,FlipflopT:lh,GateArray:ch,HalfAdder:ph,imply:Ih,Input1:dh,Input4:hh,Input8:fh,Random:Sh,Rectangle:Eh,Label:mh,LatchSR:gh,Mux:Dh,nand:kh,nand3:Lh,nand4:Vh,nimply:Hh,nor:Wh,nor3:Uh,nor4:zh,not:Gh,or:qh,or3:$h,or4:Yh,Output1:bh,Output4:yh,Output8:vh,Display7Seg:oh,Display16Seg:th,DisplayAscii:ih,DisplayBar:sh,Display4:nh,Display8:rh,ShiftDisplay:Rh,Passthrough1:Ch,PassthroughN:wh,Pixel:xh,RAM:Th,ROM:Ah,Register:_h,ShiftRegister:Mh,ControlledInverter:X1,tri:Xh,TristateBufferArray:Oh,txa:jh,xnor:Qh,xnor3:Kh,xnor4:Zh,xor:Jh,xor3:ef,xor4:tf};function nf(r){return r in Lc}p(nf,"isIconName");function of(r,n,e){return iu("svgimg",r,sr(Vc(Tb,r)),n,e)}p(of,"makeImage");function En(r,n,e){return iu("svgicon",r,sr(Vc(Lc,r)),n,e)}p(En,"makeIcon");function iu(r,n,e,o,i){let s=document.createElement("i");return s.classList.add(r),s.setAttribute("data-icon",n),o!==void 0&&(s.style.width=`${o}px`),i!==void 0&&(s.style.height=`${i}px`),Ls(s,e),s}p(iu,"makeSvgHolder");function Vc(r,n){return r[n]}p(Vc,"inlineSvgFor");function su(r){return Vc(Lc,r)}p(su,"inlineIconSvgFor");function Ab(r){return typeof r.applyTo=="function"}p(Ab,"isModifierObject");function Sb(r){return typeof r=="object"&&"nodeType"in r}p(Sb,"isNode");function Ls(r,n){if(Sb(n))r.appendChild(n);else if(Ab(n))n.applyTo(r);else{let e=""+n;r.appendChild(document.createTextNode(e))}}p(Ls,"applyModifierTo");function au(r,n){for(let e of n)Ls(r,e)}p(au,"applyModifiersTo");function bt(r){return(...n)=>({render:()=>{let e=document.createElement(r);return au(e,n),e},applyTo:function(e){e.appendChild(this.render())}})}p(bt,"elemBuilder");function In(r){let n=p(e=>({applyTo:o=>o.setAttribute(r,""+e)}),"builder");return n.attrName=r,n}p(In,"attrBuilder");function rf(r){return In("data-"+r)}p(rf,"data");function sr(r){return{applyTo:n=>n.insertAdjacentHTML("beforeend",r)}}p(sr,"raw");function W(...r){return{applyTo:n=>au(n,r)}}p(W,"mods");var mt={applyTo:r=>{}};function Zt(r,n){return In(r)(n)}p(Zt,"attr");var V=bt("div"),ke=bt("span"),ho=bt("a"),_n=bt("b"),sf=bt("i"),af=bt("ul"),M8=bt("ol"),Vs=bt("li"),uu=bt("table"),lu=bt("thead"),cu=bt("tbody"),Ii=bt("tr"),Hs=bt("th"),Ws=bt("td"),Us=bt("input"),uf=bt("select"),ki=bt("option"),Li=bt("button"),lf=bt("label"),O8=bt("img"),P8=bt("canvas"),fe=In("style"),Vo=In("type"),le=In("class"),zs=In("href"),Hc=In("target"),pt=In("title"),B8=In("src"),N8=In("draggable")("true"),Wc=sr("<br>"),Gr=p(r=>_n(U(r)||be(r)?I:String(Number(r))),"asValue");function $(r,n,e=200){return V(fe(`max-width: ${e}px`),r===void 0?mt:V(fe("padding-bottom: 3px; border-bottom: 1px solid grey;"),r),V(n))}p($,"tooltipContent");var Uc=fe("font-family: monospace; font-weight: bolder; font-size: 90%");function cf(r){var o;let n=r,e=(o=n.dataset.icon)!=null?o:"question";nf(e)?n.innerHTML=su(e):console.log(`Unknown icon name '${e}'`)}p(cf,"setupSvgIcon");var pu=class{constructor(n){this.templateString=n}expand(n){return this.templateString.replace(/\$(s?)\{(\w+)(\?(\w*)(:(\w*))?)?\}/g,(e,o,i,s,a,u,l)=>{let c=n[i];return o==="s"?C.plural(c===void 0?0:Number(c),a,l):String(c!=null?c:"<<"+i+">>")})}};p(pu,"Template");function q(r){return new pu(r)}p(q,"template");var Eb={plural:(r,n,e)=>Math.abs(r)<2?e!=null?e:"":n!=null?n:"s",ComponentBar:{Labels:{More:"Plus",Less:"Moins"},SectionNames:{InputOutput:"Entr\xE9es/ sorties",Layout:"Dispo- sition",Gates:"Portes",Components:"Compo- sants",Custom:"Person- nalis\xE9"},Components:Wt.withProps()({Input1:["Entr\xE9e","IN"],InputN:["Entr\xE9e multiple","IN mult."],Input8:["Entr\xE9e octet (8 bits)","IN 8 bits"],Clock:["G\xE9n\xE9rateur de signal d\u2019horloge","Horloge"],Random:["Entr\xE9e al\xE9atoire","Al\xE9atoire"],Output1:["Sortie","OUT"],OutputN:["Sortie multiple","OUT mult."],Output8:["Sortie octet (8 bits)","OUT 8 bits"],DisplayN:["Afficheur d\u2019une valeur","Afficheur"],Display8:["Affichage de 8 bits","Aff. 8 bits"],Display7Seg:["Afficheur \xE0 7 segments","7 segments"],Display16Seg:["Afficheur \xE0 16 segments","16 segments"],DisplayAscii:["Affichage d\u2019un caract\xE8re ASCII (sur 7 bits)","Caract\xE8re"],DisplayBar:["Affichage d\u2019un bit sous forme de segment lumineux","Segment"],Pixel:["Affichage d\u2019un pixel avec couleur r\xE9glable","Pixel"],ShiftDisplay:["Affichage avec buffer \xE0 d\xE9calage","Affichage \xE0 d\xE9calage"],Passthrough1:["Broche","Broche"],PassthroughN:["Broche \xE0 plusieurs entr\xE9es-sortes","Broche (n)"],Label:["\xC9tiquette","Label"],Rectangle:["Rectangle de regroupement","Groupe"],not:["Porte NON","NON"],buf:["Buffer (porte OUI)","OUI"],tri:["Sortie \xE0 3 \xE9tats","3 \xE9tats"],and:["Porte ET","ET"],or:["Porte OU","OU"],xor:["Porte OU-X","OU-X"],nand:["Porte NON-ET","NON-ET"],nor:["Porte NON-OU","NON-OU"],xnor:["Porte NON-OU-X","NON-OU-X"],imply:["Porte IMPLIQUE","IMPLIQUE"],nimply:["Porte NON-IMPLIQUE","NON-IMPL."],transfer:["Fausse porte TRANSFERT \xE0 deux entr\xE9es","TRANSF."],and3:["Porte ET \xE0 3 entr\xE9es","ET (3)"],or3:["Porte OU \xE0 3 entr\xE9es","OU (3)"],xor3:["Porte OU-X \xE0 3 entr\xE9es","OU-X (3)"],nand3:["Porte NON-ET \xE0 3 entr\xE9es","NON-ET (3)"],nor3:["Porte NON-OU \xE0 3 entr\xE9es","NON-OU (3)"],xnor3:["Porte NON-OU-X \xE0 3 entr\xE9es","NON-OU-X (3)"],and4:["Porte ET \xE0 4 entr\xE9es","ET (4)"],or4:["Porte OU \xE0 4 entr\xE9es","OU (4)"],xor4:["Porte OU-X \xE0 4 entr\xE9es","OU-X (4)"],nand4:["Porte NON-ET \xE0 4 entr\xE9es","NON-ET (4)"],nor4:["Porte NON-OU \xE0 4 entr\xE9es","NON-OU (4)"],xnor4:["Porte NON-OU-X \xE0 4 entr\xE9es","NON-OU-X (4)"],ControlledInverter:["Inverseur commut\xE9","Inv. comm."],GateArray:["Porte multiple","Porte mult."],TristateBufferArray:["Sortie \xE0 3 \xE9tats multiple","3 \xE9tats mult."],HalfAdder:["Demi-additionneur","Demi-add."],Adder:["Additionneur","Addit."],AdderArray:["Additionneur multiple","Add. mult."],ALU:["Unit\xE9 arithm\xE9tique et logique","ALU"],Mux:["Multiplexer","Mux"],Mux2to1:["Multiplexer 2-vers-1 (1 bit de contr\xF4le)","Mux 2-1"],Mux4to1:["Multiplexer 4-vers-1 (2 bits de contr\xF4le)","Mux 4-1"],Mux8to1:["Multiplexer 8-vers-1 (3 bits de contr\xF4le)","Mux 8-1"],Mux4to2:["Multiplexer 4-vers-2 (1 bit de contr\xF4le)","Mux 4-2"],Mux8to2:["Multiplexer 8-vers-2 (2 bits de contr\xF4le)","Mux 8-2"],Mux8to4:["Multiplexer 8-vers-4 (1 bit de contr\xF4le)","Mux 8-4"],Mux16to8:["Multiplexer 16-vers-8 (1 bit de contr\xF4le)","Mux 16-8"],Demux:["D\xE9multiplexer","Demux"],Demux1to2:["D\xE9multiplexer 1-vers-2 (1 bit de contr\xF4le)","Demux 1-2"],Demux1to4:["D\xE9multiplexer 1-vers-4 (2 bits de contr\xF4le)","Demux 1-4"],Demux1to8:["D\xE9multiplexer 1-vers-8 (3 bits de contr\xF4le)","Demux 1-8"],Demux2to4:["D\xE9multiplexer 2-vers-4 (1 bit de contr\xF4le)","Demux 2-4"],Demux2to8:["D\xE9multiplexer 2-vers-8 (2 bits de contr\xF4le)","Demux 2-8"],Demux4to8:["D\xE9multiplexer 4-vers-8 (1 bit de contr\xF4le)","Demux 4-8"],Demux8to16:["D\xE9multiplexer 8-vers-16 (1 bit de contr\xF4le)","Demux 8-16"],LatchSR:["Verrou SR","Verrou SR"],FlipflopJK:["Bascule JK","Basc. JK"],FlipflopT:["Bascule T","Basc. T"],FlipflopD:["Bascule D","Basc. D"],Register:["Registre","Registre"],ShiftRegister:["Registre \xE0 d\xE9calage","Reg. d\xE9c."],RAM:["RAM (m\xE9moire vive)","RAM"],ROM:["ROM (m\xE9moire morte)","ROM"],Counter:["Compteur 4 bits","Compteur"],Decoder:["D\xE9codeur binaire vers 1-sur-n","D\xE9codeur"],Decoder7Seg:["D\xE9codeur 7 segments","D\xE9c. 7 seg."],Decoder16Seg:["D\xE9codeur ASCII vers 16 segments","D\xE9c. 16 seg."],DecoderBCD4:["D\xE9codeur 4 bits vers BCD sur 5 bits","D\xE9c. BCD"],Comparator:["Comparateur","Compar."]})},Modes:{FULL:M("Admin","En plus du mode complet, ce mode permet de rendre les entr\xE9es, les sorties des portes, voire les portes elles-m\xEAmes ind\xE9termin\xE9es"),DESIGN:M("Complet","La totalit\xE9 des actions de conception d\u2019un circuit sont possible"),CONNECT:M("Connexion","Il est possible de d\xE9placer et de connecter des \xE9l\xE9ments d\xE9j\xE0 sur le canevas, mais pas d\u2019en rajouter (le menu de gauche ne serait pas actif)"),TRYOUT:M("Test","Il est seulement possible de changer les entr\xE9es pour tester un circuit pr\xE9\xE9tabli"),STATIC:M("Statique","Les \xE9l\xE9ments sont juste affich\xE9s; aucune interaction n\u2019est possible")},Orientations:{e:"Vers la droite (par d\xE9faut)",s:"Vers le bas",w:"Vers la gauche",n:"Vers le haut"},Settings:{Settings:"R\xE9glages",CircuitName:"Nom:",DefaultFileName:"circuit",NameOfDownloadedFile:"Ceci sera le nom du fichier t\xE9l\xE9charg\xE9.",animateWires:M("Animer les fils","Si coch\xE9, les fils sont anim\xE9s pour montrer dans quel sens logique le signal se propage."),hideWireColors:M("Cacher l\u2019\xE9tat des fils","Si coch\xE9, les fils sont affich\xE9s avec une couleur neutre plut\xF4t que de montrer s\u2019ils v\xE9hiculent un 1 ou un 0."),hideInputColors:M("Cacher l\u2019\xE9tat des entr\xE9es","Si coch\xE9, les entr\xE9es sont affich\xE9es avec une couleur neutre, m\xEAme si elles livrent au circuit une valeur bien d\xE9termin\xE9e. S\u2019utilise volontiers en cachant aussi l\u2019\xE9tat des fils."),hideOutputColors:M("Cacher l\u2019\xE9tat des sorties","Si coch\xE9, les sorties sont affich\xE9es avec une couleur neutre. S\u2019utilise volontiers en cachant aussi l\u2019\xE9tat des fils."),hideMemoryContent:M("Cacher le contenu stock\xE9","Si coch\xE9, les verrous, bascules, registres et autres m\xE9moires ne montrent pas leur contenu."),showGateTypes:M("Montrer type des portes","Si coch\xE9, affiche sur les portes logique le nom de la fonction r\xE9alis\xE9e."),showDisconnectedPins:M("Toujours montrer les pattes","Si non coch\xE9, les pattes non connect\xE9es des composants sont masqu\xE9es dans les modes o\xF9 les connexions du circuit ne peuvent pas \xEAtre modifi\xE9es (et restent visibles sinon)."),hideTooltips:M("D\xE9sactiver tooltips","Si coch\xE9, les informations suppl\xE9mentaires des tooltips (comme les tables de v\xE9rit\xE9) ne seront pas affich\xE9es."),groupParallelWires:M("Grouper les fils parall\xE8les","Si coch\xE9, les fils parral\xE8les allant d'un composant \xE0 un autre seront regroup\xE9s en un seul fil plus \xE9pais."),showHiddenWires:M("Montrer les fils cach\xE9s","Si coch\xE9, les fils cach\xE9s seront quand m\xEAme affich\xE9s."),showAnchors:M("Montrer les ancrages","Si coch\xE9, des fl\xE8ches indiqueront les composants auxquels sont ancr\xE9s les composants lors de leur d\xE9placement."),showIds:M("Montrer les identifiants","Si coch\xE9, les identifiants des composants seront affich\xE9s."),propagationDelay:"Un 1 ou un 0 impos\xE9 sur une connexion sera r\xE9percut\xE9 \xE0 l\u2019autre bout de la connexion apr\xE8s ce d\xE9lai de propagation.",propagationDelayField:M("Propagation en","ms"),zoomLevel:"Le niveau de zoom sur les composants du circuit.",zoomLevelField:M("Zoom:","%"),showUserDataLink:M("Voir les","donn\xE9es li\xE9es"),userDataHeader:"Les donn\xE9es suivantes sont export\xE9es avec le circuit:",wireStyle:"Style des fils:"},Tests:{Title:"Tests",DefaultTestCaseName:"Test",DefaultTestSuiteName:"Tests",SetInputs:"Entr\xE9es",WantedOutputs:"Sorties",SetTheseInputs:"R\xE9gler ces entr\xE9es",Run:"Tester",RunTestSuite:"Ex\xE9cuter les tests",DeleteTestCase:"Supprimer ce test",EditTestCaseName:"Renommer ce test",TestSuiteShownClickToHide:"Tests visibles (cliquez pour cacher)",TestSuiteHiddenClickToShow:"Tests cach\xE9s (cliquez pour montrer)",EnterNewTestCaseName:"Entrez le nouveau nom du test:",ComponentUsedInTestSuite:q("Ce composant est utilis\xE9 dans des tests. Voulez-vous vraiment le supprimer? Les tests seront conserv\xE9s, mais ne fonctionneront pas tant qu\u2019un autre composant avec cette r\xE9f\xE9rence (\u201C${ref}\u201D) ne sera pas ajout\xE9 au circuit.")},TopBar:{DirtyTooltip:"Le circuit a \xE9t\xE9 modifi\xE9 depuis la derni\xE8re sauvegarde.",CircuitNameTooltip:"Nom du circuit actuellement \xE9dit\xE9; cliquez pour modifier",SetCircuitName:"Tapez le nom du circuit (ou laissez vide pour le nom par d\xE9faut):",CustomComponentCaptionTooltip:"Nom du sous-circuit actuellement \xE9dit\xE9; cliquez pour modifier",CloseCircuit:"Retour au circuit complet",Undo:M("Annuler","Annule la derni\xE8re action"),Redo:M("R\xE9tablir","R\xE9tablit la derni\xE8re action annul\xE9e ou r\xE9p\xE8te l\u2019action pr\xE9c\xE9dente"),Download:M("T\xE9l\xE9charger","T\xE9l\xE9charge le circuit (ou les composants personnalis\xE9s avec la touche Option/Alt)"),Screenshot:M("Screenshot","T\xE9l\xE9charge le circuit sous forme d\u2019image (PNG ou SVG avec touche Option/Alt)"),Open:M("Ouvrir","Ouvre un circuit pr\xE9c\xE9demment t\xE9l\xE9charg\xE9"),Restore:M("Restaurer","Restaure le circuit pr\xE9c\xE9demment modifi\xE9"),Reset:M("R\xE9initialiser","R\xE9initialise l\u2019\xE9tat de ce circuit"),TimelinePlay:M("Play","D\xE9marre l\u2019\xE9coulement du temps"),TimelinePause:M("Pause","Arr\xEAte l\u2019\xE9coulement du temps"),TimelineStep:M("Pas \xE0 pas","Avance au prochain \xE9v\xE9nement"),TimeLabel:"Temps: ",Design:M("Concevoir","Compose ou modifie le circuit"),Delete:M("Supprimer","Supprime des \xE9l\xE9ments du circuit"),Move:M("D\xE9placer","D\xE9place tout le circuit"),Tests:M("Tests","Montre les tests pour ce circuit")},Messages:{UnsupportedFileType:q("Type de fichier non pris en charge: ${type}."),LoadedDefinitions:q("${n} composant$s{n} personnalis\xE9$s{n} charg\xE9$s{n}"),SavedToUrl:"Circuit enregistr\xE9 dans l\u2019URL",SetAnchorPrompt:"Cliquez sur le composant auquel s\u2019ancrer",AnchorAdded:"Ancrage ajout\xE9",CircularAnchorsForbidden:"Les ancrages circulaires ne sont pas pris en charge.",NotImplemented:"Cette fonctionnalit\xE9 n\u2019est pas encore impl\xE9ment\xE9e.",NoPermission:"Cette action n\u2019est pas autoris\xE9e dans ce mode.",ReallyCloseWindow:"Voulez-vous vraiment fermer la fen\xEAtre sans prendre en compte les derniers changements?",LoadedCircuitFromSessionStorage:q("Circuit restaur\xE9 depuis sauvegarde automatique du ${day} \xE0 ${time}"),FailedToLoadCircuitFromStorage:q("Impossible de restaurer le circuit (${error})."),NoSavedData:"Rien \xE0 restaurer pour cet \xE9diteur.",DevelopedBy:"D\xE9velopp\xE9 par ",DidUndo:"Annuler",DidRedo:"R\xE9tablir",DidRepeat:"R\xE9p\xE9ter",NothingToUndo:"Rien \xE0 annuler",NothingToRedo:"Rien \xE0 r\xE9tablir ou r\xE9p\xE9ter",NewTestCaseTitle:"Cr\xE9ation d\u2019un nouveau test de circuit",NewTestCaseSetName:"Entrez le nom du test:",TestCaseInputToSet:q("Entr\xE9e$s{n} \xE0 r\xE9gler:"),TestCaseOuputToCheck:q("Sorties$s{n} attendue$s{n}:"),TooManyInputsForAutoTestCases:q("Impossible de cr\xE9er automatiquement des tests pour plus de ${max} entr\xE9es."),AutoTestCasesWarning:q("Ceci va cr\xE9er ${numCases} tests, un pour chacune des combinaisons des ${numInputs} entr\xE9es. Voulez-vous continuer?"),ComputingTestCases:"G\xE9n\xE9ration des tests\u2026",RunningTests:"Exc\xE9cution des tests\u2026"},Components:{Generic:{contextMenu:{Delete:"Supprimer",Reset:"R\xE9activer",MakeNewComponent:"Cr\xE9er un nouveau composant\u2026",MakeNewComponentFailed:"Impossible de cr\xE9er un nouveau composant.",MakeNewTestCase:"Cr\xE9er un nouveau test\u2026",MakeAllTestCases:"Cr\xE9er tous les tests\u2026",MakeNewTestCaseFailed:"Impossible de cr\xE9er un nouveau test.",SetIdentifier:"Attribuer un identifiant\u2026",ChangeIdentifier:M("Changer l\u2019identifiant (",")\u2026"),SetIdentifierPrompt:"Choisissez l\u2019identifiant unique \xE0 attribuer \xE0 ce composant:",IdentifierCannotBeEmpty:"L\u2019identifiant ne peut pas \xEAtre vide.",IdentifierAlreadyInUseShouldSwap:"L\u2019identifiant est d\xE9j\xE0 utilis\xE9 par un autre composant. Voulez-vous inverser les identifiants?",SetAnchor:"D\xE9finir l\u2019ancrage\u2026",ClearAnchor:M("Supprimer l\u2019ancrage (",")"),Orientation:"Orientation",ChangeOrientationDesc:"Changez l\u2019orientation avec Commande + double-clic sur le composant",LockPosition:"Verrouiller la position",ShowAsUnknown:"Afficher comme inconnu",ForceOutputSingle:"Forcer la sortie",ForceOutputMultiple:"Forcer une sortie",Output:"Sortie",NormalOutput:"Sortie normale",ForceAsUnknown:"Forcer comme \xE9tat inconnu",ForceAs1:"Forcer \xE0 1",ForceAs0:"Forcer \xE0 0",ForceAsZ:"Forcer \xE0 haute imp\xE9dance",ForceOutputDesc:"Forcez une sortie avec Option + double-clic sur la sortie",SetName:"Ajouter un nom\u2026",ChangeName:"Changer le nom\u2026",SetNamePrompt:"Choisissez le nom \xE0 afficher ou laissez vide pour le supprimer:",SetFontPrompt:M("Entrez une sp\xE9cification de police ou laissez vide pour la valeur par d\xE9faut (","):"),TriggerOn:"Stocker au",TriggerRisingEdge:"flanc montant",TriggerFallingEdge:"flanc descendant",ShowContent:"Montrer le contenu",ParamControlBitAtBottom:"Bit de contr\xF4le en bas",ParamControlBitsAtBottom:"Bits de contr\xF4le en bas",ParamNumInputs:M("Nombre d\u2019entr\xE9es",q("${val} entr\xE9e$s{val}")),ParamNumBits:M("Nombre de bits",q("${val} bit$s{val}")),ParamNumWords:M("Nombre de lignes",q("${val} ligne$s{val}"))},InputCarryInDesc:"Cin (retenue pr\xE9c\xE9dente)",InputClockDesc:"Clock (horloge)",InputClearDesc:"C (Clear, mise \xE0 0)",InputPresetDesc:"P (Preset, mise \xE0 1)",InputSetDesc:"S (Set, mise \xE0 1)",InputResetDesc:"R (Reset, mise \xE0 0)",InputDataDesc:"D (Donn\xE9es)",InputWriteEnableDesc:"WE (\xE9criture activ\xE9e)",OutputSumDesc:"S (somme)",OutputCarryDesc:"C (retenue)",OutputCarryOutDesc:"Cout (retenue)",OutputQDesc:"Q (sortie normale)",OutputQBarDesc:"Q\u0305 (sortie invers\xE9e)"},Custom:{MenuButtonSuffix:" (composant personnalis\xE9)",contextMenu:{ChangeName:"Renommer\u2026",ChangeNamePrompt:"Choisissez le nom de ce composant personnalit\xE9:",ChangeNameEmpty:"Le nom ne peut pas \xEAtre vide.",ChangeCircuit:"Modifier le circuit",Delete:"Supprimer ce composant",EditFromComponentMessage:"Vous pouvez modifier ce composant depuis le menu d\u2019un composant du circuit.",CannotDeleteInUse:"Impossible de supprimer ce composant car il est utilis\xE9 dans le circuit.",CannotDeleteInUseBy:q("Impossible de supprimer ce composant car il est utilis\xE9 dans la d\xE9finition d\u2019un autre composant (${caption})."),ConfirmDelete:"Voulez-vous vraiment supprimer ce composant personnalis\xE9?"},tooltip:{titleSuffix:" (composant personnalis\xE9)",desc:"Ce composant calcule ses sorties selon le circuit personnalis\xE9 que vous avez d\xE9fini."},messages:{EmptySelection:"Aucun composant n\u2019est s\xE9lectionn\xE9.",NoInput:"Aucune entr\xE9e n\u2019est s\xE9lectionn\xE9e.",NoOutput:"Aucune sortie n\u2019est s\xE9lectionn\xE9e.",InputsOutputsMustHaveNames:"Toutes les entr\xE9es et sorties doivent avoir un nom.",MissingComponents:q("Les composants suivants sont connect\xE9s \xE0 des sorties mais ne sont pas s\xE9lectionn\xE9s: ${list}."),NoWires:"Aucun fil n\u2019est pr\xE9sent entre les composants s\xE9lectionn\xE9s.",UselessComponents:q("Les composants suivants ne sont pas connect\xE9s \xE0 des sorties et sont inutiles: ${list}."),CannotIncludeClock:"Les horloges ne peuvent pas \xEAtre incluses dans les composants personnalis\xE9s. Ajoutez une entr\xE9e normale, qui pourra \xEAtre connect\xE9e \xE0 une horloge de l'ext\xE9rieur du composant.",CannotBeModified:"Ce composant ne peut pas \xEAtre modifi\xE9 dans ce mode.",EnterCaptionPrompt:"Entrez le nom (unique) du composant personnalis\xE9:",ComponentAlreadyExists:q("Un composant personnalis\xE9 avec l\u2019identifiant '${id}' existe d\xE9j\xE0."),InputsOutputsChanged:"Les entr\xE9es et sorties ont chang\xE9 et certaines connexions pourront \xEAtre supprim\xE9es en adaptant le circuit. Voulez-vous continuer?",NotInMainEditor:"Revenez d\u2019abord \xE0 l\u2019\xE9diteur principal pour modifier le circuit personnalis\xE9 de ce composant."}},Adder:{tooltip:{title:"Additionneur",desc:"Additionne deux bits A et B et une retenue d\u2019entr\xE9e Cin, et fournit un bit de somme S et une retenue de sortie Cout."}},AdderArray:{tooltip:{title:q("Additionneur \xE0 ${numBits} bit$s{numBits}"),desc:"Additionne les deux nombres d'entr\xE9es A et B avec une retenue d\u2019entr\xE9e Cin, et fournit les bits de somme S et une retenue de sortie Cout."}},ALU:{"A+B":M("+","Addition"),"A-B":M("A\u2013B","Soustraction (A \u2013 B)"),"B-A":M("B\u2013A","Soustraction (B \u2013 A)"),"A+1":M("A+1","A + 1"),"A-1":M("A\u20131","A \u2013 1"),"-A":M("\u2013A","N\xE9gation d\u2019A"),"A*2":M("A\xD72","Addition d\u2019A \xE0 lui-m\xEAme (A \xD7 2)"),"A/2":M("A/2","D\xE9calage arithm\xE9tique \xE0 droite de 1 (A / 2)"),"A|B":M("OU","Disjonction (A OU B)"),"A&B":M("ET","Conjonction (A ET B)"),"A|~B":M("OU-n","A OU NON(B)"),"A&~B":M("ET-n","A ET NON(B)"),"~A":M("A\u0305","Inversion d\u2019A"),"A^B":M("OU-X","Disjonction excl. (A OU-X B)"),"A<<":M("<<","D\xE9calage logique \xE0 gauche de 1 de A"),"A>>":M(">>","D\xE9calage logique \xE0 droite de 1 de A"),InputCinDesc:"retenue d\u2019entr\xE9e",OutputCoutDesc:"retenue de sortie",tooltip:{title:"Unit\xE9 arithm\xE9tique et logique (ALU)",CurrentlyCarriesOut:"Effectue actuellement",SomeUnknownOperation:"une op\xE9ration inconnue",ThisOperation:"l\u2019op\xE9ration"},contextMenu:{toggleShowOp:"Afficher l\u2019op\xE9ration",ParamUseExtendedOpcode:"Utiliser op\xE9rations \xE9tendues"}},Clock:{tooltip:{title:"Horloge",period:M("P\xE9riode: "," ms"),dutycycle:M("Rapport cyclique: ","%"),phase:M("D\xE9phasage: "," ms")},contextMenu:{Period:"P\xE9riode",CustomPeriod:"Autre",SetPeriodMillis:"Entrez la p\xE9riode de l\u2019horloge en millisecondes:",InvalidPeriod:"La p\xE9riode doit \xEAtre un nombre entier positif.",ReplaceWithInput:"Remplacer par entr\xE9e"},timeline:{NextRisingEdge:"Prochain flanc montant de l\u2019horloge",NextFallingEdge:"Prochain flanc descendant de l\u2019horloge"}},Comparator:{tooltip:{title:"Comparateur",desc:"Comparateur entre deux bits A et B, activ\xE9 par une entr\xE9e E."}},Counter:{tooltip:{title:"Compteur",desc:"Compteur \xE0 quatre bits."},contextMenu:{DisplayTempl:q("Affichage ${desc}"),DisplayNone:"absent",DisplayDecimal:"d\xE9cimal",DisplayHex:"hexad\xE9cimal"}},Decoder:{tooltip:{title:"D\xE9codeur binaire",desc:q("Ce d\xE9codeur prend en entr\xE9e un nombre binaire cod\xE9 sur ${numFrom} bit$s{numFrom} et active la sortie correspondante parmi ${numTo} (actuellement, ${n}).")}},Decoder7Seg:{tooltip:"D\xE9codeur 7 segments"},Decoder16Seg:{tooltip:"D\xE9codeur ASCII vers 16 segments"},DecoderBCD4:{tooltip:"D\xE9codeur 4 bits vers BCD (binary-coded decimal)"},Demux:{tooltip:q("D\xE9multiplexeur ${from} vers ${to}")},FlipflopD:{tooltip:{title:"Bascule D",desc:"Stocke un bit."}},FlipflopJK:{InputJDesc:"J (Jump, mise \xE0 1)",InputKDesc:"K (Kill, mise \xE0 0)",tooltip:{title:"Bascule JK",desc:"Stocke un bit."}},FlipflopT:{InputTDesc:"T (Toggle, bascule)",tooltip:{title:"Bascule T",desc:"Stocke un bit."}},Gate:{not:M("NON","NON","La sortie est \xE9gale \xE0 l\u2019entr\xE9e invers\xE9e."),buf:M("OUI","OUI","La sortie est \xE9gale \xE0 l\u2019entr\xE9e."),and:M("ET","ET","La sortie vaut 1 lorsque toutes les entr\xE9es valent 1."),or:M("OU","OU","La sortie vaut 1 lorsqu\u2019au moins une des entr\xE9es vaut 1."),xor:M("OU-X","OU-X","La sortie vaut 1 lorsqu\u2019un nombre impair d\u2019entr\xE9es valent 1."),nand:M("NON-ET","N-ET","Porte ET invers\xE9e: la sortie vaut 1 \xE0 moins que toutes les entr\xE9es ne valent 1."),nor:M("NON-OU","N-OU","Porte OU invers\xE9e: la sortie vaut 1 lorsque toutes les entr\xE9es valent 0."),xnor:M("NON-OU-X","N-OU-X","Porte OU-X invers\xE9e: la sortie vaut 1 lorsqu\u2019un nombre pair d\u2019entr\xE9es valent 1."),imply:M("IMPLIQUE","IMPL","La sortie vaut 1 si la premi\xE8re entr\xE9e vaut 0 ou si les deux entr\xE9es valent 1."),rimply:M("IMPLIQUE (bis)","IMPL","La sortie vaut 1 si la seconde entr\xE9e vaut 0 ou si les deux entr\xE9es valent 1."),nimply:M("NON-IMPLIQUE","N-IMPL","Porte IMPLIQUE invers\xE9e: la sortie ne vaut 1 que lorsque la premi\xE8re entr\xE9e vaut 1 et la seconde 0."),rnimply:M("NON-IMPLIQUE (bis)","N-IMPL","Porte IMPLIQUE invers\xE9e: la sortie ne vaut 1 que lorsque la premi\xE8re entr\xE9e vaut 0 et la seconde 1."),txa:M("TRANSFERT-A",void 0,"La sortie est \xE9gale \xE0 la premi\xE8re entr\xE9e; la seconde entr\xE9e est ignor\xE9e."),txb:M("TRANSFERT-B",void 0,"La sortie est \xE9gale \xE0 la seconde entr\xE9e; la premi\xE8re entr\xE9e est ignor\xE9e."),txna:M("TRANSFERT-NON-A",void 0,"La sortie est \xE9gale \xE0 la premi\xE8re entr\xE9e invers\xE9e; la seconde entr\xE9e est ignor\xE9e."),txnb:M("TRANSFERT-NON-B",void 0,"La sortie est \xE9gale \xE0 la seconde entr\xE9e invers\xE9e; la premi\xE8re entr\xE9e est ignor\xE9e."),tooltip:{GateTitle:r=>W("Porte ",r),UnknownGate:"Porte inconnue",Input:"Entr\xE9e",Output:"Sortie",CurrentlyDelivers:"Actuellement, il livre",ShouldCurrentlyDeliver:"Actuellement, il devrait livrer",UndeterminedOutputBecauseInputUnknown:"une sortie ind\xE9termin\xE9e comme son entr\xE9e n\u2019est pas connue. Sa table de v\xE9rit\xE9 est:",UndeterminedOutputBecauseInputsUnknown:"une sortie ind\xE9termin\xE9e comme toutes ses entr\xE9es ne sont connues. Sa table de v\xE9rit\xE9 est:",ThisOutput:"une sortie de",BecauseInputIs:"car son entr\xE9e est",AccordingToTruthTable:"selon la table de v\xE9rit\xE9 suivante:",Inverter:M("Inverseur (porte ",")"),Buffer:M("Buffer (porte ",")")},contextMenu:{ReplaceBy:"Remplacer par",GateTempl:q("Porte ${type}"),ShowAs:"Afficher comme",NormalGateTempl:q("Porte ${type} normale"),UnknownGate:"Porte inconnue (avec \xAB?\xBB)",VariantChangeDesc:"Changez entre les variantes avec Majuscule + double-clic sur la porte"}},HalfAdder:{tooltip:{title:"Demi-additionneur",desc:"Additionne deux bits A et B et fournit un bit de somme S et une retenue de sortie C."}},Input:{tooltip:{title:q("Entr\xE9e (${numBits} bit$s{numBits})")},contextMenu:{LockValue:"Verrouiller cette valeur",PushButton:"Poussoir",ToggleButton:"Commutateur",ReplaceWithClock:"Remplacer par horloge",InputSetFromOutside:"Entr\xE9e contr\xF4l\xE9e depuis l\u2019ext\xE9rieur"}},Random:{tooltip:{title:"Valeur al\xE9atoire",desc:M("\xC0 chaque coup d\u2019horloge, la valeur de sortie sera 1 avec une probabilit\xE9 de ",".")},contextMenu:{ShowProb:"Montrer la probabilit\xE9"}},Rectangle:{contextMenu:{Size:"Taille",SizePrompt:"Entrez la taille de ce rectangle:",Rounded:"Arrondi",WithBackgroundColor:"Avec couleur de fond",SetTitle:"Ajouter un titre\u2026",ChangeTitle:"Changer le titre\u2026",SetTitlePrompt:"Entrez le titre \xE0 afficher ou laissez vide pour le supprimer:",InsideFrame:"\xC0 l\u2019int\xE9rieur du cadre",Font:"Police\u2026",Color:"Couleur",ColorYellow:"Jaune",ColorRed:"Rouge",ColorGreen:"Vert",ColorBlue:"Bleu",ColorTurquoise:"Turquoise",ColorGrey:"Gris",Border:"Bordure",BorderNone:"Aucune bordure",Border1px:"Fine (1 pixel)",Border2px:"Moyenne (2 pixels)",Border3px:"\xC9paisse (3 pixels)",Border5px:"Tr\xE8s \xE9paisse (5 pixels)",Border10px:"\xC9norme (10 pixels)",TitlePlacement:"Position du titre",PlacementTop:"En haut",PlacementTopLeft:"En haut \xE0 gauche",PlacementTopRight:"En haut \xE0 droite",PlacementBottom:"En bas",PlacementBottomLeft:"En bas \xE0 gauche",PlacementBottomRight:"En bas \xE0 droite",PlacementLeft:"\xC0 gauche",PlacementRight:"\xC0 droite",PlacementCenter:"Au centre"}},Label:{contextMenu:{ChangeText:"Changer le texte\u2026",ChangeTextPrompt:"Choisissez le texte \xE0 afficher:",Font:"Police\u2026"}},LatchSR:{tooltip:{title:"Verrou SR",desc:"Stocke un bit."}},Mux:{tooltip:q("Multiplexeur ${from} vers ${to}")},MuxDemux:{contextMenu:{ShowWiring:"Afficher les connexions",UseZForDisconnected:"Utiliser Z pour sorties d\xE9connect\xE9es",ParamNumFrom:M("Nombre d\u2019entr\xE9es",q("${val} entr\xE9e$s{val}")),ParamNumTo:M("Nombre de sorties",q("${val} sortie$s{val}"))}},Output:{tooltip:{title:q("Sortie (${numBits} bit$s{numBits})")}},Display7Seg:{tooltip:"Afficheur 7 segments"},Display16Seg:{tooltip:"Afficheur 16 segments"},DisplayAscii:{tooltip:{title:"Afficheur de caract\xE8re ASCII",desc:M("Affiche le caract\xE8re ASCII repr\xE9sent\xE9 par ses 7 entr\xE9es, actuellement ","."),CurrentlyUndefined:"Comme toutes ses entr\xE9es ne sont pas connues, ce caract\xE8re est actuellement ind\xE9fini.",CurrentlyThisCharacter:"Actuellement, c\u2019est le caract\xE8re num\xE9ro",WhichIsNotPrintable:" (un caract\xE8re non imprimable)."},contextMenu:{AdditionalDisplay:"Affichage suppl\xE9mentaire",DisplayNone:"Aucun",DisplayDecimal:"Valeur d\xE9cimale",DisplayHex:"Valeur hexad\xE9cimale",ChangeDisplayDesc:"Changez l\u2019affichage suppl\xE9mentaire avec un double-clic sur le composant"}},DisplayBar:{tooltip:{title:"Afficheur lumineux",ValueUnknown:"Son \xE9tat est ind\xE9termin\xE9 car son entr\xE9e n\u2019est pas connue.",ValueZ:"Son \xE9tat est ind\xE9termin\xE9 car son entr\xE9e est flottante (haute imp\xE9dance).",Value1:M("Il est actuellement allum\xE9 car son entr\xE9e est de ","."),Value0:M("Il est actuellement \xE9teint car son entr\xE9e est de ",".")},contextMenu:{TransparentWhenOff:"Transparent si \xE9teint",Display:"Affichage",DisplayVerticalBar:"Barre verticale",DisplayHorizontalBar:"Barre horizontale",DisplaySmallSquare:"Petit carr\xE9",DisplayLargeSquare:"Grand carr\xE9",DisplayChangeDesc:"Changez l\u2019affichage avec un double-clic sur le composant",Color:"Couleur",ColorGreen:"Vert",ColorRed:"Rouge",ColorYellow:"Jaune"}},Display:{tooltip:{title:q("Afficheur ${numBits} bit$s{numBits}"),desc:M(q("Affiche la valeur ${radixStr} de ses ${numBits} entr\xE9e$s{numBits}, actuellement "),"."),RadixBinary:"binaire",RadixDecimal:"d\xE9cimale",RadixSignedDecimal:"d\xE9cimale sign\xE9e",RadixHexadecimal:"hexad\xE9cimale",RadixGeneric:q("en base ${radix}"),CurrentlyUndefined:"Comme toutes ses entr\xE9es ne sont pas connues, cette valeur est actuellement ind\xE9finie."},contextMenu:{DisplayAs:"Afficher",DisplayNone:"Aucun",DisplayAsBinary:"en binaire (base 2)",DisplayAsDecimal:"en d\xE9cimal (base 10)",DisplayAsSignedDecimal:"en d\xE9cimal sign\xE9",DisplayAsOctal:"en octal (base 8)",DisplayAsHexadecimal:"en hexad\xE9cimal (base 16)",DisplayAsUnknown:"comme inconnu"}},ShiftDisplay:{tooltip:"Affichage \xE0 d\xE9calage",contextMenu:{Decoding:"D\xE9codage",DecodingNone:"Aucun",DecodingOctal:"Octal",DecodingHex:"Hexad\xE9cimal",DecodingAscii7:"ASCII (7 bits)",DecodingAscii8:"ASCII (8 bits)",DecodingUint4:"Entier sur 4 bits",DecodingInt4:"Entier sign\xE9 sur 4 bits",DecodingUint8:"Entier sur 8 bits",DecodingInt8:"Entier sign\xE9 sur 8 bits",DecodingUint16:"Entier sur 16 bits",DecodingInt16:"Entier sign\xE9 sur 16 bits",DecodingChangeWarning:"Attention, changer le d\xE9codage peut tronquer la valeur stock\xE9e",Grouping:"Regrouper les donn\xE9es",GroupingNone:"Pas de regroupement",GroupBy:q("Par ${n}")},EmptyCaption:"(vide)"},Passthrough:{tooltip:"Broche. Sert uniquement \xE0 arranger les connexions.",contextMenu:{Slant:"Inclinaison",SlantNone:"Aucune",SlantRight:"De 45\xB0 vers la droite",SlantLeft:"De 45\xB0 vers la gauche"}},Pixel:{tooltip:"Pixel. Affiche une couleur r\xE9glable selon les entr\xE9es.",contextMenu:{Full:"Remplir le carr\xE9 entier",ParamNumBits:M("Nombre de bits par composant",q("${val} bit$s{val}")),ParamGrayscale:"Niveaux de gris",ParamTouch:"Avec sortie tactile"}},GateArray:{tooltip:{title:"Porte multiple",desc:q("Effectue plusieurs fois en parall\xE8le l\u2019op\xE9ration logique choisie; actuellement, ${op}.")},contextMenu:{Type:"Type",ShowAsUnknown:"Masquer le type"}},TristateBufferArray:{tooltip:{title:"Sortie \xE0 3 \xE9tats multiple",desc:"Repr\xE9sente plusieurs sorties \xE0 trois \xE9tats, contr\xF4l\xE9es par un seul bit de contr\xF4le."}},RAM:{tooltip:{title:"RAM (m\xE9moire vive)",desc:q("Stocke ${numWords} ligne$s{numWords} de ${numDataBits} bit$s{numDataBits}.")},contextMenu:{SelectedDataDisplay:"Affichage des donn\xE9es address\xE9es",EditContent:"\xC9diter le contenu\u2026",EditContentPrompt:"Tapez le nouveau contenu de la m\xE9moire en s\xE9parant les lignes par des espaces. S\u2019il y a autant de caract\xE8res que de bits, les donn\xE9es sont lues comme \xE9tant du binaire, sinon, comme de l'hexad\xE9cimal.",SaveContent:"Sauvegarder le contenu",LoadContent:"Charger le contenu\u2026",SwapROMRAM:"\xC9changer ROM et RAM"}},ROM:{tooltip:{title:"ROM (m\xE9moire morte)",desc:q("Stocke ${numWords} ligne$s{numWords} de ${numDataBits} bits${numDataBits}.")}},Register:{tooltip:{title:"Registre",desc:q("Stocke ${numBits} bit$s{numBits}.")},contextMenu:{ParamHasIncDec:"Avec incr\xE9mentaiton",Saturating:"Avec saturation"}},ShiftRegister:{tooltip:{title:"Registre \xE0 d\xE9calage",desc:q("Stocke ${numBits} bit$s{numBits} et les d\xE9cale \xE0 chaque activation.")}},ControlledInverter:{tooltip:{title:"Inverseur commut\xE9",desc:"Inverse ses entr\xE9es si le bit de contr\xF4le S vaut 1; sinon, les sorties sont \xE9gales aux entr\xE9es."}},TristateBuffer:{tooltip:"Sortie \xE0 3 \xE9tats"},Wire:{contextMenu:{AddMiddlePoint:"Ajouter un point interm\xE9diaire",AddPassthrough:"Ajouter une broche",CustomPropagationDelay:q("D\xE9lai de propagation sp\xE9cifique${current}\u2026"),CustomPropagationDelayDesc:q("D\xE9lai de propagation personnalis\xE9 en millisecondes pour cette connexion (laisser vide pour utiliser la valeur par d\xE9faut du circuit, actuellement de ${current} ms):"),WireColor:"Couleur du fil",WireColorBlack:"Noir (par d\xE9faut)",WireColorRed:"Rouge",WireColorBlue:"Bleu",WireColorYellow:"Jaune",WireColorGreen:"Vert",WireColorWhite:"Blanc",WireStyle:"Style",WireStyleDefault:"Par d\xE9faut",WireStyleAuto:"Auto",WireStyleStraight:"Ligne",WireStyleSquareHV:"H puis V",WireStyleSquareVH:"V puis H",WireStyleCurved:"Courbe",HiddenWire:"Masquer le fil"},timeline:{PropagatingValue:q("Propagation de la valeur ${val} sur le fil")}}},Dialogs:{Generic:{Close:"Fermer"},Share:{title:"Partager ce circuit",URL:"URL:",EmbedInIframe:"Inclusion via <iframe>:",EmbedWithWebComp:"Inclusion via un web component:",EmbedInMarkdown:"Inclusion en Markdown/Myst:"}}},_b={plural:(r,n,e)=>Math.abs(r)===1?e!=null?e:"":n!=null?n:"s",ComponentBar:{SectionNames:{InputOutput:"Input/ Output",Gates:"Gates",Layout:"Layout",Components:"Compo- nents",Custom:"Custom"},Labels:{More:"More",Less:"Less"},Components:Wt.withProps()({Input1:["Input","IN"],InputN:["Multiple Inputs","IN Mult."],Input8:["Byte (8-Bit) Input","IN (8-Bit)"],Clock:["Clock Generator","Clock"],Random:["Random Input","Random"],Output1:["Output","OUT"],OutputN:["Multiple Outputs","OUT Mult."],Output8:["Byte (8-Bit) Output","OUT (8-Bit)"],DisplayN:["Value Display","Display"],Display8:["Byte (8-Bit) Display","8-Bit Displ."],Display7Seg:["7-Segment Display","7-Segment"],Display16Seg:["16-Segment Display","16-Segment"],DisplayAscii:["ASCII Character (7-Bit) Display","Character"],DisplayBar:["Bit Display as a Light Bar","Bar"],Pixel:["Pixel with adjustable color","Pixel"],ShiftDisplay:["Display with Shift Buffer","Shift Displ."],Passthrough1:["Passthrough","Passthrough"],PassthroughN:["Passthrough with multiple inputs-outputs","Passthr. (n)"],Label:["Label","Label"],Rectangle:["Grouping Rectangle","Group"],not:["NOT Gate","NOT"],buf:["Buffer","BUF"],tri:["Tristate Buffer","Tristate"],and:["AND Gate","AND"],or:["OR Gate","OR"],xor:["XOR Gate","XOR"],nand:["NAND Gate","NAND"],nor:["NOR Gate","NOR"],xnor:["XNOR Gate","XNOR"],imply:["IMPLY Gate","IMPLY"],nimply:["NIMPLY Gate","NIMPLY"],transfer:["Fake 2-Input TRANSFER Gate","TRANSF."],and3:["3-Input AND Gate","AND (3)"],or3:["3-Input OR Gate","OR (3)"],xor3:["3-Input XOR Gate","XOR (3)"],nand3:["3-Input NAND Gate","NAND (3)"],nor3:["3-Input NOR Gate","NOR (3)"],xnor3:["3-Input XNOR Gate","XNOR (3)"],and4:["4-Input AND Gate","AND (4)"],or4:["4-Input AND Gate","OR (4)"],xor4:["4-Input AND Gate","XOR (4)"],nand4:["4-Input AND Gate","NAND (4)"],nor4:["4-Input AND Gate","NOR (4)"],xnor4:["4-Input AND Gate","XNOR (4)"],ControlledInverter:["Switched Inverter","Switched Inv."],GateArray:["Gate Array","Gate Array"],TristateBufferArray:["Tristate Buffer Array","Tristate Arr."],HalfAdder:["Half Adder","Half Adder"],Adder:["Full Adder","Full Adder"],AdderArray:["Adder Array","Adder Arr."],ALU:["Arithmetic and Logic Unit","ALU"],Mux:["Multiplexer","Mux"],Mux2to1:["2-to-1 Multiplexer (1 Control Bit)","Mux 2-1"],Mux4to1:["4-to-1 Multiplexer (2 Control Bit)","Mux 4-1"],Mux8to1:["8-to-1 Multiplexer (3 Control Bit)","Mux 8-1"],Mux4to2:["4-to-2 Multiplexer (1 Control Bit)","Mux 4-2"],Mux8to2:["8-to-2 Multiplexer (2 Control Bit)","Mux 8-2"],Mux8to4:["8-to-4 Multiplexer (1 Control Bit)","Mux 8-4"],Mux16to8:["16-to-8 Multiplexer (1 Control Bit)","Mux 16-8"],Demux:["Demultiplexer","Demux"],Demux1to2:["1-to-2 Demultiplexer (1 Control Bit)","Demux 1-2"],Demux1to4:["1-to-4 Demultiplexer (2 Control Bit)","Demux 1-4"],Demux1to8:["1-to-8 Demultiplexer (3 Control Bit)","Demux 1-8"],Demux2to4:["2-to-4 Demultiplexer (1 Control Bit)","Demux 2-4"],Demux2to8:["2-to-8 Demultiplexer (2 Control Bit)","Demux 2-8"],Demux4to8:["4-to-8 Demultiplexer (1 Control Bit)","Demux 4-8"],Demux8to16:["8-to-16 Demultiplexer (1 Control Bit)","Demux 8-16"],LatchSR:["SR Latch","SR Latch"],FlipflopJK:["JK Flip-Flop","FF-JK"],FlipflopT:["T Flip-Flop","FF-T"],FlipflopD:["D Flip-Flop","FF-D"],Register:["Register","Register"],ShiftRegister:["Shift Register","Shift Reg."],RAM:["RAM Module","RAM"],ROM:["ROM Module","ROM"],Counter:["4-Bit Counter","Counter"],Decoder:["Binary to One-of-N Decoder","Decoder"],Decoder7Seg:["7-Segment Decoder","7-Seg. Dec."],Decoder16Seg:["ASCII-to-16-Segment Decoder","16-Seg. Dec."],DecoderBCD4:["4-Bit-to-BCD Decoder","BCD Dec."],Comparator:["Comparator","Compar."]})},Modes:{FULL:M("Admin","In addition to the full mode, this enables features like hiding wire colors, setting inputs and output to undetermined values, create faulty components, etc."),DESIGN:M("Full","All standard circuit-design features are enabled"),CONNECT:M("Connect","You can move and connect components already on the canvas, but not add more components (the left component bar is not shown)"),TRYOUT:M("Tryout","You can only change inputs to try out a already-designed circuit"),STATIC:M("Static","Components are displayed without any possible interaction")},Orientations:{e:"Right (default)",s:"Down",w:"Left",n:"Up"},Settings:{Settings:"Settings",CircuitName:"Name:",DefaultFileName:"circuit",NameOfDownloadedFile:"This will be the name of the downloaded file.",animateWires:M("Animate wires","If checked, wires are shown as animated to show the propagation direction."),hideWireColors:M("Hide wire colors","If checked, wires are shown with a neutral color instead of showing whether they carry a 1 or a 0."),hideInputColors:M("Hide input colors","If checked, inputs are shown with a neutral color, even if they still deliver a well determined value. Can be used together with hidden wire colors."),hideOutputColors:M("Hide output colors","If checked, outputs are shown with a neutral color. Can be used together with hidden wire colors."),hideMemoryContent:M("Hide stored values","If checked, latches, flip-flops, registers and other memory components don\u2019t show the content they store."),showGateTypes:M("Show gate types","If checked, gates types are displayed textually on top of the gate symbol."),showDisconnectedPins:M("Always show pins","If unchecked, disconnected component pins are hidden in modes where new connections can\u2019t be made (but stay visible otherwise)."),hideTooltips:M("Disable tooltips","If checked, additional information in component tooltips (such as truth tables) won\u2019t be shown."),groupParallelWires:M("Group parallel wires","If checked, parallel wires from one component to another will be grouped together as a thicker wire."),showHiddenWires:M("Show hidden wires","If checked, hidden wires will still be shown."),showAnchors:M("Show anchors","If checked, arrows will be shown to denote which component is anchored to which other component while moving."),showIds:M("Show IDs","If checked, component IDs will be shown on top of them"),propagationDelay:"A 1 or 0 output on some wire will propagate to the other end of the wire after this propagation delay.",propagationDelayField:M("Propagation in","ms"),zoomLevel:"The zoom level on the circuit components.",zoomLevelField:M("Zoom:","%"),showUserDataLink:M("See ","linked data"),userDataHeader:"This data is exported with the circuit:",wireStyle:"Wire style:"},Tests:{Title:"Tests",DefaultTestCaseName:"Test",DefaultTestSuiteName:"Test Suite",SetInputs:"Inputs",WantedOutputs:"Outputs",SetTheseInputs:"Set these inputs",Run:"Run",RunTestSuite:"Run test suite",DeleteTestCase:"Delete this test case",EditTestCaseName:"Rename this test case",TestSuiteShownClickToHide:"Test suite visible (click to hide)",TestSuiteHiddenClickToShow:"Test suite hidden (click to show)",EnterNewTestCaseName:"Enter the new name for this test case:",ComponentUsedInTestSuite:q("This component is used in test suites. Do you really want to delete it? The tests will be kept, but won\u2019t work until another component with this reference (\u201C${ref}\u201D) is added to the circuit.")},TopBar:{DirtyTooltip:"The circuit has been modified since the last download/save",CircuitNameTooltip:"Name of the circuit; click to change",SetCircuitName:"Set the name of the circuit (or leave empty to use the default name):",CustomComponentCaptionTooltip:"Name of the subcircuit currently being edited; click to change",CloseCircuit:"Back to the main circuit",Undo:M("Undo","Undo the last action"),Redo:M("Redo","Redo the last undone action or repeat the last action"),Download:M("Download","Download the circuit (or the custom components with Option/Alt key down)"),Screenshot:M("Screenshot","Download the circuit as an image (PNG or SVG with Option/Alt key down)"),Open:M("Open","Open a previously downloaded circuit"),Restore:M("Restore","Restore the circuit to the last state"),Reset:M("Reset","Reset the state of this circuit"),TimelinePlay:M("Play","Starts logical time"),TimelinePause:M("Pause","Stops logical time"),TimelineStep:M("Step","Moves logical time to the next scheduled event"),TimeLabel:"Time: ",Design:M("Design","Create or modify the circuit"),Delete:M("Delete","Delete elements from the circuit"),Move:M("Move","Move the whole circuit"),Tests:M("Tests","Show tests for the circuit")},Messages:{UnsupportedFileType:q("Unsupported file type: ${type}."),LoadedDefinitions:q("Loaded ${n} custom component definition$s{n}"),SavedToUrl:"Circuit saved to URL",SetAnchorPrompt:"Click on the component to anchor to",AnchorAdded:"Anchor added",CircularAnchorsForbidden:"Circular anchors are not supported.",NotImplemented:"This feature is not implemented yet.",NoPermission:"This action is not allowed in this mode.",ReallyCloseWindow:"Do you really want to close the window without saving the changes?",LoadedCircuitFromSessionStorage:q("Loaded from last session on ${day} at ${time}"),FailedToLoadCircuitFromStorage:q("Failed to load the circuit (${error})"),NoSavedData:"Nothing to restore for this editor.",DevelopedBy:"Developed by",DidUndo:"Undo",DidRedo:"Redo",DidRepeat:"Repeat",NothingToUndo:"Nothing to undo",NothingToRedo:"Nothing to redo or repeat",NewTestCaseTitle:"Create a new test case",NewTestCaseSetName:"Enter the name of the new test case:",TestCaseInputToSet:q("Input$s{n} to set:"),TestCaseOuputToCheck:q("Output$s{n} to check:"),TooManyInputsForAutoTestCases:q("Cannot create test cases automatically for more than ${max} inputs."),AutoTestCasesWarning:q("This will create ${numCases} test cases, one for each combination of the ${numInputs} inputs. Do you want to continue?"),ComputingTestCases:"Generating test cases\u2026",RunningTests:"Running test cases\u2026"},Components:{Generic:{contextMenu:{Delete:"Delete",Reset:"Reset",MakeNewComponent:"Make New Component\u2026",MakeNewComponentFailed:"Cannot create new custom component.",MakeNewTestCase:"Make New Test Case\u2026",MakeAllTestCases:"Make All Test Cases\u2026",MakeNewTestCaseFailed:"Cannot create new test case.",SetIdentifier:"Set Identifier\u2026",ChangeIdentifier:M("Change Identifier (",")\u2026"),SetIdentifierPrompt:"Choose the unique identifier to use for this component:",IdentifierCannotBeEmpty:"The identifier cannot be empty.",IdentifierAlreadyInUseShouldSwap:"The identifier is already in use. Do you want to swap the component identifiers?",SetAnchor:"Set Anchor\u2026",ClearAnchor:M("Remove Anchor (",")"),Orientation:"Orientation",ChangeOrientationDesc:"Change the orientation with Command + double click on the component",LockPosition:"Lock Position",ShowAsUnknown:"Show As Unknown",ForceOutputSingle:"Force Output",ForceOutputMultiple:"Force an Output",Output:"Output",NormalOutput:"Normal Output",ForceAsUnknown:"Force as Unkown",ForceAs1:"Force as 1",ForceAs0:"Force as 0",ForceAsZ:"Force as High Impedance",ForceOutputDesc:"Force an output with Option + click on an output node",SetName:"Set Name\u2026",ChangeName:"Change Name\u2026",SetNamePrompt:"Choose the name to display or leave empty to remove it:",SetFontPrompt:M("Enter a font specification or leave empty to use the default value (","):"),TriggerOn:"Trigger on",TriggerRisingEdge:"Rising Edge",TriggerFallingEdge:"Fallling Edge",ShowContent:"Show Content",ParamControlBitAtBottom:"Control Bit at Bottom",ParamControlBitsAtBottom:"Control Bits at Bottom",ParamNumInputs:M("Number of Inputs",q("${val} Input$s{val}")),ParamNumBits:M("Number of Bits",q("${val} Bit$s{val}")),ParamNumWords:M("Number of Lines",q("${val} Line$s{val}"))},InputCarryInDesc:"Cin (Previous Carry)",InputClockDesc:"Clock",InputClearDesc:"C (Clear, set to 0)",InputPresetDesc:"P (Preset, set to 1)",InputSetDesc:"S (Set, set to 1)",InputResetDesc:"R (Reset, set to 0)",InputDataDesc:"D (Data)",InputWriteEnableDesc:"WE (Write Enable)",OutputSumDesc:"S (Sum)",OutputCarryDesc:"C (Carry)",OutputCarryOutDesc:"Cout (Carry)",OutputQDesc:"Q (Normal Output)",OutputQBarDesc:"Q\u0305 (Inverted Output)"},Custom:{MenuButtonSuffix:" (custom component)",contextMenu:{ChangeName:"Rename\u2026",ChangeNamePrompt:"Enter the name of this custom component:",ChangeNameEmpty:"The name cannot be empty.",ChangeCircuit:"Edit Circuit",Delete:"Delete Custom Component",EditFromComponentMessage:"You can edit this custom component by right-clicking such a component in the circuit.",CannotDeleteInUse:"Cannot delete this custom component because it is in use in the circuit.",CannotDeleteInUseBy:q("Cannot delete this custom component because it is used to define another component (${caption})."),ConfirmDelete:"Are you sure you want to delete this custom component?"},tooltip:{titleSuffix:" (Custom Component)",desc:"This custom component computes its outputs according to the circuit you have defined."},messages:{EmptySelection:"No components are selected.",NoInput:"No input is selected.",NoOutput:"No output is selected.",InputsOutputsMustHaveNames:"All inputs and outputs must have unique (non-dynamic) names.",MissingComponents:q("The following components are connected to outputs but are missing from selection: ${list}."),NoWires:"There are no wires between the selected components.",UselessComponents:q("The following components are not connected to outputs and are useless: ${list}."),CannotIncludeClock:"Clocks cannot be included in custom components. Add a normal input, which can later be connected to an external clock.",CannotBeModified:"This custom component cannot be modified in this mode.",EnterCaptionPrompt:"Entrez le nom (unique) du composant personnalis\xE9:",ComponentAlreadyExists:q("A custom component definition with id '${id}' already exists."),InputsOutputsChanged:"The inputs and outputs have changed and some connections may be removed by adapting the circuit. Do you want to continue?",NotInMainEditor:"Please go back to the main editor to edit the custom circuit of this component."}},Adder:{tooltip:{title:"Adder",desc:"Adds two bits A and B together with an input carry Cin, and outputs a sum bit S and an output carry Cout."}},AdderArray:{tooltip:{title:q("${numBits}-Bit Adder Array"),desc:"Adds the two inputs numbers A et B together with an input carry Cin, and outputs sum bits S and an output carry Cout."}},ALU:{"A+B":M("+","Addition"),"A-B":M("A\u2013B","Subtraction (A \u2013 B)"),"B-A":M("B\u2013A","Subtraction (B \u2013 A)"),"A+1":M("A+1","A + 1"),"A-1":M("A\u20131","A \u2013 1"),"-A":M("\u2013A","Negation of A"),"A*2":M("A\xD72","Addition of A to itself (A \xD7 2)"),"A/2":M("A/2","Arithmetic right shift by 1 (A/2)"),"A|B":M("OR","Disjunction (A OR B)"),"A&B":M("AND","Conjunction (A AND B)"),"A|~B":M("ORn","A OR NOT(B)"),"A&~B":M("ANDn","A AND NOT(B)"),"~A":M("A\u0305","Inversion of A"),"A^B":M("XOR","Excl. Disjunction (A XOR B)"),"A<<":M("<<","Logical Left Shift by 1 of A"),"A>>":M(">>","Logical Right Shift by 1 of A"),InputCinDesc:"input carry",OutputCoutDesc:"output carry",tooltip:{title:"Arithmetic and Logic Unit (ALU)",CurrentlyCarriesOut:"Currently carries out",SomeUnknownOperation:"an unknown operation",ThisOperation:"operation"},contextMenu:{toggleShowOp:"Show Operation",ParamUseExtendedOpcode:"Use Extended Opcode"}},Clock:{tooltip:{title:"Clock",period:M("Period: "," ms"),dutycycle:M("Duty cycle: ","%"),phase:M("Phase: "," ms")},contextMenu:{Period:"Period",CustomPeriod:"Other",SetPeriodMillis:"Enter the period in milliseconds:",InvalidPeriod:"The period must be a positive number.",ReplaceWithInput:"Replace with Input"},timeline:{NextRisingEdge:"Next rising edge of the clock",NextFallingEdge:"Next falling edge of the clock"}},Comparator:{tooltip:{title:"Comparator",desc:"Comparator between two bits A and B, enabled by an input E."}},Counter:{tooltip:{title:"Counter",desc:"4-bit counter."},contextMenu:{DisplayTempl:q("${desc} Display"),DisplayNone:"No",DisplayDecimal:"Decimal",DisplayHex:"Hexadecimal"}},Decoder:{tooltip:{title:"Binary Decoder",desc:q("Takes as input a binary number coded on ${numFrom} bit$s{numFrom} and activates the corresponding output among ${numTo} (currently, ${n}).")}},Decoder7Seg:{tooltip:"7-Segment Decoder"},Decoder16Seg:{tooltip:"7-Bit ASCII to 16-Segment Decoder"},DecoderBCD4:{tooltip:"4-Bit to BCD (Binary-Coded Decimal) Decoder"},Demux:{tooltip:q("${from}-to-${to} Demultiplexer")},FlipflopD:{tooltip:{title:"D Flip-Flop",desc:"Stores one bit."}},FlipflopJK:{InputJDesc:"J (Jump, set to 1)",InputKDesc:"K (Kill, set to 0)",tooltip:{title:"JK Flip-Flop",desc:"Stores one bit."}},FlipflopT:{InputTDesc:"T (Toggle)",tooltip:{title:"T Flip-Flop",desc:"Stores one bit."}},Gate:{not:M("NOT","NOT","The output is the inverted input."),buf:M("BUF","BUF","The output is the same as the input."),and:M("AND","AND","The output is 1 when all inputs are 1."),or:M("OR","OR","The output is 1 when at least one of the inputs is 1."),xor:M("XOR","XOR","The output is 1 when an odd number of inputs are 1."),nand:M("NAND","NAND","Inverted AND gate: the output is 1 unless all inputs are 1."),nor:M("NOR","NOR","Inverted OR gate: the output is 1 when all inputs are 0."),xnor:M("XNOR","XNOR","Inverted XOR gate: the output is 1 when an even number of inputs are 1."),imply:M("IMPLY","IMPL","The output is 1 if the first input is 0 or if both inputs are 1."),rimply:M("IMPLY (bis)","IMPL","The output is 1 if the second input is 0 or if both inputs are 1."),nimply:M("NIMPLY","N-IMPL","Inverted IMPLY gate: the output is only 1 if the first input is 1 and the second one 0."),rnimply:M("NIMPLY (bis)","N-IMPL","Inverted IMPLY gate: la sortie ne vaut 1 que lorsque la premi\xE8re entr\xE9e vaut 0 et la seconde 1."),txa:M("TRANSFER-A",void 0,"The output is the same as the first input; the second input is ignored."),txb:M("TRANSFER-B",void 0,"The output is the same as the second input; the first input is ignored."),txna:M("TRANSFER-NOT-A",void 0,"The output is the inverted first input; the second input is ignored."),txnb:M("TRANSFER-NOT-B",void 0,"The output is the inverted second input; the first input is ignored."),tooltip:{GateTitle:r=>W(r," Gate"),UnknownGate:"Unknown Gate",Input:"Input",Output:"Output",CurrentlyDelivers:"It currently delivers",ShouldCurrentlyDeliver:"it should currently deliver",UndeterminedOutputBecauseInputUnknown:"an unknown output as its input is unknown. Its truth table is:",UndeterminedOutputBecauseInputsUnknown:"an unknown output as not all inputs are known. Its truth table is:",ThisOutput:"the output",BecauseInputIs:"because its input is",AccordingToTruthTable:"according to the following truth table:",Inverter:M("Inverter ("," gate)"),Buffer:M("Buffer ("," gate)")},contextMenu:{ReplaceBy:"Replace By",GateTempl:q("${type} Gate"),ShowAs:"Show As",NormalGateTempl:q("Normal ${type} Gate"),UnknownGate:"Unknown Gate (with \u201C?\u201D)",VariantChangeDesc:"Switch to a variant with Shift + double-click on the gate"}},HalfAdder:{tooltip:{title:"Half Adder",desc:"Adds two bits A and B. Outputs a sum bit S and an output carry bit C."}},Input:{tooltip:{title:q("Input (${numBits}-Bit)")},contextMenu:{LockValue:"Lock This Value",PushButton:"Push Button",ToggleButton:"Toggle Button",ReplaceWithClock:"Replace With Clock",InputSetFromOutside:"Input set from outside"}},Random:{tooltip:{title:"Random Input",desc:M("When triggered by the clock, the output value will be 1 with probability ",".")},contextMenu:{ShowProb:"Show Probability"}},Rectangle:{contextMenu:{Size:"Size",SizePrompt:"Enter the size of this rectangle:",Rounded:"Rounded",WithBackgroundColor:"With Background Color",SetTitle:"Add Title\u2026",ChangeTitle:"Change Title\u2026",SetTitlePrompt:"Enter the title to display or leave empty to remove it:",InsideFrame:"Inside Frame",Font:"Font",Color:"Color",ColorYellow:"Yellow",ColorRed:"Red",ColorGreen:"Green",ColorBlue:"Blue",ColorTurquoise:"Turquoise",ColorGrey:"Grey",Border:"Border",BorderNone:"None",Border1px:"Fine (1 pixel)",Border2px:"Medium (2 pixels)",Border3px:"Thick (3 pixels)",Border5px:"Very Thick (5 pixels)",Border10px:"Huge (10 pixels)",TitlePlacement:"Title Placement",PlacementTop:"Top",PlacementTopLeft:"Top Left",PlacementTopRight:"Top Right",PlacementBottom:"Bottom",PlacementBottomLeft:"Bottom Left",PlacementBottomRight:"Bottom Right",PlacementLeft:"Left",PlacementRight:"Right",PlacementCenter:"Center"}},Label:{contextMenu:{ChangeText:"Change Text\u2026",ChangeTextPrompt:"Type the text to display:",Font:"Font\u2026"}},LatchSR:{tooltip:{title:"SR Latch",desc:"Stores one bit."}},Mux:{tooltip:q("${from}-to-${to} Multiplexer")},MuxDemux:{contextMenu:{ShowWiring:"Show Internal Wiring",UseZForDisconnected:"Use Z For Disconnected Pins",ParamNumFrom:M("Number of Inputs",q("${val} Input$s{val}")),ParamNumTo:M("Number of Outputs",q("${val} Output$s{val}"))}},Output:{tooltip:{title:q("Output (${numBits}-Bit)")}},Display7Seg:{tooltip:"7-Segment Display"},Display16Seg:{tooltip:"16-Segment Display"},DisplayAscii:{tooltip:{title:"ASCII Character Display",desc:M("Displays the ASCII character represented by the 7 inputs, currently ","."),CurrentlyUndefined:"As not all inputs are known, this character is currently undefined.",CurrentlyThisCharacter:"Currently, this character is",WhichIsNotPrintable:" (a non-printable character)."},contextMenu:{AdditionalDisplay:"Additional Display",DisplayNone:"None",DisplayDecimal:"Decimal Value",DisplayHex:"Hexadecimal Value",ChangeDisplayDesc:"Change the additional display with a double-click on the component"}},DisplayBar:{tooltip:{title:"Bar/LED Display",ValueUnknown:"Its state is undefined because its input is unknown.",ValueZ:"Its state is undefined because its input is floating (high impedance).",Value1:M("It is currently on because its input is ","."),Value0:M("It is currently off because its input is ",".")},contextMenu:{TransparentWhenOff:"Transparent When Off",Display:"Display",DisplayVerticalBar:"Vertical Bar",DisplayHorizontalBar:"Horizontal Bar",DisplaySmallSquare:"Small Square",DisplayLargeSquare:"Large Square",DisplayChangeDesc:"Change display types with a double-click on the component",Color:"Color",ColorGreen:"Green",ColorRed:"Red",ColorYellow:"Yellow"}},Display:{tooltip:{title:q("${numBits}-Bit Display"),desc:M(q("Displays the ${radixStr} value of its ${numBits} input$s{numBits}, which is currently "),"."),RadixBinary:"binary",RadixDecimal:"decimal",RadixSignedDecimal:"signed decimal",RadixHexadecimal:"hexadecimal",RadixGeneric:q("base-${radix}"),CurrentlyUndefined:"As not all inputs are known, this value is currently undefined."},contextMenu:{DisplayAs:"Display as",DisplayNone:"None",DisplayAsBinary:"Binary (Base 2)",DisplayAsDecimal:"Decimal (Base 10)",DisplayAsSignedDecimal:"Signed Decimal",DisplayAsOctal:"Octal (Base 8)",DisplayAsHexadecimal:"Hexadecimal (Base 16)",DisplayAsUnknown:"Unkown"}},ShiftDisplay:{tooltip:"Shift Buffer Display",contextMenu:{Decoding:"Decoding",DecodingNone:"None",DecodingOctal:"Octal",DecodingHex:"Hexadecimal",DecodingAscii7:"ASCII (on 7 bits)",DecodingAscii8:"ASCII (on 8 bits)",DecodingUint4:"4-Bit Integer",DecodingInt4:"4-Bit Signed Integer",DecodingUint8:"8-Bit Integer",DecodingInt8:"8-Bit Signed Integer",DecodingUint16:"16-Bit Integer",DecodingInt16:"16-Bit Signed Integer",DecodingChangeWarning:"Changing the decoding may truncate the stored value.",Grouping:"Group Data",GroupingNone:"No Grouping",GroupBy:q("By ${n}")},EmptyCaption:"(empty)"},Passthrough:{tooltip:"Passthrough. Only used to arrange wires.",contextMenu:{Slant:"Slant",SlantNone:"None",SlantRight:"Rightward By 45\xB0",SlantLeft:"Leftward By 45\xB0"}},Pixel:{tooltip:"Pixel. Displays a color that can be set with the inputs.",contextMenu:{Full:"Fill Full Square",ParamNumBits:M("Number of Bits per Component",q("${val} Bit$s{val}")),ParamGrayscale:"Grayscale Only",ParamTouch:"With Touch Output"}},GateArray:{tooltip:{title:"Gate Array",desc:q("Computes in parallel several times the chosen logical operation, which currently is ${op}.")},contextMenu:{Type:"Type",ShowAsUnknown:"Hide Type"}},TristateBufferArray:{tooltip:{title:"Tristate Buffer Array",desc:"Represents multiple tristate buffers switched by a single control bit."}},RAM:{tooltip:{title:"RAM (Random-Access Memory)",desc:q("Stores ${numWords} row$s{numWords} of ${numDataBits} bit$s{numDataBits}.")},contextMenu:{SelectedDataDisplay:"Addressed Data Display",EditContent:"Edit Content\u2026",EditContentPrompt:"Type in the new memory content, separating lines with spaces. If there are as many characters as bits, the input is parsed as a binary string, and otherwise as a hexadecimal string.",SaveContent:"Save Content",LoadContent:"Load Content\u2026",SwapROMRAM:"Swap ROM/RAM"}},ROM:{tooltip:{title:"ROM (Read-Only Memory)",desc:q("Stores ${numWords} row$s{numWords} of ${numDataBits} bit$s{numDataBits}.")}},Register:{tooltip:{title:"Register",desc:q("Stores ${numBits} bit$s{numBits}.")},contextMenu:{ParamHasIncDec:"With Increment/Decrement",Saturating:"Saturating"}},ShiftRegister:{tooltip:{title:"Shift Register",desc:q("Stores ${numBits} bit$s{numBits} and shifts them left or right at each activation.")}},ControlledInverter:{tooltip:{title:"Switched Inverter",desc:"Inverts its inputs when the control bit S is on; otherwise, just outputs the inputs."}},TristateBuffer:{tooltip:"Tristate Buffer"},Wire:{contextMenu:{AddMiddlePoint:"Add Middle Point",AddPassthrough:"Add Passthrough",CustomPropagationDelay:q("Specific Propagation Delay${current}\u2026"),CustomPropagationDelayDesc:q("Specific propagation delay in milliseconds for this connection (leave empty to use the default value for the circuit, which currently is ${current} ms):"),WireColor:"Wire Color",WireColorBlack:"Black (default)",WireColorRed:"Red",WireColorGreen:"Green",WireColorBlue:"Blue",WireColorYellow:"Yellow",WireColorWhite:"White",WireStyle:"Style",WireStyleDefault:"By Default",WireStyleAuto:"Auto",WireStyleStraight:"Straight",WireStyleSquareHV:"H then V",WireStyleSquareVH:"V then H",WireStyleCurved:"Curve",HiddenWire:"Hide Wire"},timeline:{PropagatingValue:q("Propagation of value ${val} on wire")}}},Dialogs:{Generic:{Close:"Close"},Share:{title:"Share Circuit",URL:"URL:",EmbedInIframe:"Embed using <iframe>:",EmbedWithWebComp:"Embed with a web component:",EmbedInMarkdown:"Embed in Markdown/Myst:"}}},zc={fr:Eb,en:_b};function pf(r){return r in zc}p(pf,"isLang");function df(r){C=zc[r],ff=r}p(df,"setLang");function hf(){return ff}p(hf,"getLang");var Gs="en",C=zc[Gs],ff=Gs;function mf(r,n,e){let o=new Map;for(let[i,s]of Object.entries(r)){let a=n.get(i);e(a)?o.set(a,s):o.set(i,s)}return o}p(mf,"buildMap");function gf(r,n,e){for(let[o,i]of r.entries())if(Z(o)){let s=n.get(o);e(s)&&(r.delete(o),r.set(s,i))}}p(gf,"fixMap");function Df(r){return(r==null?void 0:r.def.type)===Za}p(Df,"isInput");function bf(r){return(r==null?void 0:r.def.type)===Ja}p(bf,"isOutput");var qr=class{static get Repr(){return st.intersection([st.type({in:st.record(st.string,ks),out:st.record(st.string,ks)}),st.partial({name:st.string,stopOnFail:st.boolean})],"TestCaseCombinational")}constructor(n,e){var o;n!==void 0?(this.name=n.name,this.in=mf(n.in,e,Df),this.out=mf(n.out,e,bf),this.stopOnFail=(o=n.stopOnFail)!=null?o:!1):(this.name=C.Tests.DefaultTestCaseName,this.in=new Map,this.out=new Map,this.stopOnFail=!1)}tryFixReferences(n){gf(this.in,n,Df),gf(this.out,n,bf)}toJSON(){let n=p(e=>Object.fromEntries([...e.entries()].map(([o,i])=>{var s;return[Z(o)?o:(s=o.ref)!=null?s:"?",i]})),"mapRepr");return{name:this.name,in:n(this.in),out:n(this.out),stopOnFail:this.stopOnFail===!0?!0:void 0}}};p(qr,"TestCaseCombinational");var gn=class{static get Repr(){return st.intersection([st.type({cases:st.array(qr.Repr)}),st.partial({name:st.string,hidden:st.boolean,weight:st.number})],"TestSuite")}static get ReprArray(){return st.array(gn.Repr)}constructor(n){var e,o;if(n!==void 0){let[i,s]=n;this.name=i.name,this.isHidden=(e=i.hidden)!=null?e:!1,this.weight=(o=i.weight)!=null?o:1,this.testCases=i.cases.map(a=>new qr(a,s))}else this.name=void 0,this.isHidden=!1,this.weight=1,this.testCases=[]}toJSON(){return{name:this.name,weight:this.weight!==1?this.weight:void 0,hidden:this.isHidden===!0?!0:void 0,cases:this.testCases.map(n=>n.toJSON())}}};p(gn,"TestSuite");var Vi={Pass:{_tag:"pass"},Skip:{_tag:"skip"},Fail:r=>({_tag:"fail",mismatches:r}),Error:r=>({_tag:"error",msg:r})},qs=class{constructor(n){this.testSuite=n;this.testCaseResults=[]}addTestCaseResult(n,e){this.testCaseResults.push([n,e])}isAllPass(){return this.testCaseResults.every(([,n])=>n._tag==="pass")}dump(){console.group(`Test Suite Results for ${this.testSuite.name}`);for(let[n,e]of this.testCaseResults){if(console.group(`Test Case ${n.name}`),e._tag==="pass")console.log("PASS");else if(e._tag==="fail"){let o=e.mismatches.map(i=>`${i.output.ref}: ${Lo(i.actual,!1)} instead of ${Lo(i.expected,!1)}`);console.log("FAIL - mismatches: "+o.join(", "))}else e._tag==="error"&&console.log(`ERROR - ${e.msg}`);console.groupEnd()}console.groupEnd()}};p(qs,"TestSuiteResults");var $r=class{constructor(n){this.parent=n;this._testSuites=[]}get suites(){return this._testSuites}totalCases(){return this._testSuites.reduce((n,e)=>n+e.testCases.length,0)}set(n){this._testSuites.length=0,this._testSuites.push(...n)}push(n){this._testSuites.push(n)}hasReferenceTo(n){if(n===void 0)return!1;let e=p((o,i)=>Z(o)?o===i:o.ref===i,"isRef");for(let o of this._testSuites)for(let i of o.testCases){for(let s of i.in.keys())if(e(s,n))return!0;for(let s of i.out.keys())if(e(s,n))return!0}return!1}};p($r,"TestSuites");var{abs:$s,cos:Ho,sin:Hi,acos:Rb,atan2:Ys,sqrt:ar,pow:kn}=Math;function Xs(r){return r<0?-kn(-r,1/3):kn(r,1/3)}p(Xs,"crt");var yf=Math.PI,du=2*yf,ur=yf/2,Mb=1e-6,Gc=Number.MAX_SAFE_INTEGER||9007199254740991,qc=Number.MIN_SAFE_INTEGER||-9007199254740991,Ob={x:0,y:0,z:0},z={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(r,n){let e=n(r),o=e.x*e.x+e.y*e.y;return typeof e.z<"u"&&(o+=e.z*e.z),ar(o)},compute:function(r,n,e){if(r===0)return n[0].t=0,n[0];let o=n.length-1;if(r===1)return n[o].t=1,n[o];let i=1-r,s=n;if(o===0)return n[0].t=r,n[0];if(o===1){let u={x:i*s[0].x+r*s[1].x,y:i*s[0].y+r*s[1].y,t:r};return e&&(u.z=i*s[0].z+r*s[1].z),u}if(o<4){let u=i*i,l=r*r,c,d,h,m=0;o===2?(s=[s[0],s[1],s[2],Ob],c=u,d=i*r*2,h=l):o===3&&(c=u*i,d=u*r*3,h=i*l*3,m=r*l);let f={x:c*s[0].x+d*s[1].x+h*s[2].x+m*s[3].x,y:c*s[0].y+d*s[1].y+h*s[2].y+m*s[3].y,t:r};return e&&(f.z=c*s[0].z+d*s[1].z+h*s[2].z+m*s[3].z),f}let a=JSON.parse(JSON.stringify(n));for(;a.length>1;){for(let u=0;u<a.length-1;u++)a[u]={x:a[u].x+(a[u+1].x-a[u].x)*r,y:a[u].y+(a[u+1].y-a[u].y)*r},typeof a[u].z<"u"&&(a[u]=a[u].z+(a[u+1].z-a[u].z)*r);a.splice(a.length-1,1)}return a[0].t=r,a[0]},computeWithRatios:function(r,n,e,o){let i=1-r,s=e,a=n,u=s[0],l=s[1],c=s[2],d=s[3],h;if(u*=i,l*=r,a.length===2)return h=u+l,{x:(u*a[0].x+l*a[1].x)/h,y:(u*a[0].y+l*a[1].y)/h,z:o?(u*a[0].z+l*a[1].z)/h:!1,t:r};if(u*=i,l*=2*i,c*=r*r,a.length===3)return h=u+l+c,{x:(u*a[0].x+l*a[1].x+c*a[2].x)/h,y:(u*a[0].y+l*a[1].y+c*a[2].y)/h,z:o?(u*a[0].z+l*a[1].z+c*a[2].z)/h:!1,t:r};if(u*=i,l*=1.5*i,c*=3*i,d*=r*r*r,a.length===4)return h=u+l+c+d,{x:(u*a[0].x+l*a[1].x+c*a[2].x+d*a[3].x)/h,y:(u*a[0].y+l*a[1].y+c*a[2].y+d*a[3].y)/h,z:o?(u*a[0].z+l*a[1].z+c*a[2].z+d*a[3].z)/h:!1,t:r}},derive:function(r,n){let e=[];for(let o=r,i=o.length,s=i-1;i>1;i--,s--){let a=[];for(let u=0,l;u<s;u++)l={x:s*(o[u+1].x-o[u].x),y:s*(o[u+1].y-o[u].y)},n&&(l.z=s*(o[u+1].z-o[u].z)),a.push(l);e.push(a),o=a}return e},between:function(r,n,e){return n<=r&&r<=e||z.approximately(r,n)||z.approximately(r,e)},approximately:function(r,n,e){return $s(r-n)<=(e||Mb)},length:function(r){let e=z.Tvalues.length,o=0;for(let i=0,s;i<e;i++)s=.5*z.Tvalues[i]+.5,o+=z.Cvalues[i]*z.arcfn(s,r);return .5*o},map:function(r,n,e,o,i){let s=e-n,a=i-o,u=r-n,l=u/s;return o+a*l},lerp:function(r,n,e){let o={x:n.x+r*(e.x-n.x),y:n.y+r*(e.y-n.y)};return n.z!==void 0&&e.z!==void 0&&(o.z=n.z+r*(e.z-n.z)),o},pointToString:function(r){let n=r.x+"/"+r.y;return typeof r.z<"u"&&(n+="/"+r.z),n},pointsToString:function(r){return"["+r.map(z.pointToString).join(", ")+"]"},copy:function(r){return JSON.parse(JSON.stringify(r))},angle:function(r,n,e){let o=n.x-r.x,i=n.y-r.y,s=e.x-r.x,a=e.y-r.y,u=o*a-i*s,l=o*s+i*a;return Ys(u,l)},round:function(r,n){let e=""+r,o=e.indexOf(".");return parseFloat(e.substring(0,o+1+n))},dist:function(r,n){let e=r.x-n.x,o=r.y-n.y;return ar(e*e+o*o)},closest:function(r,n){let e=kn(2,63),o,i;return r.forEach(function(s,a){i=z.dist(n,s),i<e&&(e=i,o=a)}),{mdist:e,mpos:o}},abcratio:function(r,n){if(n!==2&&n!==3)return!1;if(typeof r>"u")r=.5;else if(r===0||r===1)return r;let e=kn(r,n)+kn(1-r,n),o=e-1;return $s(o/e)},projectionratio:function(r,n){if(n!==2&&n!==3)return!1;if(typeof r>"u")r=.5;else if(r===0||r===1)return r;let e=kn(1-r,n),o=kn(r,n)+e;return e/o},lli8:function(r,n,e,o,i,s,a,u){let l=(r*o-n*e)*(i-a)-(r-e)*(i*u-s*a),c=(r*o-n*e)*(s-u)-(n-o)*(i*u-s*a),d=(r-e)*(s-u)-(n-o)*(i-a);return d==0?!1:{x:l/d,y:c/d}},lli4:function(r,n,e,o){let i=r.x,s=r.y,a=n.x,u=n.y,l=e.x,c=e.y,d=o.x,h=o.y;return z.lli8(i,s,a,u,l,c,d,h)},lli:function(r,n){return z.lli4(r,r.c,n,n.c)},makeline:function(r,n){return new je(r.x,r.y,(r.x+n.x)/2,(r.y+n.y)/2,n.x,n.y)},findbbox:function(r){let n=Gc,e=Gc,o=qc,i=qc;return r.forEach(function(s){let a=s.bbox();n>a.x.min&&(n=a.x.min),e>a.y.min&&(e=a.y.min),o<a.x.max&&(o=a.x.max),i<a.y.max&&(i=a.y.max)}),{x:{min:n,mid:(n+o)/2,max:o,size:o-n},y:{min:e,mid:(e+i)/2,max:i,size:i-e}}},shapeintersections:function(r,n,e,o,i){if(!z.bboxoverlap(n,o))return[];let s=[],a=[r.startcap,r.forward,r.back,r.endcap],u=[e.startcap,e.forward,e.back,e.endcap];return a.forEach(function(l){l.virtual||u.forEach(function(c){if(c.virtual)return;let d=l.intersects(c,i);d.length>0&&(d.c1=l,d.c2=c,d.s1=r,d.s2=e,s.push(d))})}),s},makeshape:function(r,n,e){let o=n.points.length,i=r.points.length,s=z.makeline(n.points[o-1],r.points[0]),a=z.makeline(r.points[i-1],n.points[0]),u={startcap:s,forward:r,back:n,endcap:a,bbox:z.findbbox([s,r,n,a])};return u.intersections=function(l){return z.shapeintersections(u,u.bbox,l,l.bbox,e)},u},getminmax:function(r,n,e){if(!e)return{min:0,max:0};let o=Gc,i=qc,s,a;e.indexOf(0)===-1&&(e=[0].concat(e)),e.indexOf(1)===-1&&e.push(1);for(let u=0,l=e.length;u<l;u++)s=e[u],a=r.get(s),a[n]<o&&(o=a[n]),a[n]>i&&(i=a[n]);return{min:o,mid:(o+i)/2,max:i,size:i-o}},align:function(r,n){let e=n.p1.x,o=n.p1.y,i=-Ys(n.p2.y-o,n.p2.x-e),s=p(function(a){return{x:(a.x-e)*Ho(i)-(a.y-o)*Hi(i),y:(a.x-e)*Hi(i)+(a.y-o)*Ho(i)}},"d");return r.map(s)},roots:function(r,n){n=n||{p1:{x:0,y:0},p2:{x:1,y:0}};let e=r.length-1,o=z.align(r,n),i=p(function(R){return 0<=R&&R<=1},"reduce");if(e===2){let R=o[0].y,L=o[1].y,O=o[2].y,G=R-2*L+O;if(G!==0){let B=-ar(L*L-R*O),Q=-R+L,oe=-(B+Q)/G,ne=-(-B+Q)/G;return[oe,ne].filter(i)}else if(L!==O&&G===0)return[(2*L-O)/(2*L-2*O)].filter(i);return[]}let s=o[0].y,a=o[1].y,u=o[2].y,l=o[3].y,c=-s+3*a-3*u+l,d=3*s-6*a+3*u,h=-3*s+3*a,m=s;if(z.approximately(c,0)){if(z.approximately(d,0))return z.approximately(h,0)?[]:[-m/h].filter(i);let R=ar(h*h-4*d*m),L=2*d;return[(R-h)/L,(-h-R)/L].filter(i)}d/=c,h/=c,m/=c;let f=(3*h-d*d)/3,g=f/3,D=(2*d*d*d-9*d*h+27*m)/27,y=D/2,w=y*y+g*g*g,x,S,T,A,P;if(w<0){let R=-f/3,L=R*R*R,O=ar(L),G=-D/(2*O),B=G<-1?-1:G>1?1:G,Q=Rb(B),oe=Xs(O),ne=2*oe;return T=ne*Ho(Q/3)-d/3,A=ne*Ho((Q+du)/3)-d/3,P=ne*Ho((Q+2*du)/3)-d/3,[T,A,P].filter(i)}else{if(w===0)return x=y<0?Xs(-y):-Xs(y),T=2*x-d/3,A=-x-d/3,[T,A].filter(i);{let R=ar(w);return x=Xs(-y+R),S=Xs(y+R),[x-S-d/3].filter(i)}}},droots:function(r){if(r.length===3){let n=r[0],e=r[1],o=r[2],i=n-2*e+o;if(i!==0){let s=-ar(e*e-n*o),a=-n+e,u=-(s+a)/i,l=-(-s+a)/i;return[u,l]}else if(e!==o&&i===0)return[(2*e-o)/(2*(e-o))];return[]}if(r.length===2){let n=r[0],e=r[1];return n!==e?[n/(n-e)]:[]}return[]},curvature:function(r,n,e,o,i){let s,a,u,l,c=0,d=0,h=z.compute(r,n),m=z.compute(r,e),f=h.x*h.x+h.y*h.y;if(o?(s=ar(kn(h.y*m.z-m.y*h.z,2)+kn(h.z*m.x-m.z*h.x,2)+kn(h.x*m.y-m.x*h.y,2)),a=kn(f+h.z*h.z,3/2)):(s=h.x*m.y-h.y*m.x,a=kn(f,3/2)),s===0||a===0)return{k:0,r:0};if(c=s/a,d=a/s,!i){let g=z.curvature(r-.001,n,e,o,!0).k,D=z.curvature(r+.001,n,e,o,!0).k;l=(D-c+(c-g))/2,u=($s(D-c)+$s(c-g))/2}return{k:c,r:d,dk:l,adk:u}},inflections:function(r){if(r.length<4)return[];let n=z.align(r,{p1:r[0],p2:r.slice(-1)[0]}),e=n[2].x*n[1].y,o=n[3].x*n[1].y,i=n[1].x*n[2].y,s=n[3].x*n[2].y,a=18*(-3*e+2*o+3*i-s),u=18*(3*e-o-3*i),l=18*(i-e);if(z.approximately(a,0)){if(!z.approximately(u,0)){let m=-l/u;if(0<=m&&m<=1)return[m]}return[]}let c=2*a;if(z.approximately(c,0))return[];let d=u*u-4*a*l;if(d<0)return[];let h=Math.sqrt(d);return[(h-u)/c,-(u+h)/c].filter(function(m){return 0<=m&&m<=1})},bboxoverlap:function(r,n){let e=["x","y"],o=e.length;for(let i=0,s,a,u,l;i<o;i++)if(s=e[i],a=r[s].mid,u=n[s].mid,l=(r[s].size+n[s].size)/2,$s(a-u)>=l)return!1;return!0},expandbox:function(r,n){n.x.min<r.x.min&&(r.x.min=n.x.min),n.y.min<r.y.min&&(r.y.min=n.y.min),n.z&&n.z.min<r.z.min&&(r.z.min=n.z.min),n.x.max>r.x.max&&(r.x.max=n.x.max),n.y.max>r.y.max&&(r.y.max=n.y.max),n.z&&n.z.max>r.z.max&&(r.z.max=n.z.max),r.x.mid=(r.x.min+r.x.max)/2,r.y.mid=(r.y.min+r.y.max)/2,r.z&&(r.z.mid=(r.z.min+r.z.max)/2),r.x.size=r.x.max-r.x.min,r.y.size=r.y.max-r.y.min,r.z&&(r.z.size=r.z.max-r.z.min)},pairiteration:function(r,n,e){let o=r.bbox(),i=n.bbox(),s=1e5,a=e||.5;if(o.x.size+o.y.size<a&&i.x.size+i.y.size<a)return[(s*(r._t1+r._t2)/2|0)/s+"/"+(s*(n._t1+n._t2)/2|0)/s];let u=r.split(.5),l=n.split(.5),c=[{left:u.left,right:l.left},{left:u.left,right:l.right},{left:u.right,right:l.right},{left:u.right,right:l.left}];c=c.filter(function(h){return z.bboxoverlap(h.left.bbox(),h.right.bbox())});let d=[];return c.length===0||(c.forEach(function(h){d=d.concat(z.pairiteration(h.left,h.right,a))}),d=d.filter(function(h,m){return d.indexOf(h)===m})),d},getccenter:function(r,n,e){let o=n.x-r.x,i=n.y-r.y,s=e.x-n.x,a=e.y-n.y,u=o*Ho(ur)-i*Hi(ur),l=o*Hi(ur)+i*Ho(ur),c=s*Ho(ur)-a*Hi(ur),d=s*Hi(ur)+a*Ho(ur),h=(r.x+n.x)/2,m=(r.y+n.y)/2,f=(n.x+e.x)/2,g=(n.y+e.y)/2,D=h+u,y=m+l,w=f+c,x=g+d,S=z.lli8(h,m,D,y,f,g,w,x),T=z.dist(S,r),A=Ys(r.y-S.y,r.x-S.x),P=Ys(n.y-S.y,n.x-S.x),R=Ys(e.y-S.y,e.x-S.x),L;return A<R?((A>P||P>R)&&(A+=du),A>R&&(L=R,R=A,A=L)):R<P&&P<A?(L=R,R=A,A=L):R+=du,S.s=A,S.e=R,S.r=T,S},numberSort:function(r,n){return r-n}};var Wo=class{constructor(n){this.curves=[],this._3d=!1,n&&(this.curves=n,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map(function(n){return z.pointsToString(n.points)}).join(", ")+"]"}addCurve(n){this.curves.push(n),this._3d=this._3d||n._3d}length(){return this.curves.map(function(n){return n.length()}).reduce(function(n,e){return n+e})}curve(n){return this.curves[n]}bbox(){let n=this.curves;for(var e=n[0].bbox(),o=1;o<n.length;o++)z.expandbox(e,n[o].bbox());return e}offset(n){let e=[];return this.curves.forEach(function(o){e.push(...o.offset(n))}),new Wo(e)}};p(Wo,"PolyBezier");var{abs:js,min:vf,max:Cf,cos:Pb,sin:Bb,acos:Nb,sqrt:Qs}=Math,Fb=Math.PI;var je=class{constructor(n){let e=n&&n.forEach?n:Array.from(arguments).slice(),o=!1;if(typeof e[0]=="object"){o=e.length;let f=[];e.forEach(function(g){["x","y","z"].forEach(function(D){typeof g[D]<"u"&&f.push(g[D])})}),e=f}let i=!1,s=e.length;if(o){if(o>4){if(arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");i=!0}}else if(s!==6&&s!==8&&s!==9&&s!==12&&arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");let a=this._3d=!i&&(s===9||s===12)||n&&n[0]&&typeof n[0].z<"u",u=this.points=[];for(let f=0,g=a?3:2;f<s;f+=g){var l={x:e[f],y:e[f+1]};a&&(l.z=e[f+2]),u.push(l)}let c=this.order=u.length-1,d=this.dims=["x","y"];a&&d.push("z"),this.dimlen=d.length;let h=z.align(u,{p1:u[0],p2:u[c]}),m=z.dist(u[0],u[c]);this._linear=h.reduce((f,g)=>f+js(g.y),0)<m/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(n,e,o,i){if(typeof i>"u"&&(i=.5),i===0)return new je(e,e,o);if(i===1)return new je(n,e,e);let s=je.getABC(2,n,e,o,i);return new je(n,s.A,o)}static cubicFromPoints(n,e,o,i,s){typeof i>"u"&&(i=.5);let a=je.getABC(3,n,e,o,i);typeof s>"u"&&(s=z.dist(e,a.C));let u=s*(1-i)/i,l=z.dist(n,o),c=(o.x-n.x)/l,d=(o.y-n.y)/l,h=s*c,m=s*d,f=u*c,g=u*d,D={x:e.x-h,y:e.y-m},y={x:e.x+f,y:e.y+g},w=a.A,x={x:w.x+(D.x-w.x)/(1-i),y:w.y+(D.y-w.y)/(1-i)},S={x:w.x+(y.x-w.x)/i,y:w.y+(y.y-w.y)/i},T={x:n.x+(x.x-n.x)/i,y:n.y+(x.y-n.y)/i},A={x:o.x+(S.x-o.x)/(1-i),y:o.y+(S.y-o.y)/(1-i)};return new je(n,T,A,o)}static getUtils(){return z}getUtils(){return je.getUtils()}static get PolyBezier(){return Wo}valueOf(){return this.toString()}toString(){return z.pointsToString(this.points)}toSVG(){if(this._3d)return!1;let n=this.points,e=n[0].x,o=n[0].y,i=["M",e,o,this.order===2?"Q":"C"];for(let s=1,a=n.length;s<a;s++)i.push(n[s].x),i.push(n[s].y);return i.join(" ")}setRatios(n){if(n.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=n,this._lut=[]}verify(){let n=this.coordDigest();n!==this._print&&(this._print=n,this.update())}coordDigest(){return this.points.map(function(n,e){return""+e+n.x+n.y+(n.z?n.z:0)}).join("")}update(){this._lut=[],this.dpoints=z.derive(this.points,this._3d),this.computedirection()}computedirection(){let n=this.points,e=z.angle(n[0],n[this.order],n[1]);this.clockwise=e>0}length(){return z.length(this.derivative.bind(this))}static getABC(n=2,e,o,i,s=.5){let a=z.projectionratio(s,n),u=1-a,l={x:a*e.x+u*i.x,y:a*e.y+u*i.y},c=z.abcratio(s,n);return{A:{x:o.x+(o.x-l.x)/c,y:o.y+(o.y-l.y)/c},B:o,C:l,S:e,E:i}}getABC(n,e){e=e||this.get(n);let o=this.points[0],i=this.points[this.order];return je.getABC(this.order,o,e,i,n)}getLUT(n){if(this.verify(),n=n||100,this._lut.length===n)return this._lut;this._lut=[],n++,this._lut=[];for(let e=0,o,i;e<n;e++)i=e/(n-1),o=this.compute(i),o.t=i,this._lut.push(o);return this._lut}on(n,e){e=e||5;let o=this.getLUT(),i=[];for(let s=0,a,u=0;s<o.length;s++)a=o[s],z.dist(a,n)<e&&(i.push(a),u+=s/o.length);return i.length?t/=i.length:!1}project(n){let e=this.getLUT(),o=e.length-1,i=z.closest(e,n),s=i.mpos,a=(s-1)/o,u=(s+1)/o,l=.1/o,c=i.mdist,d=a,h=d,m;c+=1;for(let f;d<u+l;d+=l)m=this.compute(d),f=z.dist(n,m),f<c&&(c=f,h=d);return h=h<0?0:h>1?1:h,m=this.compute(h),m.t=h,m.d=c,m}get(n){return this.compute(n)}point(n){return this.points[n]}compute(n){return this.ratios?z.computeWithRatios(n,this.points,this.ratios,this._3d):z.compute(n,this.points,this._3d,this.ratios)}raise(){let n=this.points,e=[n[0]],o=n.length;for(let i=1,s,a;i<o;i++)s=n[i],a=n[i-1],e[i]={x:(o-i)/o*s.x+i/o*a.x,y:(o-i)/o*s.y+i/o*a.y};return e[o]=n[o-1],new je(e)}derivative(n){return z.compute(n,this.dpoints[0],this._3d)}dderivative(n){return z.compute(n,this.dpoints[1],this._3d)}align(){let n=this.points;return new je(z.align(n,{p1:n[0],p2:n[n.length-1]}))}curvature(n){return z.curvature(n,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return z.inflections(this.points)}normal(n){return this._3d?this.__normal3(n):this.__normal2(n)}__normal2(n){let e=this.derivative(n),o=Qs(e.x*e.x+e.y*e.y);return{t:n,x:-e.y/o,y:e.x/o}}__normal3(n){let e=this.derivative(n),o=this.derivative(n+.01),i=Qs(e.x*e.x+e.y*e.y+e.z*e.z),s=Qs(o.x*o.x+o.y*o.y+o.z*o.z);e.x/=i,e.y/=i,e.z/=i,o.x/=s,o.y/=s,o.z/=s;let a={x:o.y*e.z-o.z*e.y,y:o.z*e.x-o.x*e.z,z:o.x*e.y-o.y*e.x},u=Qs(a.x*a.x+a.y*a.y+a.z*a.z);a.x/=u,a.y/=u,a.z/=u;let l=[a.x*a.x,a.x*a.y-a.z,a.x*a.z+a.y,a.x*a.y+a.z,a.y*a.y,a.y*a.z-a.x,a.x*a.z-a.y,a.y*a.z+a.x,a.z*a.z];return{t:n,x:l[0]*e.x+l[1]*e.y+l[2]*e.z,y:l[3]*e.x+l[4]*e.y+l[5]*e.z,z:l[6]*e.x+l[7]*e.y+l[8]*e.z}}hull(n){let e=this.points,o=[],i=[],s=0;for(i[s++]=e[0],i[s++]=e[1],i[s++]=e[2],this.order===3&&(i[s++]=e[3]);e.length>1;){o=[];for(let a=0,u,l=e.length-1;a<l;a++)u=z.lerp(n,e[a],e[a+1]),i[s++]=u,o.push(u);e=o}return i}split(n,e){if(n===0&&e)return this.split(e).left;if(e===1)return this.split(n).right;let o=this.hull(n),i={left:this.order===2?new je([o[0],o[3],o[5]]):new je([o[0],o[4],o[7],o[9]]),right:this.order===2?new je([o[5],o[4],o[2]]):new je([o[9],o[8],o[6],o[3]]),span:o};return i.left._t1=z.map(0,0,1,this._t1,this._t2),i.left._t2=z.map(n,0,1,this._t1,this._t2),i.right._t1=z.map(n,0,1,this._t1,this._t2),i.right._t2=z.map(1,0,1,this._t1,this._t2),e?(e=z.map(e,n,1,0,1),i.right.split(e).left):i}extrema(){let n={},e=[];return this.dims.forEach(function(o){let i=p(function(a){return a[o]},"mfn"),s=this.dpoints[0].map(i);n[o]=z.droots(s),this.order===3&&(s=this.dpoints[1].map(i),n[o]=n[o].concat(z.droots(s))),n[o]=n[o].filter(function(a){return a>=0&&a<=1}),e=e.concat(n[o].sort(z.numberSort))}.bind(this)),n.values=e.sort(z.numberSort).filter(function(o,i){return e.indexOf(o)===i}),n}bbox(){let n=this.extrema(),e={};return this.dims.forEach(function(o){e[o]=z.getminmax(this,o,n[o])}.bind(this)),e}overlaps(n){let e=this.bbox(),o=n.bbox();return z.bboxoverlap(e,o)}offset(n,e){if(typeof e<"u"){let o=this.get(n),i=this.normal(n),s={c:o,n:i,x:o.x+i.x*e,y:o.y+i.y*e};return this._3d&&(s.z=o.z+i.z*e),s}if(this._linear){let o=this.normal(0),i=this.points.map(function(s){let a={x:s.x+n*o.x,y:s.y+n*o.y};return s.z&&o.z&&(a.z=s.z+n*o.z),a});return[new je(i)]}return this.reduce().map(function(o){return o._linear?o.offset(n)[0]:o.scale(n)})}simple(){if(this.order===3){let i=z.angle(this.points[0],this.points[3],this.points[1]),s=z.angle(this.points[0],this.points[3],this.points[2]);if(i>0&&s<0||i<0&&s>0)return!1}let n=this.normal(0),e=this.normal(1),o=n.x*e.x+n.y*e.y;return this._3d&&(o+=n.z*e.z),js(Nb(o))<Fb/3}reduce(){let n,e=0,o=0,i=.01,s,a=[],u=[],l=this.extrema().values;for(l.indexOf(0)===-1&&(l=[0].concat(l)),l.indexOf(1)===-1&&l.push(1),e=l[0],n=1;n<l.length;n++)o=l[n],s=this.split(e,o),s._t1=e,s._t2=o,a.push(s),e=o;return a.forEach(function(c){for(e=0,o=0;o<=1;)for(o=e+i;o<=1+i;o+=i)if(s=c.split(e,o),!s.simple()){if(o-=i,js(e-o)<i)return[];s=c.split(e,o),s._t1=z.map(e,0,1,c._t1,c._t2),s._t2=z.map(o,0,1,c._t1,c._t2),u.push(s),e=o;break}e<1&&(s=c.split(e,1),s._t1=z.map(e,0,1,c._t1,c._t2),s._t2=c._t2,u.push(s))}),u}translate(n,e,o){o=typeof o=="number"?o:e;let i=this.order,s=this.points.map((a,u)=>(1-u/i)*e+u/i*o);return new je(this.points.map((a,u)=>({x:a.x+n.x*s[u],y:a.y+n.y*s[u]})))}scale(n){let e=this.order,o=!1;if(typeof n=="function"&&(o=n),o&&e===2)return this.raise().scale(o);let i=this.clockwise,s=this.points;if(this._linear)return this.translate(this.normal(0),o?o(0):n,o?o(1):n);let a=o?o(0):n,u=o?o(1):n,l=[this.offset(0,10),this.offset(1,10)],c=[],d=z.lli4(l[0],l[0].c,l[1],l[1].c);if(!d)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach(function(h){let m=c[h*e]=z.copy(s[h*e]);m.x+=(h?u:a)*l[h].n.x,m.y+=(h?u:a)*l[h].n.y}),o?([0,1].forEach(function(h){if(!(e===2&&h)){var m=s[h+1],f={x:m.x-d.x,y:m.y-d.y},g=o?o((h+1)/e):n;o&&!i&&(g=-g);var D=Qs(f.x*f.x+f.y*f.y);f.x/=D,f.y/=D,c[h+1]={x:m.x+g*f.x,y:m.y+g*f.y}}}),new je(c)):([0,1].forEach(h=>{if(e===2&&h)return;let m=c[h*e],f=this.derivative(h),g={x:m.x+f.x,y:m.y+f.y};c[h+1]=z.lli4(m,g,d,s[h+1])}),new je(c))}outline(n,e,o,i){if(e=e===void 0?n:e,this._linear){let A=this.normal(0),P=this.points[0],R=this.points[this.points.length-1],L,O,G;o===void 0&&(o=n,i=e),L={x:P.x+A.x*n,y:P.y+A.y*n},G={x:R.x+A.x*o,y:R.y+A.y*o},O={x:(L.x+G.x)/2,y:(L.y+G.y)/2};let B=[L,O,G];L={x:P.x-A.x*e,y:P.y-A.y*e},G={x:R.x-A.x*i,y:R.y-A.y*i},O={x:(L.x+G.x)/2,y:(L.y+G.y)/2};let Q=[G,O,L],oe=z.makeline(Q[2],B[0]),ne=z.makeline(B[2],Q[0]),Ue=[oe,new je(B),ne,new je(Q)];return new Wo(Ue)}let s=this.reduce(),a=s.length,u=[],l=[],c,d=0,h=this.length(),m=typeof o<"u"&&typeof i<"u";function f(A,P,R,L,O){return function(G){let B=L/R,Q=(L+O)/R,oe=P-A;return z.map(G,0,1,A+B*oe,A+Q*oe)}}p(f,"linearDistanceFunction"),s.forEach(function(A){let P=A.length();m?(u.push(A.scale(f(n,o,h,d,P))),l.push(A.scale(f(-e,-i,h,d,P)))):(u.push(A.scale(n)),l.push(A.scale(-e))),d+=P}),l=l.map(function(A){return c=A.points,c[3]?A.points=[c[3],c[2],c[1],c[0]]:A.points=[c[2],c[1],c[0]],A}).reverse();let g=u[0].points[0],D=u[a-1].points[u[a-1].points.length-1],y=l[a-1].points[l[a-1].points.length-1],w=l[0].points[0],x=z.makeline(y,g),S=z.makeline(D,w),T=[x].concat(u).concat([S]).concat(l);return new Wo(T)}outlineshapes(n,e,o){e=e||n;let i=this.outline(n,e).curves,s=[];for(let a=1,u=i.length;a<u/2;a++){let l=z.makeshape(i[a],i[u-a],o);l.startcap.virtual=a>1,l.endcap.virtual=a<u/2-1,s.push(l)}return s}intersects(n,e){return n?n.p1&&n.p2?this.lineIntersects(n):(n instanceof je&&(n=n.reduce()),this.curveintersects(this.reduce(),n,e)):this.selfintersects(e)}lineIntersects(n){let e=vf(n.p1.x,n.p2.x),o=vf(n.p1.y,n.p2.y),i=Cf(n.p1.x,n.p2.x),s=Cf(n.p1.y,n.p2.y);return z.roots(this.points,n).filter(a=>{var u=this.get(a);return z.between(u.x,e,i)&&z.between(u.y,o,s)})}selfintersects(n){let e=this.reduce(),o=e.length-2,i=[];for(let s=0,a,u,l;s<o;s++)u=e.slice(s,s+1),l=e.slice(s+2),a=this.curveintersects(u,l,n),i.push(...a);return i}curveintersects(n,e,o){let i=[];n.forEach(function(a){e.forEach(function(u){a.overlaps(u)&&i.push({left:a,right:u})})});let s=[];return i.forEach(function(a){let u=z.pairiteration(a.left,a.right,o);u.length>0&&(s=s.concat(u))}),s}arcs(n){return n=n||.5,this._iterate(n,[])}_error(n,e,o,i){let s=(i-o)/4,a=this.get(o+s),u=this.get(i-s),l=z.dist(n,e),c=z.dist(n,a),d=z.dist(n,u);return js(c-l)+js(d-l)}_iterate(n,e){let o=0,i=1,s;do{s=0,i=1;let a=this.get(o),u,l,c,d,h=!1,m=!1,f,g=i,D=1,y=0;do if(m=h,d=c,g=(o+i)/2,y++,u=this.get(g),l=this.get(i),c=z.getccenter(a,u,l),c.interval={start:o,end:i},h=this._error(c,a,o,i)<=n,f=m&&!h,f||(D=i),h){if(i>=1){if(c.interval.end=D=1,d=c,i>1){let x={x:c.x+c.r*Pb(c.e),y:c.y+c.r*Bb(c.e)};c.e+=z.angle({x:c.x,y:c.y},x,this.get(1))}break}i=i+(i-o)/2}else i=g;while(!f&&s++<100);if(s>=100)break;d=d||c,e.push(d),o=D}while(i<1);return e}};p(je,"Bezier");var Ce=pe(_e());var Ae=pe(_e()),Qc=pe(er());function wf(r){return n=>n.editor.mode>=r}p(wf,"perm");var lr={canModifyTestCases:wf(4),canModifyCustomComponents:wf(3)};var Jt=pe(_e());var E={sep(){return{_tag:"sep"}},text(r){return{_tag:"text",caption:r}},item(r,n,e,o,i){return{_tag:"item",icon:r,caption:n,action:e,shortcut:o,danger:i}},submenu(r,n,e){return{_tag:"submenu",icon:r,caption:n,items:e}}},hu=class{constructor(n,e,o,i,s){this.g=e;this.drawParams=o;this.isMouseOver=i;this.borderColor=s;this.entranceTransform=e.getTransform(),this.entranceTransformInv=this.entranceTransform.inverse(),n.applyDrawTransform(e),this.componentTransform=e.getTransform()}exit(){this.g.setTransform(this.entranceTransform)}inNonTransformedFrame(n){this.g.setTransform(this.entranceTransform),n(this),this.g.setTransform(this.componentTransform)}rotatePoint(n,e){return xf(this.entranceTransformInv,...xf(this.componentTransform,n,e))}};p(hu,"_DrawContextImpl");function xf(r,n,e){return[r.a*n+r.c*e+r.e,r.b*n+r.d*e+r.f]}p(xf,"mult");var Ln=class{constructor(n){this._ref=void 0;this.parent=n}get ref(){return this._ref}doSetValidatedId(n){this._ref=n}requestRedraw(n){var o;let e=n;e.component=this,(o=this.parent.ifEditing)==null||o.redrawMgr.requestRedraw(n)}get drawZIndex(){return Dn.Normal}draw(n,e){var u,l;let o=(l=(u=e.currentSelection)==null?void 0:u.isSelected(this))!=null?l:!1,i=this===e.currentCompUnderPointer||o,s=i?e.anythingMoving&&this.lockPos?Ks:Zn:J,a=new hu(this,n,e,i,s);try{this.doDraw(n,a)}finally{a.exit()}}applyDrawTransform(n){}get lockPos(){return!1}cursorWhenMouseover(n){}toString(){return`${this.constructor.name}(${this.toStringDetails()})`}toStringDetails(){return""}makeTooltip(){}makeContextMenu(){}makeSetIdContextMenuItem(){let n=this._ref,e=C.Components.Generic.contextMenu,o=n===void 0?e.SetIdentifier:ke(e.ChangeIdentifier[0],ke(Uc,n),e.ChangeIdentifier[1]);return E.item("ref",o,()=>{this.runSetIdDialog()},"\u2325\u21A9\uFE0E")}runSetIdDialog(){let n=C.Components.Generic.contextMenu;for(;;){let e=this._ref,o=window.prompt(n.SetIdentifierPrompt,e);if(o===null||o===e)break;if(!(this instanceof me))this.doSetValidatedId(o.length===0?void 0:o);else{if(o.length===0){window.alert(n.IdentifierCannotBeEmpty);continue}let i=this.parent.components,s=i.get(o);if(s===void 0)i.changeIdOf(this,o);else if(window.confirm(n.IdentifierAlreadyInUseShouldSwap))i.swapIdsOf(s,this);else continue}this.requestRedraw({why:"ref changed"});break}}pointerDown(n){return{wantsDragEvents:!0}}pointerDragged(n){}pointerUp(n){return X.NoChange}pointerClicked(n){return X.NoChange}pointerDoubleClicked(n){return X.NoChange}keyDown(n){n.key==="Enter"&&n.altKey&&this.runSetIdDialog()}};p(Ln,"Drawable");var Wi={e:{},s:{},w:{},n:{}},$c=Wt.withProps()(Wi),ce={default:"e",invert(r){switch(r){case"e":return"w";case"w":return"e";case"n":return"s";case"s":return"n"}},nextClockwise(r){switch(r){case"e":return"s";case"s":return"w";case"w":return"n";case"n":return"e"}},nextCounterClockwise(r){switch(r){case"e":return"n";case"n":return"w";case"w":return"s";case"s":return"e"}},isVertical(r){return r==="s"||r==="n"},add(r,n){switch(r){case"e":return n;case"w":return ce.invert(n);case"s":return ce.nextClockwise(n);case"n":return ce.nextCounterClockwise(n)}}},Tf=Jt.type({pos:Jt.readonly(Jt.tuple([Jt.number,Jt.number])),anchor:N(Jt.string),lockPos:N(Jt.boolean),orient:N(Jt.keyof(Wi)),ref:N(Jt.string)}),Vn=class extends Ln{constructor(e,o){var i,s;super(e);this._anchor=void 0;if(o!==void 0)this.doSetValidatedId(o.ref),this._posX=o.pos[0],this._posY=o.pos[1],this._lockPos=(i=o.lockPos)!=null?i:!1,this._orient=(s=o.orient)!=null?s:ce.default;else{let a=this.parent.editor;this._posX=Math.max(0,a.pointerX),this._posY=a.pointerY,this._lockPos=!1,this._orient=ce.default}}toJSONBase(){var e;return{pos:[this.posX,this.posY],lockPos:this._lockPos?!0:void 0,orient:this.orient===ce.default?void 0:this.orient,anchor:(e=this._anchor)==null?void 0:e.ref,ref:this.ref}}get posX(){return this._posX}get posY(){return this._posY}get lockPos(){return this._lockPos}isInRect(e){return this._posX>=e.left&&this._posX<=e.right&&this._posY>=e.top&&this._posY<=e.bottom}get orient(){return this._orient}canRotate(){return!0}canLockPos(){return!0}doSetLockPos(e){this._lockPos=e}doSetOrient(e){this._orient=e,this.requestRedraw({why:"orientation changed",invalidateMask:!0})}get width(){return ce.isVertical(this._orient)?this.unrotatedHeight:this.unrotatedWidth}get height(){return ce.isVertical(this._orient)?this.unrotatedWidth:this.unrotatedHeight}applyDrawTransform(e){let o=(()=>{switch(this._orient){case"e":return;case"s":return[0,1,-1,0];case"w":return[-1,0,0,-1];case"n":return[0,-1,1,0]}})();o!==void 0&&(e.translate(this.posX,this.posY),e.transform(...o,0,0),e.translate(-this.posX,-this.posY))}isOver(e,o){return this.parent.mode>=2&&this._isOverThisRect(e,o)}_isOverThisRect(e,o){return fu(this._posX,this._posY,this.width,this.height,e,o)}trySetPosition(e,o,i){let s=this.tryMakePosition(e,o,i);if(s!==void 0)return this.doSetPosition(s[0],s[1]),s}tryMakePosition(e,o,i){let s=i?H/2:1;if(e=Math.round(e/s)*s,o=Math.round(o/s)*s,e!==this._posX||o!==this.posY)return[e,o]}doSetPosition(e,o){let i=[e-this._posX,o-this._posY];this._posX=e,this._posY=o,this.requestRedraw({why:"position changed",invalidateMask:!0}),this.positionChanged(i)}makeOrientationAndPosMenuItems(){var u;let e=C.Components.Generic.contextMenu,o={e:"\u2192",s:"\u2193",w:"\u2190",n:"\u2191"},i=this.canRotate()?[["start",E.submenu("direction",e.Orientation,[...$c.values.map(l=>{let c=this._orient===l,d=c?"check":"none",h=C.Orientations[l],m=c?()=>{}:()=>{this.doSetOrient(l)};return E.item(d,h,m,o[l])}),E.sep(),E.text(e.ChangeOrientationDesc)])]]:[],s=this.canLockPos()?[["start",E.item(this.lockPos?"check":"none",e.LockPosition,()=>{this.doSetLockPos(!this.lockPos)},"L")]]:[],a=this._anchor===void 0?[["start",E.item("none",e.SetAnchor,()=>{this.parent.editor.showMessage(C.Messages.SetAnchorPrompt),this.parent.editor.setCurrentPointerAction("setanchor",!1,this)})]]:[["start",E.item("none",ke(e.ClearAnchor[0],ke(Uc,(u=this._anchor.ref)!=null?u:"???"),e.ClearAnchor[1]),()=>{this.anchor=void 0})]];return[...i,...s,...a]}keyDown(e){if(this.canRotate()){if(e.key==="ArrowRight"){this.doSetOrient("e");return}else if(e.key==="ArrowDown"){this.doSetOrient("s");return}else if(e.key==="ArrowLeft"){this.doSetOrient("w");return}else if(e.key==="ArrowUp"){this.doSetOrient("n");return}}if(this.canLockPos()&&e.key==="l"){this.doSetLockPos(!this.lockPos);return}super.keyDown(e)}};p(Vn,"DrawableWithPosition");var Kn=class extends Vn{constructor(e,o){super(e,o);this._isMovingWithContext=void 0}get anchor(){return this._anchor}set anchor(e){this._anchor!==e&&(this._anchor!==void 0&&this._anchor.removeAnchoredDrawable(this),this._anchor=e,e!==void 0&&e.addAnchoredDrawable(this))}get isMoving(){return this._isMovingWithContext!==void 0}tryStartMoving(e){if(!this.lockPos&&this._isMovingWithContext===void 0){let[o,i]=this.parent.editor.offsetXY(e);this._isMovingWithContext={mouseOffsetToPosX:o-this.posX,mouseOffsetToPosY:i-this.posY,lastAnchorX:this.posX,lastAnchorY:this.posY,createdClone:void 0}}}tryStopMoving(e){var i;let o=!1;return this._isMovingWithContext!==void 0&&(this._isMovingWithContext=void 0,o=!0),(i=this.parent.ifEditing)==null||i.moveMgr.setDrawableStoppedMoving(this,e),o}setPosition(e,o,i){let s=this.tryMakePosition(e,o,i);s!==void 0&&this.doSetPosition(...s)}pointerDown(e){if(this.parent.mode>=2){if(e.metaKey)return this.parent.linkMgr.startSettingAnchorFrom(this),{wantsDragEvents:!1};this.tryStartMoving(e)}return{wantsDragEvents:!0}}pointerDragged(e){var o;if(this.parent.mode>=2&&!this.lockPos){(o=this.parent.ifEditing)==null||o.moveMgr.setDrawableMoving(this,e);let[i,s]=this.parent.editor.offsetXY(e),a=!e.metaKey;this.updateSelfPositionIfNeeded(i,s,a,e)}}pointerUp(e){var i,s;(s=(i=this._isMovingWithContext)==null?void 0:i.createdClone)==null||s.pointerUp(e);let o=this.tryStopMoving(e);return X.fromBoolean(o)}updateSelfPositionIfNeeded(e,o,i,s){if(this._isMovingWithContext===void 0)return;let{mouseOffsetToPosX:a,mouseOffsetToPosY:u,lastAnchorX:l,lastAnchorY:c,createdClone:d}=this._isMovingWithContext;if(d!==void 0){d.pointerDragged(s);return}let h=e-a,m=o-u;if(s.shiftKey){let D=Math.abs(l-h),y=Math.abs(c-m);D<=y?h=l:m=c}let f=this.tryMakePosition(h,m,i);if(f===void 0)return;let g;return s.altKey&&this.parent.mode>=3&&(g=this.makeClone(!0))!==void 0?(this._isMovingWithContext.createdClone=g,this.parent.editor.eventMgr.setCurrentComponentUnderPointer(g)):this.doSetPosition(...f),f}makeClone(e){}};p(Kn,"DrawableWithDraggablePosition");var Jn={black:"black",red:"red",blue:"blue",yellow:"yellow",green:"green",white:"white"},Yc=Jn.black,Yr=class extends Vn{constructor(e,o,i,s,a,u,l,c,d,h){super(e.parent);this.component=e;this.group=i;this.shortName=s;this.fullName=a;this._gridOffsetX=u;this._gridOffsetY=l;this.hasTriangle=c;this._leadLengthOverride=h;this._isAlive=!0;this._value=!1;this._initialValue=void 0;this._color=Yc;if(this.id=o.id,"force"in o&&(this._forceValue=ko(o.force)),"color"in o&&o.color!==void 0&&(this._color=o.color),"initialValue"in o&&o.initialValue!==void 0){let m=ko(o.initialValue);this._initialValue=m,this._value=m}this.parent.nodeMgr.addLiveNode(this.asNode),this.updatePositionFromParent(),this.doSetOrient(d),this._leadLength=this.updateLeadLength()}get asNode(){return this}updateLeadLength(e){var o;return this._leadLength=(o=e!=null?e:this._leadLengthOverride)!=null?o:this.defaultLeadLength(ce.isVertical(this.orient))}defaultLeadLength(e){let o=this.hasTriangle?-2:0;return e?o+Math.abs(this._gridOffsetY)*H-this.component.unrotatedHeight/2:o+Math.abs(this._gridOffsetX)*H-this.component.unrotatedWidth/2}get leadLength(){return this._leadLength}get drawCoords(){let e=this.wireProlongDirection,o=this.posX,i=this.posY;switch(e){case"e":return[o+this.leadLength,i,o,i,e];case"w":return[o-this.leadLength,i,o,i,e];case"n":return[o,i-this.leadLength,o,i,e];case"s":return[o,i+this.leadLength,o,i,e]}}get drawCoordsInParentTransform(){let e=this.posXInParentTransform,o=this.posYInParentTransform;switch(this.orient){case"e":return[e-this.leadLength,o,e,o];case"w":return[e+this.leadLength,o,e,o];case"n":return[e,o+this.leadLength,e,o];case"s":return[e,o-this.leadLength,e,o]}}get anchor(){}set anchor(e){throw new Error("Node does not support anchoring")}isOutput(){return Xc.isOutput(this.asNode)}get unrotatedWidth(){return fo}get unrotatedHeight(){return fo}get color(){return this._color}doSetColor(e){this._color=e,this.propagateColor(e),this.requestRedraw({why:"color changed"})}propagateColor(e){}isOver(e,o){return this.distSquaredIfOver(e,o,!1)!==void 0}distSquaredIfOver(e,o,i){if(this.parent.mode>=2&&this.acceptsMoreConnections)return mu(e,o,this.posX,this.posY,i)}destroy(){this.preDestroy(),this._isAlive=!1,this.parent.nodeMgr.removeLiveNode(this.asNode)}forceDraw(){return!1}doDraw(e,o){let i=this.parent.mode;if(i<2&&!this.forceDraw()||!this.acceptsMoreConnections)return;let s=this._forceValue!==void 0&&i>=4,a=i>=4&&!U(this._value)&&!U(this.value)&&this._value!==this.value,u=ce.isVertical(this.component.orient),l=this.parent.editor.options.hideWireColors;gu(e,o,this.posX,this.posY,this.nodeDisplayStyle,this.value,o.isMouseOver,l,s,a,u)}get isAlive(){return this._isAlive}get value(){return this._forceValue!==void 0?this._forceValue:this._value}set value(e){let o=this.value;e!==this._value&&(this._value=e,this.propagateNewValueIfNeeded(o))}propagateNewValueIfNeeded(e){let o=this.value;o!==e&&this.propagateNewValue(o)}get gridOffsetX(){return this._gridOffsetX}set gridOffsetX(e){this._gridOffsetX=e,this.updatePositionFromParent()}get gridOffsetY(){return this._gridOffsetY}set gridOffsetY(e){this._gridOffsetY=e,this.updatePositionFromParent()}get posXInParentTransform(){return this.component.posX+this._gridOffsetX*H}get posYInParentTransform(){return this.component.posY+this._gridOffsetY*H}updatePositionFromParent(){var s;let e=this.component,[o,i]=(()=>{switch(e.orient){case"e":return[+this._gridOffsetX,+this._gridOffsetY];case"w":return[-this._gridOffsetX,-this._gridOffsetY];case"s":return[-this._gridOffsetY,+this._gridOffsetX];case"n":return[+this._gridOffsetY,-this._gridOffsetX]}})();return(s=super.trySetPosition(e.posX+o*H,e.posY+i*H,!1))!=null?s:[this.posX,this.posY]}get wireProlongDirection(){switch(this.component.orient){case"e":switch(this.orient){case"e":return"w";case"w":return"e";case"s":return"n";case"n":return"s"}break;case"w":return this.orient;case"s":switch(this.orient){case"e":return"n";case"w":return"s";case"s":return"e";case"n":return"w"}break;case"n":switch(this.orient){case"e":return"s";case"w":return"n";case"s":return"w";case"n":return"e"}}}cursorWhenMouseover(e){return"crosshair"}pointerDown(e){return this.parent.linkMgr.startDraggingWireFrom(this.asNode),{wantsDragEvents:!1}}pointerUp(e){let o=this.parent.linkMgr.stopDraggingWireOn(this.asNode);return o===void 0?X.NoChange:jc(o.startNode,o.endNode,(i,s)=>this.parent.linkMgr.addWire(i,s,!0)!==void 0)}};p(Yr,"NodeBase");var cr=class extends Yr{constructor(){super(...arguments);this._tag="_nodein";this._incomingWire=null;this.prefersSpike=!1;this.isClock=!1}get incomingWire(){return this._incomingWire}set incomingWire(e){this._incomingWire=e,e===null?this.value=!1:this.value=e.startNode.value}get connectedWires(){return this._incomingWire===null?[]:[this._incomingWire]}preDestroy(){this._incomingWire!==null&&this.parent.linkMgr.deleteWire(this._incomingWire)}get acceptsMoreConnections(){return this._incomingWire===null}positionChanged(e){var o;(o=this._incomingWire)==null||o.invalidateWirePath()}get forceValue(){}get initialValue(){}propagateNewValue(e){this.component.setNeedsRecalc()}get nodeDisplayStyle(){return this._incomingWire===null?1:0}};p(cr,"NodeIn");var Uo=class extends Yr{constructor(){super(...arguments);this._tag="_nodeout";this._outgoingWires=[]}get isClock(){return!1}addOutgoingWire(e){this._outgoingWires.indexOf(e)===-1&&this._outgoingWires.push(e)}removeOutgoingWire(e){let o=this._outgoingWires.indexOf(e);o!==-1&&this._outgoingWires.splice(o,1)}get outgoingWires(){return this._outgoingWires}get connectedWires(){return this._outgoingWires}preDestroy(){for(let e of[...this._outgoingWires])this.parent.linkMgr.deleteWire(e)}get acceptsMoreConnections(){return!0}positionChanged(e){if(this._outgoingWires!==void 0)for(let o of this._outgoingWires)o.invalidateWirePath()}findWireTo(e){return this._outgoingWires.find(o=>o.endNode===e)}get forceValue(){return this._forceValue}set forceValue(e){let o=this.value;this._forceValue=e,this.propagateNewValueIfNeeded(o),this.requestRedraw({why:"changed forced output value",invalidateTests:!0})}get initialValue(){return this._initialValue}propagateColor(e){for(let o of this._outgoingWires)o.endNode.doSetColor(e)}propagateNewValue(e){let o=this.parent.editor.timeline.logicalTime();for(let i of this._outgoingWires)i.propagateNewValue(e,o)}forceDraw(){return this._outgoingWires.length>1&&this.component.alwaysDrawMultiOutNodes}get nodeDisplayStyle(){return this._outgoingWires.length===0?3:2}pointerDoubleClicked(e){let o=super.pointerDoubleClicked(e);return o.isChange?o:this.parent.mode>=4&&e.altKey&&this.isOutput()&&this.component.allowsForcedOutputs?(this.forceValue=(()=>{switch(this._forceValue){case void 0:return I;case I:return We;case We:return!1;case!1:return!0;case!0:return}})(),X.SimpleChange):X.NoChange}};p(Uo,"NodeOut");var Xc={isOutput(r){return r._tag==="_nodeout"}};function jc(r,n,e){let o=r.group,i=n.group;if(o===void 0||i===void 0)return X.SimpleChange;let s=o.indexOf(r),a=s<o.nodes.length-1?1:-1,u=i.indexOf(n),l=u<i.nodes.length-1?1:-1,d=p(function h(m,f){return m>=o.nodes.length||m<0||f>=i.nodes.length||f<0?!1:()=>e(o.nodes[m],i.nodes[f])?h(m+a,f+l):!1},"makeRepeatFunction")(s+a,u+l);return d===!1?X.SimpleChange:X.RepeatableChange(d)}p(jc,"tryMakeRepeatableNodeAction");var Af=p(r=>Ae.union([Ae.number,Ae.string,r,Ae.array(Ae.union([Ae.number,Ae.string,r]))],"NodeSeqRepr"),"NodeSeqRepr"),kb=Ae.type({id:Ae.number},"InputNode"),Lb=Ae.intersection([Ae.type({id:Ae.number}),Ae.partial({force:Wr,initialValue:Wr,color:Ae.keyof(Jn)})],"OutputNode"),Sf=Af(kb),Ef=Af(Lb),Vb=Ae.partial({id:Sf}),Hb=Ae.partial({id:Ef}),Wb=Ae.partial({in:Sf,out:Ef}),Ub=Ae.type({}),zb=p((r,n)=>r?n?Wb:Vb:n?Hb:Ub,"NodeIDsRepr"),Kc=p((r,n)=>Ae.intersection([Ae.type({type:Ae.string}),Tf,zb(r,n)],"Component"),"ComponentRepr");function Zc(r){return ae(r)}p(Zc,"isNodeArray");var bu=class{constructor(n,e){this.parent=n;this.name=e;this._orient="e";this._avgGridOffets=void 0;this.hasNameOverrides=!1;this._nodes=[],this._nodes.group=this}get nodes(){return this._nodes}addNode(n){this._avgGridOffets!==void 0&&console.warn("Adding nodes to a group after the group's position has been used"),this._nodes.push(n),this._orient=n.orient}get avgGridOffsets(){if(this._avgGridOffets===void 0){let n=0,e=0;for(let i of this._nodes)n+=i.gridOffsetX,e+=i.gridOffsetY;let o=this._nodes.length;this._avgGridOffets=[n/o,e/o]}return this._avgGridOffets}get orient(){return this._orient}get posXInParentTransform(){return this.parent.posX+this.avgGridOffsets[0]*H}get posYInParentTransform(){return this.parent.posY+this.avgGridOffsets[1]*H}indexOf(n){for(let e=0;e<this._nodes.length;e++)if(this._nodes[e]===n)return e;return-1}};p(bu,"NodeGroup");function Gb(r){if(!Kt(r))return!1;for(let n in r)if(Object.prototype.hasOwnProperty.call(r,n)&&typeof r[n]!="string")return!1;return!0}p(Gb,"isDynamicName");var Pt=N(Ae.union([Ae.string,Ae.record(Ae.union([Ae.string,Ae.number]),Ae.string)]));function Du(r){return An(r[0])}p(Du,"isNodeDesc");var me=class extends Kn{constructor(e,o,i){super(e,i);this._anchoredDrawables=[];this.def=o,this._width=o.size.gridWidth*H,this._height=o.size.gridHeight*H,this._value=o.initialValue(i);let s=o.nodeRecs.ins,a=o.nodeRecs.outs;function u(f){if(f===void 0)return 0;let g=0;for(let D of Object.values(f))if(D!==void 0)if(Du(D))g++;else for(let y of D)Du(y)?g++:g+=y.length;return g}p(u,"countNodes");let l=u(s),c=u(a);i!==void 0?this._state=1:this.setSpawning();let[d,h,m]=this.nodeSpecsFromRepr(i,l,c);[this.inputs,this.inputGroups]=this.makeNodes(s,d,cr),[this.outputs,this.outputGroups]=this.makeNodes(a,h,Uo),m?this.requestPropagate():this.setNeedsRecalc(!0)}setSpawning(){var e;this._state=0,(e=this.parent.ifEditing)==null||e.moveMgr.setDrawableMoving(this)}setSpawned(){var e;this._state=1,(e=this.parent.ifEditing)==null||e.moveMgr.setDrawableStoppedMoving(this)}setInvalid(){this._state=3}toNodelessJSON(){let e=this.toJSON();return delete e.ref,delete e.in,delete e.out,delete e.id,e}toJSONBase(){return{...{type:this.jsonType()},...super.toJSONBase(),...this.buildNodesRepr()}}jsonType(){return this.def.type}makeNodes(e,o,i){let s={},a=[],u=new Map;if(e!==void 0){let l=p((d,h,m)=>{var B,Q,oe;let f=o[c++],[g,D,y,w,x]=m,S,T;Z(w)?S=w:w!==void 0&&(T=w),x!==void 0&&(T=x);let A=(B=T==null?void 0:T.isClock)!=null?B:!1,P=(Q=T==null?void 0:T.prefersSpike)!=null?Q:!1,R=T==null?void 0:T.leadLength,L=(oe=T==null?void 0:T.hasTriangle)!=null?oe:!1;d!==void 0&&S!==void 0?(h=S,d.hasNameOverrides=!0):(T==null?void 0:T.labelName)!==void 0&&(h=T.labelName);let O=S===void 0?h:S,G=new i(this,f,d,h,O,g,D,L,y,R);return(P||A)&&(G instanceof cr?(G.prefersSpike=!0,G.isClock=A):console.warn(`prefersSpike is only supported for inputs, can't set it for ${name}`)),a.push(G),G},"makeNode"),c=0;for(let[d,h]of Object.entries(e))if(h!==void 0)if(Du(h))s[d]=l(void 0,d,h);else{let m=p((f,g,D)=>{let y=new bu(this,g);u.set(g,y);for(let w=0;w<f.length;w++)y.addNode(l(y,D+w,f[w]));return y.nodes},"makeNodesForGroup");if(Du(h[0])){let f=h;s[d]=m(f,d,d)}else{let f=h;s[d]=f.map((g,D)=>m(g,`${d}${D}`,`${d}${D}.`))}}}return s._all=a,[s,u]}nodeSpecsFromRepr(e,o,i){let s=this.parent.nodeMgr,a=p(()=>({id:s.getFreeId()}),"makeDefaultSpec"),u=p(m=>At(a,m),"makeDefaultSpecArray");if(e===void 0)return[u(o),u(i),!1];let l=[],c=[],d=p((m,f)=>{if(f===void 0)return u(m);let g=[];function D(y){let w=s.getFreeIdFrom(y);g.push({id:w})}p(D,"pushId");for(let y of ae(f)?f:[f])if(An(y))D(y);else if(Z(y)){let[w,x]=y.split("-").map(S=>parseInt(S));for(let S=w;S<=x;S++)D(S)}else y.id=s.getFreeIdFrom(y.id),g.push(y);return g},"makeNormalizedSpecs");if(o!==0)if(i!==0){let m=e;l=d(o,m.in),c=d(i,m.out)}else l=d(o,e.id);else i!==0&&(c=d(i,e.id));let h=c.some(m=>m.initialValue!==void 0);return[l,c,h]}buildNodesRepr(){let e=this.inputs._all.length,o=this.outputs._all.length;function i(u){let l=p(c=>c.id,"reprOne");return u.length===1?l(u[0]):a(u.map(l))}p(i,"inNodeReprs");function s(u){let l=p(c=>{let d=c.forceValue===void 0,h=c.initialValue===void 0,m=c.color===Yc;return d&&m&&h?c.id:{id:c.id,intialValue:h?void 0:nt(c.initialValue),force:d?void 0:nt(c.forceValue),color:m?void 0:c.color}},"reprOne");return u.length===1?l(u[0]):a(u.map(l))}p(s,"outNodeReprs");function a(u){let l=[],c,d;function h(){c!==void 0&&d!==void 0&&(c===d?l.push(c):d===c+1?(l.push(c),l.push(d)):l.push(`${c}-${d}`),c=void 0,d=void 0)}p(h,"pushRange");for(let m of u)An(m)?c!==void 0&&m-1===d?d=m:(h(),c=d=m):(h(),l.push(m));return h(),l.length===1?l[0]:l}return p(a,"compactRepr"),e!==0?o!==0?{in:i(this.inputs._all),out:s(this.outputs._all)}:{id:i(this.inputs._all)}:o!==0?{id:s(this.outputs._all)}:{}}get anchoredDrawables(){return this._anchoredDrawables}addAnchoredDrawable(e){this._anchoredDrawables.push(e)}removeAnchoredDrawable(e){this._anchoredDrawables=this._anchoredDrawables.filter(o=>o!==e)}get unrotatedWidth(){return this._width}get unrotatedHeight(){return this._height}toStringDetails(){let e=this._name;return(e!==void 0?`name='${e}', `:"")+String(this.value)}get state(){return this._state}get allowsForcedOutputs(){return!0}get alwaysDrawMultiOutNodes(){return!1}*allNodes(){for(let e of this.inputs._all)yield e;for(let e of this.outputs._all)yield e}*allNodeGroups(){for(let e of this.inputGroups.values())yield e;for(let e of this.outputGroups.values())yield e}get value(){return this._value}doSetValue(e,o=!1){let i=this._value;(o||!rr(e,i))&&(this._value=e,this.requestRedraw({why:"value changed",invalidateTests:!0}),this.requestPropagate())}recalcValue(e){this.doSetValue(this.doRecalcValue(),e)}propagateCurrentValue(){this.propagateValue(this._value)}propagateValue(e){}inputValues(e){return e.map(o=>o.value)}outputValues(e,o,i=!1){let s=e.length;if(o.length!==s)throw new Error(`outputValues: expected ${s} values, got ${o.length}`);for(let a=0;a<s;a++){let u=i?s-a-1:a;e[a].value=o[u]}}setNeedsRecalc(e=!1){this.parent.recalcMgr.enqueueForRecalc(this,e)}requestPropagate(){this.parent.recalcMgr.enqueueForPropagate(this)}updateNodePositions(){for(let e of this.allNodes())e.updatePositionFromParent()}bounds(e=!1){return new Zs(this,e)}draw(e,o){if(super.draw(e,o),this._state===3){e.fillStyle="rgba(255, 0, 0, 0.3)";let i=this.bounds(!0);e.fill(i.outline(e,5))}}doDraw(e,o){this.doDrawDefault(e,o)}doDrawDefault(e,o,i){var c,d,h;let s=this.bounds(),a=typeof i!="function"?i:{drawLabels:i};e.fillStyle=(c=a==null?void 0:a.background)!=null?c:ot;let u=s.outline(e);e.fill(u);for(let m of this.allNodes())this.drawWireLineTo(e,m,s);let l=!((d=a==null?void 0:a.skipLabels)!=null&&d);if(l)for(let m of this.allNodeGroups())m.hasNameOverrides||this.drawGroupBox(e,m,s);(h=a==null?void 0:a.drawInside)==null||h.call(a,s),e.lineWidth=3,e.strokeStyle=o.borderColor,e.stroke(u),o.inNonTransformedFrame(m=>{var f,g,D;if(((f=a==null?void 0:a.componentName)==null?void 0:f[0])!==void 0){let[y,w,x]=a.componentName,S=An(x)||Z(x)?x:x();dr(e,m,y,S,this,w)}if(l){let y=(g=a==null?void 0:a.labelSize)!=null?g:11;e.fillStyle=Hn,e.textAlign="center",e.font=`bold ${y}px sans-serif`;for(let w of this.allNodeGroups())w.hasNameOverrides||this.drawGroupLabel(m,w,s);e.font=`${y}px sans-serif`;for(let w of this.allNodes())(w.group===void 0||w.group.hasNameOverrides)&&this.drawNodeLabel(m,w,s)}(D=a==null?void 0:a.drawLabels)==null||D.call(a,m,s)})}drawWireLineTo(e,o,i){var s;if(o.isClock){Mf(e,i.left,o,(s=this._trigger)!=null?s:et.rising);return}Be(e,o)}drawGroupBox(e,o,i){if(!Rf(o.nodes))return;let s=ce.isVertical(ce.add(this.orient,o.orient))?8:6,a=o.nodes[0],u=o.nodes[o.nodes.length-1],l=2;switch(e.beginPath(),o.orient){case"e":e.rect(i.right-s,a.posYInParentTransform-l,s,u.posYInParentTransform-a.posYInParentTransform+2*l);break;case"w":e.rect(i.left,a.posYInParentTransform-l,s,u.posYInParentTransform-a.posYInParentTransform+2*l);break;case"n":e.rect(u.posXInParentTransform-l,i.top,a.posXInParentTransform-u.posXInParentTransform+2*l,s);break;case"s":e.rect(u.posXInParentTransform-l,i.bottom-s,a.posXInParentTransform-u.posXInParentTransform+2*l,s);break}e.fillStyle=zi,e.fill()}drawNodeLabel(e,o,i){!o.isClock&&!pr(o.shortName)&&Ot(e,this.orient,o.shortName,o.orient,...this.anchorFor(o,i,1),o)}drawGroupLabel(e,o,i){pr(o.name)||Ot(e,this.orient,o.name,o.orient,...this.anchorFor(o,i,1),o.nodes)}anchorFor(e,o,i){switch(e.orient){case"e":return[o.right+i,e.posYInParentTransform];case"w":return[o.left-i,e.posYInParentTransform];case"n":return[e.posXInParentTransform,o.top-i];case"s":return[e.posXInParentTransform,o.bottom+i]}}replaceWithComponent(e){var h,m;let o=p((f,g)=>{let D=new Map;for(let y of f){let w=g(y);if(w===null)continue;let x=y.group,S=x===void 0?y.shortName:`${x.name}[${x.nodes.indexOf(y)}]`;D.set(S,w)}return D},"saveWires"),i=o(this.inputs._all,f=>f.incomingWire),s=o(this.outputs._all,f=>f.outgoingWires),a=p((f,g,D)=>{for(let y of g){let w=y.group;if(w===void 0){let x=f.get(y.shortName);x===void 0&&(x=f.get(y.shortName+"[0]")),x!==void 0&&D(x,y)}else{let x=w.nodes.indexOf(y),S=f.get(`${w.name}[${x}]`);S===void 0&&x===0&&(S=f.get(w.name)),S!==void 0&&D(S,y)}}},"restoreNodes");a(i,e.inputs._all,(f,g)=>{f.setEndNode(g)});let u=this.parent.editor.timeline.logicalTime();a(s,e.outputs._all,(f,g)=>{for(let D of[...f])D.setStartNode(g,u)});let l=this.parent.components;l.tryDelete(this)||console.warn("Could not delete old component"),e.setPosition(this.posX,this.posY,!1),e.setSpawned();let d=this.ref;return d!==void 0&&!l.looksLikeAutoGeneratedId(this)&&l.changeIdOf(e,d),(h=this.parent.ifEditing)==null||h.undoMgr.takeSnapshot(),(m=this.parent.ifEditing)==null||m.redrawMgr.requestRedraw({why:"component replaced",component:e,invalidateMask:!0,invalidateTests:!0}),e}makeClone(e){let o=this.toNodelessJSON(),i=this.def.makeFromJSON(this.parent,o);return i===void 0?console.warn("Could not create component clone"):e&&i.setSpawning(),i}pointerDown(e){if(this.parent.mode>=2&&!e.shiftKey){let o=this.parent.editor.eventMgr,i;o.currentSelection!==void 0&&(i=o.currentSelection.previouslySelectedElements).size>0&&!i.has(this)&&(o.currentSelection=void 0)}return super.pointerDown(e)}pointerUp(e){var a;let o=!1;this._state===0&&(this._state=1,o=!0);let i=super.pointerUp(e).isChange;if(o||i){let u=this.parent.nodeMgr.tryConnectNodesOf(this);return u.length>0&&this.autoConnected(u),(a=this.parent.ifEditing)==null||a.setDirty("moved component"),X.SimpleChange}let s=this.parent.editor.linkMgr;return s.isSettingAnchor?s.stopSettingAnchorOn(this):X.NoChange}autoConnected(e){}updateSelfPositionIfNeeded(e,o,i,s){return this._state===0?this.trySetPosition(e,o,i):super.updateSelfPositionIfNeeded(e,o,i,s)}positionChanged(e){this.updateNodePositions();for(let o of this._anchoredDrawables)o.setPosition(o.posX+e[0],o.posY+e[1],!1)}pointerClicked(e){return this.parent.mode>=2&&e.shiftKey?(this.parent.editor.eventMgr.toggleSelect(this),X.SimpleChange):X.NoChange}pointerDoubleClicked(e){if(this.parent.mode>=2&&e.metaKey&&this.canRotate()){let o=p(()=>(this.doSetOrient(ce.nextClockwise(this.orient)),!0),"doChange");return o(),X.RepeatableChange(o)}return X.NoChange}doSetOrient(e){super.doSetOrient(e),this.updateNodePositions()}destroy(){this._state=2;for(let e of this.allNodes())e.destroy()}cursorWhenMouseover(e){var i,s;let o=this.parent.mode;if((i=e==null?void 0:e.ctrlKey)!=null&&i&&o>=2)return"context-menu";if((s=e==null?void 0:e.altKey)!=null&&s&&o>=3)return"copy";if(!this.lockPos&&o>=2)return"grab"}makeContextMenu(){let e=[],o=this.makeBaseContextMenu(this.parent.editor),i=this.makeComponentSpecificContextMenuItems(),s=!0;function a(u,l,c=!1){c&&(s||e.push(E.sep()),s=!0);for(let[d,h]of l)d===u&&(e.push(h),s=h._tag==="sep")}return p(a,"addItemsAt"),a("start",i),a("start",o),a("mid",o,!0),a("mid",i),a("end",o,!0),a("end",i),e}makeBaseContextMenu(e){let o=C.Components.Generic.contextMenu,i=!e.eventMgr.currentSelectionEmpty()&&this.parent.isMainEditor(),s=!i||!lr.canModifyCustomComponents(this.parent)?[]:[["start",E.item("newcomponent",o.MakeNewComponent,()=>{var h;let d=e.factory.tryMakeNewCustomComponent(e);Z(d)?d.length>0&&window.alert(o.MakeNewComponentFailed+" "+d):((h=e.options.showOnly)==null||h.push(d.id),e.updateCustomComponentButtons())})]],a=!i||!lr.canModifyTestCases(this.parent)?[]:[["start",E.item("testcase",o.MakeNewTestCase,()=>{let d=e.factory.tryMakeNewTestCase(e);if(Z(d)){d.length>0&&window.alert(o.MakeNewTestCaseFailed+" "+d);return}this.parent.editor.addTestCases(d)})],["start",E.item("testcase",o.MakeAllTestCases,async()=>{let d=await e.factory.tryMakeAllTestCases(e);if(Z(d)){d.length>0&&window.alert(o.MakeNewTestCaseFailed+" "+d);return}this.parent.editor.addTestCases(d)})]];(s.length>0||a.length>0)&&a.push(["start",E.sep()]);let u=e.mode<4?[]:[["end",this.makeSetIdContextMenuItem()],["end",E.sep()]],l=this.state!==3?[]:[["end",E.item("reset",o.Reset,()=>{this._state=1,this.setNeedsRecalc(!0)})]],c=E.item("trash",o.Delete,()=>this.parent.components.tryDelete(this)?(this.requestRedraw({why:"deleted component",invalidateMask:!0,invalidateTests:!0}),X.SimpleChange):X.NoChange,"\u232B",!0);return[["start",E.sep()],...s,...a,...this.makeOrientationAndPosMenuItems(),...u,...l,["end",c]]}makeComponentSpecificContextMenuItems(){return[]}makeForceOutputsContextMenuItem(e=!1){let o=this.outputs._all.length;if(o===0||this.parent.mode<4)return[];let i=C.Components.Generic.contextMenu;function s(l){let c=l.forceValue,d=[void 0,I,!0,!1,We].map(h=>E.item(c===h?"check":"none",(()=>{switch(h){case void 0:return i.NormalOutput;case I:return i.ForceAsUnknown;case!0:return i.ForceAs1;case!1:return i.ForceAs0;case We:return i.ForceAsZ}})(),()=>{l.forceValue=h}));return d.splice(1,0,E.sep()),d}p(s,"makeOutputItems");let a=[E.sep(),E.text(i.ForceOutputDesc)],u=[];return e&&u.push(["mid",E.sep()]),o===1?u.push(["mid",E.submenu("force",i.ForceOutputSingle,[...s(this.outputs._all[0]),...a])]):u.push(["mid",E.submenu("force",i.ForceOutputMultiple,[...this.outputs._all.map(l=>{let c=l.forceValue!==void 0?"force":"none";return E.submenu(c,i.Output+" "+l.fullName,s(l))}),...a])]),u}makeSetNameContextMenuItem(e,o){let i=C.Components.Generic.contextMenu,s=e===void 0?i.SetName:i.ChangeName;return E.item("pen",s,()=>this.runSetNameDialog(e,o),"\u21A9\uFE0E")}runSetNameDialog(e,o){let i=e===void 0||Z(e)?e:Qc.default.stringify(e),s=window.prompt(C.Components.Generic.contextMenu.SetNamePrompt,i);if(s!==null){let a;if(s.length===0)a=void 0;else try{let u=Qc.default.parse(s);Gb(u)?a=u:a=s}catch(u){a=s}o(a)}}runSetFontDialog(e,o,i){let s=C.Components.Generic.contextMenu,a=window.prompt(s.SetFontPrompt[0]+o+s.SetFontPrompt[1],e===o?"":e);if(a!==null){let u=a.length===0?o:a;i(u)}}};p(me,"ComponentBase");var xe=class extends me{constructor(e,[o,i],s){super(e,o,s);this._defP=i}makeChangeParamsContextMenuItem(e,[o,i],s,a,u){let l=p(c=>{let d=s===c,h=d?"check":"none",m=d?()=>{}:()=>{this.replaceWithNewParams({[a]:c})};return E.item(h,i.expand({val:c}),m)},"makeChangeValueItem");return u===void 0&&(u=this._defP.paramDefs[a].range),["mid",E.submenu(e,o,u.map(l))]}makeChangeBooleanParamsContextMenuItem(e,o,i){let s=o?"check":"none";return["mid",E.item(s,e,()=>{this.replaceWithNewParams({[i]:!o})})]}replaceWithNewParams(e){let i={...this.toNodelessJSON(),...e},s=this._defP.makeFromJSON(this.parent,i);if(s===void 0){console.warn("Could not create component variant");return}return this.replaceWithComponent(s)}keyDown(e){e.key==="+"?this.tryChangeParam(0,!0):e.key==="-"?this.tryChangeParam(0,!1):e.key==="*"?this.tryChangeParam(1,!0):e.key==="/"?this.tryChangeParam(1,!1):super.keyDown(e)}tryChangeParam(e,o){let i=Object.keys(this._defP.defaultParams),s=i.length;if(e>=s)return;let a=i[e],u=this.toJSON()[a],l=this._defP.paramDefs[a];u===void 0&&(u=l.defaultValue);let c;if(An(u)){if(c=l.nextValue(u,o),c===void 0||c===u)return}else Ur(u)&&(c=!u);if(c===void 0)return;let d=this.replaceWithNewParams({[a]:c});d!==void 0&&this.parent.editor.eventMgr.setCurrentComponentUnderPointer(d)}};p(xe,"ParametrizedComponentBase");function un(r,n){return H0(n,([e,o,i,s])=>[e,o,r,i,s])}p(un,"group");function ue(r,n,e,o,i,s){let a=i!=null?i:qe(o)?1:2,u=(o-1)*a,l=e-u/2;return un(r,At(c=>[n,l+c*a,void 0,s],o))}p(ue,"groupVertical");function Cu(r,n,e,o,i){let s=qe(i===1?o:i)?1:2,a=i===1?s:s*2,u=(i-1)*s+a,l=o*(i-1)*s+(o-1)*a,c=e-l/2;return At(d=>un(r,At(h=>[n,c+d*u+h*s],i)),o)}p(Cu,"groupVerticalMulti");function Rn(r,n,e,o,i,s){let a=i!=null?i:qe(o)?1:2,u=(o-1)*a,l=n+u/2;return un(r,At(c=>[l-c*a,e,void 0,s],o))}p(Rn,"groupHorizontal");function _f(r,n,e,o){return Ae.intersection([Ae.type({type:Ae.string,...o}),Kc(n,e)],r)}p(_f,"makeComponentRepr");var yu=class{constructor(n,e,o,i,s,a,u,l){this.type=n;this.idPrefix=e;this.aults=o;this.size=i;this._buttonProps=s;this._initialValue=a;this.impl=void 0;let c=u(i,o);this.nodeRecs=c;let d="ins"in c,h="outs"in c;this.repr=_f(n,d,h,l!=null?l:{})}isValid(){return this.impl!==void 0}initialValue(n){return this._initialValue(n,this.aults)}button(n,e){return{type:this.type,visual:n,width:this._buttonProps.imgWidth,...e}}make(n){let e=new this.impl(n);return n.components.add(e),e}makeFromJSON(n,e){var s;let o=Fn(e,this.repr,(s=this.impl.name)!=null?s:"component");if(o===void 0)return;let i=new this.impl(n,o);return n.components.add(i),i}};p(yu,"ComponentDef");function Me(r,{idPrefix:n,button:e,repr:o,valueDefaults:i,size:s,makeNodes:a,initialValue:u}){return new yu(r,n,i,s,e,u!=null?u:()=>{},a,o)}p(Me,"defineComponent");function Jc(r){return{...r,aults:r.valueDefaults}}p(Jc,"defineAbstractComponent");var Ui=class{constructor(n,e,o){this.defaultValue=n;this.range=e;this.isAllowed=o}validate(n,e){return this.isAllowed(n)?n:(console.warn(`Using default value ${this.defaultValue} for ${e} instead of invalid value ${n}; allowed values are: ${this.range.join(", ")}`),this.defaultValue)}nextValue(n,e){let o=this.range.indexOf(n);if(o===-1)return this.defaultValue;let i=o+(e?1:-1);if(!(i<0||i>=this.range.length))return this.range[i]}};p(Ui,"ParamDef");function Se(r,n){return n===void 0?new Ui(r,[],()=>!0):new Ui(r,n,e=>n.includes(e))}p(Se,"param");function Ut(){return new Ui(!1,[!1,!0],Ur)}p(Ut,"paramBool");function qb(r){return Object.fromEntries(Object.entries(r).map(([n,e])=>[n,e.defaultValue]))}p(qb,"paramDefaults");var vu=class{constructor(n,e,o,i,s,a,u,l,c,d,h,m,f){this.type=n;this.idPrefix=e;this.variantName=s;this._buttonProps=a;this.paramDefs=c;this.size=d;this._makeNodes=h;this._initialValue=m;this._validateParams=f;this.impl=void 0;this.defaultParams=qb(c),this.aults={...l,...this.defaultParams},this.repr=_f(n,o,i,u!=null?u:{})}isValid(){return this.impl!==void 0}with(n){let e=this.size(n),o=this._makeNodes({...e,...n},this.aults);return[{type:this.type,idPrefix:this.idPrefix,size:e,nodeRecs:o,initialValue:i=>this._initialValue(i,n),makeFromJSON:this.makeFromJSON.bind(this)},this]}button(n,e,o){return{type:this.type,params:$b(this,n),visual:e,width:this._buttonProps.imgWidth,...o}}make(n,e){let o=e===void 0?this.defaultParams:Oc(this.defaultParams,e),i=this.doValidate(o,void 0),s=new this.impl(n,i);return n.components.add(s),s}makeFromJSON(n,e){var u;let o=Fn(e,this.repr,(u=this.impl.name)!=null?u:"component");if(o===void 0)return;let i=Oc(this.defaultParams,o),s=this.doValidate(i,o.type),a=new this.impl(n,s,o);return n.components.add(a),a}doValidate(n,e){var i,s;let o=(s=(i=this.impl)==null?void 0:i.name)!=null?s:"component";return n=Object.fromEntries(Object.entries(this.paramDefs).map(([a,u])=>{var c;let l=(c=n[a])!=null?c:u.defaultValue;if(a==="type")return[a,l];{let d=u.validate(l,`${o}.${a}`);return[a,d]}})),this._validateParams(n,e,this.paramDefs)}};p(vu,"ParametrizedComponentDef");function ye(r,n,e,{variantName:o,idPrefix:i,button:s,repr:a,valueDefaults:u,params:l,validateParams:c,size:d,makeNodes:h,initialValue:m}){return new vu(r,i,n,e,o,s,a,u,l,d,h,m,c!=null?c:f=>f)}p(ye,"defineParametrizedComponent");function $b(r,n){return V0()({def:r,params:n})}p($b,"defParams");var H=10,Go=8,Nf=(Go/2)**2,fo=8,Yb=(fo/2+6)**2,Xb=(fo/2+10)**2;function Ff(r){return Math.round(r/H)}p(Ff,"pxToGrid");function Jr(r,n,e,o){let i=e-r,s=o-n;return i*i+s*s}p(Jr,"distSquared");function fu(r,n,e,o,i,s){let a=e/2,u=o/2;return i>=r-a&&i<r+a&&s>=n-u&&s<n+u}p(fu,"inRect");var Zs=class{constructor(n,e){this.width=n.unrotatedWidth,this.height=n.unrotatedHeight,e&&ce.isVertical(n.orient)&&([this.width,this.height]=[this.height,this.width]),this.top=n.posY-this.height/2,this.left=n.posX-this.width/2,this.bottom=this.top+this.height,this.right=this.left+this.width}outline(n,e=0){let o=n.createPath();return o.rect(this.left-e,this.top-e,this.width+e*2,this.height+e*2),o}};p(Zs,"DrawingRect");var Dn={Background:0,Normal:1,Overlay:2},If="rgba(0,0,0,0)",rp={COLOR_BACKGROUND:void 0},ot,qi,wu,xu,Tu,$i,Au,jr,np,ep,J,Hn,Su,zi,Xr,Zn,op,Ks,Js,Gi,Eu,kf,ea,zo,mr,Lf,Qr,dt,ip,Kr,Vf,Hf,Pu,_u,ta,Zr,Bu,Nu,Ru,sp=.3,Fu=!1;Uf(Fu);function ei(r,n){if(n||r!==Fu){Uf(r);for(let e of Gt.allConnectedEditors)e.wrapHandler(()=>{e.setDark(r),e.editTools.redrawMgr.requestRedraw({why:"dark/light mode switch"})})()}}p(ei,"setDarkMode");function Wf(){return Fu}p(Wf,"isDarkMode");function Uf(r){var n;r?(ot=(n=rp.COLOR_BACKGROUND)!=null?n:Y(30),qi=Y(60),xu=Y([168,20,20]),wu=Y(55),Tu=Y(85),$i=Y(30),Au=Y(45),jr=Y(185),np=ot,ep=220,Hn=Y(139),Su=Y([0,0,150]),zi=Y([128,128,128,.13]),Xr=Y(175),op=Y([0,123,255]),Ks=Y([194,34,14]),Js=Y([128,128,128,.5]),Gi=[255,193,7],ea=Y([180,0,0]),zo=[80,89,99],Qr=[108,106,98],Kr=Y([103,84,23]),_u=Y([95,95,95]),ta={green:Y([11,144,11]),red:Y([144,11,11]),yellow:Y([144,144,11])},Zr={black:Xr,red:Y([206,63,57]),blue:Y([77,102,153]),yellow:Y([245,209,63]),green:Y([87,136,97]),white:Y([230,217,199])},Ru=Of(ot,"rgba(128,128,128,0.4)")):(ot=Y(255),qi=Y(223),xu=Y([255,187,187]),wu=Y(238),Tu=Y(200),$i=Y(240),Au=Y(215),jr=Y(255),np=Y(0),ep=0,Hn=Y(170),Su=Y([50,50,250]),zi=Y([128,128,128,.13]),Xr=Y(80),op=Y([0,123,255]),Ks=Y([194,34,14]),Js=Y([128,128,128,.5]),Gi=[255,193,7],ea=Y([180,0,0]),zo=[52,58,64],Qr=[152,158,164],Kr=Y([137,114,35]),_u=Y([190,190,190]),ta={green:Y([20,232,20]),red:Y([232,20,20]),yellow:Y([232,232,20])},Zr={black:Xr,red:Y([206,63,57]),blue:Y([77,102,153]),yellow:Y([245,209,63]),green:Y([87,136,97]),white:Y([230,217,199])},Ru=Of(ot,"rgba(128,128,128,0.2)")),Bu={yellow:Y([230,230,0,.2]),blue:Y([54,54,255,.2]),green:Y([54,255,54,.2]),red:Y([255,54,54,.2]),grey:Y([120,120,120,.2]),turquoise:Y([0,210,210,.2])},Nu={yellow:Y([196,196,0,.5]),blue:Y([115,115,255,.5]),green:Y([0,167,0,.5]),red:Y([214,0,0,.5]),grey:Y([35,35,35,.5]),turquoise:Y([0,162,162,.5])},J=Y(ep),dt=Y(Qr),ap(!1),Eu=Y(Gi),mr=Y(zo),kf=tp(Eu,40),Lf=tp(mr,80),ip=tp(dt,50),Vf=Y([200,100,100,.5]),Hf=Y([100,100,200,.5]),Pu=Y([100,100,100,.5]),Fu=r}p(Uf,"doSetColors");function Of(r,n){if(!Xa)return null;let e=document.createElement("canvas"),o=4;e.width=2*o,e.height=6*o;let i=e.getContext("2d");i.fillStyle=r,i.fillRect(0,0,e.width,e.height),i.fillStyle=n,i.beginPath(),i.moveTo(o,0),i.lineTo(e.width,0),i.lineTo(0,e.height),i.lineTo(0,3*o),i.closePath(),i.moveTo(o,e.height),i.lineTo(e.width,e.height),i.lineTo(e.width,3*o),i.closePath(),i.fill();let s=i.createPattern(e,"repeat");return s===null&&console.warn("Failed to create pattern"),s}p(Of,"createStripedPattern");function ap(r){Zn=r?Ks:op}p(ap,"setColorPointerOverIsDanger");function Y(r){return ae(r)?r.length===3?`rgb(${r[0]},${r[1]},${r[2]})`:`rgba(${r[0]},${r[1]},${r[2]},${r[3]})`:`rgb(${r},${r},${r})`}p(Y,"ColorString");function up(r){let n="rgb(";r.startsWith(n)&&(r=r.substring(n.length));let e=")";r.endsWith(e)&&(r=r.substring(0,r.length-e.length));let o=r.split(",").map(i=>parseInt(i));return ja(o,3)}p(up,"colorCompsRGB");function tp(r,n){let e=up(r),o=ja(e.map(i=>Math.min(255,i+n)),3);return Y(o)}p(tp,"ligherColor");function zt(r){return U(r)?dt:be(r)?Kr:r?Eu:mr}p(zt,"colorForLogicValue");function jb(r){return U(r)?[dt,ip]:be(r)?[Kr,Kr]:r?[Eu,kf]:[mr,Lf]}p(jb,"colorsForLogicValue");function zf(r){let n=[(Gi[0]-zo[0])*r+zo[0],(Gi[1]-zo[1])*r+zo[1],(Gi[2]-zo[2])*r+zo[2]];return Y(n)}p(zf,"colorForFraction");function Gf(r){let n=document.createElement("canvas");n.width=n.height=1;let e=n.getContext("2d");e.clearRect(0,0,1,1),e.fillStyle="#000",e.fillStyle=r;let o=e.fillStyle;if(e.fillStyle="#fff",e.fillStyle=r,o===e.fillStyle)return e.fillRect(0,0,1,1),ja([...e.getImageData(0,0,1,1).data],4)}p(Gf,"parseColorToRGBA");var Iu="18px sans-serif",Pf=new Map;function qf(r){let n=r.font,e=Pf.get(n);return e===void 0&&(e=Math.ceil(r.measureText("0").actualBoundingBoxAscent-1)/2,Pf.set(n,e)),e}p(qf,"fontAscentHalf");var te={bottom:0,middle:1,top:2};function $f(r,n,e,o,i){r.strokeText(e,o,i+n*qf(r))}p($f,"strokeTextVAlign");function se(r,n,e,o,i){r.fillText(e,o,i+n*qf(r))}p(se,"fillTextVAlign");function qe(r){return r>=5}p(qe,"useCompact");var Qb=/^(In|Out|in|out)\d*$/;function pr(r){return r===void 0||Qb.test(r)}p(pr,"isTrivialNodeName");function fr(r,n,e,o,i,s,a){r.moveTo(n,e),r.lineTo(o,i),r.lineTo(s,a),r.closePath()}p(fr,"triangle");function ln(r,n,e,o){let i=o/2;r.ellipse(n,e,i,i,0,0,2*Math.PI)}p(ln,"circle");function na(r,n,e,o,i){r.beginPath(),r.moveTo(n,e),r.lineTo(o,i),r.stroke()}p(na,"strokeSingleLine");function Rf(r){return r.map(Mu).some(n=>n.drawLead)}p(Rf,"shouldDrawLeadsTo");function Mu(r){let n=r.parent.editor,e=r.connectedWires,o=e.length>0;if(n.mode<=1&&!o&&!n.options.showDisconnectedPins)return{drawLabel:!1,drawLead:!1,drawTriangle:!1,drawHiddenMark:!1};let i=o&&e.some(s=>s.isHidden);return{drawLabel:!0,drawLead:!o||i,drawTriangle:r.hasTriangle,drawHiddenMark:i}}p(Mu,"whatToDrawForNode");function Kb(r){return ae(r)?r.map(Mu).some(e=>e.drawLabel):Mu(r).drawLabel}p(Kb,"shouldDrawNodeLabel");function Be(r,n){let{drawLead:e,drawTriangle:o,drawHiddenMark:i}=Mu(n),[s,a,u,l]=n.drawCoordsInParentTransform;if(e){let c=n.parent.editor.options.hideWireColors;lp(r,u,l,s,a,n.value,n.color,c,void 0)}if(o){if(r.strokeStyle=J,r.fillStyle=J,r.beginPath(),u===s)if(n.isOutput()&&a<=l||!n.isOutput()&&l<=a){let d=n.isOutput()?1:0;fr(r,s-3,a-2+d,s+3,a-2+d,s,a+1+d)}else{let d=n.isOutput()?-3:-4;fr(r,s-3,a-2-d,s+3,a-2-d,s,a-5-d)}else if(l===a){let c=n.isOutput()?1:0;n.isOutput()&&s<=u||!n.isOutput()&&u<=s?fr(r,s-2+c,a-3,s-2+c,a+3,s+1+c,a):fr(r,s+2-c,a-3,s+2-c,a+3,s-1-c,a)}else console.log(`ERROR  wireLineToComponent cannot draw triangle as line is not vertical or horizontal between (${u}, ${l}) and (${s}, ${a})`);r.lineWidth=2,r.fill(),r.stroke()}i&&(r.lineWidth=2,r.strokeStyle=Zr[n.color],r.beginPath(),ce.isVertical(n.orient)?(r.moveTo(u+5,l+1.5),r.lineTo(u-5,l-1.5)):(r.moveTo(u+1.5,l-5),r.lineTo(u-1.5,l+5)),r.stroke())}p(Be,"drawWireLineToComponent");function lp(r,n,e,o,i,s,a,u,l){r.beginPath(),r.moveTo(n,e),r.lineTo(o,i),ti(r,s,a,u,l)}p(lp,"drawStraightWireLine");function ti(r,n,e,o,i){cp(r,e,!1),ku(r,n,void 0,o,i)}p(ti,"strokeWireOutlineAndSingleValue");function cp(r,n,e){let o=r.lineCap;r.lineCap="butt";let i=Go/2;e?(r.lineWidth=i+2,r.strokeStyle=Zn):(r.lineWidth=i,r.strokeStyle=Zr[n]),r.stroke(),r.lineCap=o}p(cp,"strokeWireOutline");function ku(r,n,e,o,i){let s=r.lineCap;r.lineCap="butt",r.lineWidth=Go/2-2;let[a,u]=o?[dt,ip]:jb(n);r.strokeStyle=a;let l=20;if(e!==void 0){let[c,d]=e;r.setLineDash([c,d]),r.stroke(),r.setLineDash([])}else i===void 0?r.stroke():(r.setLineDash([l,l]),r.lineDashOffset=-i*l*2,r.stroke(),r.strokeStyle=u,r.lineDashOffset+=l,r.stroke(),r.lineDashOffset=0,r.setLineDash([]));r.lineCap=s}p(ku,"strokeWireValue");function mu(r,n,e,o,i){let s=Jr(r,n,e,o);if(s<(i?Xb:Yb))return s}p(mu,"distSquaredToWaypointIfOver");function gu(r,n,e,o,i,s,a,u,l,c,d){let[h,m]=l?[ea,3]:[Xr,1];r.strokeStyle=h,r.lineWidth=m,r.fillStyle=i===1?ot:u?dt:zt(s),r.beginPath(),ln(r,e,o,fo),r.fill(),r.stroke(),a&&(r.fillStyle=Js,r.beginPath(),ln(r,e,o,fo*2),r.fill(),r.stroke()),c&&(r.textAlign="center",r.fillStyle=h,r.font="bold 14px sans-serif",n.inNonTransformedFrame(f=>{se(r,te.middle,"!!",...f.rotatePoint(e+(d?13:0),o+(d?0:-13)))}))}p(gu,"drawWaypoint");function Mf(r,n,e,o){let i=e.posYInParentTransform;r.strokeStyle=J,r.lineWidth=2,r.beginPath(),r.moveTo(n+1,i-4),r.lineTo(n+9,i),r.lineTo(n+1,i+4),r.stroke(),o===et.falling&&(r.fillStyle=J,r.closePath(),r.fill()),Be(r,e)}p(Mf,"drawClockInput");function Ot(r,n,e,o,i,s,a){if(e===void 0)return;a===void 0&&(An(i)?An(s)||(a=s):a=i);let u=!0;if(a!==void 0&&(u=Kb(a)),!u)return;let[l,c,d,h]=(()=>{if(o===void 0)return["center",te.middle,0,0];switch(ce.add(n,o)){case"e":return["right",te.middle,-3,0];case"w":return["left",te.middle,3,0];case"n":return["center",te.top,0,4];case"s":return["center",te.bottom,0,-4]}})(),m=An(i)?i:(Zc(i)?i.group:i).posXInParentTransform,f=An(s)?s:(Zc(s)?s.group:s).posYInParentTransform,[g,D]=r.rotatePoint(m,f),y=r.g;y.textAlign=l,se(y,c,e,g+d,D+h)}p(Ot,"drawLabel");function Lu(r,n,e,o){ni(r,n,e.posX,e.posY,o)}p(Lu,"drawValueTextCentered");function ni(r,n,e,o,i){var h;let s="",a="",u=(h=i==null?void 0:i.small)!=null?h:!1,l=i==null?void 0:i.fillStyle,c=u?"12":"18",d=u?"10":"16";U(n)?(r.fillStyle=l!=null?l:jr,s="bold "+c,a="?"):be(n)?(r.fillStyle=l!=null?l:jr,s=d,a="Z"):n?(r.fillStyle=l!=null?l:np,s="bold "+c,a="1"):(r.fillStyle=l!=null?l:jr,s=c,a="0"),r.font=`${s}px sans-serif`,r.textAlign="center",se(r,te.middle,a,e,o)}p(ni,"drawValueText");var Mn=26,hr={right:["start",te.middle,7],left:["end",te.middle,9],top:["center",te.bottom,5],bottom:["center",te.top,5]};function Zb(r,n){if(r)switch(n){case"e":return hr.right;case"w":return hr.left;case"n":return hr.top;case"s":return hr.bottom}else switch(n){case"e":return hr.left;case"w":return hr.right;case"n":return hr.bottom;case"s":return hr.top}}p(Zb,"textSettingsForName");function dr(r,n,e,o,i,s){if(e===void 0)return;let a;if(Z(e)?a=e:o in e?a=`${e[o]}`:"default"in e?a=`${e.default}`:U(o)?a=I:a=void 0,a===void 0)return;let[u,l,c]=Zb(s,i.orient);r.fillStyle=J,r.font="italic 18px sans-serif";let d=n.rotatePoint(i.posX+(s?1:-1)*(i.unrotatedWidth/2+c),i.posY);r.textAlign=u,se(r,l,a,...d)}p(dr,"drawComponentName");function pp(r,n,e){let o=n.anchor;if(o!==void 0){let s=e?Vf:Pu;Ou(r,n.posX,n.posY,o.posX,o.posY,[o.width,o.height],s,void 0)}e&&i(n);function i(s){if(s instanceof me)for(let a of s.anchoredDrawables)a instanceof bn||(Ou(r,a.posX,a.posY,s.posX,s.posY,[s.width,s.height],Hf,n),i(a))}p(i,"drawAllTo")}p(pp,"drawAnchorsAroundComponent");function Ou(r,n,e,o,i,s,a,u){let[m,[f,g]]=An(s)?[s,[0,0]]:[10,s];if(Math.abs(n-o)<f/2&&Math.abs(e-i)<g/2)return;if(u!==void 0){let B=u;if(n>=B.posX-B.width/2&&n<=B.posX+B.width/2&&e>=B.posY-B.height/2&&e<=B.posY+B.height/2)return}let D=o-n,y=i-e,w=Math.sqrt(D*D+y*y);if(w<20)return;D/=w,y/=w;let x=-y,S=D;n+=0*D,e+=0*y;let T=[n+3*x,e+3*S],A=[n-3*x,e-3*S];o-=m*D,i-=m*y;let P=[o,i];o-=20*D,i-=20*y;let R=[o+3*x,i+3*S],L=[o+8*x,i+8*S],O=[o-3*x,i-3*S],G=[o-8*x,i-8*S];r.fillStyle=a,r.beginPath(),r.moveTo(T[0],T[1]),r.lineTo(R[0],R[1]),r.lineTo(L[0],L[1]),r.lineTo(P[0],P[1]),r.lineTo(G[0],G[1]),r.lineTo(O[0],O[1]),r.lineTo(A[0],A[1]),r.closePath(),r.fill()}p(Ou,"drawAnchorTo");function Vu(r,n){let e=1-r,o=e**3,i=3*e**2*r,s=3*e*r**2,a=r**3,u=o*n[0]+i*n[4]+s*n[6]+a*n[2],l=o*n[1]+i*n[5]+s*n[7]+a*n[3];return[u,l]}p(Vu,"bezierPoint");function Bf(r,n){let e=Number(n),o=r[0+e],i=r[2+e],s=r[4+e],a=r[6+e],u=-3*o+9*s-9*a+3*i,l=6*o-12*s+6*a,c=-3*o+3*s,d=[],h;if(Math.abs(u)<1e-6)Math.abs(l)>1e-6&&(h=-c/l)>0&&h<1&&d.push(h);else{let m=l**2-4*u*c;if(m>=0){let f=Math.sqrt(m);h=(-l-f)/(2*u),h>0&&h<1&&d.push(h),h=(-l+f)/(2*u),h>0&&h<1&&d.push(h)}}return d}p(Bf,"bezierExtrema");function Jb(r,n){let e=Bf(r,!1),o=Bf(r,!0),i=[0,1,...e,...o],s=1/0,a=-1/0,u=1/0,l=-1/0;for(let c of i){let[d,h]=Vu(c,r);s=Math.min(s,d),a=Math.max(a,d),u=Math.min(u,h),l=Math.max(l,h)}return[s-n,u-n,a+n,l+n]}p(Jb,"bezierBoundingBox");function Yf(r,n,e){let[o,i,s,a]=e,u=(s-o)**2+(a-i)**2;if(u===0)return r===o&&n===i;let l=((r-o)*(s-o)+(n-i)*(a-i))/u;if(l<0||l>1)return!1;let c=o+l*(s-o),d=i+l*(a-i);return(r-c)**2+(n-d)**2<=Nf}p(Yf,"isPointOnStraightWire");function Xf(r){let[n,e,o,i]=r,s=Math.sqrt((o-n)**2+(i-e)**2),u=1/Math.max(3,Math.ceil(s/Go*1.25)),l=Jb(r,Go/2),c={tStepSize:u,boundingBox:l};return[...r,c]}p(Xf,"makeBezierCoords");function jf(r,n,e){let o=e[8],[i,s,a,u]=o.boundingBox;if(r<i||r>a||n<s||n>u)return!1;let l=o.tStepSize;for(let c=0;c<=1;c+=l){let[d,h]=Vu(c,e);if((d-r)**2+(h-n)**2<=Nf)return!0}return!1}p(jf,"isPointOnBezierWire");function Ee(r,n){let e="",o=!1,i=n?a=>e=e+a:a=>e=a+e;for(let a of r)U(a)||be(a)?(o=!0,i(a)):i(+a);let s=o?I:parseInt(e,2);return[e,s]}p(Ee,"displayValuesFromArray");function gr(r,n,e,o=!0){if(U(r))return I;if(n===-10){let i=(r>>>0).toString(2).padStart(e,"0");if(i[0]==="1"){let s=parseInt(i.substring(1),2);return"\u2013"+String(-(-Math.pow(2,e-1)+s))}else return String(r)}else{let i=n===10?1:Math.ceil(Math.log(Math.pow(2,e))/Math.log(n)),s=r.toString(n).toUpperCase().padStart(i,"0");return(o?(()=>{switch(n){case 16:return"0x";case 8:return"0o";case 2:return"0b";default:return""}})():"")+s}}p(gr,"formatWithRadix");var Wu=pe(_e());var Dr={none:"none",up:"up",down:"down"},Wn=ye("pass",!0,!0,{variantName:({bits:r})=>`pass-${r}`,idPrefix:"pass",button:{imgWidth:32},repr:{bits:N(Wu.number),slant:N(Wu.keyof(Dr))},valueDefaults:{slant:Dr.none},params:{bits:Se(1,[1,2,3,4,8,16])},validateParams:({bits:r})=>({numBits:r}),size:({numBits:r})=>({gridWidth:2,gridHeight:qe(r)?r:2*r}),makeNodes:({numBits:r})=>({ins:{In:ue("w",-1,0,r,void 0,{leadLength:10})},outs:{Out:ue("e",1,0,r,void 0,{leadLength:10})}}),initialValue:(r,{numBits:n})=>j(!1,n)}),Hu=class extends xe{constructor(e,o,i){var s;super(e,Wn.with(o),i);this.numBits=o.numBits,this._hShift=[0,0],this._slant=(s=i==null?void 0:i.slant)!=null?s:Wn.aults.slant,this.updateNodeOffsets()}toJSON(){return{...this.toJSONBase(),bits:this.numBits===Wn.aults.bits?void 0:this.numBits,slant:this._slant===Wn.aults.slant?void 0:this._slant}}destroy(){var o;let e=[];for(let i=0;i<this.numBits;i++){let s=(o=this.inputs.In[i].incomingWire)==null?void 0:o.startNode;if(s===void 0||!(s instanceof Uo))continue;let a=[];for(let u of this.outputs.Out[i].outgoingWires){let l=u.endNode;l!==null&&a.push([l,u.style])}a.length>0&&e.push([s,a])}if(super.destroy(),e.length>0){let i=this.parent.linkMgr;for(let[s,a]of e)for(let[u,l]of a){let c=i.addWire(s,u,!1);if(c===void 0){console.error("Failed to add wire back");continue}l!==void 0&&c.doSetStyle(l)}}}get alwaysDrawMultiOutNodes(){return!0}doRecalcValue(){return this.inputValues(this.inputs.In)}propagateValue(e){this.outputValues(this.outputs.Out,e)}isOver(e,o){if(this._slant===Dr.none)return super.isOver(e,o);let i=0,s=0;switch(this._slant){case Dr.up:i=this.inputs.In[0].posY,s=-1;break;case Dr.down:i=this.inputs.In[this.numBits-1].posY,s=1;break}let a=(o-i)*s;return super.isOver(e+a,o)}makeTooltip(){return $(void 0,W(V(C.Components.Passthrough.tooltip)))}doDraw(e,o){let s=this.unrotatedHeight,a=this.posY-s/2,u=a+s,l=4,[c,d]=this._hShift;for(let h of this.inputs._all)Be(e,h);for(let h of this.outputs._all)Be(e,h);e.beginPath(),e.moveTo(this.posX+c,a),e.lineTo(this.posX+d,u),o.isMouseOver?(e.lineWidth=3+l*2,e.strokeStyle=Js,e.stroke(),e.strokeStyle=J):e.strokeStyle=dt,this.parent.mode>=2&&(e.lineWidth=3,e.stroke())}makeComponentSpecificContextMenuItems(){if(this.numBits===1)return[];let e=C.Components.Passthrough.contextMenu,o=p((i,s)=>{let a=this._slant===s,u=a?"check":"none",l=a?()=>{}:()=>this.doSetSlant(s);return E.item(u,i,l)},"makeItemSetSlant");return[["mid",E.submenu("slanted",e.Slant,[o(e.SlantNone,Dr.none),E.sep(),o(e.SlantRight,Dr.down),o(e.SlantLeft,Dr.up)])],["mid",E.sep()],this.makeChangeParamsContextMenuItem("inputs",C.Components.Generic.contextMenu.ParamNumBits,this.numBits,"bits")]}doSetSlant(e){this._slant=e,this.updateNodeOffsets(),this.requestRedraw({why:"slant changed",invalidateMask:!0})}updateNodeOffsets(){let e=this.numBits;switch(this._slant){case"none":for(let o=0;o<e;o++)this.inputs.In[o].gridOffsetX=-1,this.outputs.Out[o].gridOffsetX=1;this._hShift=[0,0];break;case"down":{let o=e>4?1:2;for(let i=0;i<e;i++){let s=o*(e-1-i);this.inputs.In[i].gridOffsetX=-1+s,this.outputs.Out[i].gridOffsetX=1+s}this._hShift=[o*(e-.5)*H,-o*H/2];break}case"up":{let o=e>4?1:2;for(let i=0;i<e;i++){let s=o*i;this.inputs.In[i].gridOffsetX=-1+s,this.outputs.Out[i].gridOffsetX=1+s}this._hShift=[-o*H/2,o*(e-.5)*H];break}}}};p(Hu,"Passthrough");Wn.impl=Hu;var oa=class{constructor(n){this.parts=n;this._length=void 0}get length(){if(this._length===void 0){let n=document.createElementNS("http://www.w3.org/2000/svg","path");n.setAttributeNS(null,"d",ey(this.parts)),this._length=n.getTotalLength()}return this._length}draw(n){n.beginPath();let e=this.parts[0];n.moveTo(e[0],e[1]);for(let o of this.parts)o.length===4?n.lineTo(o[2],o[3]):n.bezierCurveTo(o[4],o[5],o[6],o[7],o[2],o[3])}drawBezierDebug(n){n.strokeStyle="red",n.lineWidth=1;for(let e of this.parts){if(e.length===4)continue;let o=e[8],[i,s,a,u]=o.boundingBox;n.strokeRect(i,s,a-i,u-s);let l=o.tStepSize;for(let c=0;c<=1;c+=l){let[d,h]=Vu(c,e);n.beginPath(),ln(n,d,h,Go),n.stroke()}}}isOver(n,e){return this.partIndexIfMouseover(n,e)!==void 0}partIndexIfMouseover(n,e){for(let o=0;o<this.parts.length-1;o++){let i=this.parts[o];if(i.length===4){if(Yf(n,e,i))return o}else if(jf(n,e,i))return o}}};p(oa,"WirePath");function ey(r){let n=r[0],e=[`M${n[0]} ${n[1]}`];for(let o of r)o.length===4?e.push(`L${o[2]} ${o[3]}`):e.push(`C${o[4]} ${o[5]},${o[6]} ${o[7]},${o[2]} ${o[3]}`);return e.join(" ")}p(ey,"buildPathDesc");var bn=class extends Kn{constructor(e,o){super(e.parent,bn.toSuperRepr(o));this.wire=e}static get Repr(){return Ce.union([Ce.tuple([Ce.number,Ce.number,Ce.keyof(Wi),eu(Ce.string),Ce.partial({lockPos:Ce.boolean})]),Ce.tuple([Ce.number,Ce.number,Ce.keyof(Wi),Ce.string]),Ce.tuple([Ce.number,Ce.number,Ce.keyof(Wi)]),Ce.tuple([Ce.number,Ce.number])],"Wire")}static toSuperRepr(e){if(e===void 0)return;let[o,i,s,a,u]=e;return{pos:[o,i],anchor:a===null?void 0:a,lockPos:u==null?void 0:u.lockPos,orient:s,ref:void 0}}toJSON(){var o;let e=(o=this.anchor)==null?void 0:o.ref;return this.lockPos?[this.posX,this.posY,this.orient,e!=null?e:null,{lockPos:this.lockPos}]:e!==void 0?[this.posX,this.posY,this.orient,e]:this.orient!==ce.default?[this.posX,this.posY,this.orient]:[this.posX,this.posY]}doSetOrient(e){super.doSetOrient(e),this.wire.invalidateWirePath()}get unrotatedWidth(){return fo}get unrotatedHeight(){return fo}isOver(e,o){return this.parent.mode>=2?mu(e,o,this.posX,this.posY,!1)!==void 0:!1}positionChanged(e){this.wire.invalidateWirePath()}cursorWhenMouseover(e){var i;let o=this.parent.mode;if((i=e==null?void 0:e.ctrlKey)!=null&&i&&o>=2)return"context-menu";if(!this.lockPos&&o>=2)return"grab"}getPrevAndNextAnchors(){var a;let e=this.wire.waypoints,o=e.indexOf(this),i=o>0?e[o-1]:this.wire.startNode,s=o<e.length-1?e[o+1]:(a=this.wire.endNode)!=null?a:this.wire.startNode;return[i,s]}removeFromParent(){this.wire.removeWaypoint(this)}doDraw(e,o){if(this.parent.mode<2||this.wire.behavesHidden)return;e.globalAlpha=this.wire.isHidden?sp:1;let i=this.parent.editor.options.hideWireColors;gu(e,o,this.posX,this.posY,5,this.wire.startNode.value,o.isMouseOver,i,!1,!1,!1),e.globalAlpha=1}makeContextMenu(){return[...this.makeOrientationAndPosMenuItems().map(e=>e[1]),E.sep(),E.item("trash",C.Components.Generic.contextMenu.Delete,()=>{this.removeFromParent()},"\u232B",!0)]}};p(bn,"Waypoint");var ct={auto:"auto",straight:"straight",hv:"hv",vh:"vh",bezier:"bezier"},eo=class extends Ln{constructor(e,o){let i=e.parent;super(i);this._waypoints=[];this._wirePath=void 0;this._style=void 0;this._isHidden=!1;this._propagatingValues=[];this._waypointBeingDragged=void 0;this.customPropagationDelay=void 0;this.ribbon=void 0;this._startNode=e,this._endNode=o;let s=Number.MIN_SAFE_INTEGER/2;this._propagatingValues.push([e.value,s]),this.setStartNode(e),this.setEndNode(o)}static get Repr(){let e=Ce.tuple([Ce.number,Ce.number]),o=Ce.tuple([Ce.number,Ce.number,Ce.type({ref:N(Ce.string),via:N(Ce.array(bn.Repr)),propagationDelay:N(Ce.number),style:N(Ce.keyof(ct)),hidden:N(Ce.boolean)})]);return Ce.union([o,e],"Wire")}setOptions(e,o){this.doSetValidatedId(e.ref),e.via!==void 0&&this.setWaypoints(e.via,o),e.propagationDelay!==void 0&&(this.customPropagationDelay=e.propagationDelay),e.style!==void 0&&this.doSetStyle(e.style),e.hidden!==void 0&&this.doSetHidden(e.hidden)}toJSON(){let e=this._endNode.id;if(this._waypoints.length===0&&this.customPropagationDelay===void 0&&this.ref===void 0&&this.style===void 0&&!this.isHidden)return[this._startNode.id,e];{let o=this._waypoints.map(i=>i.toJSON());return[this._startNode.id,e,{ref:this.ref,via:o.length===0?void 0:o,propagationDelay:this.customPropagationDelay,style:this.style,hidden:this.isHidden===!1?void 0:this.isHidden}]}}get startNode(){return this._startNode}get endNode(){return this._endNode}isInRect(e){return!1}get waypoints(){return this._waypoints}setWaypoints(e,o){this._waypoints=e.map(i=>{let s=new bn(this,i),a=i[3];if(Z(a)){let u=o[a];u!==void 0?s.anchor=u:console.warn(`Couldn't find anchor '${a}' for waypoint of wire between ${this._startNode.component.ref} and ${this._endNode.component.ref}`)}return s})}get wirePath(){var e;if(this._wirePath===void 0){let[o,i,s,a,u]=this.startNode.drawCoords,[l,c,d,h,m]=this.endNode.drawCoords,f={posX:d,posY:h,orient:m},g=[...this._waypoints,f],D=[[o,i,s,a]],y=(e=this.style)!=null?e:this.startNode.parent.editor.options.wireStyle;for(let w of g){let x=w.posX,S=w.posY,T=x-s,A=S-a,P=w.orient,R,L,O,G;if(y===ct.straight||y===ct.auto&&(s===x||a===S))D.push([s,a,x,S]);else if(y===ct.hv)s!==x&&D.push([s,a,x,a]),a!==S&&D.push([x,a,x,S]);else if(y===ct.vh)a!==S&&D.push([s,a,s,S]),s!==x&&D.push([s,S,x,S]);else{let B=Math.max(25,Math.abs(T)/3),Q=Math.max(25,Math.abs(A)/3);[R,L]=Yi(u,s,a,B,Q),[O,G]=Yi(P,x,S,B,Q),D.push(Xf([s,a,x,S,R,L,O,G]))}s=x,a=S,u=ce.invert(P)}D.push([s,a,l,c]),this._wirePath=new oa(D)}return this._wirePath}invalidateWirePath(){this._wirePath=void 0}get style(){return this._style}doSetStyle(e){this._style=e,this.invalidateWirePath(),this.requestRedraw({why:"style changed",invalidateMask:!0})}get isHidden(){return this._isHidden}get behavesHidden(){return this._isHidden&&!this.parent.editor.options.showHiddenWires}doSetHidden(e){this._isHidden=e,this.requestRedraw({why:"hidden changed",invalidateMask:!0})}setStartNode(e,o){this._startNode!==void 0&&this._startNode.removeOutgoingWire(this),this._startNode=e,e.addOutgoingWire(this),o!==void 0&&this.propagateNewValue(this._startNode.value,o),this.invalidateWirePath()}setEndNode(e){this._endNode!==void 0&&(this._endNode.incomingWire=null),this._endNode=e,e.incomingWire!==null&&e.incomingWire!==void 0&&console.warn(`Unexpectedly replacing existing incoming wire on node ${this._endNode.id}`),e.incomingWire=this,e.value=this._startNode.value,e.doSetColor(this._startNode.color),this.invalidateWirePath()}propagateNewValue(e,o){var s;this._propagatingValues[this._propagatingValues.length-1][0]!==e&&this._propagatingValues.push([e,o]);let i=(s=this.customPropagationDelay)!=null?s:this.parent.editor.options.propagationDelay;if(i===0)this.endNode.value=e,this._propagatingValues.splice(0,this._propagatingValues.length-1);else{let a=C.Components.Wire.timeline.PropagatingValue.expand({val:nt(e)});this.parent.editor.timeline.scheduleAt(o+i,()=>{this.endNode.value=e},a,!1)}}destroy(){Xc.isOutput(this._startNode)&&this._startNode.removeOutgoingWire(this),this._endNode!==null&&(this._endNode.incomingWire=null)}get isAlive(){return this.startNode.isAlive&&this.endNode.isAlive}addPassthroughFrom(e){let o=this.parent,[i,s]=o.editor.offsetXYForContextMenu(e,!0),a=this.endNode,u=Wn.make(o,{bits:1});u.setSpawned(),u.setPosition(i,s,!1),this.setEndNode(u.inputs.In[0]);let l=o.linkMgr.addWire(u.outputs.Out[0],a,!1);if(l===void 0){console.warn("Couldn't create new wire");return}return l.doSetStyle(this.style),u}addWaypointFrom(e){let[o,i]=this.parent.editor.offsetXYForContextMenu(e,!1);return this.addWaypointWith(o,i)}addWaypointWith(e,o){let i=this.wirePath,s=i.partIndexIfMouseover(e,o);s===void 0&&(console.warn(`Couldn't find waypoint to insert at for (${e}, ${o})`),s=1);let[a,u,l,c]=i.parts[s],d=l-a,h=c-u,m;Math.abs(d)>=Math.abs(h)?l>=a?m="e":m="w":c>=u?m="s":m="n";let f=new bn(this,[e,o,m]);return this._waypoints.splice(s-1,0,f),this.invalidateWirePath(),f}removeWaypoint(e){let o=this._waypoints.indexOf(e);o!==-1&&(this._waypoints.splice(o,1),this.invalidateWirePath(),this.requestRedraw({why:"waypoint deleted",invalidateMask:!0}))}prunePropagatingValues(e,o){let i=0;for(let s=1;s<this._propagatingValues.length&&e>=this._propagatingValues[s][1]+o;s++)i=s;return i>0&&this._propagatingValues.splice(0,i),this._propagatingValues[0][0]}doDraw(e,o){var m,f,g;let i=this._propagatingValues.length>1,s=this.parent.editor.options,a=(m=this.customPropagationDelay)!=null?m:s.propagationDelay,u=s.hideWireColors,l=o.drawParams.drawTime;if(this.prunePropagatingValues(l,a),this.behavesHidden)return;e.globalAlpha=this._isHidden?sp:1;let c=this.wirePath;c.draw(e);let d=o.drawParams;d.highlightColor!==void 0&&((g=(f=d.highlightedItems)==null?void 0:f.wires.includes(this))!=null&&g)&&(e.lineWidth=15,e.shadowColor=d.highlightColor,e.shadowBlur=20,e.shadowOffsetX=0,e.shadowOffsetY=0,e.strokeStyle=e.shadowColor,e.stroke(),e.shadowBlur=0);let h=this._startNode.color;if(cp(e,h,o.isMouseOver),this._propagatingValues.length===1){let[D,y]=this._propagatingValues[0],w=Math.min(1,(l-y)/a);w<1&&console.warn(`Propagating value not fully propagated but drawn as such (frac=${w} < 1.0, drawTime=${l}, timeSet=${y}, propagationDelay=${a})`),ku(e,D,void 0,u,d.drawTimeAnimationFraction)}else{let D=c.length;for(let[y,w]of this._propagatingValues){let x=Math.min(1,(l-w)/a),S=D*x;ku(e,y,[S,D],u,d.drawTimeAnimationFraction)}}e.globalAlpha=1,i&&!this.parent.editor.timeline.isPaused&&this.requestRedraw({why:"propagating value",isPropagation:!0})}isOver(e,o){return this.parent.mode<2||!this.startNode.isAlive||!this.endNode.isAlive||this.behavesHidden?!1:this.wirePath.isOver(e,o)}pointerDown(e){if(e.altKey&&this.parent.mode>=3){let o=this.addPassthroughFrom(e);if(o!==void 0)return o.outputs.Out[0].pointerDown(e)}return super.pointerDown(e)}pointerDragged(e){if(this._waypointBeingDragged!==void 0)this._waypointBeingDragged.pointerDragged(e);else if(this.parent.editor.eventMgr.currentSelectionEmpty()){let o=this.addWaypointFrom(e);this._waypointBeingDragged=o,o.pointerDown(e),o.pointerDragged(e)}}pointerUp(e){return this._waypointBeingDragged!==void 0?(this._waypointBeingDragged.pointerUp(e),this._waypointBeingDragged=void 0,X.SimpleChange):X.NoChange}makeContextMenu(){let e=C.Components.Wire.contextMenu,o=this.customPropagationDelay===void 0?"":` (${this.customPropagationDelay} ms)`,i=p((c,d)=>{let h=this._startNode.color===d,m=h?"check":"none",f=h?()=>{}:()=>this._startNode.doSetColor(d),g=Zr[d];return E.item(m,ke(pt(c),fe(`display: inline-block; width: 140px; height: ${Go}px; background-color: ${g}; margin-right: 8px`)),f)},"makeItemUseColor"),s=p((c,d)=>{let h=this.style===d,m=h?"check":"none",f=h?()=>{}:()=>this.doSetStyle(d);return E.item(m,c,f)},"makeItemDisplayStyle"),a=E.item(this.isHidden?"check":"none",e.HiddenWire,()=>{this.doSetHidden(!this.isHidden)}),u=this.parent.mode<3?[]:[E.sep(),E.item("timer",e.CustomPropagationDelay.expand({current:o}),c=>{let d=this.customPropagationDelay===void 0?"":String(this.customPropagationDelay),h=String(this.parent.editor.options.propagationDelay),m=e.CustomPropagationDelayDesc.expand({current:h}),f=prompt(m,d);if(f!==null)if(f==="")this.customPropagationDelay=void 0;else{let g=parseInt(f);isNaN(g)||(this.customPropagationDelay=g)}}),E.submenu("palette",e.WireColor,[i(e.WireColorBlack,Jn.black),i(e.WireColorRed,Jn.red),i(e.WireColorBlue,Jn.blue),i(e.WireColorYellow,Jn.yellow),i(e.WireColorGreen,Jn.green),i(e.WireColorWhite,Jn.white)]),E.submenu("wirestyle",e.WireStyle,[s(e.WireStyleDefault,void 0),E.sep(),s(e.WireStyleAuto,ct.auto),s(e.WireStyleStraight,ct.straight),s(e.WireStyleSquareHV,ct.hv),s(e.WireStyleSquareVH,ct.vh),s(e.WireStyleCurved,ct.bezier)]),E.sep(),a],l=this.parent.mode<4?[]:[E.sep(),this.makeSetIdContextMenuItem()];return[E.item("add",e.AddMiddlePoint,(c,d)=>{this.addWaypointFrom(d)}),E.item("add",e.AddPassthrough,(c,d)=>{this.addPassthroughFrom(d)}),...u,...l,E.sep(),E.item("trash",C.Components.Generic.contextMenu.Delete,()=>this.parent.linkMgr.deleteWire(this),"\u232B",!0)]}};p(eo,"Wire");var Uu=class extends Ln{constructor(e,o,i){super(e);this.startNodeGroup=o;this.endNodeGroup=i;this._startGroupStartIndex=Number.MAX_SAFE_INTEGER;this._startGroupEndIndex=Number.MIN_SAFE_INTEGER;this._endGroupStartIndex=Number.MAX_SAFE_INTEGER;this._endGroupEndIndex=Number.MIN_SAFE_INTEGER;this._coveredWires=[]}isEmpty(){return this._coveredWires.length===0}addCoveredWire(e,o,i){this._coveredWires.push(e),this.updateIndices(o,i)}wireWasDeleted(e){}updateIndices(e,o){this._startGroupStartIndex=Math.min(this._startGroupStartIndex,e),this._startGroupEndIndex=Math.max(this._startGroupEndIndex,e),this._endGroupStartIndex=Math.min(this._endGroupStartIndex,o),this._endGroupEndIndex=Math.max(this._endGroupEndIndex,o)}doDraw(e,o){let[[i,s],a]=this.drawRibbonEnd(e,o,this.startNodeGroup,this._startGroupStartIndex,this._startGroupEndIndex),[[u,l],c]=this.drawRibbonEnd(e,o,this.endNodeGroup,this._endGroupStartIndex,this._endGroupEndIndex),d=u-i,h=l-s,m=Math.max(25,Math.abs(d)/3),f=Math.max(25,Math.abs(h)/3),[g,D]=Yi(ce.invert(a),i,s,m,f),[y,w]=Yi(ce.invert(c),u,l,m,f),x=new je(i,s,g,D,y,w,u,l),S=[];for(let T=this._startGroupStartIndex;T<=this._startGroupEndIndex;T++)S.push(this.startNodeGroup.nodes[T].value);this.strokeWireBezier(e,x,S,Jn.black,o.isMouseOver,!1)}strokeWireBezier(e,o,i,s,a,u){let l=i.length,c=l===1?1:l<=4||l>8?2:3,d=1,h=l<=8?2:1;if(l===0)return;let m=2*c+l*h+(l-1)*d,f=p(x=>{let[S,T,A,P]=x.points;e.moveTo(S.x,S.y),e.bezierCurveTo(T.x,T.y,A.x,A.y,P.x,P.y)},"addBezierToPath"),g=p(x=>{e.beginPath(),f(x),e.stroke()},"drawBezier"),D=p(x=>{if(ae(x)){e.beginPath();for(let S of x)f(S);e.stroke()}},"drawBeziers"),y=e.lineCap;e.lineCap="butt",a?(e.lineWidth=m+2,e.strokeStyle=Zn,g(o),e.lineWidth=m-2*c):e.lineWidth=m,e.strokeStyle=Zr[s],g(o),e.lineWidth=h;let w=-((l-1)/2)*(h+d);for(let x of i){e.strokeStyle=u?dt:zt(x);let S=o.offset(w);D(S),w+=h+d}e.lineCap=y}drawRibbonEnd(e,o,i,s,a){let u=i.nodes,l=u[s].orient,c=a-s+1,d=Number.POSITIVE_INFINITY,h=Number.POSITIVE_INFINITY,m=Number.NEGATIVE_INFINITY,f=Number.NEGATIVE_INFINITY,g=0,D=0;for(let A=s;A<=a;A++){let P=u[A],R=P.posX,L=P.posY;d=Math.min(d,R),h=Math.min(h,L),m=Math.max(m,R),f=Math.max(f,L),g+=R,D+=L}let[[y,w],[x,S],T]=(()=>{switch(l){case"e":return[[m,h],[m,f],[m,D/c]];case"w":return[[d,h],[d,f],[d,D/c]];case"s":return[[d,h],[m,h],[g/c,h]];case"n":return[[d,f],[m,f],[g/c,f]]}})();return lp(e,y,w,x,S,"Z","black",!0,o.drawParams.drawTimeAnimationFraction),[T,l]}isOver(e,o){return!1}isInRect(e){return!1}};p(Uu,"Ribbon");var oi=class{constructor(n){this._wires=[];this._ribbons=[];this._wireBeingAddedFrom=void 0;this._anchorBeingSetFrom=void 0;this.parent=n}get wires(){return this._wires}get ribbons(){return this._ribbons}get isAddingWire(){return this._wireBeingAddedFrom!==void 0}get isSettingAnchor(){return this._anchorBeingSetFrom!==void 0}draw(n,e){this.removeDeadWires();let o=this.parent.editor.options.groupParallelWires;if(o)for(let i of this._ribbons)i.draw(n,e);for(let i of this._wires)if(!(o&&i.ribbon!==void 0)){i.draw(n,e);for(let s of i.waypoints)s.draw(n,e)}this.drawWireBeingAdded(n,e),this.drawAnchorBeingSet(n)}drawWireBeingAdded(n,e){let o=this._wireBeingAddedFrom;if(o!==void 0){let i=o.posX,s=o.posY,a=this.parent.editor,u=a.pointerX,l=a.pointerY;if(n.beginPath(),n.moveTo(i,s),this.parent.editor.options.wireStyle===ct.straight)n.lineTo(u,l);else{let c=u-i,d=l-s,h=Math.max(25,Math.abs(c)/3),m=Math.max(25,Math.abs(d)/3),f=ce.add(o.component.orient,o.orient),[g,D]=Yi(ce.invert(f),i,s,h,m),[y,w]=Yi(f,u,l,h,m);n.bezierCurveTo(g,D,y,w,u,l)}ti(n,o.value,o.color,!1,e.drawTimeAnimationFraction)}}drawAnchorBeingSet(n){let e=this._anchorBeingSetFrom;if(e!==void 0){let o=e.posX,i=e.posY,s=this.parent.editor,a=s.pointerX,u=s.pointerY;Ou(n,o,i,a,u,6,Pu,void 0)}}removeDeadWires(){let n=0;for(;n<this._wires.length;){let e=this._wires[n];e.isAlive?n++:(e.destroy(),this._wires.splice(n,1))}}addWire(n,e,o){var s,a,u;if(!n.acceptsMoreConnections||!e.acceptsMoreConnections)return;let i=new eo(n,e);return this._wires.push(i),o&&this.offsetWireIfNeeded(i),this.tryMergeWire(i),(s=this.parent.ifEditing)==null||s.setToolCursor(null),(a=this.parent.ifEditing)==null||a.setDirty("added wire"),(u=this.parent.ifEditing)==null||u.redrawMgr.requestRedraw({why:"wire added",invalidateMask:!0,invalidateTests:!0}),i}startSettingAnchorFrom(n){var e;this._anchorBeingSetFrom!==void 0&&console.warn("LinkManager.startSettingAnchorFrom: already setting anchor from a drawable"),this._anchorBeingSetFrom=n,(e=this.parent.ifEditing)==null||e.setToolCursor("alias")}stopSettingAnchorOn(n){let e=this._anchorBeingSetFrom;return e?this.trySetAnchor(e,n):X.NoChange}trySetAnchor(n,e){if(this.tryCancelSetAnchor(),e.ref===void 0&&console.warn("LinkManager.stopSettingAnchorOn: component has no ref"),e!==n){let o=!1,i=e;for(;i.anchor!==void 0;)if(i=i.anchor,i===n){o=!0;break}if(o)this.parent.editor.showMessage(C.Messages.CircularAnchorsForbidden);else return n.anchor=e,this.parent.editor.showMessage(C.Messages.AnchorAdded),X.SimpleChange}return X.NoChange}tryCancelSetAnchor(){var n;this._anchorBeingSetFrom=void 0,(n=this.parent.ifEditing)==null||n.setToolCursor(null)}startDraggingWireFrom(n){var e;this._wireBeingAddedFrom!==void 0&&console.warn("LinkManager.startDraggingFrom: already dragging from a node"),n.acceptsMoreConnections&&(this._wireBeingAddedFrom=n,(e=this.parent.ifEditing)==null||e.setToolCursor("crosshair"))}stopDraggingWireOn(n){let e=this.getOutInNodesForNewWire(n);if(this._wireBeingAddedFrom=void 0,e!==void 0)return this.addWire(e[0],e[1],!0)}isValidNodeToConnect(n){return this.getOutInNodesForNewWire(n)!==void 0}getOutInNodesForNewWire(n){var o,i;let e=this._wireBeingAddedFrom;if(e!==void 0&&n!==e){if(e.isOutput())return n.isOutput()||!n.acceptsMoreConnections?void 0:[e,n];if(n.isOutput())return[n,e];{let s=(o=n.incomingWire)==null?void 0:o.startNode;return s!==void 0&&e.acceptsMoreConnections?[s,e]:(s=(i=e.incomingWire)==null?void 0:i.startNode,s!==void 0&&n.acceptsMoreConnections?[s,n]:void 0)}}}tryCancelWireOrAnchor(){var n,e;return this._wireBeingAddedFrom!==void 0?(this._wireBeingAddedFrom=void 0,(n=this.parent.ifEditing)==null||n.setToolCursor(null),!0):this._anchorBeingSetFrom!==void 0?(this._anchorBeingSetFrom=void 0,(e=this.parent.ifEditing)==null||e.setToolCursor(null),!0):!1}offsetWireIfNeeded(n){let e=n.startNode,o=n.endNode,i=e.component;if(i!==o.component)return;let s=(o.posX-e.posX)/2,a=(o.posY-e.posY)/2,u=e.posX+s,l=e.posY+a;if(!i.isOver(u,l))return;let c=s>a,d=c?e.posX<o.posX?1:e.posX>o.posX||e.posX<i.posX?-1:1:e.posY<o.posY?1:e.posY>o.posY||e.posY<i.posY?-1:1,h=p(y=>d*(y/2+2*H),"calcOffsetFromDim"),m=ce.isVertical(i.orient),f=u+(c?h(m?i.unrotatedHeight:i.unrotatedWidth):0),g=l+(c?0:h(m?i.unrotatedWidth:i.unrotatedHeight)),D=n.addWaypointWith(f,g);D.anchor=i}tryMergeWire(n){let e=n.startNode,o=n.endNode,i=e.group,s=o.group;if(i===void 0||s===void 0)return;let a=p((d,h,m,f)=>{if(!(h<0||f<0||h>=d.nodes.length||f>=m.nodes.length))return d.nodes[h].findWireTo(m.nodes[f])},"findWire"),u=i.nodes.indexOf(e),l=s.nodes.indexOf(o),c=a(i,u-1,s,l-1);if(c!==void 0){let d=c.ribbon;d===void 0&&(d=new Uu(e.parent,i,s),this._ribbons.push(d),c.ribbon=d,d.addCoveredWire(c,u-1,l-1)),d.addCoveredWire(n,u,l),n.ribbon=d}}deleteWire(n){let e=n.startNode,o=n.endNode;return this.doDeleteWire(n)?jc(e,o,(s,a)=>{let u=a.incomingWire;return u===null||u.startNode!==s?!1:this.doDeleteWire(u)}):X.NoChange}doDeleteWire(n){var o;n.destroy();let e=n.ribbon;return e!==void 0&&(e.wireWasDeleted(n),e.isEmpty()&&this._ribbons.splice(this._ribbons.indexOf(e),1)),this._wires.splice(this._wires.indexOf(n),1),(o=this.parent.ifEditing)==null||o.redrawMgr.requestRedraw({why:"wire deleted",invalidateMask:!0,invalidateTests:!0}),!0}invalidateAllWirePaths(){for(let n of this._wires)n.invalidateWirePath()}clearAll(){var n;for(let e of this._wires)e.destroy();this._wires.length=0,(n=this.parent.ifEditing)==null||n.redrawMgr.requestRedraw({why:"all wires deleted",invalidateMask:!0,invalidateTests:!0})}};p(oi,"LinkManager");function Yi(r,n,e,o,i){switch(r){case"e":return[n-o,e];case"w":return[n+o,e];case"s":return[n,e-i];case"n":return[n,e+i]}}p(Yi,"bezierAnchorForWire");var Qi="none",gp="snapshot-storage",qu="snapshot",zu=class{saveCircuitToFile(n){let e=this.stringifyObject(this.buildCircuitObject(n),!1),o=new Blob([e],{type:"application/json5"}),i=n.documentDisplayName+".json";(0,mp.saveAs)(o,i)}saveLibraryToFile(n){let e=this.stringifyObject(this.buildLibraryObject(n),!1),o=new Blob([e],{type:"application/json5"}),i=n.documentDisplayName+"-lib.json";(0,mp.saveAs)(o,i)}loadCircuitOrLibrary(n,e,o,i){let s;if(!Z(e))s=e;else try{s=Pc(e)}catch(u){return console.error(u),"can't load this JSON - error \u201C"+u+`\u201D, length = ${e.length}, JSON:
`+e}return s.type==="lib"?this.doLoadLibrary(n,s):this.loadCircuit(n,s,o,i)}pasteComponents(n,e){let o;try{o=Pc(e)}catch(c){return console.error(c),"can't load this JSON - error \u201C"+c+`\u201D, length = ${e.length}, JSON:
`+e}let i;if(ae(o.pos)){let c=n.editor,d=p(h=>Math.ceil(h/10)*10,"ceil10");i=[d(c.pointerX-o.pos[0]),d(c.pointerY-o.pos[1])]}let s=o.components;if(!ae(s)&&!Kt(s))return"invalid JSON: 'components' must be an array or an object";let{nodeMapping:a,components:u,componentsByRef:l}=this.makeComponents(n,s,i);return this.makeWires(n,o.wires,a,l,!1),u}doLoadLibrary(n,e){kc(e,n.instanceId);let o=n.factory.tryLoadCustomDefsFrom(e.defs);n.updateCustomComponentButtons(),n.showMessage(C.Messages.LoadedDefinitions.expand({n:o}))}loadCircuit(n,e,o,i){var m,f,g;let s=n.components,a={...e};try{(m=i==null?void 0:i.skipMigration)!=null&&m||kc(a,n.editor.instanceId)}catch(D){return console.error(D),"can't migrate JSON - error \u201C"+D+`\u201D, JSON:
`+br(a,{maxLength:120})}delete a.v,n.isMainEditor()&&(n.factory.clearCustomDefs(),n.factory.tryLoadCustomDefsFrom(a.defs),delete a.defs);for(let D of s.all())D.destroy();s.clearAll(),n.linkMgr.clearAll(),n.nodeMgr.clearAll(),n.isMainEditor()&&n.timeline.reset();let u=a.components,{nodeMapping:l,componentsByRef:c}=this.makeComponents(n,u,void 0);delete a.components;let d=(f=i==null?void 0:i.immediateWirePropagation)!=null?f:!1;if(this.makeWires(n,a.wires,l,c,d),delete a.wires,ae(a.tests)){let D=Fn(a.tests,gn.ReprArray,"tests");if(D!==void 0){let y=D.map(w=>new gn([w,s]));n.testSuites.set(y),(g=n.ifEditing)==null||g.testsPalette.update()}}if(delete a.tests,n.isMainEditor()){if(a.userdata!==void 0&&(typeof n.userdata=="object"&&typeof a.userdata=="object"&&(n.userdata={...a.userdata,...n.userdata}),delete a.userdata),n.setPartialOptions(a.opts),delete a.opts,o.startsWith("snapshot")){let x=!o.endsWith("storage");n.editor.editTools.undoMgr.takeSnapshot(void 0,x)}n.updateCustomComponentButtons();let y=a.scratch,w;if(y!==void 0&&Kt(y)&&Z(y.id)&&(w=n.components.get(y.id))!==void 0){delete y.id;let x=w,S=this.loadCircuitForCustomComponent(x,y);S!==void 0?console.error("Error loading scratch space: "+S):n.setEditorRoot(x)}delete a.scratch}let h=Is(a);h.length!==0&&console.warn("Unloaded data fields: "+h.join(", "))}loadCircuitForCustomComponent(n,e){let o=this.loadCircuit(n,e,Qi,{immediateWirePropagation:!0,skipMigration:!0});if(o!==void 0)return o;n.circuitDidLoad()}makeComponents(n,e,o){let i=[],s={},a=[],u=p((c,d)=>{if(c!==void 0){i.push(c),c.ref!==void 0&&(s[c.ref]=c);let h;Kt(d)&&"anchor"in d&&Z(h=d.anchor)&&a.push([c,h])}},"add"),l=n.nodeMgr.recordMappingWhile(()=>{let c=n.editor.factory;if(ae(e))for(let d of e)u(c.makeFromJSON(n,d,o),d);else if(Kt(e))for(let[d,h]of Object.entries(e))Kt(h)?(h.ref=d,u(c.makeFromJSON(n,h,o),h)):console.error(`Invalid non-object component repr: '${h}'`)});for(let[c,d]of a){let h=s[d];h!==void 0?c.anchor=h:console.warn(`Anchor '${d}' not found for component '${c.ref}'`)}return{nodeMapping:l,components:i,componentsByRef:s}}makeWires(n,e,o,i,s){let a=n.linkMgr,u=n.nodeMgr,l=n.recalcMgr;l.recalcAndPropagateIfNeeded();for(let c of ae(e)?e:[]){let d=Fn(c,eo.Repr,"wire");if(d===void 0)return;let[h,m,f]=d,g=u.findNode(h,o),D=u.findNode(m,o);if(g!==void 0&&D!==void 0&&g.isOutput()&&!D.isOutput()){let y=a.addWire(g,D,!1);y!==void 0&&(f!==void 0&&y.setOptions(f,i),s&&(y.customPropagationDelay=0)),l.recalcAndPropagateIfNeeded()}}}buildCircuitObject(n){var i;let e={v:Fi,opts:n.nonDefaultOptions(),defs:n.factory.customDefReprs(),scratch:void 0,userdata:n.userdata},o=n.editorRoot;if(!(o instanceof Gt)){let a={id:(i=o.ref)!=null?i:"n/a"};this.buildReprsInto(a,o.components.all(),o.linkMgr.wires,o.testSuites.suites),e.scratch=a}return this.buildReprsInto(e,n.components.all(),n.linkMgr.wires,n.testSuites.suites),e}buildLibraryObject(n){return{v:Fi,defs:n.factory.customDefReprs(),type:"lib"}}buildComponentsAndWireObject(n,e,o){let i={};o!==void 0&&(i.pos=o);let s=[];for(let a of n)for(let u of a.inputs._all){let l=u.incomingWire;l!==null&&n.includes(l.startNode.component)&&s.push(l)}return this.buildReprsInto(i,n,s,e),i}buildReprsInto(n,e,o,i){for(let s of e){n.components===void 0&&(n.components={});let a=s.ref;if(a===void 0){console.error("Skipping component with no id: "+s);continue}n.components[a]!==void 0&&console.error("Skipping component with duplicate id: "+s);let u=s.toJSON();n.components[a]=u}o.length!==0&&(n.wires=o.map(s=>s.toJSON())),i.length!==0&&(n.tests=i.map(s=>s.toJSON()))}removeShowOnlyFrom(n){if(n.opts!==void 0){let e=n.opts.showOnly;if(delete n.opts.showOnly,Object.keys(n.opts).length===0&&delete n.opts,ae(e)&&e.every(Z))return e}}stringifyObject(n,e){if(e)return Gu.default.stringify(n);let o={...n},i=[];Xi(i,o,"v"),Xi(i,o,"type"),Xi(i,o,"opts"),Xi(i,o,"userdata"),Xi(i,o,"pos");let s=o.defs;if(s!==void 0&&ae(s)){let l=[];for(let c of s){let d=c.circuit;delete c.circuit;let h=br(c,{maxLength:1/0});c.circuit=d;let m=[];dp(m,{...d},3,!0);let f=m.length===0?"{}":`{
      `+m.join(`,
      `)+`
    }`;h=h.slice(0,h.length-1)+", circuit: "+f+"}",l.push(h)}i.push(`defs: [
    `+l.join(`,
    `)+`
  ]`)}delete o.defs;let a=o.scratch;if(a!==void 0){let l=[];l.push(`id: ${br(a.id)}`),dp(l,{...a},2,!1),i.push(`scratch: {
    `+l.join(`,
    `)+`
  }`)}delete o.scratch,dp(i,o,1,!1);let u=Is(o);return u.length!==0&&console.error("ERROR: unprocessed fields in stringified JSON: "+u.join(", ")),`{ // JSON5
  `+i.join(`,
  `)+`
}`}};p(zu,"_Serialization");var Pe=new zu;function Xi(r,n,e){let o=n[e];o!==void 0&&r.push(`${Dp(e)}: ${br(o,{maxLength:1/0})}`),delete n[e]}p(Xi,"stringifyCompactReprTo");function dp(r,n,e,o){let i="  ".repeat(e),s=i+"  ",a,u=n.components;if(u!==void 0){if(ae(u)&&u.length!==0){let c=[];for(let d of u)c.push(br(d,{maxLength:1/0}));r.push(`components: [
${s}`+c.join(`,
${s}`)+`,
${i}]`)}else if((a=Object.entries(u)).length!==0){let c=[];for(let[d,h]of a)delete h.ref,c.push(`${Dp(d)}: ${br(h,{maxLength:1/0})}`);r.push(`components: {
${s}`+c.join(`,
${s}`)+`,
${i}}`)}}if(delete n.components,o&&n.wires!==void 0)for(let c of n.wires){let d=c[2];d!==void 0&&(delete d.propagationDelay,ty(d)&&c.splice(2,1))}Xi(r,n,"wires");let l=n.tests;if(l!==void 0&&l.length!==0){let c=s+"  ",d=[];for(let h of l){let m="cases",f=h[m],g=f.map(x=>br(x,{maxLength:1/0})).filter(x=>x.length!==0);h.cases=void 0;let D=br(h,{maxLength:1/0}).slice(1,-1),y=D.length===0?"":", ";h.cases=f;let w=g.length===0?`${m}: []`:`${m}: [
${c}`+g.join(`,
${c}`)+`,
${s}]`;d.push(`{${D}${y}${w}}`)}r.push(`tests: [
${s}`+d.join(`,
${s}`)+`,
${i}]`)}delete n.tests}p(dp,"stringifyComponentWiresTestsReprsTo");function ty(r){for(let n of Object.values(r))if(n!==void 0)return!1;return!0}p(ty,"allValuesUndefined");var ny=/("([^\\"]|\\.)*")|[:,]/g;function br(r,n){var s,a;n!=null||(n={});let e=JSON.stringify([1],void 0,(s=n.indent)!=null?s:2).slice(2,-3),o=e===""?1/0:(a=n.maxLength)!=null?a:80,i=n.replacer;return p(function u(l,c,d){l!==void 0&&typeof l.toJSON=="function"&&(l=l.toJSON());let h=Gu.default.stringify(l,i);if(h===void 0)return h;let m=o-c.length-d;if(h.length<=m){let f=h.replace(ny,function(g,D){return D!=null?D:g+" "});if(f.length<=m)return f}if(i!==null&&(l=Gu.default.parse(h),i=void 0),typeof l=="object"&&l!==null){let f=c+e,g=[],D=0,y,w;if(ae(l))for(y="[",w="]",m=l.length;D<m;D++)g.push(u(l[D],f,D===m-1?0:1)||"null");else{y="{",w="}";let x=Object.keys(l);for(m=x.length;D<m;D++){let S=x[D],T=Dp(S)+": ",A=u(l[S],f,T.length+(D===m-1?0:1));A!==void 0&&g.push(T+A)}}if(g.length>0)return[y,e+g.join(`,
`+f),w].join(`
`+c)}return h},"_stringify")(r,"",0)}p(br,"stringifySmart");function Dp(r){if(r.length===0)return fp(r);let n=String.fromCodePoint(r.codePointAt(0));if(!ji.isIdStartChar(n))return fp(r);for(let e=n.length;e<r.length;e++)if(!ji.isIdContinueChar(String.fromCodePoint(r.codePointAt(e))))return fp(r);return r}p(Dp,"stringifyKey");var hp={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};function fp(r){let n={"'":.1,'"':.2},e="";for(let i=0;i<r.length;i++){let s=r[i];switch(s){case"'":case'"':n[s]++,e+=s;continue;case"\0":if(ji.isDigit(r[i+1])){e+="\\x00";continue}}if(hp[s]!==void 0){e+=hp[s];continue}if(s<" "){let a=s.charCodeAt(0).toString(16);e+="\\x"+("00"+a).substring(a.length);continue}e+=s}let o=Is(n).reduce(function(i,s){return n[i]<n[s]?i:s});return e=e.replace(new RegExp(o,"g"),hp[o]),o+e+o}p(fp,"quoteString");var ia=pe(_e());var Ki=pe(_e());var yr=Wt.withProps()({not:{out:([r])=>r===!1?!0:r===!0?!1:I,includeInContextMenu:!0,includeInPoseAs:!0,fullShortDesc:()=>C.Components.Gate.not},buf:{out:([r])=>r===!0?!0:r===!1?!1:I,includeInContextMenu:!0,includeInPoseAs:!0,fullShortDesc:()=>C.Components.Gate.buf}}),Zf=Ki.keyof(yr.props),ri=Wt.withProps()({and:{out:Qf,includeInContextMenu:!0,includeInPoseAs:!0,fullShortDesc:()=>C.Components.Gate.and},or:{out:bp,includeInContextMenu:!0,includeInPoseAs:!0,fullShortDesc:()=>C.Components.Gate.or},xor:{out:Kf,includeInContextMenu:!0,includeInPoseAs:!0,fullShortDesc:()=>C.Components.Gate.xor},nand:{out:r=>Xe.invert(Qf(r)),includeInContextMenu:!0,includeInPoseAs:!0,fullShortDesc:()=>C.Components.Gate.nand},nor:{out:r=>Xe.invert(bp(r)),includeInContextMenu:!0,includeInPoseAs:!0,fullShortDesc:()=>C.Components.Gate.nor},xnor:{out:r=>Xe.invert(Kf(r)),includeInContextMenu:!0,includeInPoseAs:!0,fullShortDesc:()=>C.Components.Gate.xnor}}),oy=Ki.keyof(ri.props),Yu=Wt.withProps()({imply:{out:r=>$u(r[0],r[1]),includeInContextMenu:!0,includeInPoseAs:!0,fullShortDesc:()=>C.Components.Gate.imply},rimply:{out:r=>$u(r[1],r[0]),includeInContextMenu:!1,includeInPoseAs:!0,fullShortDesc:()=>C.Components.Gate.rimply},nimply:{out:r=>Xe.invert($u(r[0],r[1])),includeInContextMenu:!0,includeInPoseAs:!0,fullShortDesc:()=>C.Components.Gate.nimply},rnimply:{out:r=>Xe.invert($u(r[1],r[0])),includeInContextMenu:!1,includeInPoseAs:!0,fullShortDesc:()=>C.Components.Gate.rnimply},txa:{out:r=>r[0],includeInContextMenu:!0,includeInPoseAs:!1,fullShortDesc:()=>C.Components.Gate.txa},txb:{out:r=>r[1],includeInContextMenu:!1,includeInPoseAs:!1,fullShortDesc:()=>C.Components.Gate.txb},txna:{out:r=>Xe.invert(r[0]),includeInContextMenu:!1,includeInPoseAs:!1,fullShortDesc:()=>C.Components.Gate.txna},txnb:{out:r=>Xe.invert(r[1]),includeInContextMenu:!1,includeInPoseAs:!1,fullShortDesc:()=>C.Components.Gate.txnb}}),ry=Ki.keyof(Yu.props),mo=Wt.withProps()({...ri.props,...Yu.props}),Jf=Ki.union([oy,ry]);function Qf(r){return r.includes(!1)?!1:r.includes(I)||r.includes(We)?I:!0}p(Qf,"logicAnd");function bp(r){return r.includes(!0)?!0:r.includes(I)||r.includes(We)?I:!1}p(bp,"logicOr");function Kf(r){let n=0;for(let e of r)if(e===!0)n++;else if(e===I||e===We)return I;return n%2===1}p(Kf,"logicXor");function $u(r,n){return bp([Xe.invert(r),n])}p($u,"logicImply");var Un=ye("alu",!0,!0,{variantName:({bits:r,ext:n})=>`alu-${r}${n?"e":""}`,idPrefix:"alu",button:{imgWidth:50},repr:{bits:N(ia.number),ext:N(ia.boolean),showOp:N(ia.boolean)},valueDefaults:{showOp:!0},params:{bits:Se(4,[2,4,8,16]),ext:Ut()},validateParams:({bits:r,ext:n})=>({numBits:r,usesExtendedOpcode:n}),size:({numBits:r})=>({gridWidth:7,gridHeight:19+Math.max(0,r-8)*2}),makeNodes:({numBits:r,usesExtendedOpcode:n,gridWidth:e,gridHeight:o})=>{let i=5+Math.max(0,(r-8)/2),s=e/2+1,a=(o+1)/2,u=-a,c=Rn("n",0,u,n?5:3,void 0,{leadLength:20}),d=c.pop(),h=c.pop();return{ins:{A:ue("w",-s,-i,r),B:ue("w",-s,i,r),Op:c,Mode:h,Cin:[d[0],d[1],"n",`Cin (${C.Components.ALU.InputCinDesc})`,{leadLength:10}]},outs:{S:ue("e",s,0,r),V:[0,a,"s","V (oVerflow)",{leadLength:20}],Z:[2,a,"s","Z (Zero)",{leadLength:20}],Cout:[-2,a,"s",`Cout (${C.Components.ALU.OutputCoutDesc})`,{leadLength:20}]}}},initialValue:(r,{numBits:n})=>({s:j(!1,n),v:!1,cout:!1})}),em={shortName(r){return C.Components.ALU[r][0]},fullName(r){return C.Components.ALU[r][1]}},iy=["A+B","A-B","A+1","A-1","-A","B-A","A*2","A/2","A|B","A&B","A|~B","A&~B","~A","A^B","A<<","A>>"],sy=["A+B","A-B","A|B","A&B"],Xu=class extends xe{constructor(e,o,i){var s;super(e,Un.with(o),i);this.numBits=o.numBits,this.usesExtendedOpcode=o.usesExtendedOpcode,this._showOp=(s=i==null?void 0:i.showOp)!=null?s:Un.aults.showOp}toJSON(){return{bits:this.numBits===Un.aults.bits?void 0:this.numBits,ext:this.usesExtendedOpcode===Un.aults.ext?void 0:this.usesExtendedOpcode,...this.toJSONBase(),showOp:this._showOp!==Un.aults.showOp?this._showOp:void 0}}makeTooltip(){let e=this.op,o=C.Components.ALU.tooltip,i=U(e)?o.SomeUnknownOperation:o.ThisOperation+" "+em.fullName(e);return $(o.title,W(V(`${o.CurrentlyCarriesOut} ${i}.`)))}get op(){let e=this.inputValues(this.inputs.Op);e.push(this.inputs.Mode.value);let o=Ee(e,!1)[1];return U(o)?I:(this.usesExtendedOpcode?iy:sy)[o]}doRecalcValue(){let e=this.op;if(U(e))return{s:j(I,this.numBits),v:I,cout:I};let o=this.inputValues(this.inputs.A),i=this.inputValues(this.inputs.B),s=this.inputs.Cin.value;return uy(e,o,i,s)}propagateValue(e){this.outputValues(this.outputs.S,e.s),this.outputs.V.value=e.v,this.outputs.Z.value=ay(e.s),this.outputs.Cout.value=e.cout}doDraw(e,o){let i=this.bounds(),{left:s,top:a,right:u,bottom:l}=i,c=a+2*H;for(let D of this.inputs.A)Be(e,D);for(let D of this.inputs.B)Be(e,D);for(let D of this.inputs.Op)Be(e,D);Be(e,this.inputs.Mode),Be(e,this.inputs.Cin);for(let D of this.outputs.S)Be(e,D);Be(e,this.outputs.Z),Be(e,this.outputs.V),Be(e,this.outputs.Cout),e.fillStyle=ot,e.lineWidth=3,e.strokeStyle=o.borderColor,e.beginPath(),e.moveTo(s,a),e.lineTo(u,c),e.lineTo(u,l-2*H),e.lineTo(s,l),e.lineTo(s,this.posY+1*H),e.lineTo(s+2*H,this.posY),e.lineTo(s,this.posY-1*H),e.closePath(),e.fill(),e.stroke(),this.drawGroupBox(e,this.inputs.A.group,i),this.drawGroupBox(e,this.inputs.B.group,i),this.drawGroupBox(e,this.outputs.S.group,i),e.beginPath();let d=8,h=this.inputs.Mode.posXInParentTransform-2,m=this.inputs.Op[0].posXInParentTransform+2,f=a+(this.usesExtendedOpcode?8:11),g=a+18;e.moveTo(h,f),e.lineTo(m,g),e.lineTo(m,g+d),e.lineTo(h,f+d),e.closePath(),e.fillStyle=zi,e.fill(),o.inNonTransformedFrame(D=>{e.fillStyle=Hn,e.font="11px sans-serif";let w=ce.isVertical(this.orient)?0:1;if(Ot(D,this.orient,"Z","s",this.outputs.Z,l-16),Ot(D,this.orient,"V","s",this.outputs.V.posXInParentTransform+w*2,l-10,this.outputs.V),Ot(D,this.orient,"Cout","s",this.outputs.Cout.posXInParentTransform+w*4,l-7,this.outputs.Cout),Ot(D,this.orient,"Cin","n",this.inputs.Cin.posXInParentTransform,a+4,this.inputs.Cin),e.font="bold 11px sans-serif",Ot(D,this.orient,"Op","n",(h+m)/2,a+12,this.inputs.Op),e.font="bold 12px sans-serif",Ot(D,this.orient,"A","w",s,this.inputs.A),Ot(D,this.orient,"B","w",s,this.inputs.B),Ot(D,this.orient,"S","e",u,this.outputs.S),this._showOp){let x=U(this.op)?"??":em.shortName(this.op),S=x.length===1?25:x.length===2?17:13;e.font=`bold ${S}px sans-serif`,e.fillStyle=J,e.textAlign="center",se(e,te.middle,x,...D.rotatePoint(this.posX+5,this.posY))}})}doSetShowOp(e){this._showOp=e,this.requestRedraw({why:"show op changed"})}makeComponentSpecificContextMenuItems(){let e=C.Components.ALU.contextMenu,o=this._showOp?"check":"none";return[["mid",E.item(o,e.toggleShowOp,()=>{this.doSetShowOp(!this._showOp)})],["mid",E.sep()],this.makeChangeParamsContextMenuItem("inputs",C.Components.Generic.contextMenu.ParamNumBits,this.numBits,"bits"),this.makeChangeBooleanParamsContextMenuItem(e.ParamUseExtendedOpcode,this.usesExtendedOpcode,"ext"),["mid",E.sep()],...this.makeForceOutputsContextMenuItem()]}};p(Xu,"ALU");Un.impl=Xu;function ay(r){for(let n of r){if(U(n)||be(n))return I;if(n===!0)return!1}return!0}p(ay,"allZeros");function uy(r,n,e,o){let i=n.length;switch(r){case"A+B":return si(n,e,o);case"A*2":return si(n,n,o);case"A+1":return si(n,[!0,...j(!1,i-1)],o);case"A/2":return ii([...n.slice(1),n[i-1]],j(!1,i),o);case"A-1":return ii(n,[!0,...j(!1,i-1)],o);case"A-B":return ii(n,e,o);case"B-A":return ii(e,n,o);case"-A":return ii(j(!1,i),n,o);default:{let s=!1;return{s:(()=>{switch(r){case"A|B":return ra("or",n,e);case"A&B":return ra("and",n,e);case"A^B":return ra("xor",n,e);case"A|~B":return ra("or",n,yp(e));case"A&~B":return ra("and",n,yp(e));case"~A":return yp(n);case"A>>":return[...n.slice(1),o];case"A<<":return s=n[n.length-1],[o,...n.slice(0,n.length-1)]}})(),v:!1,cout:s}}}}p(uy,"doALUOp");function si(r,n,e){let o=r.length,i=p((c,d,h)=>{let m=p(D=>D===!0?1:0,"asNumber"),f=(U(c)||be(c)?1:0)+(U(d)||be(c)?1:0)+(U(h)||be(c)?1:0),g=m(c)+m(d)+m(h);return f===0?[g%2===1,g>=2]:f===1&&g>=2?[I,!0]:[I,I]},"sum3bits"),s=j(I,o),a=j(I,o+1);a[0]=e;for(let c=0;c<o;c++){let[d,h]=i(a[c],r[c],n[c]);s[c]=d,a[c+1]=h}let u=a[o],l=!Ur(u)||!Ur(a[o-2])?I:u!==a[o-1];return{s,cout:u,v:l}}p(si,"doALUAdd");function ii(r,n,e){let o=r.length,i=j(I,o),s=p(d=>{let h=0,m=1;for(let f of d){if(U(f))return;h+=Number(f)*m,m*=2}return h},"toInt"),a=s(r),u=s(n),l=I,c=I;if(a!==void 0&&u!==void 0&&Ur(e)){let d=a-u-(e?1:0);d<0&&(d+=Math.pow(2,o));let h=(d>>>0).toString(2).padStart(o,"0"),m=o-1;for(let y=0;y<o;y++)i[y]=h[m-y]==="1";l=u>a-(e?1:0);let f=r[m]===!0,g=n[m]===!0,D=i[m]===!0;c=f!==g&&f!==D}return{s:i,cout:l,v:c}}p(ii,"doALUSub");function yp(r){let n=yr.props.not.out;return At(e=>n([r[e]]),r.length)}p(yp,"doALUNot");function ra(r,n,e){let o=ri.props[r].out;return At(i=>o([n[i],e[i]]),n.length)}p(ra,"doALUBinOp");var Zi=Me("adder",{idPrefix:"adder",button:{imgWidth:50},valueDefaults:{},size:{gridWidth:7,gridHeight:5},makeNodes:()=>{let r=C.Components.Generic;return{ins:{A:[-2,-4,"n","A",{hasTriangle:!0}],B:[2,-4,"n","B",{hasTriangle:!0}],Cin:[5,0,"e",r.InputCarryInDesc,{hasTriangle:!0}]},outs:{S:[0,4,"s",r.OutputSumDesc,{hasTriangle:!0}],Cout:[-5,0,"w",r.OutputCarryOutDesc,{hasTriangle:!0}]}}},initialValue:()=>({s:!1,cout:!1})}),ju=class extends me{constructor(n,e){super(n,Zi,e)}toJSON(){return this.toJSONBase()}makeTooltip(){let n=C.Components.Adder.tooltip;return $(n.title,W(V(n.desc)))}doRecalcValue(){let n=this.inputs.A.value,e=this.inputs.B.value,o=this.inputs.Cin.value;if(U(n)||U(e)||U(o)||be(n)||be(e)||be(o))return{s:I,cout:I};switch(+n+ +e+ +o){case 0:return{s:!1,cout:!1};case 1:return{s:!0,cout:!1};case 2:return{s:!1,cout:!0};case 3:return{s:!0,cout:!0};default:return console.log("ERROR: sum of adder is > 3"),{s:!1,cout:!1}}}propagateValue(n){this.outputs.S.value=n.s,this.outputs.Cout.value=n.cout}doDraw(n,e){this.doDrawDefault(n,e,()=>{n.fillStyle=J,n.font="bold 30px sans-serif",n.textAlign="center",se(n,te.middle,"+",this.posX,this.posY-2)})}makeComponentSpecificContextMenuItems(){return this.makeForceOutputsContextMenuItem()}};p(ju,"Adder");Zi.impl=ju;var tm=pe(_e());var qo=ye("adder-array",!0,!0,{variantName:({bits:r})=>`adder-array-${r}`,idPrefix:"adder",button:{imgWidth:50},repr:{bits:N(tm.number)},valueDefaults:{},params:{bits:Se(4,[2,4,8,16])},validateParams:({bits:r})=>({numBits:r}),size:({numBits:r})=>({gridWidth:4,gridHeight:Un.size({numBits:r,usesExtendedOpcode:!1}).gridHeight}),makeNodes:({numBits:r,gridHeight:n})=>{let e=5+Math.max(0,(r-8)/2),o=Math.floor(n/2)+1,i=-o;return{ins:{A:ue("w",-3,-e,r),B:ue("w",-3,e,r),Cin:[0,i,"n"]},outs:{S:ue("e",3,0,r),Cout:[0,o,"s"]}}},initialValue:(r,{numBits:n})=>({s:j(!1,n),cout:!1})}),Qu=class extends xe{constructor(e,o,i){super(e,qo.with(o),i);this.numBits=o.numBits}toJSON(){return{...this.toJSONBase(),bits:this.numBits===qo.aults.bits?void 0:this.numBits}}makeTooltip(){let e=C.Components.AdderArray.tooltip;return $(e.title.expand({numBits:this.numBits}),W(V(e.desc)))}doRecalcValue(){let e=this.inputValues(this.inputs.A),o=this.inputValues(this.inputs.B),i=this.inputs.Cin.value;return si(e,o,i)}propagateValue(e){this.outputValues(this.outputs.S,e.s),this.outputs.Cout.value=e.cout}doDraw(e,o){this.doDrawDefault(e,o,i=>{e.font="bold 25px sans-serif",e.fillStyle=J,e.textAlign="center",se(e,te.middle,"+",...i.rotatePoint(this.posX-4,this.posY-2))})}makeComponentSpecificContextMenuItems(){return[this.makeChangeParamsContextMenuItem("inputs",C.Components.Generic.contextMenu.ParamNumBits,this.numBits,"bits"),...this.makeForceOutputsContextMenuItem(!0)]}};p(Qu,"AdderArray");qo.impl=Qu;var es=pe(_e());var sa=pe(_e());var Ji=class extends xe{constructor(e,o,i){var s;super(e,o,i);this._name=(s=i==null?void 0:i.name)!=null?s:void 0}toJSONBase(){return{...super.toJSONBase(),name:this._name}}isOver(e,o){return this.numBits===1?Jr(e,o,this.posX,this.posY)<(Mn/2)**2:fu(this.posX,this.posY,this.width,this.height,e,o)}get allowsForcedOutputs(){return!1}get name(){return this._name}doRecalcValue(){return this.value}propagateValue(e){this.outputValues(this.outputs.Out,e)}shouldDrawBorder(){return!0}doDraw(e,o){this.numBits===1?this.doDrawSingle(e,o,this.outputs.Out[0]):this.doDrawMulti(e,o,this.outputs.Out)}doDrawSingle(e,o,i){Be(e,i);let s=this.parent.editor.options.hideInputColors?I:i.value,a=this.shouldDrawBorder();if(a){o.isMouseOver&&this.parent.mode!==0?(e.strokeStyle=o.borderColor,e.fillStyle=o.borderColor):(e.strokeStyle=J,e.fillStyle=J),e.lineWidth=3,e.beginPath();let l=this.posX+Mn/2-1,c=this.posX+Mn/2+5,d=6.75;fr(e,l,this.posY+d,c,this.posY,l,this.posY-d),e.lineWidth=2,e.fill(),e.stroke(),e.fillStyle=zt(s),e.lineWidth=4,e.beginPath(),ln(e,this.posX,this.posY,Mn),e.fill(),e.stroke()}o.inNonTransformedFrame(u=>{this._name!==void 0&&dr(e,u,this._name,nt(s),this,!1);let l=a?void 0:e.fillStyle=J;Lu(e,s,this,{fillStyle:l})})}doDrawMulti(e,o,i){let s=this.bounds(),{left:a,top:u,width:l}=s,c=s.outline(e);e.fillStyle=ot,e.fill(c);for(let f of i)Be(e,f);let d=this.parent.editor.options.hideInputColors?j(I,this.numBits):this.value,h=o.isMouseOver&&this.parent.mode!==0;e.strokeStyle=h?o.borderColor:J,e.lineWidth=1;let m=qe(this.numBits)?H:2*H;for(let f=0;f<this.numBits;f++){let g=u+f*m;e.fillStyle=zt(d[f]),e.beginPath(),e.rect(a,g,l,m),e.fill(),e.stroke()}e.lineWidth=3,e.stroke(c),o.inNonTransformedFrame(f=>{if(this._name!==void 0){let g=d.map(nt).reverse().join("");dr(e,f,this._name,g,this,!1)}for(let g=0;g<this.numBits;g++){let D=u+m/2+g*m;ni(e,d[g],...f.rotatePoint(this.posX,D),{small:qe(this.numBits)})}})}autoConnected(e){if(e.length!==1)return;let[o,i,s]=e[0];if(s instanceof cr&&(s.prefersSpike&&this.doSetIsPushButton(!0),this._name===void 0&&!pr(s.shortName)&&this.doSetName(s.shortName)),o.orient==="e")switch(ce.add(i.orient,s.orient)){case"w":return;case"e":this.doSetOrient("w"),this.setPosition(this.posX+H*6,this.posY,!1);return;case"s":this.doSetOrient("n"),this.setPosition(this.posX+H*3,this.posY+H*3,!1);return;case"n":this.doSetOrient("s"),this.setPosition(this.posX+H*3,this.posY-H*3,!1);return}}doSetIsPushButton(e){}doSetName(e){this._name=e,this.requestRedraw({why:"name changed"})}makeComponentSpecificContextMenuItems(){return[["mid",this.makeSetNameContextMenuItem(this._name,this.doSetName.bind(this))]]}keyDown(e){e.key==="Enter"&&!e.altKey?this.runSetNameDialog(this._name,this.doSetName.bind(this)):super.keyDown(e)}};p(Ji,"InputBase");var qt=ye(Za,!1,!0,{variantName:({bits:r})=>`in-${r}`,idPrefix:"in",button:{imgWidth:32},repr:{bits:N(sa.number),val:N(ks),isPushButton:N(sa.boolean),isConstant:N(sa.boolean),name:Pt},valueDefaults:{isPushButton:!1,isConstant:!1},params:{bits:Se(1,[1,2,3,4,5,6,7,8,12,16,24,32])},validateParams:({bits:r})=>({numBits:r}),size:({numBits:r})=>{if(r===1){let n=Mn/H;return{gridWidth:n,gridHeight:n}}return{gridWidth:2,gridHeight:qe(r)?r:2*r}},makeNodes:({numBits:r})=>({outs:{Out:ue("e",r===1?3:2,0,r,void 0,{hasTriangle:r!==1})}}),initialValue:(r,{numBits:n})=>Ni(r==null?void 0:r.val,n)}),go=class extends Ji{constructor(e,o,i){var s,a;super(e,qt.with(o),i);this.isCustomComponentInput=!1;this.numBits=o.numBits,this._isPushButton=(s=i==null?void 0:i.isPushButton)!=null?s:qt.aults.isPushButton,this._isConstant=(a=i==null?void 0:i.isConstant)!=null?a:qt.aults.isConstant}toJSON(){return{...this.toJSONBase(),bits:this.numBits===qt.aults.bits?void 0:this.numBits,val:this.contentRepr(!0),isPushButton:this._isPushButton!==qt.aults.isPushButton?this._isPushButton:void 0,isConstant:this._isConstant!==qt.aults.isConstant?this._isConstant:void 0}}get isConstant(){return this._isConstant}contentRepr(e){return Lo(this.value,e)}cursorWhenMouseover(e){var i,s;let o=this.parent.mode;return o===0?"not-allowed":(i=e==null?void 0:e.ctrlKey)!=null&&i&&o>=2?"context-menu":(s=e==null?void 0:e.altKey)!=null&&s&&o>=3?"copy":this.isCustomComponentInput?"grab":this._isConstant?o>=3&&!this.lockPos?"grab":void 0:"pointer"}makeTooltip(){let e=C.Components.Input.tooltip;return $(void 0,W(e.title.expand({numBits:this.numBits})))}get isLinkedToSomeClock(){return this.outputs._all.some(e=>e.outgoingWires.some(o=>o.endNode.isClock))}get isPushButton(){return this._isPushButton}shouldDrawBorder(){return!this._isConstant}pointerClicked(e){let o;if((o=super.pointerClicked(e)).isChange)return o;if(this.parent.mode===0||this._isPushButton||this._isConstant)return X.NoChange;if(this.isCustomComponentInput)return this.parent.editor.showMessage(C.Components.Input.contextMenu.InputSetFromOutside),X.NoChange;let i=this.clickedBitIndex(e);if(i===-1)return X.SimpleChange;let s=e.altKey,a=p(()=>(this.doSetValueChangingBit(i,ly(this.value[i],this.parent.mode,s)),!0),"doChange");return a(),X.RepeatableChange(a)}pointerDown(e){return this.trySetPushButtonBit(!0,e),super.pointerDown(e)}pointerUp(e){let o=super.pointerUp(e);return this.trySetPushButtonBit(!1,e),o}clickedBitIndex(e){let o=this.unrotatedHeight,i=this.parent.editor.offsetXYForComponent(e,this)[1]-this.posY+o/2,s=Math.floor(i*this.numBits/o);return s>=0&&s<this.numBits?s:-1}trySetPushButtonBit(e,o){let i;if(!(this.parent.mode===0||!this._isPushButton||this._isConstant||!this.parent.editor.eventMgr.currentSelectionEmpty()||(i=this.clickedBitIndex(o))===-1)){if(this.isCustomComponentInput){e!==!1&&this.parent.editor.showMessage(C.Components.Input.contextMenu.InputSetFromOutside);return}this.doSetValueChangingBit(i,e)}}doSetValueChangingBit(e,o){let i=[...this.value];i[e]=o,this.doSetValue(i)}setValue(e){if(e.length!==this.numBits){console.warn(`Expected ${this.numBits} values, got ${e.length} for input ${this.ref}`);return}this.doSetValue(e)}doSetIsPushButton(e){this._isPushButton=e,e&&this.doSetValue(j(!1,this.numBits))}doSetIsConstant(e){this._isConstant=e,this.requestRedraw({why:"constant changed"})}makeComponentSpecificContextMenuItems(){let e=C.Components.Input.contextMenu,o=p((s,a)=>{let u=this._isPushButton===a,l=u?"check":"none",c=u?()=>{}:()=>this.doSetIsPushButton(a);return E.item(l,s,c)},"makeItemBehaveAs"),i=[["mid",o(e.ToggleButton,!1)],["mid",o(e.PushButton,!0)],["mid",E.sep()],this.makeChangeParamsContextMenuItem("outputs",C.Components.Generic.contextMenu.ParamNumBits,this.numBits,"bits"),["mid",E.sep()]];if(this.numBits===1){let s=p(()=>{let u=this._isConstant?"check":"none",l=p(()=>this.doSetIsConstant(!this._isConstant),"action");return E.item(u,e.LockValue+` (${nt(this.value[0])})`,l)},"makeToggleConstantItem"),a=E.item("timer",e.ReplaceWithClock,()=>{this.replaceWithComponent(cn.make(this.parent))});i.push(["mid",s()],["mid",E.sep()],["mid",a],["mid",E.sep()])}return i.push(...super.makeComponentSpecificContextMenuItems()),i}};p(go,"Input");qt.impl=go;function ly(r,n,e){switch(r){case!0:return n>=4&&e?I:!1;case!1:return n>=4&&e?I:!0;case I:return n>=4?e?We:!1:I;case We:return n>=4?e?I:!1:We}}p(ly,"nextValue");var cn=Me("clock",{idPrefix:"clock",button:{imgWidth:50},repr:{name:Pt,period:es.number,dutycycle:N(es.number),phase:N(es.number),showLabel:N(es.boolean)},valueDefaults:{period:2e3,dutycycle:50,phase:0,showLabel:!0},size:{gridWidth:2,gridHeight:2},makeNodes:()=>({outs:{Out:[[3,0,"e"]]}}),initialValue:()=>[!1]}),ts=class extends Ji{constructor(e,o){var i,s;super(e,[cn,void 0],o);this._period=(i=o==null?void 0:o.period)!=null?i:cn.aults.period,this._dutycycle=(o==null?void 0:o.dutycycle)!==void 0?o.dutycycle%100:cn.aults.dutycycle,this._phase=(o==null?void 0:o.phase)!==void 0?o.phase%this._period:cn.aults.phase,this._showLabel=(s=o==null?void 0:o.showLabel)!=null?s:cn.aults.showLabel,this.tickCallback()}get numBits(){return 1}toJSON(){return{...this.toJSONBase(),period:this._period,dutycycle:this._dutycycle===cn.aults.dutycycle?void 0:this._dutycycle,phase:this._phase===cn.aults.phase?void 0:this._phase,showLabel:this._showLabel===cn.aults.showLabel?void 0:this._showLabel}}toStringDetails(){return`period=${this._period} duty=${this._dutycycle} phase=${this._phase}`}makeTooltip(){let e=C.Components.Clock.tooltip;return $(e.title,W(e.period[0]+this._period+e.period[1],Wc,e.dutycycle[0]+this._dutycycle+e.dutycycle[1],this._phase===0?mt:W(Wc,e.phase[0]+this._phase+e.phase[1])))}currentClockValue(e){let i=(e-this._phase)%this._period;i<0&&(i+=this._period);let s=this._period*this._dutycycle/100,a=this._period-s,u,l;i<s?(u=!0,l=i):(u=!1,l=i-s);let d=e-l+(u?s:a);return[u,d]}tickCallback(){let e=this.parent.editor.timeline,[o,i]=this.currentClockValue(e.logicalTime());if(this.doSetValue([o]),this.state!==2){let s=C.Components.Clock.timeline,a=o?s.NextFallingEdge:s.NextRisingEdge;e.scheduleAt(i,()=>{this.tickCallback()},a,!0)}}doDraw(e,o){super.doDraw(e,o),this._showLabel&&o.inNonTransformedFrame(()=>{let a=this.orient==="s"?-36:26;e.strokeStyle=J,e.lineWidth=1;let u=this.posX-40/2,l=u+40*this._phase/this._period,c=l+40*this._dutycycle/100,d=this.posX+40/2,h=this.posY+a+10/2,m=this.posY+a-10/2;e.beginPath(),e.moveTo(u,h),e.lineTo(l,h),e.lineTo(l,m),e.lineTo(c,m),e.lineTo(c,h),e.lineTo(d,h),e.stroke(),e.fillStyle=J,e.font="10px sans-serif";let f=this._period>=1e3?this._period/1e3+" s":this._period+" ms";e.textAlign="center",se(e,te.middle,f,this.posX,h+8)})}doSetPeriod(e){this._period=e,this.requestRedraw({why:"period changed",invalidateTests:!0})}makeComponentSpecificContextMenuItems(){let e=C.Components.Clock.contextMenu,o=[[100,"100 ms (10 Hz)"],[250,"250 ms (4 Hz)"],[500,"500 ms (2 Hz)"],[1e3,"1 s (1 Hz)"],[2e3,"2 s (0.5 Hz)"],[4e3,"4 s (0.25 Hz)"],[8e3,"8 s (0.125 Hz)"],[16e3,"16 s (0.0625 Hz)"]],i=!1,s=p(c=>{let[d,h]=c,m=this._period===d;i=i||m;let f=m?"check":"none";return E.item(f,h,()=>this.doSetPeriod(d))},"makeItemSetPeriod"),a=o.map(s),u=E.item(i?"none":"check",e.CustomPeriod+(i?"\u2026":" ("+this._period+" ms, "+Math.round(1e6/this._period)/1e3+" Hz)\u2026"),()=>this.runSetPeriodDialog()),l=E.item("replace",e.ReplaceWithInput,()=>{this.replaceWithComponent(qt.make(this.parent,{bits:1}))});return[...super.makeComponentSpecificContextMenuItems(),["mid",E.sep()],["mid",E.submenu("timer",e.Period,[...a,E.sep(),u])],["mid",E.sep()],["mid",l]]}runSetPeriodDialog(){let e=C.Components.Clock.contextMenu,o=window.prompt(e.SetPeriodMillis,String(this._period));if(o===null||o.length===0)return;let i=parseInt(o);if(isNaN(i)||i<1){window.alert(e.InvalidPeriod),this.runSetPeriodDialog();return}this.doSetPeriod(i)}};p(ts,"Clock");cn.impl=ts;var ns=Me("comp",{idPrefix:"comp",button:{imgWidth:50},valueDefaults:{},size:{gridWidth:5,gridHeight:7},makeNodes:()=>({ins:{A:[-4,2,"w","A",{hasTriangle:!0}],B:[-4,-2,"w","B",{hasTriangle:!0}],E:[0,5,"s","E",{hasTriangle:!0}]},outs:{G:[4,0,"e",">",{hasTriangle:!0,labelName:">"}],Eq:[0,-5,"n","=",{hasTriangle:!0,labelName:"="}]}}),initialValue:()=>({g:!1,eq:!1})}),Ku=class extends me{constructor(n,e){super(n,ns,e)}toJSON(){return this.toJSONBase()}makeTooltip(){let n=C.Components.Comparator.tooltip;return $(n.title,W(V(n.desc)))}doRecalcValue(){let n=this.inputs.A.value,e=this.inputs.B.value,o=this.inputs.E.value;if(U(n)||U(e)||U(o)||be(n)||be(e)||be(o))return{g:I,eq:I};if(+o==0)return{g:!1,eq:!1};let i=+n>+e,s=+n==+e;return{g:i,eq:s}}propagateValue(n){this.outputs.G.value=n.g,this.outputs.Eq.value=n.eq}doDraw(n,e){this.doDrawDefault(n,e,()=>{n.fillStyle=J,n.font="bold 11px sans-serif",n.textAlign="center",se(n,te.middle,"CMP",this.posX,this.posY)})}makeComponentSpecificContextMenuItems(){return this.makeForceOutputsContextMenuItem()}};p(Ku,"Comparator");ns.impl=Ku;var Ju=pe(_e());var Do=ye("cnot-array",!0,!0,{variantName:({bits:r,bottom:n})=>`cnot-array-${r}${n?"b":""}`,idPrefix:"cnot",button:{imgWidth:50},repr:{bits:N(Ju.number),bottom:N(Ju.boolean)},valueDefaults:{},params:{bits:Se(4,[2,4,8,16]),bottom:Ut()},validateParams:({bits:r,bottom:n})=>({numBits:r,controlPinsAtBottom:n}),size:({numBits:r})=>({gridWidth:4,gridHeight:8+Math.max(0,r-8)}),makeNodes:({numBits:r,controlPinsAtBottom:n,gridHeight:e})=>({ins:{In:ue("w",-3,0,r),S:[0,-(e/2+1)*(n?-1:1),n?"s":"n"]},outs:{Out:ue("e",3,0,r)}}),initialValue:(r,{numBits:n})=>j(!1,n)}),Zu=class extends xe{constructor(e,o,i){super(e,Do.with(o),i);this.numBits=o.numBits,this.controlPinsAtBottom=o.controlPinsAtBottom}toJSON(){return{...this.toJSONBase(),bits:this.numBits===Do.aults.bits?void 0:this.numBits,bottom:this.controlPinsAtBottom===Do.aults.bottom?void 0:this.controlPinsAtBottom}}makeTooltip(){let e=C.Components.ControlledInverter.tooltip;return $(e.title,W(V(e.desc)))}doRecalcValue(){let e=this.inputValues(this.inputs.In),o=this.inputs.S.value;return U(o)||be(o)?j(I,this.numBits):o?e.map(Xe.invert):e}propagateValue(e){this.outputValues(this.outputs.Out,e)}doDraw(e,o){this.doDrawDefault(e,o,{skipLabels:!0,drawInside:({top:i,bottom:s,left:a,right:u})=>{let l=this.inputs.S.value;e.lineWidth=2,e.strokeStyle=zt(l),e.beginPath(),this.controlPinsAtBottom?(e.moveTo(this.posX,s),e.lineTo(this.posX,this.posY+4)):(e.moveTo(this.posX,i),e.lineTo(this.posX,this.posY-4)),e.stroke(),e.strokeStyle=l===!0?J:dt,e.beginPath(),e.moveTo(a+12,this.posY-8),e.lineTo(u-13,this.posY),e.lineTo(a+12,this.posY+8),e.closePath(),e.stroke(),e.beginPath(),ln(e,u-10,this.posY,5),e.stroke()}})}makeComponentSpecificContextMenuItems(){let e=C.Components.Generic.contextMenu;return[this.makeChangeParamsContextMenuItem("inputs",e.ParamNumBits,this.numBits,"bits"),this.makeChangeBooleanParamsContextMenuItem(e.ParamControlBitAtBottom,this.controlPinsAtBottom,"bottom"),...this.makeForceOutputsContextMenuItem(!0)]}};p(Zu,"ControlledInverter");Do.impl=Zu;var os=pe(_e());var el=pe(_e());var zn=Jc({button:{imgWidth:50},repr:{state:N(Wr),showContent:N(el.boolean)},valueDefaults:{state:!1,showContent:!0},size:{gridWidth:5,gridHeight:7},makeNodes:()=>{let r=C.Components.Generic;return{outs:{Q:[4,-2,"e",r.OutputQDesc],Q\u0305:[4,2,"e",r.OutputQBarDesc]}}},initialValue:(r,n)=>{if(r===void 0)return[!1,!0];let e=r.state===void 0?n.state:ko(r.state);return[e,Xe.invert(e)]}}),pn=class extends me{constructor(e,o,i){var s;super(e,o,i);this._isInInvalidState=!1;this._showContent=(s=i==null?void 0:i.showContent)!=null?s:zn.aults.showContent}toJSONBase(){let e=this.value[0];return{...super.toJSONBase(),state:e!==zn.aults.state?nt(e):void 0,showContent:this._showContent!==zn.aults.showContent?this._showContent:void 0}}propagateValue(e){this.outputs.Q.value=e[0],this.outputs.Q\u0305.value=e[1]}doSetShowContent(e){this._showContent=e,this.requestRedraw({why:"show content changed"})}doDraw(e,o){this.doDrawDefault(e,o,{background:this._isInInvalidState?xu:void 0,drawLabels:()=>{this._showContent&&!this.parent.editor.options.hideMemoryContent&&pn.drawStoredValue(e,this.value[0],this.posX,this.posY,26,!1)}})}static drawStoredValueFrame(e,o,i,s,a,u){u&&([s,a]=[a,s]),e.strokeStyle=J,e.lineWidth=2,e.beginPath(),e.rect(o-s/2,i-a/2,s,a),e.fill(),e.stroke()}static drawStoredValue(e,o,i,s,a,u){e.fillStyle=zt(o),pn.drawStoredValueFrame(e,i,s,20,a,u),ni(e,o,i,s,{small:a<18})}};p(pn,"FlipflopOrLatch");var to=Jc({button:zn.button,repr:{...zn.repr,trigger:N(el.keyof(et))},valueDefaults:{...zn.valueDefaults,trigger:et.rising},size:zn.size,makeNodes:r=>{let n=zn.makeNodes(),e=C.Components.Generic;return{ins:{Clock:[-4,r,"w",e.InputClockDesc,{isClock:!0}],Pre:[0,-4,"n",e.InputPresetDesc,{prefersSpike:!0}],Clr:[0,4,"s",e.InputClearDesc,{prefersSpike:!0}]},outs:n.outs}},initialValue:zn.initialValue}),gt=class extends pn{constructor(e,o,i){var s;super(e,o,i);this._lastClock=I;this._trigger=(s=i==null?void 0:i.trigger)!=null?s:to.aults.trigger}toJSONBase(){return{...super.toJSONBase(),trigger:this._trigger!==to.aults.trigger?this._trigger:void 0}}get trigger(){return this._trigger}static doRecalcValueForSyncComponent(e,o,i,s,a){return s===!0?a===!0?{isInInvalidState:!0,newState:e.makeInvalidState()}:{isInInvalidState:!1,newState:e.makeStateFromMainValue(!0)}:a===!0?{isInInvalidState:!1,newState:e.makeStateFromMainValue(!1)}:gt.isClockTrigger(e.trigger,o,i)?{isInInvalidState:!1,newState:e.makeStateAfterClock()}:{isInInvalidState:!1,newState:e.value}}static isClockTrigger(e,o,i){return e===et.rising&&o===!1&&i===!0||e===et.falling&&o===!0&&i===!1}doRecalcValue(){let e=this._lastClock,o=this._lastClock=this.inputs.Clock.value,{isInInvalidState:i,newState:s}=gt.doRecalcValueForSyncComponent(this,e,o,this.inputs.Pre.value,this.inputs.Clr.value);return this._isInInvalidState=i,s}makeInvalidState(){return[!1,!1]}makeStateFromMainValue(e){return[e,Xe.invert(e)]}makeStateAfterClock(){return this.makeStateFromMainValue(Xe.filterHighZ(this.doRecalcValueAfterClock()))}doSetTrigger(e){this._trigger=e,this.requestRedraw({why:"trigger changed",invalidateTests:!0})}makeComponentSpecificContextMenuItems(){let e=this._showContent?"check":"none",o=E.item(e,C.Components.Generic.contextMenu.ShowContent,()=>this.doSetShowContent(!this._showContent));return[...$o(this._trigger,this.doSetTrigger.bind(this)),["mid",E.sep()],["mid",o],...this.makeForceOutputsContextMenuItem(!0)]}};p(gt,"Flipflop");function $o(r,n){let e=C.Components.Generic.contextMenu,o=p((i,s)=>{let a=r===i,u=a?"check":"none",l=e.TriggerOn+" "+s,c=a?()=>{}:()=>n(i);return E.item(u,l,c)},"makeTriggerItem");return[["mid",o(et.rising,e.TriggerRisingEdge)],["mid",o(et.falling,e.TriggerFallingEdge)]]}p($o,"makeTriggerItems");var no=ye("counter",!0,!0,{variantName:({bits:r})=>`counter-${r}`,idPrefix:"counter",button:{imgWidth:50},repr:{bits:N(os.number),count:N(os.number),trigger:N(os.keyof(et)),displayRadix:N(eu(os.number))},valueDefaults:{trigger:et.rising,displayRadix:10},params:{bits:Se(4,[2,3,4,7,8,16])},validateParams:({bits:r})=>({numBits:r}),size:({numBits:r})=>({gridWidth:r<=6?5:r<=8?6:7,gridHeight:Math.max(11,1+(r+1)*(qe(r)?1:2))}),makeNodes:({numBits:r,gridWidth:n,gridHeight:e})=>{let o=C.Components.Generic,i=1+n/2,s=ue("e",i,-1,r),a=s[r-1][1],u=a-s[r-2][1],l=a+u,c=(e+1)/2;return{ins:{Clock:[-i,l,"w",o.InputClockDesc,{isClock:!0}],Clr:[0,c,"s",o.InputClearDesc,{prefersSpike:!0}]},outs:{Q:s,V:[i,l,"e","V (oVerflow)"]}}},initialValue:(r,{numBits:n})=>r===void 0||r.count===void 0?oo.emptyValue(n):[oo.decimalToNBits(r.count,n),!1]}),oo=class extends xe{constructor(e,o,i){var s;super(e,no.with(o),i);this._lastClock=I;this.numBits=o.numBits,this._trigger=(s=i==null?void 0:i.trigger)!=null?s:no.aults.trigger,this._displayRadix=(i==null?void 0:i.displayRadix)===void 0?no.aults.displayRadix:i.displayRadix===null?void 0:i.displayRadix}static emptyValue(e){return[j(!1,e),!1]}static decimalToNBits(e,o){let i=e.toString(2).padStart(o,"0"),s=j(!1,o);for(let a=0;a<o;a++)s[a]=i[o-a-1]==="1";return s}toJSON(){let[e,o]=Ee(this.value[0],!1),i=U(o)?0:o,s=this._displayRadix===void 0?null:this._displayRadix;return{...this.toJSONBase(),bits:this.numBits===no.aults.bits?void 0:this.numBits,count:i===0?void 0:i,trigger:this._trigger!==no.aults.trigger?this._trigger:void 0,displayRadix:s!==no.aults.displayRadix?s:void 0}}get trigger(){return this._trigger}makeTooltip(){let e=C.Components.Counter.tooltip;return $(e.title,W(V(e.desc)))}doRecalcValue(){if(this.inputs.Clr.value===!0)return oo.emptyValue(this.numBits);let o=this._lastClock,i=this._lastClock=this.inputs.Clock.value,s=this._trigger===et.rising;if(gt.isClockTrigger(this._trigger,o,i)){let[a,u]=Ee(this.value[0],!1);if(U(u))return[j(I,this.numBits),I];let l=u+1;return l>=Math.pow(2,this.numBits)?[j(!1,this.numBits),s]:[oo.decimalToNBits(l,this.numBits),!s]}else return[this.value[0],!s]}propagateValue(e){let[o,i]=e;this.outputValues(this.outputs.Q,o),this.outputs.V.value=i}doSetTrigger(e){this._trigger=e,this.requestRedraw({why:"trigger changed",invalidateTests:!0})}doDraw(e,o){this.doDrawDefault(e,o,(i,{width:s})=>{if(this._displayRadix!==void 0){e.font="bold 20px sans-serif";let[a,u]=Ee(this.value[0],!1),l=gr(u,this._displayRadix,this.numBits,!1),c=10,d=i.rotatePoint(this.posX-c/2,this.outputs.Q.group.posYInParentTransform);e.fillStyle=mr;let h=s-c-12;pn.drawStoredValueFrame(e,...d,h,28,!1),e.fillStyle=jr,e.textAlign="center",se(e,te.middle,l,...d)}})}doSetDisplayRadix(e){this._displayRadix=e,this.requestRedraw({why:"display radix changed"})}makeComponentSpecificContextMenuItems(){let e=C.Components.Counter.contextMenu,o=p((i,s)=>{let a=this._displayRadix===i?"check":"none",u=e.DisplayTempl.expand({desc:s}),l=p(()=>this.doSetDisplayRadix(i),"action");return E.item(a,u,l)},"makeItemShowRadix");return[...$o(this._trigger,this.doSetTrigger.bind(this)),["mid",E.sep()],["mid",o(void 0,e.DisplayNone)],["mid",o(10,e.DisplayDecimal)],["mid",o(16,e.DisplayHex)],["mid",E.sep()],this.makeChangeParamsContextMenuItem("outputs",C.Components.Generic.contextMenu.ParamNumBits,this.numBits,"bits"),...this.makeForceOutputsContextMenuItem(!0)]}};p(oo,"Counter");no.impl=oo;var dn=pe(_e());var bo=class{constructor(){this._componentsByZIndex=At(()=>[],3);this._componentsById=new Map}*all(){for(let n of this._componentsByZIndex)for(let e of n)yield e}*allInReversedZIndexOrder(){for(let n=this._componentsByZIndex.length-1;n>=0;n--){let e=this._componentsByZIndex[n];for(let o of e)yield o}}*withZIndex(n){for(let e of this._componentsByZIndex[n])yield e}add(n){let e=n.drawZIndex;this._componentsByZIndex[e].push(n);let o=n.ref,i;if(o===void 0)o=this.generateIdFor(n),n.doSetValidatedId(o);else if((i=this._componentsById.get(o))!==void 0){console.error(`Component with id '${o}' already exists and will be renamed`);let s=this.generateIdFor(i);i.doSetValidatedId(s),this._componentsById.set(s,i)}this._componentsById.set(o,n)}contains(n){for(let e of this.all())if(e.def.type===n)return!0;return!1}updateCustomComponents(n){for(let e of[...this.all()])e.def.type===n&&e instanceof yn&&e.updateFromDef()}changeIdOf(n,e){let o=n.ref;if(o!==void 0&&(this._componentsById.delete(o)||console.warn(`Component with id '${o}' not found`)),this._componentsById.has(e))throw new Error(`Component with id '${e}' already exists`);n.doSetValidatedId(e),this._componentsById.set(e,n)}regenerateIdOf(n){let e=this.generateIdFor(n);this.changeIdOf(n,e)}swapIdsOf(n,e){let o=n.ref,i=e.ref;if(o===void 0||i===void 0)throw new Error("Cannot swap ids of components without ids");n.doSetValidatedId(i),e.doSetValidatedId(o),this._componentsById.set(o,e),this._componentsById.set(i,n)}get(n){return this._componentsById.get(n)}looksLikeAutoGeneratedId(n){let e=n.ref;if(e===void 0)return!1;let o=bo.idPrefixFor(n);if(!e.startsWith(o))return!1;let i=e.slice(o.length);return!isNaN(Number(i))}generateIdFor(n){let e=bo.idPrefixFor(n),o=0,i;for(;this._componentsById.has(i=`${e}${o}`);)o++;return i}static idPrefixFor(n){let e=n.def.idPrefix;return Z(e)?e:e(n)}tryDelete(n){return this.tryDeleteWhere(e=>e===n,!0).length>0}tryDeleteWhere(n,e){let o=[];e:for(let i of this._componentsByZIndex)for(let s=0;s<i.length;s++){let a=i[s];if(n(a)&&(a.destroy(),i.splice(s,1),o.push(a),e))break e}for(let i of o){let s=i.ref;s===void 0?console.warn("Removing component without id"):this._componentsById.has(s)?this._componentsById.delete(s):console.warn(`Removing component with id '${s}' but no component with that id exists`)}for(let i of o)for(let s of i.anchoredDrawables)s.anchor=void 0;return o}clearAll(){for(let n of this._componentsByZIndex)n.length=0;this._componentsById.clear()}};p(bo,"ComponentList");var ai=class{constructor(){this._lastGivenNodeID=-1;this._usedIDs=new Set;this._allLiveNodes=[];this._currentMapping=void 0}getFreeId(){for(;this._usedIDs.has(++this._lastGivenNodeID););return this._usedIDs.add(this._lastGivenNodeID),this._lastGivenNodeID}getFreeIdFrom(n){if(!this._usedIDs.has(n))return this._usedIDs.add(n),n;if(this._currentMapping!==void 0){let e=this.getFreeId();return this._currentMapping.set(n,e),e}else return console.error(`Loaded node with id ${n}, which is already taken, with no NodeMapping being built`),n}addLiveNode(n){this._usedIDs.has(n.id)||console.error(`Inserting live node with unreserved id ${n.id}`),this._allLiveNodes[n.id]=n}removeLiveNode(n){delete this._allLiveNodes[n.id],this._usedIDs.delete(n.id)}clearAll(){this._allLiveNodes.length=0,this._usedIDs.clear(),this._lastGivenNodeID=-1,this._currentMapping=void 0}findNode(n,e){var i;let o=(i=e.get(n))!=null?i:n;return this._allLiveNodes[o]}recordMappingWhile(n){this._currentMapping!==void 0&&console.warn("NodeManager.recordMappingWhile called while already recording a mapping"),this._currentMapping=new Map,n();let e=this._currentMapping;return this._currentMapping=void 0,e}tryConnectNodesOf(n){let e=n.parent.linkMgr,o=[];for(let i of n.allNodes())if(i.acceptsMoreConnections){let s=i.posX,a=i.posY,u=i.component;for(let l of this._allLiveNodes)l!==void 0&&l.component!==u&&l.acceptsMoreConnections&&l.posX===s&&l.posY===a&&(e.startDraggingWireFrom(i),e.stopDraggingWireOn(l)!==void 0&&o.push([i,l.component,l]))}return o}};p(ai,"NodeManager");var aa=class{constructor(){this._canvasRedrawReasons={};this._maskWasInvalidated=!1;this._testsInvalidationReasons=[];this._isPropagating=!1;this._isEmpty=!0}requestRedraw(n){var i,s,a,u;let e=(i=n.component)!=null?i:null,o=this._canvasRedrawReasons[n.why];o===void 0?this._canvasRedrawReasons[n.why]=[e]:o.push(e),(s=n.invalidateMask)!=null&&s&&(this._maskWasInvalidated=!0),(a=n.invalidateTests)!=null&&a&&this._testsInvalidationReasons.push([n.why,e]),(u=n.isPropagation)!=null&&u&&(this._isPropagating=!0),this._isEmpty=!1}getReasonsAndClear(){if(this._isEmpty)return;let n=this._canvasRedrawReasons,e=p(()=>{var a,u;let s=[];for(let l of Object.keys(n)){s.push(l);let c=n[l];s.push(" (",String(c.length),"\xD7)",": ");for(let d of c)if(d!==null){let h=d;s.push((u=(a=h.constructor)==null?void 0:a.name)!=null?u:"Component"),h.type!==void 0&&s.push("_",h.type),h.name!==void 0&&s.push("('",h.name,"')"),s.push("; ")}s.pop(),s.push(`
    `)}return s.pop(),s.join("")},"getReasons"),o=this._maskWasInvalidated,i=this._testsInvalidationReasons.length>0;return this._canvasRedrawReasons={},this._isPropagating=!1,this._maskWasInvalidated=!1,this._testsInvalidationReasons.length=0,this._isEmpty=!0,{getReasons:e,redrawMask:o,invalidateTests:i}}hasReasons(){return!this._isEmpty}isAnyValuePropagating(){return this._isPropagating}};p(aa,"RedrawManager");var ui=class{constructor(){this._propagateQueue=[];this._recalcQueue=[];this.debug=!1}enqueueForPropagate(n){this._propagateQueue.push(n),this.log("Enqueued for propagate: "+n)}enqueueForRecalc(n,e){this._recalcQueue.push([n,e]),this.log("Enqueued for recalc: "+n)}queueIsEmpty(){return this._propagateQueue.length===0&&this._recalcQueue.length===0}recalcAndPropagateIfNeeded(){return this.queueIsEmpty()?!1:(this.recalcAndPropagate(),!0)}recalcAndPropagate(){let n=0,e=1e3;do{if(n++,n>=e){console.warn(`ERROR: Circular dependency; suspending updates after ${e} recalc/propagate rounds`);for(let s of[...this._propagateQueue,...this._recalcQueue.map(a=>a[0])])s.setInvalid();this._propagateQueue=[],this._recalcQueue=[];break}this.log(`Recalc/propagate round ${n}: ${this._propagateQueue.length} propagate, ${this._recalcQueue.length} recalc.`);let o=this._propagateQueue;this._propagateQueue=[],this.log(`  PROPAG (${o.length}) \u2013 `+o.map(s=>s.toString()).join("; "));for(let s of o)try{s.propagateCurrentValue()}catch(a){console.error("Error while propagating value of "+s,a),s.setInvalid()}let i=this._recalcQueue;this._recalcQueue=[],this.log(`  RECALC (${i.length}) \u2013 `+i.map(s=>s.toString()).join("; "));for(let[s,a]of i)try{s.recalcValue(a)}catch(u){console.error("Error while recalculating value of "+s,u),s.setInvalid()}}while(!this.queueIsEmpty());this.log(`Recalc/propagate done in ${n} rounds.`)}log(n){this.debug&&console.log(n)}};p(ui,"RecalcManager");var yo=class{constructor(n,e){this.strokeStyle="#000000";this.fillStyle="#000000";this.lineCap="butt";this.lineJoin="miter";this.miterLimit=10;this.lineWidth=1;this.globalAlpha=1;this.font="10px sans-serif";this.shadowColor="#000000";this.shadowOffsetX=0;this.shadowOffsetY=0;this.shadowBlur=0;this.textAlign="start";this.textBaseline="alphabetic";this.lineDash=null;this.lineDashOffset=0;this.fontUnderline="";this._groupStack=[];this._transformMatrixStack=[];this._currentPath=new li(this);this._transformMatrix=new DOMMatrix;var i,s,a,u;let o;if(e!==void 0?o={width:n,height:e}:n!==void 0?o=n:o={},this.width=(i=o.width)!=null?i:500,this.height=(s=o.height)!=null?s:500,this.enableMirroring=(a=o.enableMirroring)!=null?a:!1,this.canvas=this,this._document=(u=o.document)!=null?u:document,o.ctx?this._g=o.ctx:(this._helperCanvas=this._document.createElement("canvas"),this._g=this._helperCanvas.getContext("2d")),this._styleStack=[this._getStyleState()],this._svg=this._document.createElementNS("http://www.w3.org/2000/svg","svg"),this._svg.setAttribute("version","1.1"),this._svg.setAttribute("xmlns","http://www.w3.org/2000/svg"),this._svg.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),this._svg.setAttribute("width",String(this.width)),this._svg.setAttribute("height",String(this.height)),this._ids={},o.metadata!==void 0){let l=this._document.createElementNS("http://www.w3.org/2000/svg","metadata"),c=this._document.createTextNode(o.metadata);l.appendChild(c),this._svg.appendChild(l)}this._defs=this._document.createElementNS("http://www.w3.org/2000/svg","defs"),this._svg.appendChild(this._defs),this._currentElement=this._document.createElementNS("http://www.w3.org/2000/svg","g"),this._svg.appendChild(this._currentElement),this.resetTransform()}_createElement(n,e,o=!1){let i=this._document.createElementNS("http://www.w3.org/2000/svg",n);if(o&&(i.setAttribute("fill","none"),i.setAttribute("stroke","none")),e!==void 0)for(let[s,a]of Object.entries(e))i.setAttribute(s,String(a));return i}_closestGroupOrSvg(n){return n=n!=null?n:this._currentElement,n.nodeName==="g"||n.nodeName==="svg"?n:this._closestGroupOrSvg(n.parentNode)}_applyStyleState(n){for(let[e,o]of Object.entries(n))this[e]=o}_getStyleState(){let n={};for(let e of Object.keys(nm))n[e]=this[e];return n}_applyTransformation(n,e){let{a:o,b:i,c:s,d:a,e:u,f:l}=e!=null?e:this.getTransform();o===1&&i===0&&s===0&&a===1&&u===0&&l===0||n.setAttribute("transform",`matrix(${o} ${i} ${s} ${a} ${u} ${l})`)}_applyStyleToElement(n,e){for(let[o,i]of Object.entries(nm)){let s=this[o];if("apply"in i&&i.apply){if(s instanceof ua){for(let a of s._ctx._defs.children){let u=a.getAttribute("id");this._ids[u]=u,this._defs.appendChild(a)}n.setAttribute(i.apply,`url(#${s.patternElem.getAttribute("id")})`)}else if(s instanceof rs)n.setAttribute(i.apply,`url(#${s.gradientElem.getAttribute("id")})`);else if(i.apply.indexOf(e)!==-1&&i.svg!==s)if((i.svgAttr==="stroke"||i.svgAttr==="fill")&&s.indexOf("rgba")!==-1){let u=/rgba\(\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(s);n.setAttribute(i.svgAttr,`rgb(${u[1]},${u[2]},${u[3]})`);let l=parseFloat(u[4])*this.globalAlpha;n.setAttribute(i.svgAttr+"-opacity",String(l))}else{let a=i.svgAttr;if(o==="globalAlpha"){if(a=e+"-"+i.svgAttr,n.getAttribute(a)!==null)continue}else if(o==="lineWidth"){let u=this._getTransformScale();s=s*Math.max(u.x,u.y)}n.setAttribute(a,s)}}}}getSerializedSvg(n=!1){let e=new XMLSerializer().serializeToString(this._svg);if(/xmlns="http:\/\/www\.w3\.org\/2000\/svg".+xmlns="http:\/\/www\.w3\.org\/2000\/svg/gi.test(e)&&(e=e.replace('xmlns="http://www.w3.org/2000/svg','xmlns:xlink="http://www.w3.org/1999/xlink')),n)for(let[i,s]of Object.entries(fy)){let a=new RegExp(i,"gi");a.test(e)&&(e=e.replace(a,s))}return e}getSvg(){return this._svg}beginGroup(n){let e=this._createElement("g");n!==void 0&&e.setAttribute("class",n);let o=this._closestGroupOrSvg();this._groupStack.push(o),o.appendChild(e),this._currentElement=e}endGroup(){var n;this._currentElement=(n=this._groupStack.pop())!=null?n:this._svg.children[1]}save(){this.beginGroup(void 0),this._styleStack.push(this._getStyleState()),this._transformMatrixStack.push(this.getTransform())}restore(){this.endGroup(),this._applyStyleState(this._styleStack.pop()),this.setTransform(this._transformMatrixStack.pop())}_createPathElement(){let n=this._createElement("path",{},!0);return this._closestGroupOrSvg().appendChild(n),n}beginPath(){this._currentPath=new li(this)}closePath(){this._currentPath.closePath()}moveTo(n,e){this._currentPath.moveTo(n,e)}lineTo(n,e){this._currentPath.lineTo(n,e)}rect(n,e,o,i){this._currentPath.rect(n,e,o,i)}bezierCurveTo(n,e,o,i,s,a){this._currentPath.bezierCurveTo(n,e,o,i,s,a)}quadraticCurveTo(n,e,o,i){this._currentPath.quadraticCurveTo(n,e,o,i)}arc(n,e,o,i,s,a=!1){this._currentPath.arc(n,e,o,i,s,a)}arcTo(n,e,o,i,s){this._currentPath.arcTo(n,e,o,i,s)}ellipse(n,e,o,i,s,a,u,l=!1){this._currentPath.ellipse(n,e,o,i,s,a,u,l)}stroke(n){this._strokeOrFill("stroke",n)}fill(n){this._strokeOrFill("fill",n)}_strokeOrFill(n,e){let o;if(e){if(!(e instanceof li))throw new Error("Path2D is not a Path2DSVG");o=e}else o=this._currentPath;let i=this._createPathElement();this._applyStyleToElement(i,n),i.setAttribute("paint-order","fill stroke markers"),i.setAttribute("d",o.d)}fillRect(n,e,o,i){let{a:s,b:a,c:u,d:l,e:c,f:d}=this.getTransform();s===1&&a===0&&u===0&&l===1&&c===0&&d===0&&n===0&&e===0&&o===this.width&&i===this.height&&this._clearCanvas();let h=this._createElement("rect",{x:n,y:e,width:o,height:i},!0);this._closestGroupOrSvg().appendChild(h),this._currentElement=h,this._applyTransformation(h),this._applyStyleToElement(this._currentElement,"fill")}strokeRect(n,e,o,i){let s=this._createElement("rect",{x:n,y:e,width:o,height:i},!0);this._closestGroupOrSvg().appendChild(s),this._currentElement=s,this._applyTransformation(s),this._applyStyleToElement(this._currentElement,"stroke")}_clearCanvas(){let n=this._svg.children[1];this._svg.removeChild(n),this._currentElement=this._document.createElementNS("http://www.w3.org/2000/svg","g"),this._svg.appendChild(this._currentElement),this._groupStack.length=0}clearRect(n,e,o,i){let{a:s,b:a,c:u,d:l,e:c,f:d}=this.getTransform();if(s===1&&a===0&&u===0&&l===1&&c===0&&d===0&&n===0&&e===0&&o===this.width&&i===this.height){this._clearCanvas();return}let h=this._closestGroupOrSvg(),m=this._createElement("rect",{x:n,y:e,width:o,height:i,fill:"#FFFFFF"},!0);this._applyTransformation(m),h.appendChild(m)}setLineDash(n){n&&n.length>0?this.lineDash=n.join(","):this.lineDash=null}getLineDash(){return this.lineDash===null?[]:this.lineDash.split(",").map(n=>parseFloat(n))}clip(n){let e=this._closestGroupOrSvg(),o=this._createElement("clipPath"),i=tl(this._ids),s=this._createPathElement();s.setAttribute("d",this._currentPath.d),o.setAttribute("id",i),n!==void 0&&o.setAttribute("clip-rule",n),o.appendChild(s),this._defs.appendChild(o),e.setAttribute("clip-path",`url(#${i})`),this._currentElement=e}drawImage(){let n=Array.prototype.slice.call(arguments),e=n[0],o,i,s,a,u=0,l=0,c,d;if(n.length===3)o=n[1],i=n[2],c=e.width,d=e.height,s=c,a=d;else if(n.length===5)o=n[1],i=n[2],s=n[3],a=n[4],c=e.width,d=e.height;else if(n.length===9)u=n[1],l=n[2],c=n[3],d=n[4],o=n[5],i=n[6],s=n[7],a=n[8];else throw new Error("Invalid number of arguments passed to drawImage: "+arguments.length);let h=this._closestGroupOrSvg(),m=this.getTransform().translate(o,i);if(e instanceof yo){let f=e.getSvg().cloneNode(!0);if(f.childNodes.length>1){let g=f.childNodes[0];for(;g.childNodes.length;){let y=g.childNodes[0].getAttribute("id");this._ids[y]=y,this._defs.appendChild(g.childNodes[0])}let D=f.children[1];D!==void 0&&(this._applyTransformation(D,m),h.appendChild(D))}}else if(e.nodeName==="CANVAS"||e.nodeName==="IMG"){let f=this._createElement("image");if(f.setAttribute("width",String(s)),f.setAttribute("height",String(a)),f.setAttribute("preserveAspectRatio","none"),u||l||c!==e.width||d!==e.height){let g=this._document.createElement("canvas");g.width=s,g.height=a,g.getContext("2d").drawImage(e,u,l,c,d,0,0,s,a),e=g}this._applyTransformation(f,m),f.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e.nodeName==="CANVAS"?e.toDataURL():e.getAttribute("src")),h.appendChild(f)}}_applyText(n,e,o,i){let s=document.createElement("span");s.setAttribute("style","font:"+this.font);let a=s.style,u=this._closestGroupOrSvg(),l=dy(this.textBaseline),c=this._createElement("text",{"font-family":a.fontFamily,"font-size":a.fontSize,"font-style":a.fontStyle,"font-weight":a.fontWeight,"text-decoration":this.fontUnderline,x:e,y:o,"text-anchor":py(this.textAlign),"dominant-baseline":l},!0);if(c.appendChild(this._document.createTextNode(n)),this._currentElement=c,this._applyTransformation(c),this._applyStyleToElement(this._currentElement,i),this.fontHref!==void 0){let d=this._createElement("a");d.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",this.fontHref),d.appendChild(c),u.appendChild(d)}else u.appendChild(c)}fillText(n,e,o){this._applyText(n,e,o,"fill")}strokeText(n,e,o){this._applyText(n,e,o,"stroke")}measureText(n){return this._g.font=this.font,this._g.measureText(n)}createPath(n){return new li(this,n)}createLinearGradient(n,e,o,i){let s=this._createElement("linearGradient",{id:tl(this._ids),x1:n+"px",x2:o+"px",y1:e+"px",y2:i+"px",gradientUnits:"userSpaceOnUse"},!1);return this._defs.appendChild(s),new rs(s,this)}createRadialGradient(n,e,o,i,s,a){let u=this._createElement("radialGradient",{id:tl(this._ids),cx:i+"px",cy:s+"px",r:a+"px",fx:n+"px",fy:e+"px",gradientUnits:"userSpaceOnUse"},!1);return this._defs.appendChild(u),new rs(u,this)}createPattern(n,e){let o=this._document.createElementNS("http://www.w3.org/2000/svg","pattern"),i=tl(this._ids);if(o.setAttribute("id",i),o.setAttribute("width",String(n.width)),o.setAttribute("height",String(n.height)),o.setAttribute("patternUnits","userSpaceOnUse"),"nodeName"in n&&(n.nodeName==="CANVAS"||n.nodeName==="IMG")){let s=this._document.createElementNS("http://www.w3.org/2000/svg","image");s.setAttribute("width",String(n.width)),s.setAttribute("height",String(n.height)),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n.nodeName==="CANVAS"?n.toDataURL():n.getAttribute("src")),o.appendChild(s),this._defs.appendChild(o)}else n instanceof yo&&(o.appendChild(n._svg.children[1]),this._defs.appendChild(o));return new ua(o,this)}setTransform(n,e,o,i,s,a){if(e===void 0){let u=n;this._transformMatrix=new DOMMatrix([u.a,u.b,u.c,u.d,u.e,u.f])}else{let u=n;this._transformMatrix=new DOMMatrix([u,e,o,i,s,a])}}getTransform(){let{a:n,b:e,c:o,d:i,e:s,f:a}=this._transformMatrix;return new DOMMatrix([n,e,o,i,s,a])}resetTransform(){this.setTransform(1,0,0,1,0,0)}transform(n,e,o,i,s,a){let u=this.getTransform().multiply(new DOMMatrix([n,e,o,i,s,a]));this.setTransform(u)}scale(n,e){if(e===void 0&&(e=n),isNaN(n)||isNaN(e)||!isFinite(n)||!isFinite(e))return;let o=this.getTransform().scale(n,e);this.setTransform(o)}rotate(n){let e=this.getTransform().multiply(new DOMMatrix([Math.cos(n),Math.sin(n),-Math.sin(n),Math.cos(n),0,0]));this.setTransform(e)}translate(n,e){let o=this.getTransform().translate(n,e);this.setTransform(o)}_matrixTransform(n,e){let{a:o,b:i,c:s,d:a,e:u,f:l}=this._transformMatrix,c=o*n+s*e+u,d=i*n+a*e+l;return[c,d]}_getTransformScale(){return{x:Math.hypot(this._transformMatrix.a,this._transformMatrix.b),y:Math.hypot(this._transformMatrix.c,this._transformMatrix.d)}}_getTransformRotation(){return Math.atan2(this._transformMatrix.b,this._transformMatrix.a)}};p(yo,"SVGRenderingContext");var li=class{constructor(n,e){this._posX=void 0;this._posY=void 0;this.g=n,e===void 0?(this._parts=[],this._hasMoved=!1):Z(e)?(this._parts=[e],this._hasMoved=e.indexOf("M")>=0):(this._parts=[...e._parts],this._hasMoved=this._parts.some(o=>o.indexOf("M")>=0))}get d(){return this._parts.join(" ")}addPath(n,e){e&&console.error("transform argument to addPath is not supported"),this._parts.push(n),this._hasMoved||(this._hasMoved=n.indexOf("M")>=0)}closePath(){this.addPath("Z")}moveTo(n,e){this._posX=n,this._posY=e;let[o,i]=this.g._matrixTransform(n,e);this.addPath(`M ${o} ${i}`)}lineTo(n,e){this._posX=n,this._posY=e;let o=this._hasMoved?"L":"M",[i,s]=this.g._matrixTransform(n,e);this.addPath(`${o} ${i} ${s}`)}bezierCurveTo(n,e,o,i,s,a){this._posX=s,this._posY=a;let u=this.g,[l,c]=u._matrixTransform(n,e),[d,h]=u._matrixTransform(o,i),[m,f]=u._matrixTransform(s,a);this.addPath(`C ${l} ${c} ${d} ${h} ${m} ${f}`)}quadraticCurveTo(n,e,o,i){this._posX=o,this._posY=i;let s=this.g,[a,u]=s._matrixTransform(n,e),[l,c]=s._matrixTransform(o,i);this.addPath(`Q ${a} ${u} ${l} ${c}`)}rect(n,e,o,i){this.moveTo(n,e),this.lineTo(n+o,e),this.lineTo(n+o,e+i),this.lineTo(n,e+i),this.closePath()}arc(n,e,o,i,s,a=!1){if(i===s)return;let u=this.g;i=i%(2*Math.PI),s=s%(2*Math.PI),i===s&&(s=(s+2*Math.PI-.001*(a?-1:1))%(2*Math.PI));let l=n+o*Math.cos(s),c=e+o*Math.sin(s),d=n+o*Math.cos(i),h=e+o*Math.sin(i),m=a?0:1,f=0,g=s-i;g<0&&(g+=2*Math.PI),a?f=g>Math.PI?0:1:f=g>Math.PI?1:0;let D=Math.hypot(u._transformMatrix.a,u._transformMatrix.b),y=Math.hypot(u._transformMatrix.c,u._transformMatrix.d);this.lineTo(d,h);let[w,x]=u._matrixTransform(l,c);this.addPath(`A ${o*D} ${o*y} 0 ${f} ${m} ${w} ${x}`),this._posX=n,this._posY=e}arcTo(n,e,o,i,s){let a=this._posX,u=this._posY;if(a===void 0||u===void 0)return;if(s<0)throw new Error("IndexSizeError: The radius provided ("+s+") is negative.");if(a===n&&u===e||n===o&&e===i||s===0){this.lineTo(n,e);return}let l=[a-n,u-e],c=[o-n,i-e],d=Math.hypot(l[0],l[1]),h=Math.hypot(c[0],c[1]),m=(l[0]*c[0]+l[1]*c[1])/(d*h);if(m===-1){this.lineTo(n,e);return}if(m===1){let oe=65535/d,ne=[a+oe*l[0],u+oe*l[1]];this.lineTo(ne[0],ne[1]);return}let f=s/Math.tan(Math.acos(m)/2),g=f/d,D=[n+g*l[0],e+g*l[1]],y=[l[1],-l[0]],w=Math.hypot(y[0],y[1]),x=s/w;(y[0]*c[0]+y[1]*c[1])/(w*h)<0&&(y=[-y[0],-y[1]]);let T=[D[0]+x*y[0],D[1]+x*y[1]];y=[-y[0],-y[1]];let A=Math.acos(y[0]/w);y[1]<0&&(A=2*Math.PI-A);let P=!1,R=f/h,L=[n+R*c[0],e+R*c[1]],O=[L[0]-T[0],L[1]-T[1]],G=Math.hypot(O[0],O[1]),B=Math.acos(O[0]/G);O[1]<0&&(B=2*Math.PI-B),A>B&&A-B<Math.PI&&(P=!0),A<B&&B-A>Math.PI&&(P=!0),this.lineTo(D[0],D[1]),this.arc(T[0],T[1],s,A,B,P)}ellipse(n,e,o,i,s,a,u,l=!1){if(a===u)return;let c=this.g;[n,e]=c._matrixTransform(n,e);let d=c._getTransformScale();o=o*d.x,i=i*d.y,s=s+c._getTransformRotation(),a=a%(2*Math.PI),u=u%(2*Math.PI),a===u&&(u=(u+2*Math.PI-.001*(l?-1:1))%(2*Math.PI));let h=n+Math.cos(-s)*o*Math.cos(u)+Math.sin(-s)*i*Math.sin(u),m=e-Math.sin(-s)*o*Math.cos(u)+Math.cos(-s)*i*Math.sin(u),f=n+Math.cos(-s)*o*Math.cos(a)+Math.sin(-s)*i*Math.sin(a),g=e-Math.sin(-s)*o*Math.cos(a)+Math.cos(-s)*i*Math.sin(a),D=l?0:1,y=0,w=u-a;w<0&&(w+=2*Math.PI),l?y=w>Math.PI?0:1:y=w>Math.PI?1:0;let x=c._transformMatrix;c.resetTransform(),this.lineTo(f,g),c._transformMatrix=x,this.addPath(`A ${o} ${i} ${s*(180/Math.PI)} ${y} ${D} ${h} ${m}`),this._posX=h,this._posY=m}};p(li,"Path2DSVG");var rs=class{constructor(n,e){this.gradientElem=n;this._ctx=e}addColorStop(n,e){let o=this._ctx._createElement("stop");if(o.setAttribute("offset",String(n)),e.indexOf("rgba")!==-1){let s=/rgba\(\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(e);s?(o.setAttribute("stop-color",`rgb(${s[1]},${s[2]},${s[3]})`),o.setAttribute("stop-opacity",s[4])):o.setAttribute("stop-color",e)}else o.setAttribute("stop-color",e);this.gradientElem.appendChild(o)}};p(rs,"CanvasGradientSVG");var ua=class{constructor(n,e){this.patternElem=n;this._ctx=e}};p(ua,"CanvasPatternSVG");function tl(r){if(!r)throw new Error("cannot create a random attribute name for an undefined object");let n="ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",e="";do{e="";for(let o=0;o<12;o++)e+=n[Math.floor(Math.random()*n.length)]}while(r[e]!==void 0);return e}p(tl,"randomString");var nm={strokeStyle:{svgAttr:"stroke",svg:"none",apply:"stroke"},fillStyle:{svgAttr:"fill",svg:null,apply:"fill"},lineCap:{svgAttr:"stroke-linecap",svg:"butt",apply:"stroke"},lineJoin:{svgAttr:"stroke-linejoin",svg:"miter",apply:"stroke"},miterLimit:{svgAttr:"stroke-miterlimit",svg:4,apply:"stroke"},lineWidth:{svgAttr:"stroke-width",svg:1,apply:"stroke"},globalAlpha:{svgAttr:"opacity",svg:1,apply:"fill stroke"},lineDash:{svgAttr:"stroke-dasharray",svg:null,apply:"stroke"}},om={left:"start",right:"end",center:"middle",start:"start",end:"end"};function py(r){var n;return(n=om[r])!=null?n:om.start}p(py,"getTextAnchor");var rm={alphabetic:"alphabetic",hanging:"hanging",top:"text-before-edge",bottom:"text-after-edge",middle:"central"};function dy(r){var n;return(n=rm[r])!=null?n:rm.alphabetic}p(dy,"getDominantBaseline");function hy(r,n){let e={},o=r.split(",");n=n!=null?n:10;for(let i=0;i<o.length;i+=2){let s="&"+o[i+1]+";",a=parseInt(o[i],n);e[s]="&#"+a+";"}return e["\\xa0"]="&#160;",e}p(hy,"createNamedToNumberedLookup");var fy=hy("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);var im=pe(_e());var Xo=ye(Ja,!0,!1,{variantName:({bits:r})=>`out-${r}`,idPrefix:"out",button:{imgWidth:32},repr:{bits:N(im.number),name:Pt},valueDefaults:{},params:qt.paramDefs,validateParams:({bits:r})=>({numBits:r}),size:({numBits:r})=>{if(r===1){let n=Mn/H;return{gridWidth:n,gridHeight:n}}return{gridWidth:2,gridHeight:qe(r)?r:2*r}},makeNodes:({numBits:r})=>({ins:{In:ue("w",r===1?-3:-2,0,r,void 0,{hasTriangle:r!==1})}}),initialValue:(r,{numBits:n})=>j(!1,n)}),Yo=class extends xe{constructor(e,o,i){var s;super(e,Xo.with(o),i);this.numBits=o.numBits,this._name=(s=i==null?void 0:i.name)!=null?s:void 0}toJSON(){return{...this.toJSONBase(),bits:this.numBits===Xo.aults.bits?void 0:this.numBits,name:this._name}}isOver(e,o){return this.numBits===1?this.parent.mode>=2&&Jr(e,o,this.posX,this.posY)<(Mn/2)**2:super.isOver(e,o)}get name(){return this._name}contentRepr(e){return Lo(this.value,e)}makeTooltip(){let e=C.Components.Output.tooltip;return $(void 0,W(e.title.expand({numBits:this.numBits})))}doRecalcValue(){return this.inputValues(this.inputs.In)}doDraw(e,o){this.numBits===1?this.doDrawSingle(e,o,this.inputs.In[0]):this.doDrawMulti(e,o,this.inputs.In)}doDrawSingle(e,o,i){Be(e,i),e.strokeStyle=o.borderColor,e.fillStyle=o.borderColor,e.beginPath(),fr(e,this.posX-Mn/2-5,this.posY-5,this.posX-Mn/2-5,this.posY+5,this.posX-Mn/2-1,this.posY),e.lineWidth=2,e.fill(),e.stroke();let s=this.parent.editor.options.hideOutputColors?I:i.value;e.fillStyle=zt(s),e.lineWidth=4,e.beginPath(),ln(e,this.posX,this.posY,Mn),e.fill(),e.stroke(),o.inNonTransformedFrame(a=>{this._name!==void 0&&dr(e,a,this._name,nt(s),this,!0),Lu(e,s,this)})}doDrawMulti(e,o,i){let s=this.bounds(),{left:a,top:u,width:l}=s,c=s.outline(e);e.fillStyle=ot,e.fill(c);for(let f of i)Be(e,f);let d=this.parent.editor.options.hideOutputColors?j(I,this.numBits):this.value,h=o.isMouseOver&&this.parent.mode!==0;e.strokeStyle=h?o.borderColor:J,e.lineWidth=1;let m=qe(this.numBits)?H:2*H;for(let f=0;f<this.numBits;f++){let g=u+f*m;e.fillStyle=zt(d[f]),e.beginPath(),e.rect(a,g,l,m),e.fill(),e.stroke()}e.lineWidth=3,e.stroke(c),o.inNonTransformedFrame(f=>{if(this._name!==void 0){let g=d.map(nt).reverse().join("");dr(e,f,this._name,g,this,!0)}for(let g=0;g<this.numBits;g++){let D=u+m/2+g*m;ni(e,d[g],...f.rotatePoint(this.posX,D),{small:qe(this.numBits)})}})}autoConnected(e){if(e.length!==1)return;let[o,i,s]=e[0];if(s instanceof Uo){let a;(a=s.group)!==void 0&&a.nodes.length===1&&!pr(a.name)?this.doSetName(a.name):this._name===void 0&&!pr(s.shortName)&&this.doSetName(s.shortName)}if(o.orient==="w")switch(ce.add(i.orient,s.orient)){case"e":return;case"w":this.doSetOrient("w"),this.setPosition(this.posX-H*6,this.posY,!1);return;case"s":this.doSetOrient("s"),this.setPosition(this.posX-H*3,this.posY+H*3,!1);return;case"n":this.doSetOrient("n"),this.setPosition(this.posX-H*3,this.posY-H*3,!1);return}}doSetName(e){this._name=e,this.requestRedraw({why:"name changed"})}makeComponentSpecificContextMenuItems(){return[["mid",this.makeSetNameContextMenuItem(this._name,this.doSetName.bind(this))],["mid",E.sep()],this.makeChangeParamsContextMenuItem("inputs",C.Components.Generic.contextMenu.ParamNumBits,this.numBits,"bits")]}keyDown(e){e.key==="Enter"&&!e.altKey?this.runSetNameDialog(this._name,this.doSetName.bind(this)):super.keyDown(e)}};p(Yo,"Output");Xo.impl=Yo;var vo="custom-",vp=50,Cp=34,sm=dn.type({id:dn.string,caption:dn.string,circuit:dn.type({components:N(dn.record(dn.string,dn.record(dn.string,dn.unknown))),wires:N(dn.array(eo.Repr))})}),ci=class{constructor(n){this.numBySide={n:0,e:0,s:0,w:0};var s,a,u;this.customId=n.id,this._caption=n.caption,this.circuit=n.circuit,this.insOuts=[];let e=0,o=0,i=(s=this.circuit.components)!=null?s:{};for(let[l,c]of Object.entries(i)){let d=c,h=d.type==="in"&&!((a=d.isConstant)!=null&&a),m=d.type==="out";if(h||m){let f=d,g=Z(f.name)?f.name:h?"In":"Out",D=$c.includes(f.orient)?f.orient:ce.default;D=h?ce.invert(D):D;let y=Number((u=f.bits)!=null?u:1);this.numBySide[D]+=y;let w=ae(f.pos)&&f.pos.length===2?f.pos.map(Number):[0,0];this.insOuts.push({isIn:h,id:l,name:g,orient:D,numBits:y,sourcePos:w,sourceRepr:f}),delete i[l],h?e+=y:o+=y}}gy(this.insOuts);for(let l of this.insOuts)i[l.id]=l.sourceRepr;this.numInputs=e,this.numOutputs=o,this.recalcSize()}toJSON(){return{id:this.customId,caption:this._caption,circuit:this.circuit}}get id(){return vo+this.customId}get caption(){return this._caption}doSetCaption(n){this._caption=n,this.recalcSize()}recalcSize(){let o=1*this._caption.length+2;this.gridWidth=Math.ceil(Math.max(o,(Math.max(this.numBySide.s,this.numBySide.n)-1)*2+2*1.5)),this.gridHeight=Math.ceil(Math.max(o,(Math.max(this.numBySide.e,this.numBySide.w)-1)*2+2*1.5))}isValid(){return!0}get type(){return vo+this.customId}uses(n,e){var s,a;let o=this.circuit.components;if(o===void 0)return!1;let i=[];for(let u of Object.values(o)){let l=String(u.type);if(l===n)return!0;if(e!==!1&&l.startsWith(vo)&&!i.includes(l)){let c=e[1],d=l.substring(vo.length);if((a=(s=c.getCustomDef(d))==null?void 0:s.uses(n,e))!=null&&a)return!0;i.push(l)}}return!1}make(n){let e=new yn(n,this);return n.components.add(e),e}makeFromJSON(n,e){let o=Fn(e,my,"CustomComponent");if(o===void 0)return;let i=new yn(n,this,o);return n.components.add(i),i}makeButtonSVG(){let n=vp,e=Cp,o=new yo(n,e);o.rect(10,2,30,30),o.strokeStyle="currentColor",o.lineWidth=2,o.stroke();let i=24,s=6,a=p((d,h,m)=>{let f=(d-1)*s<=i?s:i/(d-1),g=e/2-(d-1)*f/2;for(let D=0;D<d;D++){let y=g+D*f;o.moveTo(h,y),o.lineTo(m,y)}},"drawInsOuts");o.lineWidth=1;let u=10;a(Math.min(u,this.numInputs),2,10),a(Math.min(u,this.numOutputs),40,48),o.stroke();let l=this._caption,c=!1;for(;;){let d=15;o.font=`${d}px sans-serif`;let h=o.measureText(l).width,m=(n-24)/h;if(m<1&&(d=Math.floor(m*d),o.font=`${d}px sans-serif`),d>=8){o.fillStyle="currentColor",o.textAlign="center",se(o,te.middle,l+(c?".":""),n/2,e/2);break}l=l.slice(0,-1),c=!0}return o.getSvg()}toStandardDef(){return Me(vo+this.customId,{idPrefix:this.customId,button:{imgWidth:50},valueDefaults:{},size:{gridWidth:this.gridWidth,gridHeight:this.gridHeight},makeNodes:({gridWidth:n,gridHeight:e})=>{let o=n/2+1,i=-o,s=e/2+1,a=-s,u={n:this.numBySide.n-1,e:-(this.numBySide.e-1),s:this.numBySide.s-1,w:-(this.numBySide.w-1)},l={n:0,e:0,s:0,w:0},c=p(m=>{let{orient:f,numBits:g}=m,[D,y]=(()=>{let w=ce.isVertical(f)?-1:1,x=u[f]+w*(l[f]+(g-1)/2)*2;switch(f){case"e":return[o,x];case"w":return[i,x];case"n":return[x,a];case"s":return[x,s]}})();return l[f]+=g,g===1?[D,y,f]:ce.isVertical(f)?Rn(f,D,y,g):ue(f,D,y,g)},"make"),d={},h={};for(let m of this.insOuts)(m.isIn?d:h)[m.name]=c(m);return{ins:d,outs:h}},initialValue:()=>j(!1,this.numOutputs)})}};p(ci,"CustomComponentDef");var my=Kc(!0,!0),yn=class extends me{constructor(e,o,i){super(e,o.toStandardDef(),i);this.components=new bo;this.testSuites=new $r(this);this.nodeMgr=new ai;this.linkMgr=new oi(this);this.recalcMgr=new ui;this._ifEditing=void 0;this._subcircuitInputs=[];this._subcircuitOutputs=[];this._customDef=o,this.numInputs=this.inputs._all.length,this.numOutputs=this.outputs._all.length;let s=Pe.loadCircuitForCustomComponent(this,o.circuit);s!==void 0&&(console.error("Failed to load custom component:",s),this.setInvalid())}get customDef(){return this._customDef}isMainEditor(){return!1}get editor(){return this.parent.editor}get mode(){return this.parent.mode}get ifEditing(){return this._ifEditing}stopEditingThis(){this._ifEditing=void 0}startEditingThis(e){this._ifEditing=e}circuitDidLoad(){this._subcircuitInputs.length=0,this._subcircuitOutputs.length=0;let e=0;for(let o of this.components.all())if(o instanceof go&&!o.isConstant){this._subcircuitInputs.push(o),o.isCustomComponentInput=!0;let s=o.outputs._all.length;s===1&&o.isLinkedToSomeClock&&(this.inputs._all[e].isClock=!0);for(let a=0;a<s;a++){let u=e+a;if(u>=this.numInputs)break;this.inputs._all[u].prefersSpike=o.isPushButton}e+=s}else o instanceof Yo&&this._subcircuitOutputs.push(o)}toStringDetails(){var e,o;return(o=(e=this.customDef)==null?void 0:e.customId)!=null?o:""}toJSON(){return this.toJSONBase()}jsonType(){return vo+this.customDef.customId}makeClone(e){let o=this.toNodelessJSON(),i=new yn(this.parent,this.customDef,o);return this.parent.components.add(i),e&&i.setSpawning(),i}updateFromDef(){let e=this.editor.factory.getCustomDef(this._customDef.customId);e===void 0?console.warn("New custom component definition not found, using old one, but trouble is ahead"):this._customDef=e,this.replaceWithComponent(this.makeClone(!1))}doRecalcValue(){let e=0;for(let i of this._subcircuitInputs){let s=i.numBits;if(e+s>this.numInputs)break;i.setValue(At(a=>this.inputs._all[e+a].value,s)),i.propagateCurrentValue(),e+=s}this.recalcMgr.recalcAndPropagateIfNeeded();let o=[];for(let i of this._subcircuitOutputs)o.push(...i.value);return o}propagateValue(e){this.outputValues(this.outputs._all,e)}makeTooltip(){let e=C.Components.Custom.tooltip;return $(W(_n(this.customDef.caption),ke(e.titleSuffix)),W(V(e.desc)))}doDraw(e,o){super.doDrawDefault(e,o,()=>{e.font="bold 18px sans-serif",e.fillStyle=J,e.textAlign="center",se(e,te.middle,this.customDef.caption,this.posX,this.posY)})}makeComponentSpecificContextMenuItems(){let e=C.Components.Custom.contextMenu;return[...this.makeForceOutputsContextMenuItem(),["mid",E.item("connect",e.ChangeCircuit,()=>{this.tryOpenEditor()},"\u21A9\uFE0E")]]}keyDown(e){e.key==="Enter"&&!e.altKey?this.tryOpenEditor():super.keyDown(e)}pointerDoubleClicked(e){let o=super.pointerDoubleClicked(e);return o.isChange?o:this.tryOpenEditor()}tryOpenEditor(){let e=C.Components.Custom.messages,o;return!lr.canModifyCustomComponents(this.editor)||(o=this.editor.options.showOnly)!==void 0&&!o.includes(this._customDef.id)?(alert(e.CannotBeModified),X.NoChange):this.editor.editorRoot instanceof Gt?(this.editor.setEditorRoot(this),this.editor.editTools.undoMgr.takeSnapshot(),X.SimpleChange):(alert(e.NotInMainEditor),X.NoChange)}};p(yn,"CustomComponent");function gy(r){let n={e:0,w:1,n:2,s:3},e=p(o=>ce.isVertical(o.orient)?-o.sourcePos[0]:o.sourcePos[1],"criterion");r.sort((o,i)=>n[o.orient]-n[i.orient]||e(o)-e(i))}p(gy,"sortInputsOutputs");var am=pe(_e());var pi=ye("dec",!0,!0,{variantName:({bits:r})=>`dec-${r}`,idPrefix:"dec",button:{imgWidth:50},repr:{bits:N(am.number)},valueDefaults:{},params:{bits:Se(2,[2,3,4,5])},validateParams:({bits:r})=>({numFrom:r,numTo:2**r}),size:({numTo:r})=>({gridWidth:4,gridHeight:Math.max(8,1+r)}),makeNodes:({numFrom:r,numTo:n})=>({ins:{In:ue("w",-3,0,r)},outs:{Out:ue("e",3,0,n)}}),initialValue:(r,{numTo:n})=>j(!1,n)}),nl=class extends xe{constructor(e,o,i){super(e,pi.with(o),i);this.numFrom=o.numFrom,this.numTo=o.numTo}toJSON(){return{...this.toJSONBase(),bits:this.numFrom===pi.aults.bits?void 0:this.numFrom}}makeTooltip(){let e=C.Components.Decoder.tooltip;return $(e.title,W(V(e.desc.expand({numFrom:this.numFrom,numTo:this.numTo,n:this.currentAddr()}))))}currentAddr(){let e=this.inputValues(this.inputs.In);return Ee(e,!1)[1]}doRecalcValue(){let e=this.currentAddr();if(U(e))return j(I,this.numTo);let o=j(!1,this.numTo);return o[e]=!0,o}doDraw(e,o){this.doDrawDefault(e,o,{skipLabels:!0,drawLabels:()=>{e.font="bold 14px sans-serif",e.fillStyle=J,e.textAlign="center",se(e,te.middle,"Dec.",this.posX,this.posY)}})}propagateValue(e){this.outputValues(this.outputs.Out,e)}makeComponentSpecificContextMenuItems(){let e=C.Components.Generic.contextMenu;return[this.makeChangeParamsContextMenuItem("outputs",e.ParamNumBits,this.numFrom,"bits"),["mid",E.sep()],...this.makeForceOutputsContextMenuItem()]}};p(nl,"Decoder");pi.impl=nl;var is=Me("dec-16seg",{idPrefix:"dec",button:{imgWidth:50},valueDefaults:{},size:{gridWidth:4,gridHeight:10},makeNodes:()=>({ins:{In:un("w",[[-3,-3],[-3,-2],[-3,-1],[-3,0],[-3,1],[-3,2],[-3,3]])},outs:{Out:un("e",[[4,-4,"a1"],[3,-3.5,"a2"],[4,-3,"b"],[3,-2.5,"c"],[4,-2,"d2"],[3,-1.5,"d1"],[4,-1,"e"],[3,-.5,"f"],[4,0,"g1"],[3,.5,"g2"],[4,1,"h"],[3,1.5,"i"],[4,2,"j"],[3,2.5,"k"],[4,3,"l"],[3,3.5,"m"],[4,4,"p"]])}}),initialValue:()=>Sn(!1,17)}),ol=class extends me{constructor(n,e){super(n,is,e)}toJSON(){return this.toJSONBase()}makeTooltip(){return $(void 0,W(V(C.Components.Decoder16Seg.tooltip)))}doRecalcValue(){let n=this.inputValues(this.inputs.In),[e,o]=Ee(n,!1),i;if(U(o))i=Sn(I,17);else if(o<32)i=Sn(!1,17);else{let s=Dy[o-32];i=Sn(!1,17);for(let a=0;a<s.length;a++)i[a]=s.charAt(a)==="1"}return i}propagateValue(n){this.outputValues(this.outputs.Out,n)}doDraw(n,e){this.doDrawDefault(n,e,{skipLabels:!0,drawInside:o=>{this.drawGroupBox(n,this.inputs.In.group,o)},drawLabels:(o,{left:i,right:s})=>{n.fillStyle=Hn,n.font="bold 11px sans-serif",Ot(o,this.orient,"C","w",i,this.inputs.In),n.font="7px sans-serif",this.outputs._all.forEach(a=>{Ot(o,this.orient,a.shortName,"e",s,a)})}})}makeComponentSpecificContextMenuItems(){return this.makeForceOutputsContextMenuItem()}};p(ol,"Decoder16Seg");is.impl=ol;var Dy=["00000000000000000","00110000000000001","00100000000100000","00111100110100100","11011101110100100","10011001110111100","10001110101100010","00000000000100000","00000000000010010","00000000001001000","00000000111111110","00000000110100100","00000000000001000","00000000110000000","00000000000000001","00000000000011000","11111111000011000","00110000000010000","11101110110000000","11111100010000000","00110001110000000","11001101100000010","11011111110000000","11110000000000000","11111111110000000","11111101110000000","00000000000100100","00000000000101000","00000000100010010","00001100110000000","00000000011001000","11100000010000101","11101111010100000","11110011110000000","11111100010100100","11001111000000000","11111100000100100","11001111100000000","11000011100000000","11011111010000000","00110011110000000","11001100000100100","00111110000000000","00000011100010010","00001111000000000","00110011001010000","00110011001000010","11111111000000000","11100011110000000","11111111000000010","11100011110000010","11011101110000000","11000000000100100","00111111000000000","00000011000011000","00110011000001010","00000000001011010","00111101110000000","11001100000011000","01001000000100100","00000000001000010","10000100000100100","00000000000001010","00001100000000000","00000000001000000","00001110100000100","00000111100000100","00000110100000000","00000110100100100","00000110100001000","10000011100000000","10000101100100100","00000011100000100","00000000000000100","00000100000100100","00000000000110110","00000000000100100","00010010110000100","00000010100000100","00000110100000100","10000011100100000","10000001100100100","00000010100000000","10000101100000100","00000111100000000","00000110000000100","00000010000001000","00010010000001010","00000000001011010","00000101100100100","00000100100001000","01001000100100100","00000000000100100","10000100010100100","00000000110011000","00000000000000000"];var ss=Me("dec-7seg",{idPrefix:"dec",button:{imgWidth:50},valueDefaults:{},size:{gridWidth:4,gridHeight:8},makeNodes:()=>({ins:{In:un("w",[[-3,-3,"A"],[-3,-1,"B"],[-3,1,"C"],[-3,3,"D"]])},outs:{Out:un("e",[[3,-3,"a"],[3,-2,"b"],[3,-1,"c"],[3,0,"d"],[3,1,"e"],[3,2,"f"],[3,3,"g"]])}}),initialValue:()=>Sn(!1,7)}),rl=class extends me{constructor(n,e){super(n,ss,e)}toJSON(){return this.toJSONBase()}makeTooltip(){return $(void 0,W(V(C.Components.Decoder7Seg.tooltip)))}doRecalcValue(){let n=this.inputValues(this.inputs.In),[e,o]=Ee(n,!1),i;return U(o)?i=Sn(I,7):i=(()=>{switch(o){case 0:return[!0,!0,!0,!0,!0,!0,!1];case 1:return[!1,!0,!0,!1,!1,!1,!1];case 2:return[!0,!0,!1,!0,!0,!1,!0];case 3:return[!0,!0,!0,!0,!1,!1,!0];case 4:return[!1,!0,!0,!1,!1,!0,!0];case 5:return[!0,!1,!0,!0,!1,!0,!0];case 6:return[!0,!1,!0,!0,!0,!0,!0];case 7:return[!0,!0,!0,!1,!1,!1,!1];case 8:return[!0,!0,!0,!0,!0,!0,!0];case 9:return[!0,!0,!0,!0,!1,!0,!0];case 10:return[!0,!0,!0,!1,!0,!0,!0];case 11:return[!1,!1,!0,!0,!0,!0,!0];case 12:return[!0,!1,!1,!0,!0,!0,!1];case 13:return[!1,!0,!0,!0,!0,!1,!0];case 14:return[!0,!1,!1,!0,!0,!0,!0];case 15:return[!0,!1,!1,!1,!0,!0,!0];default:return Sn(I,7)}})(),i}propagateValue(n){this.outputValues(this.outputs.Out,n)}makeComponentSpecificContextMenuItems(){return this.makeForceOutputsContextMenuItem()}};p(rl,"Decoder7Seg");ss.impl=rl;var as=Me("dec-bcd4",{idPrefix:"bcd",button:{imgWidth:50},valueDefaults:{},size:{gridWidth:5,gridHeight:10},makeNodes:()=>({ins:{In:un("w",[[-4,-3,"A"],[-4,-1,"B"],[-4,1,"C"],[-4,3,"D"]])},outs:{Out:ue("e",4,0,5,2)}}),initialValue:()=>Sn(!1,5)}),il=class extends me{constructor(n,e){super(n,as,e)}toJSON(){return this.toJSONBase()}makeTooltip(){return $(void 0,W(V(C.Components.DecoderBCD4.tooltip)))}doRecalcValue(){let n=this.inputValues(this.inputs.In),[e,o]=Ee(n,!1),i;return U(o)?i=Sn(I,5):i=(()=>{switch(o){case 0:return[!1,!1,!1,!1,!1];case 1:return[!1,!1,!1,!1,!0];case 2:return[!1,!1,!1,!0,!1];case 3:return[!1,!1,!1,!0,!0];case 4:return[!1,!1,!0,!1,!1];case 5:return[!1,!1,!0,!1,!0];case 6:return[!1,!1,!0,!0,!1];case 7:return[!1,!1,!0,!0,!0];case 8:return[!1,!0,!1,!1,!1];case 9:return[!1,!0,!1,!1,!0];case 10:return[!0,!1,!1,!1,!1];case 11:return[!0,!1,!1,!1,!0];case 12:return[!0,!1,!1,!0,!1];case 13:return[!0,!1,!1,!0,!0];case 14:return[!0,!1,!0,!1,!1];case 15:return[!0,!1,!0,!1,!0];default:return Sn(I,5)}})(),i}propagateValue(n){this.outputValues(this.outputs.Out,n,!0)}makeComponentSpecificContextMenuItems(){return this.makeForceOutputsContextMenuItem()}};p(il,"DecoderBCD4");as.impl=il;var di=pe(_e());var ro=ye("demux",!0,!0,{variantName:({from:r,to:n,bottom:e})=>`demux-${r}to${n}${e?"b":""}`,idPrefix:"demux",button:{imgWidth:50},repr:{from:N(di.number),to:N(di.number),bottom:N(di.boolean),showWiring:N(di.boolean),disconnectedAsHighZ:N(di.boolean)},valueDefaults:{showWiring:!0,disconnectedAsHighZ:!1},params:{from:Se(2,[1,2,4,8,16]),to:Se(4),bottom:Ut()},validateParams:({from:r,to:n,bottom:e})=>{let o=Math.min(16*r,Math.max(2*r,n)),i=Math.ceil(o/r),s=Math.ceil(Math.log2(i));return{numFrom:r,numTo:o,numGroups:i,numSel:s,controlPinsAtBottom:e}},size:({numFrom:r,numTo:n,numGroups:e,numSel:o})=>{let i=2*o,s=qe(r===1?n:r)?1:2,a=r>1?1:0,u=n+(e-1)*a,l=s*u;return{gridWidth:i,gridHeight:l}},makeNodes:({numFrom:r,numGroups:n,numSel:e,controlPinsAtBottom:o})=>{let i=1+e,s=-i,a=Cu("e",i,0,n,r),u=a[0][0][1],l=a[a.length-1],c=l[l.length-1][1],d=o?c+2:u-2;return{ins:{In:ue("w",s,0,r),S:Rn(o?"s":"n",0,d,e,void 0,{leadLength:35})},outs:{Z:a}}},initialValue:(r,{numTo:n})=>j(!1,n)}),sl=class extends xe{constructor(e,o,i){var s,a;super(e,ro.with(o),i);this.numFrom=o.numFrom,this.numTo=o.numTo,this.numGroups=o.numGroups,this.numSel=o.numSel,this.controlPinsAtBottom=o.controlPinsAtBottom,this._showWiring=(s=i==null?void 0:i.showWiring)!=null?s:ro.aults.showWiring,this._disconnectedAsHighZ=(a=i==null?void 0:i.disconnectedAsHighZ)!=null?a:ro.aults.disconnectedAsHighZ}toJSON(){return{...super.toJSONBase(),from:this.numFrom,to:this.numTo,bottom:this.controlPinsAtBottom===ro.aults.bottom?void 0:this.controlPinsAtBottom,showWiring:this._showWiring!==ro.aults.showWiring?this._showWiring:void 0,disconnectedAsHighZ:this._disconnectedAsHighZ!==ro.aults.disconnectedAsHighZ?this._disconnectedAsHighZ:void 0}}makeTooltip(){return $(void 0,W(V(C.Components.Demux.tooltip.expand({from:this.numFrom,to:this.numTo}))))}doRecalcValue(){let e=this.inputValues(this.inputs.S),o=Ee(e,!1)[1];if(U(o))return j(I,this.numTo);let i=[],s=this._disconnectedAsHighZ?We:!1;for(let a=0;a<this.numGroups;a++)if(a===o){let u=this.inputValues(this.inputs.In);for(let l of u)i.push(l)}else for(let u=0;u<this.numFrom;u++)i.push(s);return i}propagateValue(e){this.outputValues(this.outputs._all,e)}doDraw(e,o){let{top:i,left:s,bottom:a,right:u}=this.bounds(),l=(u-s)/3;for(let d of this.inputs.In)Be(e,d);for(let d of this.inputs.S)Be(e,d);for(let d of this.outputs.Z)for(let h of d)Be(e,h);let c=e.createPath();if(c.moveTo(s,i+l),c.lineTo(u,i),c.lineTo(u,a),c.lineTo(s,a-l),c.closePath(),e.fillStyle=ot,e.fill(c),this._showWiring){let d=this.parent.editor.options.hideWireColors,h=this.inputValues(this.inputs.S),m=Ee(h,!1)[1];if(!U(m)){let f=this.outputs.Z[m],g=(u-s)/3,D=this.parent.editor.options.wireStyle,y=D===ct.bezier||D===ct.auto,w=o.drawParams.drawTimeAnimationFraction;for(let x=0;x<this.inputs.In.length;x++){e.beginPath();let S=this.inputs.In[x],T=S.posYInParentTransform,A=f[x].posYInParentTransform;e.moveTo(s+1,T),y?e.bezierCurveTo(s+g,T,u-g,A,u-1,A):(e.lineTo(s+3,T),e.lineTo(u-3,A),e.lineTo(u-1,A)),ti(e,this.inputs.In[x].value,S.color,d,w)}}}e.lineWidth=3,e.strokeStyle=o.borderColor,e.stroke(c)}doSetShowWiring(e){this._showWiring=e,this.requestRedraw({why:"show wiring changed"})}doSetDisconnectedAsHighZ(e){this._disconnectedAsHighZ=e,this.setNeedsRecalc()}makeComponentSpecificContextMenuItems(){let e=C.Components.MuxDemux.contextMenu,o=this._showWiring?"check":"none",i=E.item(o,e.ShowWiring,()=>{this.doSetShowWiring(!this._showWiring)});o=this._disconnectedAsHighZ?"check":"none";let s=E.item(o,e.UseZForDisconnected,()=>{this.doSetDisconnectedAsHighZ(!this._disconnectedAsHighZ)});return[this.makeChangeParamsContextMenuItem("inputs",e.ParamNumFrom,this.numFrom,"from"),this.makeChangeParamsContextMenuItem("outputs",e.ParamNumTo,this.numTo,"to",[2,4,8,16].map(a=>a*this.numFrom)),["mid",E.sep()],this.makeChangeBooleanParamsContextMenuItem(this.numSel===1?C.Components.Generic.contextMenu.ParamControlBitAtBottom:C.Components.Generic.contextMenu.ParamControlBitsAtBottom,this.controlPinsAtBottom,"bottom"),["mid",i],["mid",s],...this.makeForceOutputsContextMenuItem(!0)]}};p(sl,"Demux");ro.impl=sl;var la=pe(_e());var Gn=ye("display",!0,!1,{variantName:({bits:r})=>`display-${r}`,idPrefix:"disp",button:{imgWidth:32},repr:{bits:N(la.number),name:Pt,radix:N(la.number),showAsUnknown:N(la.boolean)},valueDefaults:{radix:10,showAsUnknown:!1},params:{bits:Se(4,[3,4,8,16])},validateParams:({bits:r})=>({numBits:r}),size:({numBits:r})=>({gridWidth:2+Math.ceil(r/2),gridHeight:qe(r)?r:2*r}),makeNodes:({numBits:r,gridWidth:n})=>{let e=-n/2-1;return{ins:{In:ue("w",e,0,r)}}},initialValue:(r,{numBits:n})=>[by("0",n),0]}),al=class extends xe{constructor(e,o,i){var s,a,u;super(e,Gn.with(o),i);this.numBits=o.numBits,this._name=(s=i==null?void 0:i.name)!=null?s:void 0,this._radix=(a=i==null?void 0:i.radix)!=null?a:Gn.aults.radix,this._showAsUnknown=(u=i==null?void 0:i.showAsUnknown)!=null?u:Gn.aults.showAsUnknown}toJSON(){return{...this.toJSONBase(),bits:this.numBits===Gn.aults.bits?void 0:this.numBits,name:this._name,radix:this._radix===Gn.aults.radix?void 0:this._radix,showAsUnknown:this._showAsUnknown===Gn.aults.showAsUnknown?void 0:this._showAsUnknown}}get showAsUnknown(){return this._showAsUnknown||this.parent.editor.options.hideOutputColors}makeTooltip(){let e=C.Components.Display.tooltip,o=(()=>{switch(this._radix){case 2:return e.RadixBinary;case 10:return e.RadixDecimal;case-10:return e.RadixSignedDecimal;case 16:return e.RadixHexadecimal;default:return e.RadixGeneric.expand({radix:this._radix})}})(),[i,s]=this.value,a={numBits:this.numBits,radixStr:o};return $(e.title.expand(a),W(V(e.desc[0].expand(a)+" ",_n(i),e.desc[1]),!U(s)||this.showAsUnknown?mt:V(e.CurrentlyUndefined)))}doRecalcValue(){return Ee(this.inputValues(this.inputs.In),!1)}doDraw(e,o){let[i,s]=this.value,a=(1<<this.inputs.In.length)-1,u=U(s)||this.showAsUnknown?dt:zf(s/a);this.doDrawDefault(e,o,{background:u,skipLabels:!0,componentName:[this._name,!0,s],drawLabels:(l,{width:c,height:d})=>{let h=ce.isVertical(this.orient),m=up(u),f=Y(m[0]+m[1]+m[2]>3*127?0:255);if(e.fillStyle=f,e.textAlign="center",!this.showAsUnknown){let[y,w]=yy(i,this._radix);e.font=`${y?9:10}px sans-serif`,se(e,te.middle,w,this.posX,this.posY+(h?-c/2+7:-d/2+8))}let g=this.numBits===4&&this._radix===8?16:18;e.font=`bold ${g}px sans-serif`;let D=this.showAsUnknown?I:gr(s,this._radix,this.numBits);se(e,te.middle,D,this.posX,this.posY+(h?6:0))}})}pointerDoubleClicked(e){let o=super.pointerDoubleClicked(e);if(o.isChange)return o;let i=this.parent.mode;return i>=4&&e.altKey?(this.doSetShowAsUnknown(!this._showAsUnknown),X.SimpleChange):i>=3?(this.doSetRadix(this._radix===10?16:10),X.SimpleChange):X.NoChange}doSetName(e){this._name=e,this.requestRedraw({why:"name changed"})}doSetShowAsUnknown(e){this._showAsUnknown=e,this.requestRedraw({why:"display as unknown changed"})}doSetRadix(e){this._radix=e,this.requestRedraw({why:"radix changed"})}makeComponentSpecificContextMenuItems(){let e=C.Components.Display.contextMenu,o=p((s,a,u)=>{let l=u?"check":"none",c=e.DisplayAs+" "+s,d=u?()=>{}:a;return E.item(l,c,d)},"makeItemShowAs"),i=p((s,a)=>o(a,()=>{this._showAsUnknown&&this.doSetShowAsUnknown(!1),this.doSetRadix(s)},!this._showAsUnknown&&this._radix===s),"makeItemShowRadix");return[["mid",i(10,e.DisplayAsDecimal)],["mid",i(-10,e.DisplayAsSignedDecimal)],["mid",i(8,e.DisplayAsOctal)],["mid",i(16,e.DisplayAsHexadecimal)],["mid",o(e.DisplayAsUnknown,()=>this.doSetShowAsUnknown(!this._showAsUnknown),this._showAsUnknown)],["mid",E.sep()],this.makeChangeParamsContextMenuItem("inputs",C.Components.Generic.contextMenu.ParamNumBits,this.numBits,"bits"),["mid",E.sep()],["mid",this.makeSetNameContextMenuItem(this._name,this.doSetName.bind(this))]]}keyDown(e){e.key==="Enter"&&!e.altKey?this.runSetNameDialog(this._name,this.doSetName.bind(this)):super.keyDown(e)}};p(al,"Display");Gn.impl=al;function by(r,n){let e="";for(let o=0;o<n;o++)e+=r;return e}p(by,"repeatString");function yy(r,n){let e=-1;if(n===16?e=4:n===8&&(e=3),e<0)return[!1,r];let o=new RegExp(`(.{${e}})`,"g");return[!0,um(um(r).replace(o,"$1 "))]}p(yy,"insertSpaces");function um(r){return r.split("").reverse().join("")}p(um,"reverseString");var cl=pe(_e());var ca=pe(_e());var pa={green:null,red:null,yellow:null},vy={v:null,h:null,px:null,PX:null};function da(r,n){return U(r)?dt:be(r)?Kr:r?ta[n]:Xr}p(da,"ledColorForLogicValue");var vr=class extends me{constructor(e,o,i,s){var a,u,l;super(e,o,s);this.transparentDefault=i,this._color=(a=s==null?void 0:s.color)!=null?a:Co.aults.color,this._transparent=(u=s==null?void 0:s.transparent)!=null?u:i,this._name=(l=s==null?void 0:s.name)!=null?l:void 0}toJSONBase(){return{...super.toJSONBase(),color:this._color===Co.aults.color?void 0:this._color,transparent:this._transparent===this.transparentDefault?void 0:this._transparent,name:this._name}}doSetName(e){this._name=e,this.requestRedraw({why:"name changed"})}doSetColor(e){this._color=e,this.requestRedraw({why:"color changed"})}doSetTransparent(e){this._transparent=e,this.requestRedraw({why:"transparent changed"})}makeComponentSpecificContextMenuItems(){let e=C.Components.DisplayBar.contextMenu,o=p((s,a)=>{let u=this._color===a,l=u?"check":"none",c=u?()=>{}:()=>this.doSetColor(a),d=ta[a];return E.item(l,ke(pt(s),fe(`display: inline-block; width: 140px; height: 16px; background-color: ${d}; margin-right: 8px`)),c)},"makeItemUseColor"),i=E.item(this._transparent?"check":"none",e.TransparentWhenOff,()=>this.doSetTransparent(!this._transparent));return[["mid",E.submenu("palette",e.Color,[o(e.ColorGreen,"green"),o(e.ColorRed,"red"),o(e.ColorYellow,"yellow"),E.sep(),i])],["mid",this.makeSetNameContextMenuItem(this._name,this.doSetName.bind(this))]]}keyDown(e){e.key==="Enter"&&!e.altKey?this.runSetNameDialog(this._name,this.doSetName.bind(this)):super.keyDown(e)}};p(vr,"DisplayBarBase");var Co=Me("bar",{idPrefix:"bar",button:{imgWidth:32},repr:{display:ca.keyof(vy,"OutputBarType"),color:N(ca.keyof(pa,"LedColor")),transparent:N(ca.boolean),name:Pt},valueDefaults:{display:"h",color:"green",transparent:!0},size:{gridWidth:1,gridHeight:1},makeNodes:()=>({ins:{I:[0,0,"w"]}}),initialValue:()=>!1}),ul=class extends vr{constructor(e,o){var i;super(e,Co,!1,o);this.doSetDisplay((i=o==null?void 0:o.display)!=null?i:Co.aults.display)}toJSON(){return{...super.toJSONBase(),display:this._display}}get unrotatedWidth(){return this.getWidthAndHeight()[0]}get unrotatedHeight(){return this.getWidthAndHeight()[1]}makeTooltip(){let e=C.Components.DisplayBar.tooltip,o=(()=>{switch(this.value){case I:return e.ValueUnknown;case We:return e.ValueUnknown;case!0:return W(e.Value1[0],Gr(this.value),e.Value1[1]);case!1:return W(e.Value0[0],Gr(this.value),e.Value0[1])}})();return $(e.title,o)}get display(){return this._display}doRecalcValue(){return this.inputs.I.value}doDraw(e,o){let i=this.parent.editor.options.hideOutputColors?I:this.value,s=this._transparent&&i===!1?If:da(i,this._color);this.doDrawDefault(e,o,{background:s,skipLabels:!0,componentName:[this._name,!0,nt(i)]})}getWidthAndHeight(){var i;switch((i=this._display)!=null?i:Co.aults.display){case"h":return[10*H,2*H];case"v":return[2*H,10*H];case"px":return[2*H,2*H];case"PX":return[10*H,10*H]}}pointerDoubleClicked(e){let o=super.pointerDoubleClicked(e);return o.isChange?o:(this.doSetDisplay((()=>{switch(this.display){case"h":return"v";case"v":return"px";case"px":return"PX";case"PX":return"h"}})()),X.SimpleChange)}doSetDisplay(e){this._display=e,this.updateInputOffsetX(),this.requestRedraw({why:"display mode changed",invalidateMask:!0})}updateInputOffsetX(){let e=this.getWidthAndHeight()[0],o=this.inputs.I;o.gridOffsetX=-Ff(e/2)-1,o.updateLeadLength()}makeComponentSpecificContextMenuItems(){let e=C.Components.DisplayBar.contextMenu,o=p((i,s)=>{let a=this._display===s,u=a?"check":"none",l=a?()=>{}:()=>{this.doSetDisplay(s)};return E.item(u,i,l)},"makeItemShowAs");return[["mid",E.submenu("eye",e.Display,[o(e.DisplayVerticalBar,"v"),o(e.DisplayHorizontalBar,"h"),o(e.DisplaySmallSquare,"px"),o(e.DisplayLargeSquare,"PX"),E.sep(),E.text(e.DisplayChangeDesc)])],...super.makeComponentSpecificContextMenuItems()]}};p(ul,"DisplayBar");Co.impl=ul;var us=Me("16seg",{idPrefix:"16seg",button:{imgWidth:32},repr:{color:N(cl.keyof(pa,"LedColor")),transparent:N(cl.boolean),name:Pt},valueDefaults:{},size:{gridWidth:8,gridHeight:10},makeNodes:()=>({ins:{In:un("w",[[-5,-4,"a1"],[-6,-3.5,"a2"],[-5,-3,"b"],[-6,-2.5,"c"],[-5,-2,"d2"],[-6,-1.5,"d1"],[-5,-1,"e"],[-6,-.5,"f"],[-5,0,"g1"],[-6,.5,"g2"],[-5,1,"h"],[-6,1.5,"i"],[-5,2,"j"],[-6,2.5,"k"],[-5,3,"l"],[-6,3.5,"m"],[-5,4,"p"]])}}),initialValue:()=>j(!1,17)}),ll=class extends vr{constructor(n,e){super(n,us,!0,e)}toJSON(){return this.toJSONBase()}makeTooltip(){return $(void 0,W(V(C.Components.Display16Seg.tooltip)))}doRecalcValue(){return this.inputValues(this.inputs.In)}doDraw(n,e){this.doDrawDefault(n,e,{labelSize:7,componentName:[this._name,!0,()=>this.value.map(nt).reverse().join("")],drawInside:({left:o,right:i,top:s,bottom:a})=>{let[u,l,c,d,h,m,f,g,D,y,w,x,S,T,A,P,R]=this.value,L=10,O=3,G=o+18,B=i-10,Q=(G+B)/2,oe=s+L,ne=a-L,Ue=p(tt=>{(!this._transparent||tt!==!1)&&(n.fillStyle=da(tt,this._color),n.fill())},"doFill"),ut=p((tt,K,de,ge)=>{n.beginPath(),n.moveTo(K,ge),n.lineTo(K+O,ge-O),n.lineTo(de-O,ge-O),n.lineTo(de,ge),n.lineTo(de-O,ge+O),n.lineTo(K+O,ge+O),n.closePath(),n.stroke(),Ue(tt)},"drawH"),$e=p((tt,K,de,ge)=>{n.beginPath(),n.moveTo(K,de),n.lineTo(K+O,de+O),n.lineTo(K+O,ge-O),n.lineTo(K,ge),n.lineTo(K-O,ge-O),n.lineTo(K-O,de+O),n.closePath(),n.stroke(),Ue(tt)},"drawV"),It=O*1.41,Ct=O*1.41,kt=p((tt,K,de,ge,Ye)=>{n.beginPath(),n.moveTo(K,de),n.lineTo(K+It,de),n.lineTo(ge,Ye-Ct),n.lineTo(ge,Ye),n.lineTo(ge-It,Ye),n.lineTo(K,de+Ct),n.closePath(),n.stroke(),Ue(tt)},"drawBackslash"),Lt=p((tt,K,de,ge,Ye)=>{n.beginPath(),n.moveTo(K,de),n.lineTo(K,de-Ct),n.lineTo(ge-It,Ye),n.lineTo(ge,Ye),n.lineTo(ge,Ye+Ct),n.lineTo(K+It,de),n.closePath(),n.stroke(),Ue(tt)},"drawSlash");n.strokeStyle=qi,n.lineWidth=1,ut(u,G+O,Q,oe+O),ut(l,Q,B-O,oe+O),$e(c,B-O,oe+O,this.posY),$e(d,B-O,this.posY,ne-O),ut(m,G+O,Q,ne-O),ut(h,Q,B-O,ne-O),$e(f,G+O,this.posY,ne-O),$e(g,G+O,oe+O,this.posY),ut(D,G+O,Q,this.posY),ut(y,Q,B-O,this.posY),$e(x,Q,oe+O,this.posY),$e(A,Q,this.posY,ne-O);let nn=oe+O+O,Bn=ne-O-O;kt(w,G+O+O,nn,Q-O,this.posY-O),Lt(S,Q+O,this.posY-O,B-O-O,nn),Lt(T,G+O+O,Bn,Q-O,this.posY+O),kt(P,Q+O,this.posY+O,B-O-O,Bn),n.beginPath();let on=1.3*O;n.arc(i-8,a-7-on/2,on,0,2*Math.PI),n.stroke(),Ue(R)}})}};p(ll,"Display16Seg");us.impl=ll;var dl=pe(_e());var ls=Me("7seg",{idPrefix:"7seg",button:{imgWidth:32},repr:{color:N(dl.keyof(pa,"LedColor")),transparent:N(dl.boolean),name:Pt},valueDefaults:{},size:{gridWidth:8,gridHeight:10},makeNodes:()=>({ins:{In:un("w",[[-5,-4,"a"],[-5,-3,"b"],[-5,-2,"c"],[-5,-1,"d"],[-5,0,"e"],[-5,1,"f"],[-5,2,"g"],[-5,4,"p"]])}}),initialValue:()=>j(!1,8)}),pl=class extends vr{constructor(n,e){super(n,ls,!0,e)}toJSON(){return this.toJSONBase()}makeTooltip(){return $(void 0,W(V(C.Components.Display7Seg.tooltip)))}doRecalcValue(){return this.inputValues(this.inputs.In)}doDraw(n,e){this.doDrawDefault(n,e,{labelSize:9,componentName:[this._name,!0,()=>this.value.map(nt).reverse().join("")],drawInside:({left:o,right:i,top:s,bottom:a})=>{let[u,l,c,d,h,m,f,g]=this.value,D=20,y=10,w=4,x=o+D,S=i-D,T=s+y,A=a-y,P=p(G=>{(!this._transparent||G!==!1)&&(n.fillStyle=da(G,this._color),n.fill())},"doFill"),R=p((G,B)=>{n.beginPath(),n.moveTo(x+w,B),n.lineTo(x+w+w,B-w),n.lineTo(S-w-w,B-w),n.lineTo(S-w,B),n.lineTo(S-w-w,B+w),n.lineTo(x+w+w,B+w),n.closePath(),n.stroke(),P(G)},"drawH"),L=p((G,B,Q,oe)=>{n.beginPath(),n.moveTo(B,Q),n.lineTo(B+w,Q+w),n.lineTo(B+w,oe-w),n.lineTo(B,oe),n.lineTo(B-w,oe-w),n.lineTo(B-w,Q+w),n.closePath(),n.stroke(),P(G)},"drawV");n.strokeStyle=qi,n.lineWidth=1,R(u,T+w),L(l,S-w,T+w,this.posY),L(c,S-w,this.posY,A-w),R(d,A-w),L(h,x+w,this.posY,A-w),L(m,x+w,T+w,this.posY),R(f,this.posY),n.beginPath();let O=1.3*w;n.arc(i-D/2,a-y-O/2,O,0,2*Math.PI),n.stroke(),P(g)}})}};p(pl,"Display7Seg");ls.impl=pl;var hl=pe(_e());var cs=Me("ascii",{idPrefix:"disp",button:{imgWidth:32},repr:{name:Pt,additionalReprRadix:N(hl.number),showAsUnknown:N(hl.boolean)},valueDefaults:{},size:{gridWidth:4,gridHeight:8},makeNodes:()=>({ins:{Z:ue("w",-3,0,7)}}),initialValue:()=>["0000000",0]}),jo=class extends me{constructor(e,o){var i,s,a;super(e,cs,o);this._name=(i=o==null?void 0:o.name)!=null?i:void 0,this._additionalReprRadix=(s=o==null?void 0:o.additionalReprRadix)!=null?s:void 0,this._showAsUnknown=(a=o==null?void 0:o.showAsUnknown)!=null?a:!1}toJSON(){return{...this.toJSONBase(),name:this._name,additionalReprRadix:this._additionalReprRadix,showAsUnknown:this._showAsUnknown?!0:void 0}}get showAsUnknown(){return this._showAsUnknown||this.parent.editor.options.hideOutputColors}makeTooltip(){let e=C.Components.DisplayAscii.tooltip,[o,i]=this.value;return $(e.title,W(V(e.desc[0],_n(o),e.desc[1]),this.showAsUnknown?mt:U(i)?V(e.CurrentlyUndefined):W(e.CurrentlyThisCharacter+" ",_n(""+i),i<32?e.WhichIsNotPrintable:W(", \u2018",_n(String.fromCharCode(i)),"\u2019."))))}doRecalcValue(){let e=this.inputValues(this.inputs.Z);return Ee(e,!1)}doDraw(e,o){let[i,s]=this.value,a,u,l=J;U(s)||this.showAsUnknown?(u="bold 18px sans-serif",this.showAsUnknown&&(l=dt),a="?"):(a=jo.numberToAscii(s),s<32?u="16px sans-serif":u="bold 18px sans-serif"),this.doDrawDefault(e,o,{skipLabels:!0,componentName:[this._name,!0,a],drawLabels:(c,{width:d,height:h})=>{var D;let m=ce.isVertical(this.orient),f=this._additionalReprRadix!==void 0,g=this.posY+(m?4:0);if(e.font="9px sans-serif",e.fillStyle=J,!this.showAsUnknown&&(m&&f?(e.textAlign="start",se(e,te.middle,i,this.posX-h/2+3,this.posY-d/2+8),e.textAlign="center"):(e.textAlign="center",se(e,te.middle,i,this.posX,this.posY+(m?-d/2+8:-h/2+10))),f)){let y=gr(s,(D=this._additionalReprRadix)!=null?D:10,7);e.font="bold 11px sans-serif",m?(e.textAlign="end",se(e,te.middle,y,this.posX+h/2-3,this.posY-d/2+9),e.textAlign="center"):(se(e,te.middle,y,this.posX,this.posY-h/2+22),g+=8)}e.font=u,e.fillStyle=l,se(e,te.middle,a,this.posX,g)}})}static numberToAscii(e){return e<32?"\\"+e:String.fromCharCode(e)}pointerDoubleClicked(e){let o=super.pointerDoubleClicked(e);if(o.isChange)return o;let i=this.parent.mode;return i>=4&&e.altKey?(this.doSetShowAsUnknown(!this._showAsUnknown),X.SimpleChange):i>=3?(this.doSetAdditionalDisplayRadix((()=>{switch(this._additionalReprRadix){case void 0:return 10;case 10:return 16;case 16:return;default:return}})()),X.SimpleChange):X.NoChange}doSetName(e){this._name=e,this.requestRedraw({why:"name changed"})}doSetShowAsUnknown(e){this._showAsUnknown=e,this.requestRedraw({why:"display as unknown changed"})}doSetAdditionalDisplayRadix(e){this._additionalReprRadix=e,this.requestRedraw({why:"additional display radix changed"})}makeComponentSpecificContextMenuItems(){let e=C.Components.DisplayAscii.contextMenu,o=p((s,a,u)=>{let l=u?"check":"none";return E.item(l,s,a)},"makeItemShowAs"),i=p((s,a)=>o(a,()=>this.doSetAdditionalDisplayRadix(s),this._additionalReprRadix===s),"makeItemShowRadix");return[["mid",E.submenu("eye",e.AdditionalDisplay,[i(void 0,e.DisplayNone),i(10,e.DisplayDecimal),i(16,e.DisplayHex),E.sep(),E.text(e.ChangeDisplayDesc)])],["mid",o(C.Components.Generic.contextMenu.ShowAsUnknown,()=>this.doSetShowAsUnknown(!this._showAsUnknown),this._showAsUnknown)],["mid",E.sep()],["mid",this.makeSetNameContextMenuItem(this._name,this.doSetName.bind(this))]]}keyDown(e){e.key==="Enter"&&!e.altKey?this.runSetNameDialog(this._name,this.doSetName.bind(this)):super.keyDown(e)}};p(jo,"DisplayAscii");cs.impl=jo;var ps=Me("ff-d",{idPrefix:"ff",...to,makeNodes:()=>{let r=to.makeNodes(2),n=C.Components.Generic;return{ins:{...r.ins,D:[-4,-2,"w",n.InputDataDesc]},outs:r.outs}}}),fl=class extends gt{constructor(n,e){super(n,ps,e)}toJSON(){return this.toJSONBase()}makeTooltip(){let n=C.Components.FlipflopD.tooltip;return $(n.title,W(V(n.desc)))}doRecalcValueAfterClock(){return Xe.filterHighZ(this.inputs.D.value)}};p(fl,"FlipflopD");ps.impl=fl;var ds=Me("ff-jk",{idPrefix:"ff",...to,makeNodes:()=>{let r=to.makeNodes(0),n=C.Components.FlipflopJK;return{ins:{...r.ins,J:[-4,-2,"w",n.InputJDesc],K:[-4,2,"w",n.InputKDesc]},outs:r.outs}}}),ml=class extends gt{constructor(n,e){super(n,ds,e)}toJSON(){return this.toJSONBase()}makeTooltip(){let n=C.Components.FlipflopJK.tooltip;return $(n.title,W(V(n.desc)))}doRecalcValueAfterClock(){let n=this.inputs.J.value,e=this.inputs.K.value,o=this.outputs.Q.value;return n===!0?e===!0?Xe.invert(o):!0:e===!0?!1:o}};p(ml,"FlipflopJK");ds.impl=ml;var hs=Me("ff-t",{idPrefix:"ff",...to,makeNodes:()=>{let r=to.makeNodes(2),n=C.Components.FlipflopT;return{ins:{...r.ins,T:[-4,-2,"w",n.InputTDesc]},outs:r.outs}}}),gl=class extends gt{constructor(n,e){super(n,hs,e)}toJSON(){return this.toJSONBase()}makeTooltip(){let n=C.Components.FlipflopT.tooltip;return $(n.title,W(V(n.desc)))}doRecalcValueAfterClock(){let n=this.inputs.T.value;if(U(n)||be(n))return I;let e=this.outputs.Q.value;return n?Xe.invert(e):e}};p(gl,"FlipflopT");hs.impl=gl;var wp=pe(_e());var Cy=20,wy=25,ha=class extends xe{constructor(e,o,i,s){var a,u;super(e,o,s);this._type=i,this._poseAs=(a=s==null?void 0:s.poseAs)!=null?a:void 0,this._showAsUnknown=(u=s==null?void 0:s.showAsUnknown)!=null?u:!1}toJSONBase(){return{...super.toJSONBase(),showAsUnknown:this._showAsUnknown?!0:void 0,poseAs:this._poseAs}}jsonType(){return this._type}get type(){return this._type}doSetType(e){var o;this._type=e,this.updateLeadsFor(e);for(let i of this.inputs.In)(o=i.incomingWire)==null||o.invalidateWirePath();this.setNeedsRecalc(),this.requestRedraw({why:"gate type changed",invalidateTests:!0})}updateLeadsFor(e){let o=e==="or"||e==="nor"||e==="imply"||e==="rimply",i=o?wy:Cy,s=this.inputs.In;if(s.forEach(a=>a.updateLeadLength(i)),o){let a=this.numBits;if((a>=6||a===4)&&(s[0].updateLeadLength(i-3),s[a-1].updateLeadLength(i-3),a>=8)){let l=(a-6)/2,c=l+6-1;s[l].updateLeadLength(i-3),s[c].updateLeadLength(i-3),a>=24&&(s[1].updateLeadLength(i-2),s[a-2].updateLeadLength(i-2),s[l-1].updateLeadLength(i-2),s[l-2].updateLeadLength(i-2),s[c+1].updateLeadLength(i-2),s[c+2].updateLeadLength(i-2))}}}get poseAs(){return this._poseAs}set poseAs(e){e!==this._poseAs&&(this._poseAs=e,this.requestRedraw({why:"gate display changed"}))}get showAsUnknown(){return this._showAsUnknown}doSetShowAsUnknown(e){this._showAsUnknown=e,this.requestRedraw({why:"display as unknown changed"})}toStringDetails(){return this.type}doRecalcValue(){let e=this.inputValues(this.inputs.In),o=this.gateTypes(this.numBits).props[this.type].out;return o(e)}propagateValue(e){this.outputs.Out.value=e}makeTooltip(){let e=C.Components.Gate.tooltip;if(this.showAsUnknown)return V(e.UnknownGate);let o=this.inputValues(this.inputs.In),i=this.value,s=this.gateTypes(this.numBits).props[this.type],a=p(()=>{let g=this.numBits===1?[e.Input]:At(y=>e.Input+" "+(y+1),this.numBits);g.push(e.Output);let D=[];for(let y of xy(this.numBits)){let w=rr(o,y),x=s.out(y);y.push(x),D.push({matchesCurrent:w,cells:y})}return[g,D]},"genTruthTableData"),l=this.outputs.Out.value===i?e.CurrentlyDelivers:e.ShouldCurrentlyDeliver,d=o.includes(I)?W(l+" "+e.UndeterminedOutputBecauseInputUnknown):W(l+" "+e.ThisOutput+" ",Gr(i)," "+e.BecauseInputIs+" ",...o.map(Gr)),h=s.fullShortDesc(),m=(()=>{switch(this.type){case"not":return W(e.Inverter[0],_n(C.Components.Gate.not[0]),e.Inverter[1]);case"buf":return W(e.Buffer[0],_n(C.Components.Gate.buf[0]),e.Buffer[1]);default:return e.GateTitle(_n(h[0]))}})(),f=this.numBits<=4?W(d,", "+e.AccordingToTruthTable,V(Ty(a()))):W(d,".");return Ay(this.numBits,m,h[2],f)}doDraw(e,o){var s;let i=this._showAsUnknown?I:(s=this.poseAs)!=null?s:this.type;this.drawGate(e,i,i!==this.type&&!this._showAsUnknown,o)}drawGate(e,o,i,s){let a=this.numBits,u=this.outputs.Out,{top:l,left:c,bottom:d,right:h,height:m}=this.bounds(),f=a>=4&&a!==5,g=H/(qe(a)?2:1),D=this.inputs.In[0].posYInParentTransform-g,y=this.inputs.In[a-1].posYInParentTransform+g,w=Math.PI/2,x=0,S=p((R,L)=>{e.beginPath(),ln(e,R,L,8),e.fillStyle=ot,e.fill(),e.stroke()},"drawInversionCircle"),T=i&&this.parent.mode>=4,A=s.isMouseOver?Zn:T?ea:J,P=T?Ru:ot;for(let R=0;R<a;R++)Be(e,this.inputs.In[R]);switch(Be(e,u),e.lineWidth=3,e.strokeStyle=A,e.fillStyle=P,o){case"not":case"buf":{e.beginPath(),e.moveTo(c,l),e.lineTo(h,this.posY),e.lineTo(c,d),e.closePath(),e.fill(),e.stroke(),o==="not"&&S(h+5,this.posY),x=-7;break}case"and":case"nand":case"nimply":case"rnimply":{let R=h-m/2;e.beginPath(),e.moveTo(R,d),e.lineTo(c,d),e.lineTo(c,l),e.lineTo(R,l),e.arc(R,this.posY,m/2,-w,w),e.closePath(),e.fill(),e.lineWidth=1,e.stroke(),e.strokeStyle=A,e.lineWidth=3,e.stroke(),e.beginPath(),o.startsWith("nand")&&S(h+5,this.posY),o==="nimply"?S(c-5,this.posY+H):o==="rnimply"&&S(c-5,this.posY-H),x=-2,f&&(e.moveTo(c,D),e.lineTo(c,y),e.stroke());break}case"or":case"nor":case"xor":case"xnor":case"imply":case"rimply":{e.beginPath(),e.moveTo(this.posX-15,l),e.bezierCurveTo(this.posX+10,l,h-5,this.posY-8,h,this.posY),e.bezierCurveTo(h-5,this.posY+8,this.posX+10,d,c,d),e.quadraticCurveTo(c+12,this.posY,c,l),e.closePath(),e.fill(),e.stroke();let L=y-d,O=Math.min(12,L/4);if(f&&(e.beginPath(),e.moveTo(c,d),e.quadraticCurveTo(c+O,d+L/2,c,y),e.moveTo(c,l),e.quadraticCurveTo(c+O,l-L/2,c,D),e.stroke()),(o.startsWith("nor")||o.startsWith("xnor"))&&S(h+5,this.posY),o==="imply"?S(c-2,this.posY-H):o==="rimply"&&S(c-2,this.posY+H),o.startsWith("x")){e.lineWidth=3;let G=p(B=>{e.beginPath(),f?(e.moveTo(c-B,y),e.quadraticCurveTo(c+O-B,d+L/2,c-B,d),e.quadraticCurveTo(c+12-B,this.posY,c-B,l),e.quadraticCurveTo(c+O-B,l-L/2,c-B,D)):(e.moveTo(c-B,d),e.quadraticCurveTo(c+12-B,this.posY,c-B,l))},"leftXorCurve");G(3),e.strokeStyle=ot,e.stroke(),G(6),e.strokeStyle=A,e.stroke()}x=1;break}case"txa":case"txna":{e.beginPath(),e.moveTo(c,d),e.lineTo(c,l),e.lineTo(h,this.posY+.5),e.lineTo(c+2,this.posY+.5),e.fill(),e.stroke(),o==="txna"&&S(c-5,this.posY-H);break}case"txb":case"txnb":{e.beginPath(),e.moveTo(c,l),e.lineTo(c,d),e.lineTo(h,this.posY-.5),e.lineTo(c+2,this.posY-.5),e.fill(),e.stroke(),o==="txnb"&&S(c-5,this.posY+H);break}case"?":{let R=c+(d-l);e.strokeStyle=s.isMouseOver?Zn:dt,e.beginPath(),e.moveTo(c,l),e.lineTo(R,l),e.lineTo(R,d),e.lineTo(c,d),e.closePath(),e.fill(),e.stroke(),f&&(e.moveTo(c,D),e.lineTo(c,y),e.stroke()),e.lineWidth=0,s.inNonTransformedFrame(()=>{e.fillStyle=dt,e.textAlign="center",e.font="bold 20px sans-serif",se(e,te.middle,"?",(c+R)/2,this.posY)});break}}if(this.parent.editor.options.showGateTypes&&!U(o)){let R=this.gateTypes(this.numBits).props[o].fullShortDesc()[1];if(R!==void 0){e.fillStyle=_u,e.font="bold 13px sans-serif";let L=e.getTransform();e.translate(this.posX+x,this.posY),e.scale(.65,1),e.textAlign="center",se(e,te.middle,R,0,0),e.setTransform(L)}}}pointerDoubleClicked(e){return this.parent.mode>=4&&e.altKey?(this.doSetShowAsUnknown(!this._showAsUnknown),X.SimpleChange):super.pointerDoubleClicked(e)}makeComponentSpecificContextMenuItems(){let e=[],o=this.parent.mode>=4;if(!this._showAsUnknown||o){let i=this.makeReplaceByMenuItem();i!==void 0&&e.push(["start",i])}return o&&e.push(["mid",this.makePoseAsMenuItem()],...this.makeForceOutputsContextMenuItem()),e}makeReplaceByMenuItem(){let e=this.gateTypes(this.numBits),o=C.Components.Gate.contextMenu,i=e.values.filter(s=>s!==this._type&&e.props[s].includeInContextMenu).filter(s=>this.parent.editor.allowGateType(s));if(i.length!==0)return E.submenu("replace",o.ReplaceBy,[...i.map(s=>{let a=e.props[s];return E.item(void 0,o.GateTempl.expand({type:a.fullShortDesc()[0]}),()=>{let u=this._type;this.doSetType(s);let l=this.ref;l!==void 0&&l.startsWith(u)&&this.parent.components.regenerateIdOf(this)})}),E.sep(),E.text(o.VariantChangeDesc)])}makePoseAsMenuItem(){let e=this.gateTypes(this.numBits),o=C.Components.Gate.contextMenu,i=e.values.filter(u=>u!==this._type&&e.props[u].includeInPoseAs),s=this._showAsUnknown,a=this.poseAs;return E.submenu("questioncircled",o.ShowAs,[E.item(!s&&a===void 0?"check":"none",o.NormalGateTempl.expand({type:e.props[this._type].fullShortDesc()[0]}),()=>{this.poseAs=void 0,this.doSetShowAsUnknown(!1)}),E.item(s?"check":"none",o.UnknownGate,()=>{this.poseAs=void 0,this.doSetShowAsUnknown(!0)}),E.sep(),...i.map(u=>{let l=e.props[u];return E.item(!s&&u===a?"check":"none",o.GateTempl.expand({type:l.fullShortDesc()[0]}),()=>{this.doSetShowAsUnknown(!1),this.poseAs=u})})])}};p(ha,"GateBase");function yl(r,n,e,o,i){let s;return e===void 0?s=n:i!==void 0&&e.endsWith(i)?s=e.slice(0,-i.length):s=e,r.includes(s)?s:(console.error(`Invalid gate type: '${s}'`),o)}p(yl,"validateGateType");var fs="gate",Cr=ye(fs+"1",!0,!0,{variantName:({type:r})=>[r],button:{imgWidth:50},repr:{poseAs:N(Zf),showAsUnknown:N(wp.boolean)},valueDefaults:{},params:{type:Se("not")},validateParams:({type:r},n,e)=>({type:yl(yr,r,n,e.type.defaultValue)}),idPrefix:({type:r})=>r,size:()=>({gridWidth:4,gridHeight:4}),makeNodes:()=>({ins:{In:[[-4,0,"w",{leadLength:20}]]},outs:{Out:[4,0,"e",{leadLength:20}]}}),initialValue:()=>!1}),Dl=class extends ha{get numBits(){return 1}constructor(n,e,o){super(n,Cr.with(e),e.type,o)}gateTypes(){return yr}toJSON(){return super.toJSONBase()}pointerDoubleClicked(n){let e=super.pointerDoubleClicked(n);return e.isChange?e:this.parent.mode>=3?(this.doSetType(this.type==="buf"?"not":"buf"),X.SimpleChange):X.NoChange}};p(Dl,"Gate1");Cr.impl=Dl;var Ke=ye(fs+"",!0,!0,{variantName:({type:r,bits:n})=>[r,`${r}-${n}`],button:{imgWidth:50},repr:{poseAs:N(Jf),showAsUnknown:N(wp.boolean)},valueDefaults:{},params:{bits:Se(2,[2,3,4,5,6,7,8,12,16,24,32]),type:Se("and")},validateParams:({type:r,bits:n},e,o)=>({type:yl(n>2?ri:mo,r,e,o.type.defaultValue),numBits:n}),idPrefix:({type:r})=>r,size:({numBits:r})=>({gridWidth:4,gridHeight:r!==2&&r!==4&&r!==6?5:4}),makeNodes:({numBits:r})=>({ins:{In:ue("w",-4,0,r,void 0,{leadLength:20})},outs:{Out:[4,0,"e",{leadLength:20}]}}),initialValue:()=>!1}),bl=class extends ha{constructor(e,o,i){super(e,Ke.with(o),o.type,i);this.numBits=o.numBits,this.updateLeadsFor(o.type)}gateTypes(e){return e>2?ri:mo}toJSON(){return{...this.toJSONBase(),bits:this.numBits!==Ke.aults.bits?this.numBits:void 0}}pointerDoubleClicked(e){let o=super.pointerDoubleClicked(e);if(o.isChange)return o;if(this.parent.mode>=3){let i=(()=>{switch(this.type){case"imply":return"rimply";case"rimply":return"imply";case"nimply":return"rnimply";case"rnimply":return"nimply";case"txa":return"txb";case"txb":return"txna";case"txna":return"txnb";case"txnb":return"txa";default:return}})();if(i!==void 0)return this.doSetType(i),X.SimpleChange}return X.NoChange}makeComponentSpecificContextMenuItems(){let e=C.Components.Generic.contextMenu;return[...Yu.includes(this.type)?[]:[this.makeChangeParamsContextMenuItem("inputs",e.ParamNumInputs,this.numBits,"bits"),["mid",E.sep()]],...super.makeComponentSpecificContextMenuItems()]}};p(bl,"GateN");Ke.impl=bl;function*xy(r){let n=0,e=1<<r;for(;n<e;)yield n.toString(2).padStart(r,"0").split("").reverse().map(s=>s==="1"),n++}p(xy,"valueCombinations");function Ty([r,n]){let e=n.map(({matchesCurrent:o,cells:i})=>Ii(o?le("current"):mt,...i.map(s=>Ws(Gr(s)))));return uu(le("truth-table"),lu(Ii(...r.map(o=>Hs(o)))),cu(...e))}p(Ty,"makeTruthTable");function Ay(r,n,e,o){let i=Math.min(4,r),s=200+Math.max(0,i-2)*50;return $(n,W(V(e),V(o)),s)}p(Ay,"makeGateTooltip");var Cl=pe(_e());var wo=ye(fs+"-array",!0,!0,{variantName:({type:r,bits:n})=>["gate-array",`${r}-array`,`${r}-array-${n}`],idPrefix:"array",button:{imgWidth:50},repr:{bits:N(Cl.number),showAsUnknown:N(Cl.boolean)},valueDefaults:{showAsUnknown:!1},params:{bits:Se(4,[2,4,8,16]),type:Se("and",mo.values)},validateParams:({type:r,bits:n},e,o)=>({type:yl(mo,r,e,o.type.defaultValue,"-array"),numBits:n}),size:qo.size,makeNodes:({numBits:r})=>{let n=5+Math.max(0,(r-8)/2);return{ins:{A:ue("w",-3,-n,r),B:ue("w",-3,n,r)},outs:{S:ue("e",3,0,r)}}},initialValue:(r,{numBits:n})=>j(!1,n)}),vl=class extends xe{constructor(e,o,i){var s;super(e,wo.with(o),i);this.numBits=o.numBits,this._type=o.type,this._showAsUnknown=(s=i==null?void 0:i.showAsUnknown)!=null?s:wo.aults.showAsUnknown}toJSON(){return{...this.toJSONBase(),bits:this.numBits===wo.aults.bits?void 0:this.numBits,showAsUnknown:this._showAsUnknown===wo.aults.showAsUnknown?void 0:this._showAsUnknown}}jsonType(){return`${this._type}-array`}get type(){return this._type}makeTooltip(){let e=C.Components.GateArray.tooltip,o=C.Components.Gate[this._type][0];return $(e.title,W(V(e.desc.expand({op:o}))))}doRecalcValue(){let e=mo.props[this._type].out,o=this.inputValues(this.inputs.A),i=this.inputValues(this.inputs.B);return At(s=>e([o[s],i[s]]),this.numBits)}propagateValue(e){this.outputValues(this.outputs.S,e)}doDraw(e,o){this.doDrawDefault(e,o,{skipLabels:!0,drawInside:({left:i,right:s})=>{if(this._showAsUnknown)o.inNonTransformedFrame(()=>{e.fillStyle=dt,e.font="bold 20px sans-serif",e.textAlign="center",se(e,te.middle,"?",this.posX,this.posY)});else{e.lineWidth=2,e.strokeStyle=J,e.beginPath();let a=this.posY-H,u=this.posY+H,l=i+10,c=s-10,d=Math.PI/2,h=this._type,m=p(()=>{e.beginPath(),ln(e,c+3,this.posY,5),e.stroke()},"drawRightCircle"),f=p(g=>{e.beginPath(),ln(e,l-3,this.posY-(g?1:-1)*4,5),e.stroke()},"drawLeftCircle");switch(h){case"and":case"nand":case"nimply":case"rnimply":{e.moveTo(this.posX,u),e.lineTo(l,u),e.lineTo(l,a),e.lineTo(this.posX,a),e.arc(this.posX,this.posY,H,-d,d),e.closePath(),e.stroke(),e.beginPath(),h.startsWith("nand")&&m(),h==="nimply"?f(!1):h==="rnimply"&&f(!0);break}case"or":case"nor":case"xor":case"xnor":case"imply":case"rimply":{e.beginPath(),e.moveTo(l,a),e.lineTo(this.posX-5,a),e.bezierCurveTo(this.posX+2,a,c-5,this.posY-8,c,this.posY),e.bezierCurveTo(c-5,this.posY+8,this.posX+2,u,this.posX-5,u),e.lineTo(l,u),e.quadraticCurveTo(this.posX-4,this.posY,l,a),e.closePath(),e.stroke();let g=l;l+=2,(h.startsWith("nor")||h.startsWith("xnor"))&&m(),h==="imply"?f(!0):h==="rimply"&&f(!1),h.startsWith("x")&&(e.beginPath(),e.moveTo(g-4,u),e.quadraticCurveTo(this.posX-8,this.posY,g-4,a),e.stroke());break}case"txa":case"txna":{e.beginPath(),e.moveTo(l,u),e.lineTo(l,a),e.lineTo(c,this.posY),e.lineTo(l+2,this.posY),e.stroke(),h==="txna"&&f(!0);break}case"txb":case"txnb":{e.beginPath(),e.moveTo(l,a),e.lineTo(l,u),e.lineTo(c,this.posY),e.lineTo(l+2,this.posY),e.stroke(),h==="txnb"&&f(!1);break}}}}})}doSetType(e){this._type=e,this.setNeedsRecalc(),this.requestRedraw({why:"quad gate type changed",invalidateTests:!0})}doSetShowAsUnknown(e){this._showAsUnknown=e,this.requestRedraw({why:"display as unknown changed"})}makeComponentSpecificContextMenuItems(){let e=C.Components.GateArray.contextMenu,o=[],i=["and","or","xor","nand","nor","xnor","-","imply","rimply","nimply","rnimply"].filter(a=>this.parent.editor.allowGateType(a));if(i.length!==0){i[0]==="-"?i.shift():i[i.length-1]==="-"&&i.pop();for(let a of i)if(a==="-")o.push(E.sep());else{let u=this._type===a?"check":"none";o.push(E.item(u,a.toUpperCase(),()=>{this.doSetType(a)}))}}let s=[];if(o.length>=2&&s.push(["mid",E.submenu("settings",e.Type,o)]),this.parent.mode>=4){let a=E.item(this._showAsUnknown?"check":"none",e.ShowAsUnknown,()=>{this.doSetShowAsUnknown(!this._showAsUnknown)});s.push(["mid",a])}return s.push(["mid",E.sep()],this.makeChangeParamsContextMenuItem("inputs",C.Components.Generic.contextMenu.ParamNumBits,this.numBits,"bits"),...this.makeForceOutputsContextMenuItem(!0)),s}};p(vl,"GateArray");wo.impl=vl;var ms=Me("halfadder",{idPrefix:"hadder",button:{imgWidth:50},valueDefaults:{},size:{gridWidth:4,gridHeight:6},makeNodes:()=>{let r=C.Components.Generic;return{ins:{A:[-4,-2,"w","A",{hasTriangle:!0}],B:[-4,2,"w","B",{hasTriangle:!0}]},outs:{S:[4,-2,"e",r.OutputSumDesc,{hasTriangle:!0}],C:[4,2,"e",r.OutputCarryDesc,{hasTriangle:!0}]}}},initialValue:()=>({s:!1,c:!1})}),wl=class extends me{constructor(n,e){super(n,ms,e)}toJSON(){return this.toJSONBase()}makeTooltip(){let n=C.Components.HalfAdder.tooltip;return $(n.title,W(V(n.desc)))}doRecalcValue(){let n=this.inputs.A.value,e=this.inputs.B.value;if(U(n)||U(e)||be(n)||be(e))return{s:I,c:I};switch(+n+ +e){case 0:return{s:!1,c:!1};case 1:return{s:!0,c:!1};case 2:return{s:!1,c:!0};default:return console.log("ERROR: sum of halfadder is > 2"),{s:!1,c:!1}}}propagateValue(n){this.outputs.S.value=n.s,this.outputs.C.value=n.c}doDraw(n,e){this.doDrawDefault(n,e,()=>{n.fillStyle=J,n.font="26px sans-serif",n.textAlign="center",se(n,te.middle,"+",this.posX,this.posY-2)})}makeComponentSpecificContextMenuItems(){return this.makeForceOutputsContextMenuItem()}};p(wl,"HalfAdder");ms.impl=wl;var xp=pe(_e());var io=Me("label",{idPrefix:"label",button:{imgWidth:32},repr:{text:xp.string,font:N(xp.string)},valueDefaults:{text:"Label",font:Iu},size:{gridWidth:4,gridHeight:2},makeNodes:()=>({})}),gs=class extends me{constructor(e,o){var i,s;super(e,io,o);this._cachedTextMetrics=void 0;this._text=(i=o==null?void 0:o.text)!=null?i:io.aults.text,this._font=(s=o==null?void 0:o.font)!=null?s:io.aults.font}toJSON(){return{...this.toJSONBase(),text:this._text,font:this._font===io.aults.font?void 0:this._font}}get unrotatedWidth(){var e,o;return(o=(e=this._cachedTextMetrics)==null?void 0:e.width)!=null?o:H*this._text.length}get unrotatedHeight(){let e=this._cachedTextMetrics;return e===void 0?2*H:e.actualBoundingBoxAscent+e.actualBoundingBoxDescent}get text(){return this._text}doRecalcValue(){}get drawZIndex(){return Dn.Overlay}doDraw(e,o){if(e.font=this._font,e.lineWidth=3,o.isMouseOver){this._cachedTextMetrics===void 0&&(this._cachedTextMetrics=e.measureText(this._text));let i=this.unrotatedWidth,s=this.unrotatedHeight;e.strokeStyle=o.borderColor,e.beginPath(),e.rect(this.posX-i/2,this.posY-s/2,i,s),e.stroke()}e.fillStyle=J,e.textAlign="center",se(e,te.middle,this._text,this.posX,this.posY)}doSetText(e){this._text=e,this._cachedTextMetrics=void 0,this.requestRedraw({why:"text changed",invalidateMask:!0})}doSetFont(e){this._font=e,this._cachedTextMetrics=void 0,this.requestRedraw({why:"font changed",invalidateMask:!0})}makeComponentSpecificContextMenuItems(){let e=C.Components.Label.contextMenu,o=E.item("pen",e.ChangeText,this.runSetTextDialog.bind(this),"\u21A9\uFE0E"),i=E.item("font",e.Font,()=>{this.runSetFontDialog(this._font,io.aults.font,this.doSetFont.bind(this))});return[["mid",o],["mid",i]]}runSetTextDialog(){let e=window.prompt(C.Components.Label.contextMenu.ChangeTextPrompt,this._text);if(e!==null){let o=e.length===0?io.aults.text:e;return this.doSetText(o),X.SimpleChange}return X.NoChange}keyDown(e){e.key==="Enter"&&!e.altKey?this.runSetTextDialog():super.keyDown(e)}pointerDoubleClicked(e){let o=super.pointerDoubleClicked(e);return o.isChange?o:this.runSetTextDialog()}};p(gs,"Label");io.impl=gs;var Ds=Me("latch-sr",{idPrefix:"latch",...zn,makeNodes:()=>{let r=zn.makeNodes(),n=C.Components.Generic;return{ins:{S:[-4,-2,"w",n.InputSetDesc,{prefersSpike:!0}],R:[-4,2,"w",n.InputResetDesc,{prefersSpike:!0}]},outs:r.outs}}}),xl=class extends pn{constructor(n,e){super(n,Ds,e)}toJSON(){return this.toJSONBase()}makeTooltip(){let n=C.Components.LatchSR.tooltip;return $(n.title,W(V(n.desc)))}doRecalcValue(){let n=this.inputs.S.value,e=this.inputs.R.value;if(this._isInInvalidState=!1,n===!0)return e===!0?(this._isInInvalidState=!0,[!1,!1]):[!0,!1];if(e===!0)return[!1,!0];let o=this.outputs.Q.value;return[o,Xe.invert(o)]}makeComponentSpecificContextMenuItems(){let n=this._showContent?"check":"none";return[["mid",E.item(n,C.Components.Generic.contextMenu.ShowContent,()=>{this.doSetShowContent(!this._showContent)})],...this.makeForceOutputsContextMenuItem(!0)]}};p(xl,"LatchSR");Ds.impl=xl;var bs=pe(_e());var xo=ye("mux",!0,!0,{variantName:({from:r,to:n,bottom:e})=>`mux-${r}to${n}${e?"b":""}`,idPrefix:"mux",button:{imgWidth:50},repr:{from:N(bs.number),to:N(bs.number),bottom:N(bs.boolean),showWiring:N(bs.boolean)},valueDefaults:{showWiring:!0},params:{to:Se(2,[1,2,4,8,16]),from:Se(4),bottom:Ut()},validateParams:({from:r,to:n,bottom:e})=>{let o=Math.min(16*n,Math.max(2*n,r)),i=Math.ceil(o/n),s=Math.ceil(Math.log2(i));return{numFrom:o,numTo:n,numGroups:i,numSel:s,controlPinsAtBottom:e}},size:({numFrom:r,numTo:n,numGroups:e,numSel:o})=>{let i=2*o,s=qe(n===1?r:n)?1:2,a=n>1?1:0,u=r+(e-1)*a,l=1+s*u;return{gridWidth:i,gridHeight:l}},makeNodes:({numTo:r,numGroups:n,numSel:e,controlPinsAtBottom:o})=>{let i=1+e,s=-i,a=Cu("w",s,0,n,r),u=a[0][0][1],l=a[a.length-1],c=l[l.length-1][1],d=o?c+2:u-2;return{ins:{I:a,S:Rn(o?"s":"n",0,d,e,void 0,{leadLength:35})},outs:{Z:ue("e",i,0,r)}}},initialValue:(r,{numTo:n})=>j(!1,n)}),Tl=class extends xe{constructor(e,o,i){var s;super(e,xo.with(o),i);this.numFrom=o.numFrom,this.numTo=o.numTo,this.numGroups=o.numGroups,this.numSel=o.numSel,this.controlPinsAtBottom=o.controlPinsAtBottom,this._showWiring=(s=i==null?void 0:i.showWiring)!=null?s:xo.aults.showWiring}toJSON(){return{...super.toJSONBase(),from:this.numFrom,to:this.numTo,bottom:this.controlPinsAtBottom===xo.aults.bottom?void 0:this.controlPinsAtBottom,showWiring:this._showWiring!==xo.aults.showWiring?this._showWiring:void 0}}makeTooltip(){return $(void 0,W(V(C.Components.Mux.tooltip.expand({from:this.numFrom,to:this.numTo}))))}doRecalcValue(){let e=this.inputValues(this.inputs.S),o=Ee(e,!1)[1];return U(o)?j(I,this.numTo):this.inputValues(this.inputs.I[o])}propagateValue(e){this.outputValues(this.outputs.Z,e)}doDraw(e,o){let{top:i,left:s,bottom:a,right:u}=this.bounds(),l=(u-s)/3;for(let d of this.inputs.I)for(let h of d)Be(e,h);for(let d of this.inputs.S)Be(e,d);for(let d of this.outputs.Z)Be(e,d);e.fillStyle=ot;let c=e.createPath();if(c.moveTo(s,i),c.lineTo(u,i+l),c.lineTo(u,a-l),c.lineTo(s,a),c.closePath(),e.fill(c),this._showWiring){let d=this.inputValues(this.inputs.S),h=Ee(d,!1)[1];if(!U(h)){let m=this.parent.editor.options.hideWireColors,f=this.inputs.I[h],g=(u-s)/3,D=this.parent.editor.options.wireStyle,y=D===ct.bezier||D===ct.auto,w=o.drawParams.drawTimeAnimationFraction;for(let x=0;x<f.length;x++){this.parent.editor.options.wireStyle,e.beginPath();let S=f[x].posYInParentTransform,T=this.outputs.Z[x],A=T.posYInParentTransform;e.moveTo(s+1,S),y?e.bezierCurveTo(s+g,S,u-g,A,u-1,A):(e.lineTo(s+3,S),e.lineTo(u-3,A),e.lineTo(u-1,A)),ti(e,f[x].value,T.color,m,w)}}}e.lineWidth=3,e.strokeStyle=o.borderColor,e.stroke(c)}doSetShowWiring(e){this._showWiring=e,this.requestRedraw({why:"show wiring changed"})}makeComponentSpecificContextMenuItems(){let e=C.Components.MuxDemux.contextMenu,o=this._showWiring?"check":"none",i=E.item(o,e.ShowWiring,()=>{this.doSetShowWiring(!this._showWiring)});return[this.makeChangeParamsContextMenuItem("outputs",e.ParamNumTo,this.numTo,"to"),this.makeChangeParamsContextMenuItem("inputs",e.ParamNumFrom,this.numFrom,"from",[2,4,8,16].map(s=>s*this.numTo)),["mid",E.sep()],this.makeChangeBooleanParamsContextMenuItem(this.numSel===1?C.Components.Generic.contextMenu.ParamControlBitAtBottom:C.Components.Generic.contextMenu.ParamControlBitsAtBottom,this.controlPinsAtBottom,"bottom"),["mid",i],...this.makeForceOutputsContextMenuItem(!0)]}};p(Tl,"Mux");xo.impl=Tl;var lm=pe(_e());var so=ye("pixel",!0,!0,{variantName:({bits:r,gray:n,touch:e})=>`pixel${n?"-gray":""}${e?"-touch":""}-${r}`,idPrefix:"pixel",button:{imgWidth:32},repr:{full:N(lm.boolean)},valueDefaults:{full:!0},params:{bits:Se(2,[1,2,4,8]),touch:Ut(),gray:Ut()},validateParams:({bits:r,touch:n,gray:e})=>({numBits:r,isTouch:n,isGray:e}),size:({numBits:r})=>{let n=qe(r)?r:2*r;return{gridWidth:n,gridHeight:n}},makeNodes:({numBits:r,isGray:n,isTouch:e,gridWidth:o})=>{let i=o/2+1;return{ins:{R:n?void 0:Rn("n",0,-i,r),G:ue("w",-i,0,r),B:n?void 0:Rn("s",0,i,r)},outs:{T:e?[i,0,"e"]:void 0}}},initialValue:()=>({color:Qr,pressed:!1})}),Al=class extends xe{constructor(e,o,i){var s;super(e,so.with(o),i);this.numBits=o.numBits,this.isGray=o.isGray,this.isTouch=o.isTouch,this._full=o.numBits===1?!0:(s=i==null?void 0:i.full)!=null?s:so.aults.full}toJSON(){return{...this.toJSONBase(),bits:this.numBits===so.aults.bits?void 0:this.numBits,gray:this.isGray===so.aults.gray?void 0:this.isGray,touch:this.isTouch===so.aults.touch?void 0:this.isTouch,full:this._full===so.aults.full?void 0:this._full}}isOver(e,o){return this.isTouch?this._isOverThisRect(e,o):super.isOver(e,o)}makeTooltip(){let e=C.Components.Pixel;return $(void 0,W(e.tooltip))}doRecalcValue(){let{pressed:e}=this.value,[o,i]=Ee(this.inputValues(this.inputs.G),!1),s;if(U(i))s=Qr;else if(this.isGray)s=[i,i,i];else{let[a,u]=Ee(this.inputValues(this.inputs.R),!1),[l,c]=Ee(this.inputValues(this.inputs.B),!0);U(u)||U(c)?s=Qr:s=[u,i,c]}return{color:s,pressed:e}}doSetValueWithPressed(e){let{color:o}=this.value;this.doSetValue({color:o,pressed:e})}propagateValue(e){"T"in this.outputs&&(this.outputs.T.value=e.pressed)}doDraw(e,o){super.doDrawDefault(e,o);let[i,s,a]=this.value.color,u=(1<<this.numBits)-1,l=p(D=>Math.round(D/u*255),"colorComp"),c=`rgba(${l(i)}, ${l(s)}, ${l(a)}, 0.5)`,d=`rgb(${l(i)}, ${l(s)}, ${l(a)})`,h=this.bounds(),{width:m,height:f}=h,g=1;!this._full&&this.numBits>1&&(e.fillStyle=c,e.fillRect(this.posX-m/2+g,this.posY-f/2+g,m-g*2,f-g*2),g=10),e.fillStyle=d,e.fillRect(this.posX-m/2+g,this.posY-f/2+g,m-g*2,f-g*2)}doSetFull(e){this._full!==e&&(this._full=e,this.requestRedraw({why:"pixel full changed"}))}makeComponentSpecificContextMenuItems(){let e=C.Components.Pixel.contextMenu,o=this.numBits===1?[]:[["mid",E.item(this._full?"check":"none",e.Full,()=>this.doSetFull(!this._full))]];return[this.makeChangeBooleanParamsContextMenuItem(e.ParamGrayscale,this.isGray,"gray"),this.makeChangeParamsContextMenuItem("inputs",e.ParamNumBits,this.numBits,"bits"),["mid",E.sep()],this.makeChangeBooleanParamsContextMenuItem(e.ParamTouch,this.isTouch,"touch"),...o]}pointerDown(e){return this.isTouch&&this.doSetValueWithPressed(!0),super.pointerDown(e)}pointerUp(e){let o=super.pointerUp(e);return this.isTouch&&this.doSetValueWithPressed(!1),o}cursorWhenMouseover(e){let o=super.cursorWhenMouseover(e);return this.isTouch&&(o==="grab"||o===void 0)&&this.parent.mode>=1?"pointer":o}};p(Al,"Pixel");so.impl=Al;var pm=pe(_e());var cm=pe(La()),On=pe(_e());var ys={button:{imgWidth:50},repr:{bits:N(On.number),lines:N(On.number),showContent:N(On.boolean),displayRadix:N(On.number),content:N(On.union([On.string,On.array(On.string)]))},valueDefaults:{showContent:!0,displayRadix:void 0},params:{bits:Se(4,[4,8,16,24,32]),lines:Se(16,[4,8,16,32,64,128,256,512,1024,2048])},validateParams:({bits:r,lines:n})=>{let e=Math.ceil(Math.log2(n)),o=Math.pow(2,e);return{numDataBits:r,numAddressBits:e,numWords:o}},size:({numWords:r,numDataBits:n})=>({gridWidth:11,gridHeight:Math.max(r<=16?16:22,n+4)}),makeNodes:({numDataBits:r,numAddressBits:n,gridHeight:e})=>{let o=-Math.ceil((e+1)/2);return{ins:{Addr:Rn("n",0,o,n)},outs:{Q:ue("e",7,0,r)}}},initialValue:(r,{numDataBits:n,numWords:e})=>{if(r===void 0||r.content===void 0)return To.defaultValue(e,n);let o=To.contentsFromString(r.content,n,e),i=[...o[0]];return{mem:o,out:i}}},To=class extends xe{constructor(e,o,i,s){var a,u;super(e,o.with(i),s);this.numDataBits=i.numDataBits,this.numAddressBits=i.numAddressBits,this.numWords=i.numWords,this._showContent=(a=s==null?void 0:s.showContent)!=null?a:this.canShowContent()?$t.aults.showContent:!1,this._displayRadix=(u=s==null?void 0:s.displayRadix)!=null?u:$t.aults.displayRadix}static defaultValue(e,o){return To.valueFilledWith(!1,e,o)}static valueFilledWith(e,o,i){let s=new Array(o);for(let u=0;u<o;u++)s[u]=j(e,i);let a=j(e,i);return{mem:s,out:a}}static contentsFromString(e,o,i){let s=ae(e)?e:e.split(/\s+/),a=new Array(i);for(let u=0;u<i;u++){let l=u>=s.length?j(!1,o):ou(s[u],o);a[u]=l}return a}toJSONBase(){return{...super.toJSONBase(),bits:this.numDataBits===$t.aults.bits?void 0:this.numDataBits,lines:this.numWords===$t.aults.lines?void 0:this.numWords,showContent:this.canShowContent()&&this._showContent!==$t.aults.showContent?this._showContent:void 0,displayRadix:this._displayRadix!==$t.aults.displayRadix?this._displayRadix:void 0,content:this.contentRepr(" ",!0)}}contentRepr(e,o){let i=[],s=this.numDataBits>=8,a=Math.ceil(this.numDataBits/4);for(let l=0;l<this.numWords;l++){let c=this.value.mem[l],d=s&&tu(c)?nu(c,a):po(c);i.push(d)}if(o){let l=0;for(let c=this.numWords-1;c>=0&&Bi(i[c]);c--)l++;l>0&&i.splice(this.numWords-l,l)}return i.length===0?void 0:i.join(e)}currentAddress(){let e=this.inputValues(this.inputs.Addr),[o,i]=Ee(e,!1);return i}propagateValue(e){this.outputValues(this.outputs.Q,e.out)}canShowContent(){return this.numWords<=64&&this.numDataBits<=16}doSetShowContent(e){this._showContent=e,this.requestRedraw({why:"show content changed"})}doDraw(e,o){this.doDrawDefault(e,o,(i,{width:s,height:a})=>{let u=this.value.mem,l=this.currentAddress(),c,d;if(!this._showContent||!this.canShowContent()||this.parent.editor.options.hideMemoryContent){e.font="bold 18px sans-serif",e.fillStyle=J,e.textAlign="center",se(e,te.middle,this.moduleName,this.posX,this.posY-6),e.font="11px sans-serif";let h=this.numWords>=1024?`${this.numWords/1024}k`:this.numWords.toString();se(e,te.middle,`${h} \xD7 ${this.numDataBits} bits`,this.posX,this.posY+12),d=this.posX,c=this.posY+25}else{let h=ce.isVertical(this.orient),m=h,f=this._displayRadix!==void 0?12:0,g=this.posY-f/2,[D,y]=h?[a-66,s-30-f]:[s-42,a-30-f],w=10,x=!1,S=Math.floor((y-f)*2/this.numWords)/2;if(S<=2&&m&&(x=!0,S=Math.floor((y-f)*4/this.numWords)/2),x){let T=Math.floor((D/2-2*w)*2/this.numDataBits)/2;d=this.posX,c=Tp(e,u,this.numDataBits,l,0,this.numWords/2,this.posX+2-38,g,T,S),Tp(e,u,this.numDataBits,l,this.numWords/2,this.numWords,this.posX+2+38,g,T,S)}else{let T=Math.floor((D-w)*2/this.numDataBits)/2;d=this.posX+3,c=Tp(e,u,this.numDataBits,l,0,this.numWords,d,g,T,S)}}if(this._displayRadix!==void 0){let h=U(l)?I:Ee(u[l],!1)[1],m=gr(h,this._displayRadix,this.numDataBits,!0);e.fillStyle=J,e.textAlign="center",se(e,te.top,`${m}`,d,c+3)}})}doSetDisplayRadix(e){this._displayRadix=e,this.requestRedraw({why:"additional display radix changed"})}doSetMem(e){let o=this.currentAddress(),i=U(o)?j(I,this.numDataBits):e[o];this.doSetValue({mem:e,out:i},!0)}makeComponentSpecificContextMenuItems(){let e=C.Components.RAM.contextMenu,o=C.Components.Generic.contextMenu,i=C.Components.Display.contextMenu,s=p((f,g)=>{let D=this._displayRadix===f?"check":"none";return E.item(D,g,()=>this.doSetDisplayRadix(f))},"makeItemShowRadix"),a=["mid",E.item("memcontent",e.EditContent,()=>{let f=this.contentRepr(" ",!1),g=window.prompt(e.EditContentPrompt,f);g!==null&&this.doSetMem(Ao.contentsFromString(g,this.numDataBits,this.numWords))})],u=["mid",E.item("download",e.SaveContent,()=>{var D;let f=new Blob([this.contentRepr(`
`,!1)],{type:"text/plain"}),g=this.parent.editor.documentDisplayName+"."+((D=this.ref)!=null?D:this.moduleName.toLowerCase())+"-content.txt";(0,cm.saveAs)(f,g)})],l=["mid",E.item("open",e.LoadContent,()=>{this.parent.editor.runFileChooser("text/plain",async f=>{let g=await f.text();this.doSetMem(Ao.contentsFromString(g,this.numDataBits,this.numWords))})})],c=["mid",E.item("replace",e.SwapROMRAM,()=>{let f=this instanceof fa,g=this.toNodelessJSON();g.type=f?"ram":"rom";let y=(f?$t:hi).makeFromJSON(this.parent,g);return y===void 0?(console.warn("Could not swap ROM/RAM from repr:",g),X.NoChange):(this.replaceWithComponent(y),X.SimpleChange)})],d=["mid",E.submenu("eye",e.SelectedDataDisplay,[s(void 0,i.DisplayNone),E.sep(),s(2,i.DisplayAsBinary),s(16,i.DisplayAsHexadecimal),s(10,i.DisplayAsDecimal),s(-10,i.DisplayAsSignedDecimal),s(8,i.DisplayAsOctal)])],h=this._showContent?"check":"none",m=this.canShowContent()?[["mid",E.item(h,o.ShowContent,()=>this.doSetShowContent(!this._showContent))]]:[];return[...this.makeSpecificROMRAMItems(),d,...m,["mid",E.sep()],a,u,l,["mid",E.sep()],c,["mid",E.sep()],this.makeChangeParamsContextMenuItem("memlines",o.ParamNumWords,this.numWords,"lines"),this.makeChangeParamsContextMenuItem("outputs",C.Components.Generic.contextMenu.ParamNumBits,this.numDataBits,"bits"),...this.makeForceOutputsContextMenuItem(!0)]}makeSpecificROMRAMItems(){return[]}};p(To,"ROMRAMBase");function Tp(r,n,e,o,i,s,a,u,l,c){let d=s-i,h=u-d/2*c,m=a-e/2*l,f=m+e*l,g=h+d*c;r.fillStyle=mr,r.fillRect(m,h,f-m,g-h);for(let y=i;y<s;y++)for(let w=0;w<e;w++){let x=n[y][e-w-1];x!==!1&&(r.fillStyle=zt(x),r.fillRect(m+w*l,h+y*c,l,c))}r.strokeStyle=J,r.lineWidth=.5;for(let y=1;y<d;y++){let w=h+y*c;na(r,m,w,f,w)}for(let y=1;y<e;y++){let w=m+y*l;na(r,w,h,w,g)}let D=2;if(r.lineWidth=D,r.strokeRect(m-D/2,h-D/2,f-m+D,g-h+D),!U(o)&&o>=i&&o<s){let y=h+(o-i)*c+c/2,w=m-3,x=8,S=3;r.beginPath(),r.moveTo(w,y),r.lineTo(w-x,y+S),r.lineTo(w-x+2,y),r.lineTo(w-x,y-S),r.closePath(),r.fillStyle=J,r.fill()}return g}p(Tp,"drawMemoryCells");var hi=ye("rom",!0,!0,{variantName:({bits:r,lines:n})=>`rom-${n}x${r}`,idPrefix:"rom",...ys}),fa=class extends To{constructor(n,e,o){super(n,hi,e,o)}toJSON(){return super.toJSONBase()}get moduleName(){return"ROM"}doRecalcValue(){let{mem:n}=this.value,e=this.currentAddress(),o=U(e)?j(I,this.numDataBits):n[e];return{mem:n,out:o}}makeTooltip(){let n=C.Components.ROM.tooltip;return $(n.title,W(V(n.desc.expand({numWords:this.numWords,numDataBits:this.numDataBits}))))}};p(fa,"ROM");hi.impl=fa;var $t=ye("ram",!0,!0,{variantName:({bits:r,lines:n})=>`ram-${n}x${r}`,idPrefix:"ram",...ys,repr:{...ys.repr,trigger:N(pm.keyof(et))},valueDefaults:{...ys.valueDefaults,trigger:et.rising},makeNodes:(r,n)=>{let e=ys.makeNodes(r,n),{numDataBits:o,gridHeight:i}=r,s=Math.ceil((i+1)/2),a=s-2,u=C.Components.Generic;return{ins:{Clock:[-7,a,"w",u.InputClockDesc,{isClock:!0}],WE:[-2,s,"s",u.InputWriteEnableDesc],Clr:[2,s,"s",u.InputClearDesc,{prefersSpike:!0}],D:ue("w",-7,0,o),Addr:e.ins.Addr},outs:e.outs}}}),Ao=class extends To{constructor(e,o,i){var s;super(e,$t,o,i);this._trigger=$t.aults.trigger;this._lastClock=I;this._trigger=(s=i==null?void 0:i.trigger)!=null?s:$t.aults.trigger}toJSON(){return{...super.toJSONBase(),trigger:this._trigger!==$t.aults.trigger?this._trigger:void 0}}get moduleName(){return"RAM"}get trigger(){return this._trigger}doSetTrigger(e){this._trigger=e,this.requestRedraw({why:"trigger changed",invalidateTests:!0})}doRecalcValue(){let e=this.inputs.Clr.value,o=this.numWords;if(e===!0)return Ao.valueFilledWith(!1,o,this.numDataBits);let i=this.currentAddress(),s=this._lastClock,a=this._lastClock=this.inputs.Clock.value,u=this.value;if(this.inputs.WE.value!==!0||!gt.isClockTrigger(this.trigger,s,a)){let h=U(i)?j(I,this.numDataBits):u.mem[i];return{mem:u.mem,out:h}}if(U(i))return Ao.valueFilledWith(I,o,this.numDataBits);let c=this.inputValues(this.inputs.D).map(Xe.filterHighZ),d=new Array(o);for(let h=0;h<o;h++)h===i?d[h]=c:d[h]=u.mem[h];return{mem:d,out:c}}makeTooltip(){let e=C.Components.RAM.tooltip;return $(e.title,W(V(e.desc.expand({numWords:this.numWords,numDataBits:this.numDataBits}))))}override(){return[...$o(this._trigger,this.doSetTrigger.bind(this)),["mid",E.sep()]]}};p(Ao,"RAM");$t.impl=Ao;var fi=pe(_e());var Eo=pe(_e());var wr={button:{imgWidth:50},repr:{bits:N(Eo.number),showContent:N(Eo.boolean),trigger:N(Eo.keyof(et)),content:N(Eo.string)},valueDefaults:{showContent:!0,trigger:et.rising},params:{bits:Se(4,[2,4,8,16])},validateParams:({bits:r})=>({numBits:r}),size:({numBits:r})=>({gridWidth:7,gridHeight:r===2?11:Math.max(15,5+r)}),makeNodes:({numBits:r,gridHeight:n})=>{let e=(n+1)/2,o=e-2,i=-e,s=C.Components.Generic;return{ins:{Clock:[-5,o,"w",s.InputClockDesc,{isClock:!0}],Pre:[0,i,"n",s.InputPresetDesc,{prefersSpike:!0}],Clr:[0,e,"s",s.InputClearDesc,{prefersSpike:!0}]},outs:{Q:ue("e",5,0,r)}}},initialValue:(r,{numBits:n})=>{let e;return r===void 0||(e=r.content)===void 0?j(!1,n):ou(e,n)}},So=class extends xe{constructor(e,o,i,s){var a,u;super(e,o.with(i),s);this._isInInvalidState=!1;this._lastClock=I;this.numBits=i.numBits,this._showContent=(a=s==null?void 0:s.showContent)!=null?a:vn.aults.showContent,this._trigger=(u=s==null?void 0:s.trigger)!=null?u:vn.aults.trigger}toJSONBase(){return{bits:this.numBits===vn.aults.bits?void 0:this.numBits,...super.toJSONBase(),showContent:this._showContent!==vn.aults.showContent?this._showContent:void 0,trigger:this._trigger!==vn.aults.trigger?this._trigger:void 0,content:this.contentRepr(!0)}}contentRepr(e){let o=this.value,i=Math.ceil(this.numBits/4),s=tu(o)?nu(o,i):po(o);return e&&Bi(s)?void 0:s}get trigger(){return this._trigger}doRecalcValue(){let e=this._lastClock,o=this._lastClock=this.inputs.Clock.value,{isInInvalidState:i,newState:s}=gt.doRecalcValueForSyncComponent(this,e,o,this.inputs.Pre.value,this.inputs.Clr.value);return this._isInInvalidState=i,s}makeInvalidState(){return j(!1,this.numBits)}makeStateFromMainValue(e){return j(e,this.numBits)}propagateValue(e){this.outputValues(this.outputs.Q,e)}doSetShowContent(e){this._showContent=e,this.requestRedraw({why:"show content changed"})}doSetTrigger(e){this._trigger=e,this.requestRedraw({why:"trigger changed",invalidateTests:!0})}doDraw(e,o){this.doDrawDefault(e,o,i=>{this._showContent&&!this.parent.editor.options.hideMemoryContent?So.drawStoredValues(e,i,this.outputs.Q,this.posX,ce.isVertical(this.orient)):this.doDrawGenericCaption(e)})}static drawStoredValues(e,o,i,s,a){let u=qe(i.length)?H:2*H;for(let l of i)pn.drawStoredValue(e,l.value,...o.rotatePoint(s,l.posYInParentTransform),u,a)}makeComponentSpecificContextMenuItems(){let e=C.Components.Generic.contextMenu,o=this._showContent?"check":"none",i=E.item(o,e.ShowContent,()=>this.doSetShowContent(!this._showContent));return[this.makeChangeParamsContextMenuItem("outputs",e.ParamNumBits,this.numBits,"bits"),...this.makeRegisterSpecificContextMenuItems(),["mid",E.sep()],...$o(this._trigger,this.doSetTrigger.bind(this)),["mid",E.sep()],["mid",i],...this.makeForceOutputsContextMenuItem(!0)]}makeRegisterSpecificContextMenuItems(){return[]}};p(So,"RegisterBase");var vn=ye("reg",!0,!0,{variantName:({bits:r})=>`reg-${r}`,idPrefix:"reg",...wr,repr:{...wr.repr,inc:N(Eo.boolean),saturating:N(Eo.boolean)},valueDefaults:{...wr.valueDefaults,saturating:!1},params:{bits:wr.params.bits,inc:Ut()},validateParams:({bits:r,inc:n})=>({numBits:r,hasIncDec:n}),makeNodes:(r,n)=>{let e=wr.makeNodes(r,n),o=e.ins.Clr,i=e.ins.Clr[1];return{ins:{...e.ins,D:ue("w",-5,0,r.numBits),...r.hasIncDec?{Clr:[2,i,"s",o[3],o[4]],Inc:[-2,i,"s"],Dec:[0,i,"s"]}:{}},outs:e.outs}}}),Sl=class extends So{constructor(e,o,i){var s;super(e,vn,o,i);this.hasIncDec=o.hasIncDec,this._saturating=this.hasIncDec&&((s=i==null?void 0:i.saturating)!=null?s:vn.aults.saturating)}toJSON(){return{...this.toJSONBase(),inc:this.hasIncDec===vn.aults.inc?void 0:this.hasIncDec,saturating:this._saturating===vn.aults.saturating?void 0:this._saturating}}makeTooltip(){let e=C.Components.Register.tooltip;return $(e.title,W(V(e.desc.expand({numBits:this.numBits}))))}makeStateAfterClock(){var i,s,a,u;let e=(s=(i=this.inputs.Inc)==null?void 0:i.value)!=null?s:!1,o=(u=(a=this.inputs.Dec)==null?void 0:a.value)!=null?u:!1;if(U(e)||U(o)||be(e)||be(o))return j(!1,this.numBits);if(e||o){if(e&&o)return this.value;let[l,c]=Ee(this.value,!1);if(U(c))return j(I,this.numBits);let d;if(e){if(d=c+1,d>=2**this.numBits)return this._saturating?j(!0,this.numBits):j(!1,this.numBits)}else if(d=c-1,d<0)return this._saturating?j(!1,this.numBits):j(!0,this.numBits);return oo.decimalToNBits(d,this.numBits)}return this.inputValues(this.inputs.D).map(Xe.filterHighZ)}doDrawGenericCaption(e){e.font="bold 15px sans-serif",e.fillStyle=J,e.textAlign="center",se(e,te.middle,"Reg.",this.posX,this.posY-8),e.font="11px sans-serif",se(e,te.middle,`${this.numBits} bits`,this.posX,this.posY+10)}doSetSaturating(e){this._saturating=e,this.requestRedraw({why:"saturating changed",invalidateTests:!0})}makeRegisterSpecificContextMenuItems(){let e=C.Components.Register.contextMenu,o=this.hasIncDec?[["mid",E.item(this._saturating?"check":"none",e.Saturating,()=>this.doSetSaturating(!this._saturating))]]:[];return[this.makeChangeBooleanParamsContextMenuItem(e.ParamHasIncDec,this.hasIncDec,"inc"),...o]}};p(Sl,"Register");vn.impl=Sl;var Pn=ye("rand",!0,!0,{variantName:({bits:r})=>`rand-${r}`,idPrefix:"rand",button:{imgWidth:32},repr:{bits:N(fi.number),prob1:N(fi.number),showProb:N(fi.boolean),trigger:N(fi.keyof(et)),name:Pt},valueDefaults:{prob1:.5,showProb:!1,trigger:et.rising},params:{bits:Se(1,[1,2,3,4,7,8,16])},validateParams:({bits:r})=>({numBits:r}),size:({numBits:r})=>({gridWidth:4,gridHeight:4+(qe(r)?r/2:r)*2}),makeNodes:({numBits:r,gridHeight:n})=>{let e=C.Components.Generic;return{ins:{Clock:[-3,n/2-1,"w",e.InputClockDesc,{isClock:!0}]},outs:{Out:ue("e",3,0,r)}}},initialValue:(r,{numBits:n})=>j(!1,n)}),El=class extends xe{constructor(e,o,i){var s,a,u;super(e,Pn.with(o),i);this._lastClock=I;this.numBits=o.numBits,this._prob1=(i==null?void 0:i.prob1)!==void 0?Math.max(0,Math.min(1,i.prob1)):Pn.aults.prob1,this._showProb=(s=i==null?void 0:i.showProb)!=null?s:Pn.aults.showProb,this._trigger=(a=i==null?void 0:i.trigger)!=null?a:Pn.aults.trigger,this._name=(u=i==null?void 0:i.name)!=null?u:void 0}toJSON(){return{...super.toJSONBase(),bits:this.numBits===Pn.aults.bits?void 0:this.numBits,name:this._name,prob1:this._prob1!==Pn.aults.prob1?this._prob1:void 0,showProb:this._showProb!==Pn.aults.showProb?this._showProb:void 0,trigger:this._trigger!==Pn.aults.trigger?this._trigger:void 0}}get allowsForcedOutputs(){return!1}makeTooltip(){let e=C.Components.Random.tooltip;return $(e.title,e.desc[0]+this._prob1+e.desc[1])}doRecalcValue(){let e=this._lastClock,o=this._lastClock=this.inputs.Clock.value;return gt.isClockTrigger(this._trigger,e,o)?At(p(()=>Math.random()<this._prob1,"randBool"),this.numBits):this.value}propagateValue(e){this.outputValues(this.outputs.Out,e)}doDraw(e,o){let i=this.value;this.doDrawDefault(e,o,{componentName:[this._name,!1,()=>Ee(i,!1)[1]],skipLabels:!0,drawLabels:(s,{top:a})=>{if(this.numBits===1){let u=this.outputs.Out[0];pn.drawStoredValue(e,u.value,...s.rotatePoint(this.posX,u.posYInParentTransform),26,!1)}else So.drawStoredValues(e,s,this.outputs.Out,this.posX,ce.isVertical(this.orient));if(this._showProb){let u=ce.isVertical(this.orient);e.fillStyle=Hn,e.font="9px sans-serif";let c=["P(1)","=",String(Math.round(this._prob1*100)/100).substring(1)];if(u){let d=-10,h=Math.abs(d);this.orient==="s"&&(d=-d,h=-h);for(let m of c)Ot(s,this.orient,m,"n",this.posX-d,a-1,void 0),d+=h}else{let d=c.join("\u202F");Ot(s,this.orient,d,"n",this.posX,a,void 0)}}}})}doSetName(e){this._name=e,this.requestRedraw({why:"name changed"})}doSetShowProb(e){this._showProb=e,this.requestRedraw({why:"show probability changed"})}makeComponentSpecificContextMenuItems(){let e=C.Components.Random.contextMenu,o=this._showProb?"check":"none";return[["mid",E.item(o,e.ShowProb,()=>this.doSetShowProb(!this._showProb))],["mid",E.sep()],this.makeChangeParamsContextMenuItem("inputs",C.Components.Generic.contextMenu.ParamNumBits,this.numBits,"bits"),["mid",E.sep()],["mid",this.makeSetNameContextMenuItem(this._name,this.doSetName.bind(this))]]}keyDown(e){e.key==="Enter"&&!e.altKey?this.runSetNameDialog(this._name,this.doSetName.bind(this)):super.keyDown(e)}};p(El,"Random");Pn.impl=El;var Cn=pe(_e());var xr={grey:"grey",red:"red",blue:"blue",yellow:"yellow",green:"green",turquoise:"turquoise"},ao={n:"n",ne:"ne",e:"e",se:"se",s:"s",sw:"sw",w:"w",nw:"nw",c:"c"},at=Me("rect",{idPrefix:"rect",button:{imgWidth:32},repr:{w:Cn.number,h:Cn.number,color:N(Cn.keyof(xr)),strokeWidth:N(Cn.number),noFill:N(Cn.boolean),rounded:N(Cn.boolean),caption:N(Cn.string),captionPos:N(Cn.keyof(ao)),captionInside:N(Cn.boolean),font:N(Cn.string)},valueDefaults:{width:10*H,height:10*H,color:xr.yellow,strokeWidth:2,noFill:!1,rounded:!1,caption:void 0,captionPos:ao.n,captionInside:!1,font:Iu},size:{gridWidth:10,gridHeight:10},makeNodes:()=>({})}),vs=class extends me{constructor(e,o){var i,s,a,u,l,c,d,h,m,f;super(e,at,o);this._w=(i=o==null?void 0:o.w)!=null?i:at.aults.width,this._h=(s=o==null?void 0:o.h)!=null?s:at.aults.height,this._color=(a=o==null?void 0:o.color)!=null?a:at.aults.color,this._strokeWidth=(u=o==null?void 0:o.strokeWidth)!=null?u:at.aults.strokeWidth,this._noFill=(l=o==null?void 0:o.noFill)!=null?l:at.aults.noFill,this._rounded=(c=o==null?void 0:o.rounded)!=null?c:at.aults.rounded,this._caption=(d=o==null?void 0:o.caption)!=null?d:at.aults.caption,this._captionPos=(h=o==null?void 0:o.captionPos)!=null?h:at.aults.captionPos,this._captionInside=(m=o==null?void 0:o.captionInside)!=null?m:at.aults.captionInside,this._font=(f=o==null?void 0:o.font)!=null?f:at.aults.font}toJSON(){return{...this.toJSONBase(),w:this._w,h:this._h,color:this._color,strokeWidth:this._strokeWidth,noFill:this._noFill===at.aults.noFill?void 0:this._noFill,rounded:this._rounded===at.aults.rounded?void 0:this._rounded,caption:this._caption===at.aults.caption?void 0:this._caption,captionPos:this._captionPos===at.aults.captionPos?void 0:this._captionPos,captionInside:this._captionInside===at.aults.captionInside?void 0:this._captionInside,font:this._font===at.aults.font?void 0:this._font}}canRotate(){return!1}get unrotatedWidth(){return this._w}get unrotatedHeight(){return this._h}doRecalcValue(){}get drawZIndex(){return Dn.Background}doDraw(e,o){let i=this._w,s=this._h,a=this.posX-i/2,u=this.posY-s/2;if(e.beginPath(),this._rounded){let l=3*this._strokeWidth;e.moveTo(a+l,u),e.lineTo(a+i-l,u),e.quadraticCurveTo(a+i,u,a+i,u+l),e.lineTo(a+i,u+s-l),e.quadraticCurveTo(a+i,u+s,a+i-l,u+s),e.lineTo(a+l,u+s),e.quadraticCurveTo(a,u+s,a,u+s-l),e.lineTo(a,u+l),e.quadraticCurveTo(a,u,a+l,u)}else e.rect(a,u,i,s);if(e.closePath(),this._noFill||(e.fillStyle=Bu[this._color],e.fill()),this._caption!==void 0){e.fillStyle=J,e.font=this._font;let l=e.measureText(this._caption),c=(l.actualBoundingBoxAscent+l.actualBoundingBoxDescent+this._strokeWidth)/2+2,d=2,h=(l.width+this._strokeWidth)/2+d,m=(()=>{switch(this._captionPos){case"c":case"w":case"e":return this.posY;case"n":case"nw":case"ne":return this.posY-this.height/2+(this._captionInside?1:-1)*c;case"s":case"se":case"sw":return this.posY+this.height/2+(this._captionInside?-1:1)*c}})(),f=(()=>{switch(this._captionPos){case"c":case"n":case"s":return this.posX;case"w":return this.posX-this.width/2+(this._captionInside?1:-1)*h;case"nw":case"sw":return this.posX-this.width/2+h-(this._captionInside?0:1)*(d+this._strokeWidth);case"e":return this.posX+this.width/2+(this._captionInside?-1:1)*h;case"ne":case"se":return this.posX+this.width/2-h+(this._captionInside?0:1)*(d+this._strokeWidth)}})();e.textAlign="center",se(e,te.middle,this._caption,f,m)}o.isMouseOver?(e.lineWidth=Math.max(3,this._strokeWidth),e.strokeStyle=o.borderColor,e.stroke()):this._strokeWidth>0&&(e.lineWidth=this._strokeWidth,e.strokeStyle=Nu[this._color],e.stroke())}doSetColor(e){this._color=e,this.requestRedraw({why:"color changed"})}doSetStrokeWidth(e){this._strokeWidth=e,this.requestRedraw({why:"stroke width changed",invalidateMask:!0})}doSetCaption(e){this._caption=e,this.requestRedraw({why:"caption changed"})}doSetCaptionPos(e){this._captionPos=e,this.requestRedraw({why:"caption position changed"})}doSetFont(e){this._font=e,this.requestRedraw({why:"font changed"})}makeCurrentSizeString(){return`${this._w} \xD7 ${this._h}`}makeComponentSpecificContextMenuItems(){let e=C.Components.Rectangle.contextMenu,o=this.makeCurrentSizeString(),i=E.item("dimensions",e.Size+` (${o})\u2026`,()=>this.runSetSizeDialog(o)),s=p((g,D)=>{let w=this._strokeWidth===g?"check":"none";return E.item(w,D,()=>this.doSetStrokeWidth(g))},"makeSetStrokeWidthItem"),a=p((g,D)=>{let y=this._color===D,w=y?"check":"none",x=y?()=>{}:()=>this.doSetColor(D);if(D!==void 0){let S=this._noFill?"":`background-color: ${Bu[D]}; `,T=this._rounded?"border-radius: 4px; ":"",A=Nu[D];return E.item(w,ke(pt(g),fe(`display: inline-block; width: 140px; height: 18px; ${S}${T}margin-right: 8px; border: 2px solid ${A}`)),x)}else return E.item(w,g,x)},"makeItemUseColor"),u=E.item(this._rounded?"check":"none",e.Rounded,()=>{this._rounded=!this._rounded,this.requestRedraw({why:"rounded changed"})}),l=E.item(this._noFill?"none":"check",e.WithBackgroundColor,()=>{this._noFill=!this._noFill,this.requestRedraw({why:"nofill changed"})}),c=this._caption!==void 0?e.ChangeTitle:e.SetTitle,d=E.item("pen",c,()=>this.runSetCaptionDialog(),"\u21A9\uFE0E"),h=p((g,D)=>{let y=this._captionPos===D,w=y?"check":"none",x=y?()=>{}:()=>this.doSetCaptionPos(D);return E.item(w,g,x)},"makeItemSetPlacement"),m=this._captionPos==="c"?[]:[E.item(this._captionInside?"check":"none",e.InsideFrame,()=>{this._captionInside=!this._captionInside,this.requestRedraw({why:"caption inside changed"})}),E.sep()],f=E.item("font",e.Font,()=>{this.runSetFontDialog(this._font,at.aults.font,this.doSetFont.bind(this))});return[["mid",i],["mid",E.submenu("palette",e.Color,[l,E.sep(),a(e.ColorYellow,xr.yellow),a(e.ColorRed,xr.red),a(e.ColorGreen,xr.green),a(e.ColorBlue,xr.blue),a(e.ColorTurquoise,xr.turquoise),a(e.ColorGrey,xr.grey)])],["mid",E.submenu("strokewidth",e.Border,[s(0,e.BorderNone),E.sep(),s(1,e.Border1px),s(2,e.Border2px),s(3,e.Border3px),s(5,e.Border5px),s(10,e.Border10px)])],["mid",u],["mid",E.sep()],["mid",d],["mid",f],["mid",E.submenu("placement",e.TitlePlacement,[...m,h(e.PlacementTop,ao.n),h(e.PlacementTopLeft,ao.nw),h(e.PlacementTopRight,ao.ne),h(e.PlacementBottom,ao.s),h(e.PlacementBottomLeft,ao.sw),h(e.PlacementBottomRight,ao.se),h(e.PlacementLeft,ao.w),h(e.PlacementRight,ao.e),h(e.PlacementCenter,ao.c)])]]}runSetSizeDialog(e){var i,s;let o=window.prompt(C.Components.Rectangle.contextMenu.SizePrompt,e);if(o!==null){let a;if((a=/^(?<w>\d*)((\s+|( *[x,;] *))(?<h>\d*))?$/.exec(o))!==null){let u=p((d,h)=>{if(d===void 0)return h;let m=parseInt(d);return isNaN(m)||m<=0?h:m},"parse"),l=u((i=a.groups)==null?void 0:i.w,this._w),c=u((s=a.groups)==null?void 0:s.h,this._h);this.doSetDimensions(l,c)}}}doSetDimensions(e,o){this._w=e,this._h=o,this.requestRedraw({why:"size changed",invalidateMask:!0})}wrapContents(e){var f;if(e.size===0)return;let o=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,a=Number.NEGATIVE_INFINITY;for(let g of e)g instanceof Vn&&(o=Math.min(o,g.posX-g.width/2),i=Math.min(i,g.posY-g.height/2),s=Math.max(s,g.posX+g.width/2),a=Math.max(a,g.posY+g.height/2));let u=(o+s)/2,l=(i+a)/2,[c,d]=(f=this.trySetPosition(u,l,!0))!=null?f:[u,l];o=Math.floor((o+Math.max(0,u-c))/H)*H,i=Math.floor((i+Math.max(0,l-d))/H)*H,s=Math.ceil((s+Math.max(0,c-u))/H)*H,a=Math.ceil((a+Math.max(0,d-l))/H)*H;let h=s-o+4*H,m=a-i+4*H;this.doSetDimensions(h,m)}runSetCaptionDialog(){let e=window.prompt(C.Components.Rectangle.contextMenu.SetTitlePrompt,this._caption);if(e!==null){let o=e.length===0?void 0:e;this.doSetCaption(o)}}pointerDoubleClicked(e){return this.runSetSizeDialog(this.makeCurrentSizeString()),X.SimpleChange}keyDown(e){e.key==="Enter"&&!e.altKey?this.runSetCaptionDialog():super.keyDown(e)}};p(vs,"Rectangle");at.impl=vs;var Tr=pe(_e()),hm=pe(er());var fm={raw:{decodeWidth:1,maxDisplayWidth:16,decode:r=>r.toString()},octal:{decodeWidth:3,maxDisplayWidth:16,decode:r=>r.toString()},hex:{decodeWidth:4,maxDisplayWidth:16,decode:r=>r.toString(16).toUpperCase()},ascii:{decodeWidth:7,maxDisplayWidth:12,decode:r=>jo.numberToAscii(r)},ascii8:{decodeWidth:8,maxDisplayWidth:12,decode:r=>jo.numberToAscii(r&127)},uint4:{decodeWidth:4,maxDisplayWidth:8,decode:r=>r.toString()},int4:{decodeWidth:4,maxDisplayWidth:8,decode:r=>(r>7?r-16:r).toString()},uint8:{decodeWidth:8,maxDisplayWidth:4,decode:r=>r.toString()},int8:{decodeWidth:8,maxDisplayWidth:4,decode:r=>(r>127?r-256:r).toString()},uint16:{decodeWidth:16,maxDisplayWidth:1,decode:r=>r.toString()},int16:{decodeWidth:16,maxDisplayWidth:1,decode:r=>(r>32767?r-65536:r).toString()}},Ap=Wt.withProps()(fm),_o=Me("shift-display",{idPrefix:"shiftdisp",button:{imgWidth:50},repr:{state:N(Tr.string),decodeAs:N(Tr.keyof(fm)),groupEvery:N(Tr.number),maxItems:N(Tr.number),trigger:N(Tr.keyof(et))},valueDefaults:{decodeAs:"raw",trigger:et.rising},size:{gridWidth:25,gridHeight:5},makeNodes:()=>{let r=C.Components.Generic;return{ins:{Clock:[-14,1,"w",r.InputClockDesc,{isClock:!0}],Clr:[-10,3,"s",r.InputClearDesc,{prefersSpike:!0}],D:[-14,-1,"w",r.InputDataDesc]}}},initialValue:r=>{if(r===void 0||r.state===void 0)return{incoming:[],decoded:[]};let n=[];for(let e=0;e<r.state.length;e++){let o=r.state.charAt(e);o==="1"?n.push(!0):o==="0"?n.push(!1):n.push(I)}return{incoming:n,decoded:[]}}}),mi=class extends me{constructor(e,o){var i,s,a,u;super(e,_o,o);this._lastClock=I;this._decodeAs=(i=o==null?void 0:o.decodeAs)!=null?i:_o.aults.decodeAs,this._groupEvery=(s=o==null?void 0:o.groupEvery)!=null?s:void 0,this._maxItems=(a=o==null?void 0:o.maxItems)!=null?a:void 0,this._trigger=(u=o==null?void 0:o.trigger)!=null?u:_o.aults.trigger,this.redecodeAll()}toJSON(){let e=dm(this.value).map(o=>nt(o));return{...this.toJSONBase(),state:e.length===0?void 0:e.join(""),decodeAs:this._decodeAs!==_o.aults.decodeAs?this._decodeAs:void 0,groupEvery:this._groupEvery,maxItems:this._maxItems,trigger:this._trigger!==_o.aults.trigger?this._trigger:void 0}}get trigger(){return this._trigger}makeTooltip(){return $(C.Components.ShiftDisplay.tooltip,W(V(hm.default.stringify(this.value))))}doRecalcValue(){var s;if(this.inputs.Clr.value===!0)return{incoming:[],decoded:[]};let e=this._lastClock,o=this._lastClock=this.inputs.Clock.value,i=this.value;if(gt.isClockTrigger(this._trigger,e,o)){let a=this.inputs.D.value,u=Ap.props[this._decodeAs],l=(s=this._maxItems)!=null?s:u.maxDisplayWidth;return mi.valueByAddingNewBit(a,i,u,l)}return i}static valueByAddingNewBit(e,o,i,s){let a=[e,...o.incoming];if(a.length<i.decodeWidth)return{incoming:a,decoded:o.decoded};let u=Ee(a,!0)[1],c=[[U(u)?I:i.decode(u),a],...o.decoded];return c.length>s&&c.splice(s,c.length-s),{incoming:[],decoded:c}}doSetTrigger(e){this._trigger=e,this.requestRedraw({why:"trigger changed",invalidateTests:!0})}doDraw(e,o){this.doDrawDefault(e,o,{drawInside:()=>{let i=p(()=>{let s=this.makeRepresentationString(),a;s===void 0?(e.fillStyle=Hn,e.font="15px sans-serif",a=C.Components.ShiftDisplay.EmptyCaption):(e.fillStyle=J,e.font="bold 16px sans-serif",a=s),se(e,te.middle,a,this.posX,this.posY)},"drawContents");e.textAlign="center",this.orient==="w"?o.inNonTransformedFrame(i):i()}})}makeRepresentationString(){var h;let{incoming:e,decoded:o}=this.value;if(e.length===0&&o.length===0)return;let i=this._decodeAs,a=Ap.props[i].decodeWidth-e.length,l=q0("_\u202F",a)+Ee(e,!0)[0],c=i.includes("int")?" ":"",d;if(o.length===0)d="\u2026";else{let m=(h=this._groupEvery)!=null?h:0;if(m<2)d=o.map(f=>f[0]).join(c);else{let f=m-o.length%m,g=[];for(let D=0;D<o.length;D++)D!==0&&((D+f)%m===0?g.push(c+" "):g.push(c)),g.push(o[D][0]);d=g.join("")}i==="hex"?d="0x"+(m<2?"":" ")+d:i==="octal"&&(d="0o"+(m<2?"":" ")+d)}return i==="raw"?d:l+" \u279F "+d}redecodeAll(){var a;let e=Ap.props[this._decodeAs],o=dm(this.value),i=(a=this._maxItems)!=null?a:e.maxDisplayWidth,s={incoming:[],decoded:[]};for(let u of o.reverse())s=mi.valueByAddingNewBit(u,s,e,i);this.doSetValue(s)}doSetDecodeAs(e){this._decodeAs=e,this.redecodeAll()}doSetGroupEvery(e){this._groupEvery=e,this.requestRedraw({why:"grouping changed"})}makeComponentSpecificContextMenuItems(){let e=C.Components.ShiftDisplay.contextMenu,o=p((s,a)=>{let l=this._decodeAs===s?"check":"none";return E.item(l,a,()=>this.doSetDecodeAs(s))},"makeItemDecodeAs"),i=p((s,a)=>{let l=this._groupEvery===s?"check":"none";return E.item(l,a,()=>this.doSetGroupEvery(s))},"makeItemGroupEvery");return[...$o(this._trigger,this.doSetTrigger.bind(this)),["mid",E.sep()],["mid",E.submenu("eye",e.Decoding,[o("raw",e.DecodingNone),o("octal",e.DecodingOctal),o("hex",e.DecodingHex),o("ascii",e.DecodingAscii7),o("ascii8",e.DecodingAscii8),o("uint4",e.DecodingUint4),o("int4",e.DecodingInt4),o("uint8",e.DecodingUint8),o("int8",e.DecodingInt8),o("uint16",e.DecodingUint16),o("int16",e.DecodingInt16),E.sep(),E.text(e.DecodingChangeWarning)])],["mid",E.submenu("regroup",e.Grouping,[i(void 0,e.GroupingNone),E.sep(),i(2,e.GroupBy.expand({n:2})),i(3,e.GroupBy.expand({n:3})),i(4,e.GroupBy.expand({n:4})),i(7,e.GroupBy.expand({n:7})),i(8,e.GroupBy.expand({n:8})),i(16,e.GroupBy.expand({n:16}))])]]}};p(mi,"ShiftDisplay");_o.impl=mi;function dm({incoming:r,decoded:n}){let e=[...r];for(let[o,i]of n)e.push(...i);return e}p(dm,"allBitsOf");var Cs=ye("shift-reg",!0,!0,{variantName:({bits:r})=>`shift-reg-${r}`,idPrefix:"reg",...wr,makeNodes:(r,n)=>{let e=wr.makeNodes(r,n),o=e.ins.Clock[1]-2;return{ins:{...e.ins,D:[-5,0,"w"],L\u0305R:[-5,o,"w"]},outs:e.outs}}}),_l=class extends So{constructor(n,e,o){super(n,Cs,e,o)}toJSON(){return this.toJSONBase()}makeTooltip(){let n=C.Components.ShiftRegister.tooltip;return $(n.title,W(V(n.desc.expand({numBits:this.numBits}))))}makeStateAfterClock(){let n=this.inputs.L\u0305R.value;if(U(n)||be(n))return this.makeStateFromMainValue(I);let e=Xe.filterHighZ(this.inputs.D.value),o=this.value;return n?[...o.slice(1),e]:[e,...o.slice(0,-1)]}doDrawGenericCaption(n){n.font="bold 13px sans-serif",n.fillStyle=J,n.textAlign="center",se(n,te.middle,"Shift R.",this.posX,this.posY-8),n.font="11px sans-serif",se(n,te.middle,`${this.numBits} bits`,this.posX,this.posY+10)}};p(_l,"ShiftRegister");Cs.impl=_l;var mm=pe(_e());var gi=ye("tristate",!0,!0,{variantName:({bottom:r})=>`tristate${r?"b":""}`,idPrefix:"tristate",button:{imgWidth:50},repr:{bottom:N(mm.boolean)},valueDefaults:{},params:{bottom:Ut()},validateParams:({bottom:r})=>({controlPinsAtBottom:r}),size:()=>({gridWidth:4,gridHeight:4}),makeNodes:({controlPinsAtBottom:r})=>({ins:{In:[-4,0,"w",{leadLength:20}],E:[0,r?3:-3,r?"s":"n","E (Enable)",{leadLength:20}]},outs:{Out:[4,0,"e",{leadLength:20}]}}),initialValue:()=>We}),Rl=class extends xe{constructor(e,o,i){super(e,gi.with(o),i);this.controlPinsAtBottom=o.controlPinsAtBottom}toJSON(){return{...this.toJSONBase(),bottom:this.controlPinsAtBottom===gi.aults.bottom?void 0:this.controlPinsAtBottom}}makeTooltip(){return $(void 0,W(V(C.Components.TristateBuffer.tooltip)))}doRecalcValue(){let e=this.inputs.E.value;if(U(e)||be(e))return I;if(!e)return We;let o=this.inputs.In.value;return be(o)?I:o}propagateValue(e){this.outputs.Out.value=e}doDraw(e,o){Be(e,this.inputs.In),Be(e,this.inputs.E),Be(e,this.outputs.Out);let{top:i,bottom:s}=this.bounds(),a=2*Math.max(2,this.inputs._all.length)*H,u=this.posX-a/2,l=this.posX+a/2;e.fillStyle=ot,e.strokeStyle=o.isMouseOver?Zn:J,e.lineWidth=3,e.beginPath(),e.moveTo(u,i),e.lineTo(l,this.posY),e.lineTo(u,s),e.closePath(),e.stroke()}makeComponentSpecificContextMenuItems(){return[this.makeChangeBooleanParamsContextMenuItem(C.Components.Generic.contextMenu.ParamControlBitAtBottom,this.controlPinsAtBottom,"bottom")]}};p(Rl,"TristateBuffer");gi.impl=Rl;var Ol=pe(_e());var Ar=ye("tristate-array",!0,!0,{variantName:({bits:r,bottom:n})=>`tristate-array-${r}${n?"b":""}`,idPrefix:"tristate",button:{imgWidth:50},repr:{bits:N(Ol.number),bottom:N(Ol.boolean)},valueDefaults:{},params:{bits:Se(4,[2,4,8,16]),bottom:Ut()},validateParams:({bits:r,bottom:n})=>({numBits:r,controlPinsAtBottom:n}),size:Do.size,makeNodes:({numBits:r,controlPinsAtBottom:n,gridHeight:e})=>({ins:{In:ue("w",-3,0,r),E:[0,-(e/2+1)*(n?-1:1),n?"s":"n","E (Enable)"]},outs:{Out:ue("e",3,0,r)}}),initialValue:(r,{numBits:n})=>j(We,n)}),Ml=class extends xe{constructor(e,o,i){super(e,Ar.with(o),i);this.numBits=o.numBits,this.controlPinsAtBottom=o.controlPinsAtBottom}toJSON(){return{...this.toJSONBase(),bits:this.numBits===Ar.aults.bits?void 0:this.numBits,bottom:this.controlPinsAtBottom===Ar.aults.bottom?void 0:this.controlPinsAtBottom}}makeTooltip(){let e=C.Components.TristateBufferArray.tooltip;return $(e.title,W(V(e.desc)))}doRecalcValue(){let e=this.inputs.E.value;return U(e)||be(e)?j(I,this.numBits):e?this.inputValues(this.inputs.In):j(We,this.numBits)}propagateValue(e){this.outputValues(this.outputs.Out,e)}doDraw(e,o){this.doDrawDefault(e,o,{skipLabels:!0,drawInside:({top:i,bottom:s,left:a,right:u})=>{let l=this.inputs.E.value;e.lineWidth=2,e.strokeStyle=zt(l),e.beginPath(),this.controlPinsAtBottom?(e.moveTo(this.posX,s),e.lineTo(this.posX,this.posY+4)):(e.moveTo(this.posX,i),e.lineTo(this.posX,this.posY-4)),e.stroke(),e.strokeStyle=J,e.beginPath(),e.moveTo(a+12,this.posY-8),e.lineTo(u-13,this.posY),e.lineTo(a+12,this.posY+8),e.closePath(),e.stroke()}})}makeComponentSpecificContextMenuItems(){let e=C.Components.Generic.contextMenu;return[this.makeChangeParamsContextMenuItem("inputs",e.ParamNumBits,this.numBits,"bits"),this.makeChangeBooleanParamsContextMenuItem(e.ParamControlBitAtBottom,this.controlPinsAtBottom,"bottom"),...this.makeForceOutputsContextMenuItem(!0)]}};p(Ml,"TristateBufferArray");Ar.impl=Ml;var Ey=[qt,cn,Pn,Xo,Gn,ls,us,cs,Co,so,_o,Cr,Ke,wo,gi,Ar,Do,io,at,Wn,ms,Zi,ns,qo,Un,xo,ro,Ds,ds,hs,ps,vn,Cs,hi,$t,no,pi,ss,is,as],ma=class{constructor(n){this._predefinedComponents=new Map;this._customComponents=new Map;this.editor=n;for(let e of Ey){let o=e.type;if(!e.isValid())throw new Error(`Implementation missing for components of type '${o}'`);if(this._predefinedComponents.has(o))throw new Error(`Duplicate component for components of type '${o}'`);this._predefinedComponents.set(o,e)}}makeFromJSON(n,e,o){if(!Kt(e)){console.warn(`Skipping invalid non-object component: ${Ep.default.stringify(e,null,2)}`);return}let i=e;o!==void 0&&ae(i.pos)&&(i.pos=[i.pos[0]+o[0],i.pos[1]+o[1]]);let s=Z(i.type)?i.type:"<unknown>",a=this.getMaker(s);return a==null?void 0:a.makeFromJSON(n,i)}makeFromButton(n,e){let o=e.dataset,i=o.params,s=this.getMaker(o.type),a=i===void 0?void 0:Ep.default.parse(i);return s==null?void 0:s.make(n,a)}getMaker(n){let e;if((e=this._predefinedComponents.get(n))!==void 0)return e;if(yr.includes(n))return Cr;if(mo.includes(n))return Ke;let o=n.indexOf("-");if(o!==-1){let i=n.substring(0,o);if(n.substring(o+1)==="array"&&mo.includes(i))return wo;if(n.startsWith(vo)){let a=n.substring(vo.length);if((e=this._customComponents.get(a))!==void 0)return e}}console.warn(`Unknown component for '${n}'`)}getCustomDef(n){return this._customComponents.get(n)}customDefs(){if(this._customComponents.size!==0)return[...this._customComponents.values()]}customDefReprs(){let n=this.customDefs();if(n!==void 0)return n.map(e=>e.toJSON())}clearCustomDefs(){this._customComponents.clear()}getCustomComponentTypesWhichUse(n){let e=[n];for(let o of this._customComponents.values())o.uses(n,[!0,this])&&e.push(o.type);return e}tryAddCustomDef(n,e){let o=n.customId;if(!e&&this._customComponents.has(o)){console.warn(`Could not add custom component with duplicate id '${o}'`);return}return this._customComponents.set(o,n),n}tryLoadCustomDefsFrom(n){if(n===void 0)return 0;let e=Fn(n,gm.array(sm),"defs");if(e===void 0)return 0;let o=0;for(let i of e)this.tryAddCustomDef(new ci(i),!1)!==void 0&&o++;return o}hasCustomComponents(){return this._customComponents.size>0}makeContextMenu(n){let e=n.substring(vo.length),o=this._customComponents.get(e);if(o===void 0)return;let i=C.Components.Custom.contextMenu;return[E.item("pen",i.ChangeName,()=>this.runChangeCustomComponentCaptionDialog(o)),E.item("connect",i.ChangeCircuit,()=>{window.alert(i.EditFromComponentMessage)}),E.sep(),E.item("trash",i.Delete,()=>{if(this.editor.components.contains(n)){window.alert(i.CannotDeleteInUse);return}for(let s of this._customComponents.values())if(s.uses(o.type,!1)){window.alert(i.CannotDeleteInUseBy.expand({caption:s.caption}));return}window.confirm(i.ConfirmDelete)&&(this._customComponents.delete(e),this.editor.updateCustomComponentButtons())},void 0,!0)]}runChangeCustomComponentCaptionDialog(n){var s;let e=C.Components.Custom.contextMenu,o=n.caption,i=n.type;for(;;){let a=window.prompt(e.ChangeNamePrompt,o);if(a===null||a===o)return;if(a.length===0){window.alert(e.ChangeNameEmpty);continue}n.doSetCaption(a);let u=Sp(o);if(n.customId===u){let l=Sp(a);if(!this._customComponents.has(l)){this._customComponents.delete(u),n.customId=l;let c=n.type;for(let d of this._customComponents.values())for(let h of Object.values((s=d.circuit.components)!=null?s:{}))h.type===i&&(h.type=c);this._customComponents.set(l,n)}}break}this.editor.updateCustomComponentButtons(),this.editor.components.updateCustomComponents(i),this.editor.focus()}tryMakeNewCustomComponent(n){var D;let e=C.Components.Custom.messages,o=(D=n.eventMgr.currentSelection)==null?void 0:D.previouslySelectedElements;if(o===void 0)return e.EmptySelection;let i=[...o].filter(y=>y instanceof me);if(i.length===0)return e.EmptySelection;let s=this.checkComponentsForCustomDef(i);if(Z(s))return s;let a=s.components,u,l=a.filter(y=>y instanceof gs);if(l.length!==1){if(u=window.prompt(e.EnterCaptionPrompt),u===null)return""}else u=l[0].text;let c=Sp(u);if(this._customComponents.has(c))return e.ComponentAlreadyExists.expand({id:c});let{components:d,wires:h}=Pe.buildComponentsAndWireObject(a,[],void 0);if(d===void 0||h===void 0)return e.NoWires;let m=new ci({id:c,caption:u,circuit:{components:d,wires:h}}),f=this.tryAddCustomDef(m,!1);if(f===void 0)return"";let g=f.make(n);g.setSpawned(),g.setPosition(n.pointerX+g.unrotatedWidth/2-5,n.pointerY,!0),n.eventMgr.currentSelection=void 0,n.eventMgr.setCurrentComponentUnderPointer(g);for(let y of a)n.components.tryDelete(y);return m}tryMakeNewTestCase(n){var s;let e=this.checkSelectionForTestCase(n);if(Z(e))return e;let{inputs:o,outputs:i}=e;return(s=this.makeTestCaseWithCurrentValues(n,o,i,!0))!=null?s:""}makeTestCaseWithCurrentValues(n,e,o,i){var y,w;let s=`
 \u2022 `,a=[],u=[],l=p(x=>S=>{var A;let T=po(S.value);return x.push(T),`${(A=S.ref)!=null?A:"?"}${Z(S.name)?` (\u201C${S.name}\u201D)`:""}: ${T}`},"mkDesc"),c=C.Messages,d=c.TestCaseInputToSet.expand({n:e.length})+s+e.map(l(a)).join(s),h=c.TestCaseOuputToCheck.expand({n:o.length})+s+o.map(l(u)).join(s),m=c.NewTestCaseTitle+`

${d}

${h}

`+c.NewTestCaseSetName,f=a.join(" ")+" \u2192 "+u.join(" ");if(i&&(f=window.prompt(m,f),f===null))return;let g=Object.create(null);for(let x of e)g[(y=x.ref)!=null?y:"?"]=Fc(x.value);let D=Object.create(null);for(let x of o)D[(w=x.ref)!=null?w:"?"]=Fc(x.value);return new qr({in:g,out:D,name:f.length===0?void 0:f},n.components)}async tryMakeAllTestCases(n){let e=this.checkSelectionForTestCase(n);if(Z(e))return e;let{inputs:o,outputs:i}=e,s=C.Messages,a=10,u=[],l=0;for(let m of o){for(let f=0;f<m.numBits;f++)u.push([m,f]);l+=m.numBits}let c=p((m,f)=>{let[g,D]=u[m],y=g.value.slice();y[D]=f,g.setValue(y)},"setBit");if(l>a)return s.TooManyInputsForAutoTestCases.expand({max:a});let d=Math.pow(2,l);if(!confirm(s.AutoTestCasesWarning.expand({numInputs:l,numCases:d})))return"";let h=await n.disableUIWhile(s.ComputingTestCases,async m=>{for(let g of o)m.set(g,g.value);let f=[];for(let g=0;g<d;g++){for(let D=0;D<l;D++){let y=(g&1<<D)!==0;c(D,y)}n.recalcPropagateAndDrawIfNeeded(!0),await n.waitForPropagation(),f.push(this.makeTestCaseWithCurrentValues(n,o,i,!1))}return f});return h!=null?h:""}tryModifyCustomComponent(n,e){let o=C.Components.Custom.messages,i=[...e.components.all()],s=this.checkComponentsForCustomDef(i);if(Z(s))return s;let a=s.components,u=Pe.buildComponentsAndWireObject(a,[],void 0);if(u.components===void 0||u.wires===void 0)return"";let l=new ci({id:n.customId,caption:n.caption,circuit:{components:u.components,wires:u.wires}});if((l.numInputs!==n.numInputs||l.numOutputs!==n.numOutputs)&&!window.confirm(o.InputsOutputsChanged))return"";this.tryAddCustomDef(l,!0)}checkComponentsForCustomDef(n){let e=C.Components.Custom.messages,o=n.filter(m=>m instanceof go);if(o.length===0)return e.NoInput;let i=n.filter(m=>m instanceof Yo);if(i.length===0)return e.NoOutput;function s(m){let f=new Set,g=[];for(let D of m){let y=D.name;if(y===void 0)g.push(D);else{if(!Z(y)||f.has(y))return!1;f.add(y)}}for(let D of g){let y=D instanceof go?"In":"Out",w=0,x;do x=`${y}${w++}`;while(f.has(x));D.doSetName(x),f.add(x)}return!0}if(p(s,"checkNames"),!(s(o)&&s(i)))return e.InputsOutputsMustHaveNames;let u=[...o,...i],l=[],c;for(l.push(...o);(c=l.shift())!==void 0;)for(let m of c.outputs._all)for(let f of m.outgoingWires){let g=f.endNode.component;n.includes(g)&&!u.includes(g)&&(u.push(g),l.push(g))}l.push(...i);let d=[];for(;(c=l.shift())!==void 0;)for(let m of c.inputs._all){let f=m.incomingWire;if(f!==null){let g=f.startNode.component;n.includes(g)?u.includes(g)||(u.push(g),l.push(g)):d.includes(g)||d.push(g)}}if(d.length>0){let m=d.map(f=>f.toString()).join(", ");return e.MissingComponents.expand({list:m})}let h=n.filter(m=>!u.includes(m)&&(m.inputs._all.length!==0||m.outputs._all.length!==0));if(h.length>0){let m=h.map(f=>f.toString()).join(", ");return e.UselessComponents.expand({list:m})}return u.some(m=>m instanceof ts)?e.CannotIncludeClock:{components:u,inputs:o,outputs:i}}checkSelectionForTestCase(n){var u;let e=C.Components.Custom.messages,o=(u=n.eventMgr.currentSelection)==null?void 0:u.previouslySelectedElements;if(o===void 0)return e.EmptySelection;let i=[...o].filter(l=>l instanceof me);if(i.length===0)return e.EmptySelection;let s=i.filter(l=>l instanceof go);if(s.length===0)return e.NoInput;let a=i.filter(l=>l instanceof Yo);return a.length===0?e.NoOutput:{inputs:s,outputs:a}}};p(ma,"ComponentFactory");function Sp(r){return r.trim().normalize("NFKD").toLowerCase().replace(/[^a-z0-9]+/g,"")}p(Sp,"makeCustomIdFromCaption");var Dm=pe(er());var Dt="withButton",en="ifShowOnly",_y=[{nameKey:"InputOutput",items:[qt.button({bits:1},"Input1"),Xo.button({bits:1},"Output1"),Co.button("DisplayBar",{compat:"out.bar",visible:Dt}),so.button({bits:2,gray:!1,touch:!1},"Pixel",{visible:Dt}),cn.button("Clock"),qt.button({bits:4},["InputN","Input4"],{compat:"in.nibble"}),Xo.button({bits:4},["OutputN","Output4"],{compat:"out.nibble"}),Gn.button({bits:4},["DisplayN","Display4"],{compat:"out.nibble-display"}),qt.button({bits:8},"Input8",{compat:"in.byte",visible:en}),Xo.button({bits:8},"Output8",{compat:"out.byte",visible:en}),Gn.button({bits:8},"Display8",{compat:"out.byte-display",visible:en}),ls.button("Display7Seg",{compat:"out.7seg",visible:Dt}),us.button("Display16Seg",{compat:"out.16seg",visible:Dt}),cs.button("DisplayAscii",{compat:"out.ascii",visible:Dt}),Pn.button({bits:1},"Random",{compat:"random",visible:Dt}),_o.button("ShiftDisplay",{compat:"out.shift-buffer",visible:Dt})]},{nameKey:"Gates",items:[Cr.button({type:"not"},"not"),Cr.button({type:"buf"},"buf",{visible:Dt}),gi.button({bottom:!1},"tri",{compat:"tri",visible:Dt}),Ke.button({type:"and",bits:2},"and"),Ke.button({type:"or",bits:2},"or"),Ke.button({type:"xor",bits:2},"xor"),Ke.button({type:"nand",bits:2},"nand"),Ke.button({type:"nor",bits:2},"nor"),Ke.button({type:"xnor",bits:2},"xnor",{visible:Dt}),Ke.button({type:"imply",bits:2},"imply",{visible:Dt}),Ke.button({type:"nimply",bits:2},"nimply",{visible:Dt}),Ke.button({type:"txa",bits:2},["transfer","txa"],{visible:Dt}),Ke.button({type:"and",bits:3},"and3",{compat:"and3",visible:en}),Ke.button({type:"or",bits:3},"or3",{compat:"or3",visible:en}),Ke.button({type:"xor",bits:3},"xor3",{compat:"xor3",visible:en}),Ke.button({type:"nand",bits:3},"nand3",{compat:"nand3",visible:en}),Ke.button({type:"nor",bits:3},"nor3",{compat:"nor3",visible:en}),Ke.button({type:"xnor",bits:3},"xnor3",{compat:"xnor3",visible:en}),Ke.button({type:"and",bits:4},"and4",{compat:"and4",visible:en}),Ke.button({type:"or",bits:4},"or4",{compat:"or4",visible:en}),Ke.button({type:"xor",bits:4},"xor4",{compat:"xor4",visible:en}),Ke.button({type:"nand",bits:4},"nand4",{compat:"nand4",visible:en}),Ke.button({type:"nor",bits:4},"nor4",{compat:"nor4",visible:en}),Ke.button({type:"xnor",bits:4},"xnor4",{compat:"xnor4",visible:en}),Do.button({bits:4,bottom:!1},"ControlledInverter",{compat:"switched-inverter",visible:Dt}),wo.button({type:"and",bits:4},"GateArray",{compat:"quad-gate",visible:Dt}),Ar.button({bits:4,bottom:!1},"TristateBufferArray",{visible:Dt})]},{nameKey:"Layout",items:[io.button("Label"),at.button("Rectangle",{compat:"label.rect"}),Wn.button({bits:1},"Passthrough1"),Wn.button({bits:4},"PassthroughN")]},{nameKey:"Components",items:[ms.button("HalfAdder"),Zi.button("Adder"),ns.button("Comparator",{compat:"comparator",visible:Dt}),qo.button({bits:4},"AdderArray"),Un.button({bits:4,ext:!1},"ALU"),xo.button({from:4,to:2,bottom:!1},"Mux"),xo.button({from:8,to:4,bottom:!1},"Mux",{visible:en}),ro.button({from:2,to:4,bottom:!1},"Demux"),Ds.button("LatchSR"),ds.button("FlipflopJK",{compat:"flipflop-jk",visible:Dt}),hs.button("FlipflopT",{compat:"flipflop-t",visible:Dt}),ps.button("FlipflopD",{compat:"flipflop-d"}),vn.button({bits:4,inc:!1},"Register",{compat:"register"}),Cs.button({bits:4},"ShiftRegister",{compat:"shift-register"}),no.button({bits:4},"Counter"),$t.button({lines:16,bits:4},"RAM"),hi.button({lines:16,bits:4},"ROM",{visible:Dt}),pi.button({bits:2},"Decoder",{compat:"decoder"}),ss.button("Decoder7Seg",{compat:"decoder-7seg"}),is.button("Decoder16Seg",{compat:"decoder-16seg",visible:Dt}),as.button("DecoderBCD4",{compat:"decoder-bcd4",visible:Dt})]}],ga=class{constructor(n,e){this.editor=n;this.parent=e;var a;let o=n.options.showOnly;this._htmlSections=[],this._restrictedToGateTypes=o===void 0?void 0:new Set;let i=o===void 0?void 0:[...o],s=!1;for(let u of _y){let{allButtons:l,buttonsShowWithMore:c,buttonsShowWithURLParam:d,accessibleGateTypes:h}=Ry(u,i),m=this.makeSection(u.nameKey,l,c,d,i,s);for(let f of h)(a=this._restrictedToGateTypes)==null||a.add(f);m!==void 0&&(this._htmlSections.push(m),s=!0)}i!==void 0&&i.filter(u=>!u.endsWith("*")).length>0&&console.log(`ERROR Supposed to show unknown elems: ${i.join("; ")}`)}allFixedButtons(){return this._htmlSections.flatMap(n=>n.buttons)}allCustomButtons(){return this._customComponentSection===void 0?[]:this._customComponentSection.buttons}allowGateType(n){var e,o;return(o=(e=this._restrictedToGateTypes)==null?void 0:e.has(n))!=null?o:!0}updateCustomComponentButtons(n){let e=this._customComponentSection;if(e!==void 0){e.header!==void 0&&e.header.remove(),e.separator!==void 0&&e.separator.remove();for(let o of e.buttons)o.remove();e.showMoreLink!==void 0&&e.showMoreLink.remove()}this._customComponentSection=n===void 0?void 0:this.makeCustomComponentSection(n)}setCustomComponentsHidden(n){let e=this._customComponentSection;if(e===void 0)return;let o=!1;for(let i of e.buttons){let s=!n.includes(i.dataset.type);o||(o=s),we(i,s)}we(e.header,o),e.separator!==void 0&&we(e.separator,o)}makeCustomComponentSection(n){let e=this.editor.options.showOnly,o=e===void 0?void 0:[...e],i=[],s=[];for(let u of n){let l=u.type,c=iu("svgimg","custom",u.makeButtonSVG(),vp,Cp),d=u.caption,{compButton:h,hiddenNow:m}=bm(l,!1,[l],o,c,d,d+C.Components.Custom.MenuButtonSuffix,void 0,!0);m&&s.push(h),i.push(h)}let a=this._htmlSections.length>0;return this.makeSection("Custom",i,s,[],o,a)}makeSection(n,e,o,i,s,a){let u=o.length;if(e.length-u-i.length===0)return;let d;a&&(d=V(fe("height: 20px"),sr("&nbsp;")).render(),this.parent.appendChild(d));let h=V(le("leftToolbarHeader"),C.ComponentBar.SectionNames[n]).render();this.parent.appendChild(h);for(let f of e)this.parent.appendChild(f);let m;if(u!==0&&s===void 0){let f=!1,g=[C.ComponentBar.Labels.More+" \u2193",C.ComponentBar.Labels.Less+" \u2191"];m=ho(le("leftToolbarMore"),g[0]).render(),m.addEventListener("click",()=>{f=!f;for(let D of o)f?(D.style.removeProperty("padding"),D.style.removeProperty("border"),D.style.removeProperty("margin-bottom"),D.style.removeProperty("max-height"),D.style.removeProperty("overflow")):(D.style.padding="0",D.style.border="0",D.style.marginBottom="0",D.style.maxHeight="0",D.style.overflow="hidden");m.innerHTML=g[Number(f)]}),this.parent.appendChild(m)}return{separator:d,header:h,buttons:e,showMoreLink:m}}};p(ga,"ComponentMenu");function Ry(r,n){var a,u,l;let e=[],o=[],i=[],s=new Set;for(let c of r.items){let d=c.visible!==void 0&&c.visible!=="always",[h,m]=Z(c.visual)?[c.visual,c.visual]:c.visual,f=C.ComponentBar.Components.props[h],[g,D]=Z(f)?[f,void 0]:f,{compButton:y,hiddenByShowOnly:w,hiddenNow:x}=bm(c.type,d,Oy(c),n,of(m,c.width),D,g,(a=c.params)==null?void 0:a.params,!1);x&&(c.visible==="withButton"?o:i).push(y),e.push(y);let S=c.type.startsWith(fs),T;S&&!w&&(T=(l=(u=c.params)==null?void 0:u.params)==null?void 0:l.type)!==void 0&&s.add(T)}return{allButtons:e,buttonsShowWithMore:o,buttonsShowWithURLParam:i,accessibleGateTypes:s}}p(Ry,"makeButtons");function bm(r,n,e,o,i,s,a,u,l){let c=o!==void 0?!My(e,o):!1,d=o!==void 0?c:n,h=d?"max-height: 0; transition: all 0.25s ease-out; overflow: hidden; padding: 0; border: 0; margin-bottom: 0;":"",m=d?" sim-component-button-extra":"",f=l?" sim-component-button-custom":"",g=s===void 0?mt:ke(le("barLabel"),s),D=pt(a===void 0?"":a+` 
(\u201C${e[0]}\u201D)`),y=Li(Vo("button"),fe(h),le(`list-group-item list-group-item-action sim-component-button${m}${f}`),i,g,D).render(),w=y.dataset;return w.type=r,w.componentId=e[0],u!==void 0&&(w.params=Dm.default.stringify(u)),{compButton:y,hiddenByShowOnly:c,hiddenNow:d}}p(bm,"makeButton");function My(r,n){let e=!1;for(let i of r)for(let s of n){let[a,u]=o(s,i);if(a){if(e=!0,!u){let l=n.indexOf(i);n.splice(l,1)}break}}return e;function o(i,s){return i===s?[!0,!1]:i.endsWith("*")&&s.startsWith(i.slice(0,-1))?[!0,!0]:[!1,!1]}}p(My,"shouldShow");function Oy(r){let n=[],e=r.params,o=r.type;if(e===void 0)n.push(o);else{let i=e.def,s=i.variantName(e.params);ae(s)?n.push(...s):(Y0(e.params,i.defaultParams)&&n.push(o),n.push(s))}return r.compat!==void 0&&n.push(r.compat),n}p(Oy,"componentIdsFor");var Da=class{constructor(n){this._currentTimeout=void 0;this.msgSpan=ke().render(),this.closeButton=ke("\xD7",fe("padding-left: 0.5em; cursor: pointer; margin-left: 0.5em; border-left: 1px solid rgba(127,127,127,0.8);")).render(),this.closeButton.onclick=()=>this.hideNow(),this.root=V(le("msgZone"),V(le("msgBar"),this.msgSpan,this.closeButton)).render(),n.html.mainCanvas.insertAdjacentElement("afterend",this.root),this.hideNow=this.hideNow.bind(this)}hideNow(){this._currentTimeout=void 0,this.root.classList.remove("visible")}showMessage(n,e,o){return this._currentTimeout!==void 0&&(clearTimeout(this._currentTimeout),this._currentTimeout=void 0),this.msgSpan.innerHTML="",Ls(this.msgSpan,n),this.root.classList.add("visible"),e>0&&(this._currentTimeout=setTimeout(this.hideNow,e)),we(this.closeButton,o),this.hideNow}};p(Da,"MessageBar");var ba=class{constructor(n){this._movingDrawables=new Set;this.editor=n}areDrawablesMoving(){return this._movingDrawables.size>0}getSingleMovingWaypoint(){if(this._movingDrawables.size===1){let n=this._movingDrawables.values().next().value;if(n instanceof bn)return n}}getSingleMovingComponentWithAnchors(){if(this._movingDrawables.size===1){let n=this._movingDrawables.values().next().value;if(n instanceof Vn&&n.anchor!==void 0||n instanceof me&&n.anchoredDrawables.length!==0)return n}}setDrawableMoving(n,e){this.changeMovingDrawables(()=>{this._movingDrawables.add(n)},e)}setDrawableStoppedMoving(n,e){this.changeMovingDrawables(()=>{this._movingDrawables.delete(n)},e)}changeMovingDrawables(n,e){let o=this._movingDrawables.size===0;n();let i=this._movingDrawables.size===0;o!==i&&(this.editor.updateCursor(e),this.editor.editTools.redrawMgr.requestRedraw({why:"started or stopped moving drawables",invalidateMask:!0}))}clear(){this._movingDrawables.clear()}dump(){var e,o;let n=this._movingDrawables.size;if(n===0)console.log("No moving drawables");else{console.log(`There are ${n} moving drawables:`);for(let i of this._movingDrawables){let s=i.constructor.name;i instanceof me?console.log(s+" - "+((o=(e=i.outputs._all[0])==null?void 0:e.id)!=null?o:"?")):console.log(s)}}}};p(ba,"MoveManager");var ya=class{aluOps(){function*n(){for(let a of[!1,!0])for(let u of[!1,!0])for(let l of[!1,!0])for(let c of[!1,!0])yield[a,u,l,c]}p(n,"nibbles");function e(a){let[u,l]=Ee(a,!0),c=l,d=c<8?c:c-16;return[u,c,d]}p(e,"representationsOf");let o=0,i=0,s=!1;for(let a of n())for(let u of n())for(let l of[!1,!0]){let[c,d,h]=e(a),[m,f,g]=e(u);a.reverse(),u.reverse();let{s:D,v:y,cout:w}=si(a,u,l),{s:x,v:S,cout:T}=ii(a,u,l);a.reverse(),u.reverse(),D.reverse(),x.reverse();let[A,P,R]=e(D),[L,O,G]=e(x),B=d+f+Number(l),Q=B>15,oe=!1;Q?oe=P===B||w!==!0:oe=P!==B||w!==!1,oe?(console.log(`ERROR carry - ${d} (${c}) + ${f} (${m}) + ${Number(l)} = ${P} (${A}) (c=${w})`),i++):s&&console.log(`carry - ${d} (${c}) + ${f} (${m}) + ${Number(l)} = ${P} (${A}) (c=${w})`),o++;let ne=d-f-Number(l),Ue=!1;d-Number(l)<f?Ue=O===ne||T!==!0:Ue=O!==ne||T!==!1,Ue?(console.log(`ERROR borrow - ${d} (${c}) - ${f} (${m}) - ${Number(l)} = ${O} (${L}) (c=${T})`),i++):s&&console.log(`borrow - ${d} (${c}) - ${f} (${m}) - ${Number(l)} = ${O} (${L}) (c=${T})`),o++;let ut=h+g+Number(l),$e=ut>7||ut<-8,It=!1;$e?It=R===ut||y!==!0:It=R!==ut||y!==!1,It?(console.log(`ERROR overflow - ${h} (${c}) + ${g} (${m}) + ${Number(l)} = ${R} (${A}) (v=${y})`),i++):s&&console.log(`overflow - ${h} (${c}) + ${g} (${m}) + ${Number(l)} = ${R} (${A}) (v=${y})`),o++;let Ct=h-g-Number(l),kt=Ct>7||Ct<-8,Lt=!1;kt?Lt=G===Ct||S!==!0:Lt=G!==Ct||S!==!1,Lt?(console.log(`ERROR overflow - ${h} (${c}) - ${g} (${m}) - ${Number(l)} = ${G} (${L}) (v=${S})`),i++):s&&console.log(`overflow - ${h} (${c}) - ${g} (${m}) - ${Number(l)} = ${G} (${L}) (v=${S})`),o++}console.log(`Tests: ${o} total, ${i} failed, ${o-i} passed`)}};p(ya,"Tests");var va=class{constructor(n){this.editor=n;this.testSuites=new Map;this._isDisplayingResults=!1;this._skipUpdates=!1;let e=C.Tests,o=V(le("toolbar-title"),e.Title).render();n.eventMgr.registerTitleDragListenersOn(o,()=>{n.setTestsPaletteVisible(!1)}),this.suiteContainer=V(le("noselect"),fe("width: 100%")).render(),this.scroller=V(fe("width: 100%; font-size: 80%; overflow-y: auto; min-height: 28px; resize: vertical"),this.suiteContainer).render(),this.rootElem=V(le("sim-toolbar-right"),fe("display: none"),rf("prev-display")("block"),o,this.scroller).render()}updateMaxHeight(){let n=Math.min(this.suiteContainer.clientHeight,this.editor.html.mainCanvas.clientHeight-38);this.scroller.style.maxHeight=n+"px"}setVisible(n){we(this.rootElem,n),n&&this.updateMaxHeight()}clearAllSuites(){this.suiteContainer.innerHTML="",this.testSuites.clear()}update(){this.clearAllSuites();let n=this.editor.editorRoot.testSuites;for(let e of n.suites)this.addTestSuite(e);this.editor.didLoadTests(n)}addTestSuite(n){let e=this.testSuites.size,o=new Pl(this.editor,this,n);return o.expanded=e===0,this.testSuites.set(n,o),this.suiteContainer.appendChild(o.rootElem),o}getOrMakeUIFor(n){var e;return(e=this.testSuites.get(n))!=null?e:this.addTestSuite(n)}setDisplayingResults(){this._isDisplayingResults=!0}clearDisplayedResults(){this._isDisplayingResults&&!this._skipUpdates&&(this.update(),this._isDisplayingResults=!1)}async skipUpdatesWhile(n){this._skipUpdates=!0;try{return await n()}finally{this._skipUpdates=!1}}async runAllTestSuites(n){let e=[];for(let s of this.testSuites.values()){let a=await s.runTestCases(n);a!==void 0&&e.push(a)}let o=this.editor.save(),i=Pe.stringifyObject(o,!0);return this.editor.dispatchEvent(new CustomEvent("testsexecuted",{detail:{results:e,circuit:i}})),e}};p(va,"TestsPalette");var Pl=class{constructor(n,e,o){this.editor=n;this.palette=e;this.testSuite=o;this._expanded=!1;var u;let i=C.Tests;this.htmlResults=o.testCases.map(l=>this.makeTestCaseUI(l));let s=p((l,c)=>ke(le("testcase-change-button"),fe("cursor: pointer; margin-left: 10px;"),pt(c),l).render(),"makeVisibilityButton");this.setHiddenTrueButton=s(En("eye"),i.TestSuiteShownClickToHide),this.setHiddenFalseButton=s(En("eyecrossed"),i.TestSuiteHiddenClickToShow),this.setHiddenTrueButton.addEventListener("click",this.toggleHidden.bind(this)),this.setHiddenFalseButton.addEventListener("click",this.toggleHidden.bind(this));let a=En("play");fe("position: relative; top: -2px;").applyTo(a),this.runTestCasesButton=ke(le("sim-mode-link"),fe("flex: none; font-size: 85%; opacity: 0.9; margin: -2px 0 -2px 4px; padding: 2px 4px 0 0;"),pt(i.RunTestSuite),a,i.Run).render(),this.runTestCasesButton.addEventListener("click",()=>this.runTestCases()),this.header=V(le("test-suite test-disclosable expanded"),fe("display: flex"),ke(fe("flex: auto"),(u=o.name)!=null?u:i.DefaultTestSuiteName),this.setHiddenTrueButton,this.setHiddenFalseButton,this.runTestCasesButton).render(),this.content=V(le("test-cases"),fe("display: block"),...this.htmlResults.map(l=>l.container)).render(),this.header.addEventListener("click",l=>{l.target===this.header&&(this.expanded=!this.expanded)}),this.rootElem=V(this.header,this.content).render(),this.updateHiddenButtons(o.isHidden)}toggleHidden(){let n=!this.testSuite.isHidden;this.testSuite.isHidden=n,this.updateHiddenButtons(n)}updateHiddenButtons(n){this.rootElem.classList.toggle("hidden-test-suite",n),zr(this.setHiddenTrueButton,n?"hide":"show"),zr(this.setHiddenFalseButton,n?"show":"hide")}makeTestCaseUI(n){var d;let e=C.Tests,o=ke(le("sim-mode-link testcase-change-button"),fe("flex: none; font-size: 80%; opacity: 0.85; margin: -1px; padding: 1px"),pt(e.EditTestCaseName),En("pen")).render(),i=ke(le("sim-mode-link testcase-change-button"),fe("flex: none; font-size: 80%; opacity: 0.85; margin: -1px; padding: 1px"),pt(e.DeleteTestCase),En("trash")).render(),s=ke(fe("flex: auto"),(d=n.name)!=null?d:e.DefaultTestCaseName).render(),a=V(le("test-disclosable testcase-button"),s,o,i).render(),u=V(le("testcase-details"),fe("display: none"),this.makeTestCaseDetailsTable(n)).render(),l=p(h=>{let m=a.classList.toggle("expanded",h);we(u,m),this.palette.updateMaxHeight()},"toggle");a.addEventListener("click",()=>{l()});let c=V(le("testcase wait"),a,u).render();return o.addEventListener("click",h=>{var f;if(h.stopPropagation(),!lr.canModifyTestCases(this.editor)){window.alert(C.Messages.NoPermission);return}let m=window.prompt(e.EnterNewTestCaseName,(f=n.name)!=null?f:"");m===null||m.length===0||(n.name=m,s.textContent=m)}),i.addEventListener("click",h=>{if(!lr.canModifyTestCases(this.editor)){window.alert(C.Messages.NoPermission);return}this.editor.removeTestCase(n),h.stopPropagation()}),{line:a,details:u,container:c,toggle:l}}get expanded(){return this._expanded}set expanded(n){this._expanded=this.header.classList.toggle("expanded",n),we(this.content,this._expanded),this.palette.updateMaxHeight()}async runTestCases(n){let e=this.expanded;Ka(this.runTestCasesButton,!0);let o;try{o=await this.editor.runTestSuite(this.testSuite,n!=null?n:{fast:!0}),o!==void 0&&o.isAllPass()&&(this.expanded=e)}finally{Ka(this.runTestCasesButton,!1)}return o}setRunning(n){this._expanded||(this.expanded=!0);let e=this.htmlResults[n];e.container.className="testcase running",e.toggle(!0)}setResult(n,e){let o=this.htmlResults[n];e._tag==="fail"?(o.details.innerHTML="",o.details.appendChild(this.makeTestCaseDetailsTable(this.testSuite.testCases[n],e))):o.toggle(),o.container.className="testcase "+e._tag,this.palette.setDisplayingResults()}makeComponentRefSpan(n){var i;let e=Z(n)?n:Z(n.name)?n.name:(i=n.ref)!=null?i:"?",o=ho(e,zs("#")).render();return o.addEventListener("click",s=>{s.preventDefault(),this.editor.highlight(n)}),o}makeTestCaseDetailsTable(n,e){let o=C.Tests,i=cu().render(),s=[...n.in],a=[...n.out];for(let l=0;l<Math.max(s.length,a.length);l++){let c=l>=s.length?"":W(this.makeComponentRefSpan(s[l][0]),`: ${s[l][1]}`),d="";if(l<a.length){let[h,m]=a[l],f=String(m);if(e!==void 0){let g=e.mismatches.find(D=>D.output===h);g!==void 0&&(f=W(ke(le("testcase-wrongvalue"),`${Lo(g.actual,!1)}`),` \u2260 ${f}`))}d=W(this.makeComponentRefSpan(h),": ",f)}Ii(Ws(c),Ws(d)).applyTo(i)}let u=ke(le("sim-mode-link"),fe("margin: 2px; padding: 3px"),pt(o.SetTheseInputs),En("setinput")).render();return u.addEventListener("click",async()=>{n.tryFixReferences(this.editor.components),this.palette.skipUpdatesWhile(async()=>{this.editor.trySetInputsAndRecalc(n.in),await this.editor.waitForPropagation()})}),uu(le("testcase-table"),lu(Ii(Hs(o.SetInputs,u),Hs(o.WantedOutputs))),i).render()}};p(Pl,"TestSuiteUI");function Py(r,n){return r.hasCallbacks===n.hasCallbacks&&r.enablesPause===n.enablesPause&&r.isPaused===n.isPaused&&r.enablesPause===n.enablesPause&&r.nextStepDesc===n.nextStepDesc}p(Py,"areStatesEqual");var Ca=class{constructor(n){this.onStateChanged=p(n=>null,"onStateChanged");this.editor=n,this.reset()}reset(){this._epochStart=this.unadjustedTime(),this._sortedNextCallbackTimes=[],this._schedule={},this._numCallbacksEnablingPause=0,this._nextTimeout!==void 0&&(clearTimeout(this._nextTimeout.handle),this._nextTimeout=void 0),this._fixedLogicalTime=void 0,this._pausedSince=void 0}get isPaused(){return this._pausedSince!==void 0}get nextTickDesc(){var i;if(this._sortedNextCallbackTimes.length===0)return;let n=this._sortedNextCallbackTimes[0],e=this._schedule[n];if(e.length===1)return e[0].desc;let o=new Map;for(let s of e)o.set(s.desc,((i=o.get(s.desc))!=null?i:0)+1);return[...o.entries()].map(([s,a])=>`${a} \xD7 ${s}`).join(`
`)}get state(){let n=this._sortedNextCallbackTimes.length>0,e=this._numCallbacksEnablingPause>0,o=this.isPaused,s=o&&n?this.nextTickDesc:void 0;return{hasCallbacks:n,enablesPause:e,isPaused:o,nextStepDesc:s}}unadjustedTime(){return new Date().getTime()}logicalTime(){return this._fixedLogicalTime!==void 0?this._fixedLogicalTime:this._pausedSince!==void 0?this._pausedSince-this._epochStart:this.unadjustedTime()-this._epochStart}hasPendingCallbacksNow(){return this._sortedNextCallbackTimes.length>0&&this._sortedNextCallbackTimes[0]<=this.logicalTime()}scheduleAt(n,e,o,i){let s={callback:e,desc:o,enablesPause:i};if(this._numCallbacksEnablingPause+=i?1:0,n in this._schedule)this._schedule[n].push(s);else{n<this.logicalTime()&&console.log(`WARNING Scheduling this in the past (${n-this.logicalTime()} ms), may behave strangely: `+o);let a=0;do{if(a>=this._sortedNextCallbackTimes.length){this._sortedNextCallbackTimes.push(n);break}if(n<this._sortedNextCallbackTimes[a]){this._sortedNextCallbackTimes.splice(a,0,n);break}a++}while(!0);this._schedule[n]=[s],a===0&&this.rescheduleNextIfNeeded()}this.fireStateChangedIfNeeded()}rescheduleNextIfNeeded(){if(this._sortedNextCallbackTimes.length===0)this._nextTimeout!==void 0&&(clearTimeout(this._nextTimeout.handle),this._nextTimeout=void 0);else{let n=this._sortedNextCallbackTimes[0];if(this._nextTimeout!==void 0){if(this._nextTimeout.tickTime<=n)return;clearTimeout(this._nextTimeout.handle),this._nextTimeout=void 0}let e=this.logicalTime(),o=n-e,i=setTimeout(()=>this.nextTickCallback(),o);this._nextTimeout={handle:i,tickTime:n}}}nextTickCallback(){this._nextTimeout=void 0,this._pausedSince===void 0&&this.handleNextTick()}handleNextTick(){let n=this._sortedNextCallbackTimes.shift();if(n===void 0)return;let e=this.logicalTime(),o=this._schedule[n],i=e-n;i>100&&(this._epochStart+=i);let s=p(()=>{let a;for(this._fixedLogicalTime=n;(a=o.shift())!==void 0;){let{callback:u,desc:l,enablesPause:c}=a;this._numCallbacksEnablingPause-=c?1:0;try{u()}catch(d){console.log(`ERROR running callback '${l}': `+d)}}this._fixedLogicalTime=void 0},"runAllCallbacks");this.editor.wrapHandler(s)(),delete this._schedule[n],this.rescheduleNextIfNeeded(),this.fireStateChangedIfNeeded()}pause(){this._pausedSince===void 0&&(this._nextTimeout!==void 0&&(clearTimeout(this._nextTimeout.handle),this._nextTimeout=void 0),this._pausedSince=this.unadjustedTime(),this.fireStateChangedIfNeeded())}play(){this._pausedSince!==void 0&&(this._epochStart+=this.unadjustedTime()-this._pausedSince,this._pausedSince=void 0,this.editor.editTools.redrawMgr.requestRedraw({why:"timeline-play",invalidateTests:!0}),this.rescheduleNextIfNeeded(),this.fireStateChangedIfNeeded())}step(){if(this._pausedSince===void 0||this._sortedNextCallbackTimes.length===0)return;let n=this._sortedNextCallbackTimes[0],e=this.logicalTime();this._epochStart-=n-e,this.handleNextTick(),this.fireStateChangedIfNeeded()}fireStateChangedIfNeeded(){let n=this.state;(this._lastSentState===void 0||!Py(this._lastSentState,n))&&(this.onStateChanged(n),this._lastSentState=n)}};p(Ca,"Timeline");var wa=class{constructor(n){this.editor=n;this._showingCompactUI=!1;this._showingCircuitName=!1;this._customComponentShown=void 0;this._showingTimelineUI=!1;let e=C.TopBar;this.alwaysShowCircuitName=n.isSingleton,this.dirtyIndicator=this.makeLabel(W(fe("margin: 3px 3px 0 -2px; font-size: 20pt"),"\u2022",pt(e.DirtyTooltip))),this.circuitNameLabel=this.makeLink(W("",pt(e.CircuitNameTooltip)),this.runSetCircuitNameDialog.bind(this)),this.mainCircuitTab=this.makeTab(this.circuitNameLabel),this.customComponentChevron=this.makeLabel("\u276F"),this.customComponentChevron.style.fontSize="14pt",this.customComponentNameLabel=this.makeLink(W("",pt(e.CustomComponentCaptionTooltip)),this.runSetCustomComponentCaptionDialog.bind(this)),this.customComponentNameLabel.style.fontWeight="bolder",this.closeCustomComponentButton=this.makeButton("close",e.CloseCircuit,()=>n.tryCloseCustomComponentEditor()),this.closeCustomComponentButton.style.padding="0",this.customComponentTab=this.makeTab(this.closeCustomComponentButton,this.customComponentNameLabel),this.circuitNameGroup=V(le("path"),fe("flex: none; display: flex; align-items: stretch; margin: -3px 0 -3px -5px; padding: 3px 5px"),this.dirtyIndicator,this.mainCircuitTab,this.customComponentChevron,this.customComponentTab).render(),this.undoButton=this.makeButtonWithLabel("undo",e.Undo,()=>this.editor.editTools.undoMgr.undo()),this.redoButton=this.makeButtonWithLabel("redo",e.Redo,()=>this.editor.editTools.undoMgr.redoOrRepeat()),this.resetButton=this.makeButtonWithLabel("reset",e.Reset,()=>this.editor.resetCircuit()),this.openButton=this.makeButtonWithLabel("open",e.Open,this.openHandler.bind(this)),this.loadFromBrowserButton=this.makeButtonWithLabel("browserload",e.Restore,this.loadFromBrowserHandler.bind(this)),this.downloadButton=this.makeButtonWithLabel("download",e.Download,this.saveHandler.bind(this)),this.screenshotButton=this.makeButtonWithLabel("screenshot",e.Screenshot,this.screenshotHandler.bind(this)),this.timelineButtonSep=this.makeSep(),this.pauseButton=this.makeButtonWithLabel("pause",e.TimelinePause,()=>this.editor.timeline.pause()),this.playButton=this.makeButtonWithLabel("play",e.TimelinePlay,()=>this.editor.timeline.play()),this.stepButton=this.makeButtonWithLabel("step",e.TimelineStep,()=>this.editor.timeline.step()),this.timeLabel=this.makeLabel(e.TimeLabel+"0"),this.timeLabel.style.fontSize="8pt",this.designButton=this.makeButtonWithLabel("mouse",e.Design,()=>this.editor.setCurrentPointerAction("edit")),this.deleteButton=this.makeButtonWithLabel("trash",e.Delete,()=>this.editor.setCurrentPointerAction("delete")),this.testsButton=this.makeButtonWithLabel("check",e.Tests,()=>this.editor.setTestsPaletteVisible(!this.testsButton.classList.contains("active"))),this.flexibleSep=V(fe("flex: auto")).render(),this.moveButton=this.makeButton("move",e.Move[1],()=>this.editor.setCurrentPointerAction("move")),this.zoomLevelInput=Us(Vo("number"),fe("margin: 0 2px 0 0; width: 4em; background-color: inherit;"),Zt("min","0"),Zt("step","10"),Zt("value",String(n.options.zoom)),Zt("title",C.Settings.zoomLevel)).render(),this.zoomLevelInput.addEventListener("change",n.wrapHandler(this.zoomLevelHandler.bind(this)));let o=this.makeLabel(W(this.zoomLevelInput,C.Settings.zoomLevelField[1]));this.root=V(le("topBar"),fe("flex:none; height: 30px; padding: 3px 5px; display: flex; align-items: stretch;"),this.circuitNameGroup,this.undoButton,this.redoButton,this.makeSep(),this.resetButton,this.makeSep(),this.openButton,this.editor.autosave?this.loadFromBrowserButton:mt,this.downloadButton,this.screenshotButton,this.timelineButtonSep,this.pauseButton,this.playButton,this.stepButton,this.timeLabel,this.makeSep(!0),this.designButton,this.deleteButton,this.makeSep(),this.testsButton,this.flexibleSep,this.moveButton,o).render(),n.html.centerCol.insertAdjacentElement("afterbegin",this.root);let i=n.editTools.undoMgr;i.onStateChanged=s=>this.setUndoButtonsEnabled(s),this.setUndoButtonsEnabled(i.state),n.timeline.onStateChanged=s=>this.setTimelineButtonsVisible(s),this.setTimelineButtonsVisible(n.timeline.state),this.setDirty(!1),this.setEditingCustomComponent(void 0),this.setCircuitName(n.documentDisplayName),this.updateCompactMode()}runSetCircuitNameDialog(){var o;let n=(o=this.editor.options.name)!=null?o:"",e=window.prompt(C.TopBar.SetCircuitName,n);e===null||e===n||(this.editor.setCircuitName(e),this.editor.editTools.undoMgr.takeSnapshot())}runSetCustomComponentCaptionDialog(){this._customComponentShown!==void 0&&this.editor.factory.runChangeCustomComponentCaptionDialog(this._customComponentShown)}openHandler(){this.editor.runFileChooser("text/plain|image/png|application/json|application/json5",n=>{this.editor.tryLoadFrom(n)})}loadFromBrowserHandler(){this.editor.tryLoadFromLocalStorage()}saveHandler(n){n.altKey&&this.editor.factory.hasCustomComponents()?Pe.saveLibraryToFile(this.editor):Pe.saveCircuitToFile(this.editor)}screenshotHandler(n){let e=this.editor;n.altKey?e.download(e.toSVG(!0),".svg"):e.download(e.toPNG(!0),".png")}zoomLevelHandler(){let n=this.zoomLevelInput.valueAsNumber,e=this.editor.setZoom(n,!1);e!==n&&this.setZoom(e)}updateCompactMode(){let n=p(()=>this.flexibleSep.getBoundingClientRect().width,"getSepWidth"),e=5,o=n();this._showingCompactUI?o>e&&(this.root.classList.remove("compact"),n()<=e?this.root.classList.add("compact"):this._showingCompactUI=!1):o<=e&&(this._showingCompactUI=!0,this.root.classList.add("compact"))}getActiveTabCoords(){let e=(this._customComponentShown!==void 0?this.customComponentTab:this.mainCircuitTab).getBoundingClientRect();return[e.left,e.right]}setButtonStateFromMode(n,e){zr(this.root,n.showComponentsAndEditControls),we(this.resetButton,n.showReset);let o=e>=2;we(this.undoButton,o),we(this.redoButton,o);let i=n.showComponentsAndEditControls==="show";we(this.designButton,i),we(this.deleteButton,i),we(this.moveButton,i),this.updateCompactMode()}setCircuitName(n){let e=!0;n!==void 0?this.circuitNameLabel.textContent=n:this.alwaysShowCircuitName?this.circuitNameLabel.textContent=this.editor.documentDisplayName:(e=!1,this.circuitNameLabel.textContent=""),this._showingCircuitName=e,we(this.circuitNameLabel,e),we(this.dirtyIndicator,e),this.updateCircuitNameUI()}updateCircuitNameUI(){we(this.circuitNameGroup,this._showingCircuitName||this._customComponentShown!==void 0),this.updateCompactMode()}setZoom(n){this.zoomLevelInput.value=String(n)}setDirty(n){this.dirtyIndicator.style.visibility=n?"inherit":"hidden",Qa(this.resetButton,n)}setEditingCustomComponent(n){let e=n!==void 0;we(this.customComponentChevron,e),we(this.customComponentTab,e),Pi(this.mainCircuitTab,!e),Pi(this.customComponentTab,e),e?(this.circuitNameLabel.style.removeProperty("font-weight"),this.customComponentNameLabel.textContent=n.caption):(this.circuitNameLabel.style.fontWeight="bolder",this.customComponentNameLabel.textContent=""),this._customComponentShown=n,this.updateCircuitNameUI()}updateCustomComponentCaption(){this._customComponentShown!==void 0&&(this.customComponentNameLabel.textContent=this._customComponentShown.caption,this.updateCompactMode())}setTimelineButtonsVisible({enablesPause:n,hasCallbacks:e,isPaused:o,nextStepDesc:i}){let s=n||this.editor.options.allowPausePropagation&&e;this._showingTimelineUI=s,s?(we(this.timelineButtonSep,!0),we(this.playButton,o),we(this.pauseButton,!o),we(this.stepButton,i!==void 0),this.stepButton.title=C.TopBar.TimelineStep[1]+`
`+(i!=null?i:""),we(this.timeLabel,o),this.updateTimeLabelIfNeeded()):(we(this.timelineButtonSep,!1),we(this.playButton,!1),we(this.pauseButton,!1),we(this.stepButton,!1),we(this.timeLabel,!1)),this.updateCompactMode()}setUndoButtonsEnabled({canUndo:n,canRedoOrRepeat:e}){Qa(this.undoButton,n),Qa(this.redoButton,e)}updateTimeLabelIfNeeded(){if(!this._showingTimelineUI)return;let n=this.editor.timeline.logicalTime(),e=n%1e3,o=Math.floor(n/1e3)%60,i=Math.floor(n/6e4)%60,s=Math.floor(n/36e5);this.timeLabel.textContent=C.TopBar.TimeLabel+(s===0?"":s+":")+(i<10?"0"+i:i)+":"+(o<10?"0"+o:o)+"."+(e<100?e<10?"00":"0":"")+e}updateActiveTool(n){Pi(this.designButton,n==="edit"),Pi(this.deleteButton,n==="delete"),Pi(this.moveButton,n==="move")}updateTestPaletteVisible(n){this.testsButton.classList.toggle("active",n)}setTestPaletteButtonVisible(n){let e=n!==0;if(e){let o=n>0?C.TopBar.Tests[0]+` (${n})`:C.TopBar.Tests[0];this.setCaption(this.testsButton,o)}we(this.testsButton,e)}makeTab(...n){return V(le("barTab"),...n).render()}makeButtonWithLabel(n,e,o){return this.makeButton(n,e[1],o,e[0])}makeButton(n,e,o,i){let s=i===void 0?mt:ke(le("btnLabel"),i),a=Li(sf(le("svgicon"),sr(su(n))),pt(e),s).render();return a.addEventListener("click",this.editor.wrapHandler(o)),a}makeLabel(n){return ke(le("barLabel"),n).render()}makeLink(n,e){let o=ho(le("barLabel"),n).render();return o.addEventListener("click",this.editor.wrapHandler(e)),o}makeSep(n=!1){return V(le(n?"sep fat":"sep")).render()}setCaption(n,e){let o=n.querySelector(".btnLabel");o!==null&&(o.textContent=e)}};p(wa,"TopBar");var xt="top",Bt="bottom",St="right",Et="left",Bl="auto",Sr=[xt,Bt,St,Et],Qo="start",Nl="end",ym="clippingParents",Fl="viewport",ws="popper",vm="reference",_p=Sr.reduce(function(r,n){return r.concat([n+"-"+Qo,n+"-"+Nl])},[]),Il=[].concat(Sr,[Bl]).reduce(function(r,n){return r.concat([n,n+"-"+Qo,n+"-"+Nl])},[]),By="beforeRead",Ny="read",Fy="afterRead",Iy="beforeMain",ky="main",Ly="afterMain",Vy="beforeWrite",Hy="write",Wy="afterWrite",Cm=[By,Ny,Fy,Iy,ky,Ly,Vy,Hy,Wy];function Nt(r){return r?(r.nodeName||"").toLowerCase():null}p(Nt,"getNodeName");function yt(r){if(r==null)return window;if(r.toString()!=="[object Window]"){var n=r.ownerDocument;return n&&n.defaultView||window}return r}p(yt,"getWindow");function Ko(r){var n=yt(r).Element;return r instanceof n||r instanceof Element}p(Ko,"isElement");function tn(r){var n=yt(r).HTMLElement;return r instanceof n||r instanceof HTMLElement}p(tn,"isHTMLElement");function kl(r){if(typeof ShadowRoot>"u")return!1;var n=yt(r).ShadowRoot;return r instanceof n||r instanceof ShadowRoot}p(kl,"isShadowRoot");function Uy(r){var n=r.state;Object.keys(n.elements).forEach(function(e){var o=n.styles[e]||{},i=n.attributes[e]||{},s=n.elements[e];!tn(s)||!Nt(s)||(Object.assign(s.style,o),Object.keys(i).forEach(function(a){var u=i[a];u===!1?s.removeAttribute(a):s.setAttribute(a,u===!0?"":u)}))})}p(Uy,"applyStyles");function zy(r){var n=r.state,e={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(n.elements.popper.style,e.popper),n.styles=e,n.elements.arrow&&Object.assign(n.elements.arrow.style,e.arrow),function(){Object.keys(n.elements).forEach(function(o){var i=n.elements[o],s=n.attributes[o]||{},a=Object.keys(n.styles.hasOwnProperty(o)?n.styles[o]:e[o]),u=a.reduce(function(l,c){return l[c]="",l},{});!tn(i)||!Nt(i)||(Object.assign(i.style,u),Object.keys(s).forEach(function(l){i.removeAttribute(l)}))})}}p(zy,"effect");var wm={name:"applyStyles",enabled:!0,phase:"write",fn:Uy,effect:zy,requires:["computeStyles"]};function Ft(r){return r.split("-")[0]}p(Ft,"getBasePlacement");function qn(r){var n=r.getBoundingClientRect();return{width:n.width,height:n.height,top:n.top,right:n.right,bottom:n.bottom,left:n.left,x:n.left,y:n.top}}p(qn,"getBoundingClientRect");function Di(r){var n=qn(r),e=r.offsetWidth,o=r.offsetHeight;return Math.abs(n.width-e)<=1&&(e=n.width),Math.abs(n.height-o)<=1&&(o=n.height),{x:r.offsetLeft,y:r.offsetTop,width:e,height:o}}p(Di,"getLayoutRect");function xa(r,n){var e=n.getRootNode&&n.getRootNode();if(r.contains(n))return!0;if(e&&kl(e)){var o=n;do{if(o&&r.isSameNode(o))return!0;o=o.parentNode||o.host}while(o)}return!1}p(xa,"contains");function wn(r){return yt(r).getComputedStyle(r)}p(wn,"getComputedStyle");function Rp(r){return["table","td","th"].indexOf(Nt(r))>=0}p(Rp,"isTableElement");function Yt(r){return((Ko(r)?r.ownerDocument:r.document)||window.document).documentElement}p(Yt,"getDocumentElement");function Zo(r){return Nt(r)==="html"?r:r.assignedSlot||r.parentNode||(kl(r)?r.host:null)||Yt(r)}p(Zo,"getParentNode");function xm(r){return!tn(r)||wn(r).position==="fixed"?null:r.offsetParent}p(xm,"getTrueOffsetParent");function Gy(r){for(var n=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,e=Zo(r);tn(e)&&["html","body"].indexOf(Nt(e))<0;){var o=wn(e);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||n&&o.willChange==="filter"||n&&o.filter&&o.filter!=="none")return e;e=e.parentNode}return null}p(Gy,"getContainingBlock");function uo(r){for(var n=yt(r),e=xm(r);e&&Rp(e)&&wn(e).position==="static";)e=xm(e);return e&&(Nt(e)==="html"||Nt(e)==="body"&&wn(e).position==="static")?n:e||Gy(r)||n}p(uo,"getOffsetParent");function bi(r){return["top","bottom"].indexOf(r)>=0?"x":"y"}p(bi,"getMainAxisFromPlacement");var $n=Math.max,Er=Math.min,Ta=Math.round;function yi(r,n,e){return $n(r,Er(n,e))}p(yi,"within");function Aa(){return{top:0,right:0,bottom:0,left:0}}p(Aa,"getFreshSideObject");function Sa(r){return Object.assign({},Aa(),r)}p(Sa,"mergePaddingObject");function Ea(r,n){return n.reduce(function(e,o){return e[o]=r,e},{})}p(Ea,"expandToHashMap");var qy=p(function(n,e){return n=typeof n=="function"?n(Object.assign({},e.rects,{placement:e.placement})):n,Sa(typeof n!="number"?n:Ea(n,Sr))},"toPaddingObject");function $y(r){var n,e=r.state,o=r.name,i=r.options,s=e.elements.arrow,a=e.modifiersData.popperOffsets,u=Ft(e.placement),l=bi(u),c=[Et,St].indexOf(u)>=0,d=c?"height":"width";if(!(!s||!a)){var h=qy(i.padding,e),m=Di(s),f=l==="y"?xt:Et,g=l==="y"?Bt:St,D=e.rects.reference[d]+e.rects.reference[l]-a[l]-e.rects.popper[d],y=a[l]-e.rects.reference[l],w=uo(s),x=w?l==="y"?w.clientHeight||0:w.clientWidth||0:0,S=D/2-y/2,T=h[f],A=x-m[d]-h[g],P=x/2-m[d]/2+S,R=yi(T,P,A),L=l;e.modifiersData[o]=(n={},n[L]=R,n.centerOffset=R-P,n)}}p($y,"arrow");function Yy(r){var n=r.state,e=r.options,o=e.element,i=o===void 0?"[data-popper-arrow]":o;i!=null&&(typeof i=="string"&&(i=n.elements.popper.querySelector(i),!i)||xa(n.elements.popper,i)&&(n.elements.arrow=i))}p(Yy,"effect");var Tm={name:"arrow",enabled:!0,phase:"main",fn:$y,effect:Yy,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};var Xy={top:"auto",right:"auto",bottom:"auto",left:"auto"};function jy(r){var n=r.x,e=r.y,o=window,i=o.devicePixelRatio||1;return{x:Ta(Ta(n*i)/i)||0,y:Ta(Ta(e*i)/i)||0}}p(jy,"roundOffsetsByDPR");function Am(r){var n,e=r.popper,o=r.popperRect,i=r.placement,s=r.offsets,a=r.position,u=r.gpuAcceleration,l=r.adaptive,c=r.roundOffsets,d=c===!0?jy(s):typeof c=="function"?c(s):s,h=d.x,m=h===void 0?0:h,f=d.y,g=f===void 0?0:f,D=s.hasOwnProperty("x"),y=s.hasOwnProperty("y"),w=Et,x=xt,S=window;if(l){var T=uo(e),A="clientHeight",P="clientWidth";T===yt(e)&&(T=Yt(e),wn(T).position!=="static"&&(A="scrollHeight",P="scrollWidth")),T=T,i===xt&&(x=Bt,g-=T[A]-o.height,g*=u?1:-1),i===Et&&(w=St,m-=T[P]-o.width,m*=u?1:-1)}var R=Object.assign({position:a},l&&Xy);if(u){var L;return Object.assign({},R,(L={},L[x]=y?"0":"",L[w]=D?"0":"",L.transform=(S.devicePixelRatio||1)<2?"translate("+m+"px, "+g+"px)":"translate3d("+m+"px, "+g+"px, 0)",L))}return Object.assign({},R,(n={},n[x]=y?g+"px":"",n[w]=D?m+"px":"",n.transform="",n))}p(Am,"mapToStyles");function Qy(r){var n=r.state,e=r.options,o=e.gpuAcceleration,i=o===void 0?!0:o,s=e.adaptive,a=s===void 0?!0:s,u=e.roundOffsets,l=u===void 0?!0:u;if(!1)var c;var d={placement:Ft(n.placement),popper:n.elements.popper,popperRect:n.rects.popper,gpuAcceleration:i};n.modifiersData.popperOffsets!=null&&(n.styles.popper=Object.assign({},n.styles.popper,Am(Object.assign({},d,{offsets:n.modifiersData.popperOffsets,position:n.options.strategy,adaptive:a,roundOffsets:l})))),n.modifiersData.arrow!=null&&(n.styles.arrow=Object.assign({},n.styles.arrow,Am(Object.assign({},d,{offsets:n.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-placement":n.placement})}p(Qy,"computeStyles");var Sm={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Qy,data:{}};var Ll={passive:!0};function Ky(r){var n=r.state,e=r.instance,o=r.options,i=o.scroll,s=i===void 0?!0:i,a=o.resize,u=a===void 0?!0:a,l=yt(n.elements.popper),c=[].concat(n.scrollParents.reference,n.scrollParents.popper);return s&&c.forEach(function(d){d.addEventListener("scroll",e.update,Ll)}),u&&l.addEventListener("resize",e.update,Ll),function(){s&&c.forEach(function(d){d.removeEventListener("scroll",e.update,Ll)}),u&&l.removeEventListener("resize",e.update,Ll)}}p(Ky,"effect");var Em={name:"eventListeners",enabled:!0,phase:"write",fn:p(function(){},"fn"),effect:Ky,data:{}};var Zy={left:"right",right:"left",bottom:"top",top:"bottom"};function xs(r){return r.replace(/left|right|bottom|top/g,function(n){return Zy[n]})}p(xs,"getOppositePlacement");var Jy={start:"end",end:"start"};function Vl(r){return r.replace(/start|end/g,function(n){return Jy[n]})}p(Vl,"getOppositeVariationPlacement");function vi(r){var n=yt(r),e=n.pageXOffset,o=n.pageYOffset;return{scrollLeft:e,scrollTop:o}}p(vi,"getWindowScroll");function Ci(r){return qn(Yt(r)).left+vi(r).scrollLeft}p(Ci,"getWindowScrollBarX");function Mp(r){var n=yt(r),e=Yt(r),o=n.visualViewport,i=e.clientWidth,s=e.clientHeight,a=0,u=0;return o&&(i=o.width,s=o.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(a=o.offsetLeft,u=o.offsetTop)),{width:i,height:s,x:a+Ci(r),y:u}}p(Mp,"getViewportRect");function Op(r){var n,e=Yt(r),o=vi(r),i=(n=r.ownerDocument)==null?void 0:n.body,s=$n(e.scrollWidth,e.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),a=$n(e.scrollHeight,e.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),u=-o.scrollLeft+Ci(r),l=-o.scrollTop;return wn(i||e).direction==="rtl"&&(u+=$n(e.clientWidth,i?i.clientWidth:0)-s),{width:s,height:a,x:u,y:l}}p(Op,"getDocumentRect");function wi(r){var n=wn(r),e=n.overflow,o=n.overflowX,i=n.overflowY;return/auto|scroll|overlay|hidden/.test(e+i+o)}p(wi,"isScrollParent");function Hl(r){return["html","body","#document"].indexOf(Nt(r))>=0?r.ownerDocument.body:tn(r)&&wi(r)?r:Hl(Zo(r))}p(Hl,"getScrollParent");function _r(r,n){var e;n===void 0&&(n=[]);var o=Hl(r),i=o===((e=r.ownerDocument)==null?void 0:e.body),s=yt(o),a=i?[s].concat(s.visualViewport||[],wi(o)?o:[]):o,u=n.concat(a);return i?u:u.concat(_r(Zo(a)))}p(_r,"listScrollParents");function Ts(r){return Object.assign({},r,{left:r.x,top:r.y,right:r.x+r.width,bottom:r.y+r.height})}p(Ts,"rectToClientRect");function e4(r){var n=qn(r);return n.top=n.top+r.clientTop,n.left=n.left+r.clientLeft,n.bottom=n.top+r.clientHeight,n.right=n.left+r.clientWidth,n.width=r.clientWidth,n.height=r.clientHeight,n.x=n.left,n.y=n.top,n}p(e4,"getInnerBoundingClientRect");function _m(r,n){return n===Fl?Ts(Mp(r)):tn(n)?e4(n):Ts(Op(Yt(r)))}p(_m,"getClientRectFromMixedType");function t4(r){var n=_r(Zo(r)),e=["absolute","fixed"].indexOf(wn(r).position)>=0,o=e&&tn(r)?uo(r):r;return Ko(o)?n.filter(function(i){return Ko(i)&&xa(i,o)&&Nt(i)!=="body"}):[]}p(t4,"getClippingParents");function Pp(r,n,e){var o=n==="clippingParents"?t4(r):[].concat(n),i=[].concat(o,[e]),s=i[0],a=i.reduce(function(u,l){var c=_m(r,l);return u.top=$n(c.top,u.top),u.right=Er(c.right,u.right),u.bottom=Er(c.bottom,u.bottom),u.left=$n(c.left,u.left),u},_m(r,s));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}p(Pp,"getClippingRect");function Ro(r){return r.split("-")[1]}p(Ro,"getVariation");function _a(r){var n=r.reference,e=r.element,o=r.placement,i=o?Ft(o):null,s=o?Ro(o):null,a=n.x+n.width/2-e.width/2,u=n.y+n.height/2-e.height/2,l;switch(i){case xt:l={x:a,y:n.y-e.height};break;case Bt:l={x:a,y:n.y+n.height};break;case St:l={x:n.x+n.width,y:u};break;case Et:l={x:n.x-e.width,y:u};break;default:l={x:n.x,y:n.y}}var c=i?bi(i):null;if(c!=null){var d=c==="y"?"height":"width";switch(s){case Qo:l[c]=l[c]-(n[d]/2-e[d]/2);break;case Nl:l[c]=l[c]+(n[d]/2-e[d]/2);break;default:}}return l}p(_a,"computeOffsets");function lo(r,n){n===void 0&&(n={});var e=n,o=e.placement,i=o===void 0?r.placement:o,s=e.boundary,a=s===void 0?ym:s,u=e.rootBoundary,l=u===void 0?Fl:u,c=e.elementContext,d=c===void 0?ws:c,h=e.altBoundary,m=h===void 0?!1:h,f=e.padding,g=f===void 0?0:f,D=Sa(typeof g!="number"?g:Ea(g,Sr)),y=d===ws?vm:ws,w=r.elements.reference,x=r.rects.popper,S=r.elements[m?y:d],T=Pp(Ko(S)?S:S.contextElement||Yt(r.elements.popper),a,l),A=qn(w),P=_a({reference:A,element:x,strategy:"absolute",placement:i}),R=Ts(Object.assign({},x,P)),L=d===ws?R:A,O={top:T.top-L.top+D.top,bottom:L.bottom-T.bottom+D.bottom,left:T.left-L.left+D.left,right:L.right-T.right+D.right},G=r.modifiersData.offset;if(d===ws&&G){var B=G[i];Object.keys(O).forEach(function(Q){var oe=[St,Bt].indexOf(Q)>=0?1:-1,ne=[xt,Bt].indexOf(Q)>=0?"y":"x";O[Q]+=B[ne]*oe})}return O}p(lo,"detectOverflow");function Bp(r,n){n===void 0&&(n={});var e=n,o=e.placement,i=e.boundary,s=e.rootBoundary,a=e.padding,u=e.flipVariations,l=e.allowedAutoPlacements,c=l===void 0?Il:l,d=Ro(o),h=d?u?_p:_p.filter(function(g){return Ro(g)===d}):Sr,m=h.filter(function(g){return c.indexOf(g)>=0});m.length===0&&(m=h);var f=m.reduce(function(g,D){return g[D]=lo(r,{placement:D,boundary:i,rootBoundary:s,padding:a})[Ft(D)],g},{});return Object.keys(f).sort(function(g,D){return f[g]-f[D]})}p(Bp,"computeAutoPlacement");function n4(r){if(Ft(r)===Bl)return[];var n=xs(r);return[Vl(r),n,Vl(n)]}p(n4,"getExpandedFallbackPlacements");function o4(r){var n=r.state,e=r.options,o=r.name;if(!n.modifiersData[o]._skip){for(var i=e.mainAxis,s=i===void 0?!0:i,a=e.altAxis,u=a===void 0?!0:a,l=e.fallbackPlacements,c=e.padding,d=e.boundary,h=e.rootBoundary,m=e.altBoundary,f=e.flipVariations,g=f===void 0?!0:f,D=e.allowedAutoPlacements,y=n.options.placement,w=Ft(y),x=w===y,S=l||(x||!g?[xs(y)]:n4(y)),T=[y].concat(S).reduce(function(on,tt){return on.concat(Ft(tt)===Bl?Bp(n,{placement:tt,boundary:d,rootBoundary:h,padding:c,flipVariations:g,allowedAutoPlacements:D}):tt)},[]),A=n.rects.reference,P=n.rects.popper,R=new Map,L=!0,O=T[0],G=0;G<T.length;G++){var B=T[G],Q=Ft(B),oe=Ro(B)===Qo,ne=[xt,Bt].indexOf(Q)>=0,Ue=ne?"width":"height",ut=lo(n,{placement:B,boundary:d,rootBoundary:h,altBoundary:m,padding:c}),$e=ne?oe?St:Et:oe?Bt:xt;A[Ue]>P[Ue]&&($e=xs($e));var It=xs($e),Ct=[];if(s&&Ct.push(ut[Q]<=0),u&&Ct.push(ut[$e]<=0,ut[It]<=0),Ct.every(function(on){return on})){O=B,L=!1;break}R.set(B,Ct)}if(L)for(var kt=g?3:1,Lt=p(function(tt){var K=T.find(function(de){var ge=R.get(de);if(ge)return ge.slice(0,tt).every(function(Ye){return Ye})});if(K)return O=K,"break"},"_loop"),nn=kt;nn>0;nn--){var Bn=Lt(nn);if(Bn==="break")break}n.placement!==O&&(n.modifiersData[o]._skip=!0,n.placement=O,n.reset=!0)}}p(o4,"flip");var Rm={name:"flip",enabled:!0,phase:"main",fn:o4,requiresIfExists:["offset"],data:{_skip:!1}};function Mm(r,n,e){return e===void 0&&(e={x:0,y:0}),{top:r.top-n.height-e.y,right:r.right-n.width+e.x,bottom:r.bottom-n.height+e.y,left:r.left-n.width-e.x}}p(Mm,"getSideOffsets");function Om(r){return[xt,St,Bt,Et].some(function(n){return r[n]>=0})}p(Om,"isAnySideFullyClipped");function r4(r){var n=r.state,e=r.name,o=n.rects.reference,i=n.rects.popper,s=n.modifiersData.preventOverflow,a=lo(n,{elementContext:"reference"}),u=lo(n,{altBoundary:!0}),l=Mm(a,o),c=Mm(u,i,s),d=Om(l),h=Om(c);n.modifiersData[e]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:d,hasPopperEscaped:h},n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":h})}p(r4,"hide");var Pm={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:r4};function i4(r,n,e){var o=Ft(r),i=[Et,xt].indexOf(o)>=0?-1:1,s=typeof e=="function"?e(Object.assign({},n,{placement:r})):e,a=s[0],u=s[1];return a=a||0,u=(u||0)*i,[Et,St].indexOf(o)>=0?{x:u,y:a}:{x:a,y:u}}p(i4,"distanceAndSkiddingToXY");function s4(r){var n=r.state,e=r.options,o=r.name,i=e.offset,s=i===void 0?[0,0]:i,a=Il.reduce(function(d,h){return d[h]=i4(h,n.rects,s),d},{}),u=a[n.placement],l=u.x,c=u.y;n.modifiersData.popperOffsets!=null&&(n.modifiersData.popperOffsets.x+=l,n.modifiersData.popperOffsets.y+=c),n.modifiersData[o]=a}p(s4,"offset");var Bm={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:s4};function a4(r){var n=r.state,e=r.name;n.modifiersData[e]=_a({reference:n.rects.reference,element:n.rects.popper,strategy:"absolute",placement:n.placement})}p(a4,"popperOffsets");var Nm={name:"popperOffsets",enabled:!0,phase:"read",fn:a4,data:{}};function Np(r){return r==="x"?"y":"x"}p(Np,"getAltAxis");function u4(r){var n=r.state,e=r.options,o=r.name,i=e.mainAxis,s=i===void 0?!0:i,a=e.altAxis,u=a===void 0?!1:a,l=e.boundary,c=e.rootBoundary,d=e.altBoundary,h=e.padding,m=e.tether,f=m===void 0?!0:m,g=e.tetherOffset,D=g===void 0?0:g,y=lo(n,{boundary:l,rootBoundary:c,padding:h,altBoundary:d}),w=Ft(n.placement),x=Ro(n.placement),S=!x,T=bi(w),A=Np(T),P=n.modifiersData.popperOffsets,R=n.rects.reference,L=n.rects.popper,O=typeof D=="function"?D(Object.assign({},n.rects,{placement:n.placement})):D,G={x:0,y:0};if(P){if(s||u){var B=T==="y"?xt:Et,Q=T==="y"?Bt:St,oe=T==="y"?"height":"width",ne=P[T],Ue=P[T]+y[B],ut=P[T]-y[Q],$e=f?-L[oe]/2:0,It=x===Qo?R[oe]:L[oe],Ct=x===Qo?-L[oe]:-R[oe],kt=n.elements.arrow,Lt=f&&kt?Di(kt):{width:0,height:0},nn=n.modifiersData["arrow#persistent"]?n.modifiersData["arrow#persistent"].padding:Aa(),Bn=nn[B],on=nn[Q],tt=yi(0,R[oe],Lt[oe]),K=S?R[oe]/2-$e-tt-Bn-O:It-tt-Bn-O,de=S?-R[oe]/2+$e+tt+on+O:Ct+tt+on+O,ge=n.elements.arrow&&uo(n.elements.arrow),Ye=ge?T==="y"?ge.clientTop||0:ge.clientLeft||0:0,Ve=n.modifiersData.offset?n.modifiersData.offset[n.placement][T]:0,Tn=P[T]+K-Ve-Ye,Mo=P[T]+de-Ve;if(s){var Ze=yi(f?Er(Ue,Tn):Ue,ne,f?$n(ut,Mo):ut);P[T]=Ze,G[T]=Ze-ne}if(u){var Oo=T==="x"?xt:Et,Vt=T==="x"?Bt:St,hn=P[A],Or=hn+y[Oo],Yn=hn-y[Vt],fn=yi(f?Er(Or,Tn):Or,hn,f?$n(Yn,Mo):Yn);P[A]=fn,G[A]=fn-hn}}n.modifiersData[o]=G}}p(u4,"preventOverflow");var Fm={name:"preventOverflow",enabled:!0,phase:"main",fn:u4,requiresIfExists:["offset"]};function Fp(r){return{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}}p(Fp,"getHTMLElementScroll");function Ip(r){return r===yt(r)||!tn(r)?vi(r):Fp(r)}p(Ip,"getNodeScroll");function kp(r,n,e){e===void 0&&(e=!1);var o=Yt(n),i=qn(r),s=tn(n),a={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(s||!s&&!e)&&((Nt(n)!=="body"||wi(o))&&(a=Ip(n)),tn(n)?(u=qn(n),u.x+=n.clientLeft,u.y+=n.clientTop):o&&(u.x=Ci(o))),{x:i.left+a.scrollLeft-u.x,y:i.top+a.scrollTop-u.y,width:i.width,height:i.height}}p(kp,"getCompositeRect");function l4(r){var n=new Map,e=new Set,o=[];r.forEach(function(s){n.set(s.name,s)});function i(s){e.add(s.name);var a=[].concat(s.requires||[],s.requiresIfExists||[]);a.forEach(function(u){if(!e.has(u)){var l=n.get(u);l&&i(l)}}),o.push(s)}return p(i,"sort"),r.forEach(function(s){e.has(s.name)||i(s)}),o}p(l4,"order");function Lp(r){var n=l4(r);return Cm.reduce(function(e,o){return e.concat(n.filter(function(i){return i.phase===o}))},[])}p(Lp,"orderModifiers");function Vp(r){var n;return function(){return n||(n=new Promise(function(e){Promise.resolve().then(function(){n=void 0,e(r())})})),n}}p(Vp,"debounce");function Hp(r){var n=r.reduce(function(e,o){var i=e[o.name];return e[o.name]=i?Object.assign({},i,o,{options:Object.assign({},i.options,o.options),data:Object.assign({},i.data,o.data)}):o,e},{});return Object.keys(n).map(function(e){return n[e]})}p(Hp,"mergeByName");var Im={placement:"bottom",modifiers:[],strategy:"absolute"};function km(){for(var r=arguments.length,n=new Array(r),e=0;e<r;e++)n[e]=arguments[e];return!n.some(function(o){return!(o&&typeof o.getBoundingClientRect=="function")})}p(km,"areValidElements");function Lm(r){r===void 0&&(r={});var n=r,e=n.defaultModifiers,o=e===void 0?[]:e,i=n.defaultOptions,s=i===void 0?Im:i;return p(function(u,l,c){c===void 0&&(c=s);var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},Im,s),modifiersData:{},elements:{reference:u,popper:l},attributes:{},styles:{}},h=[],m=!1,f={state:d,setOptions:p(function(w){D(),d.options=Object.assign({},s,d.options,w),d.scrollParents={reference:Ko(u)?_r(u):u.contextElement?_r(u.contextElement):[],popper:_r(l)};var x=Lp(Hp([].concat(o,d.options.modifiers)));if(d.orderedModifiers=x.filter(function(G){return G.enabled}),!1){var S;if(getBasePlacement(d.options.placement)===auto)var T;var A,P,R,L,O}return g(),f.update()},"setOptions"),forceUpdate:p(function(){if(!m){var w=d.elements,x=w.reference,S=w.popper;if(km(x,S)){d.rects={reference:kp(x,uo(S),d.options.strategy==="fixed"),popper:Di(S)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(B){return d.modifiersData[B.name]=Object.assign({},B.data)});for(var T=0,A=0;A<d.orderedModifiers.length;A++){if(d.reset===!0){d.reset=!1,A=-1;continue}var P=d.orderedModifiers[A],R=P.fn,L=P.options,O=L===void 0?{}:L,G=P.name;typeof R=="function"&&(d=R({state:d,options:O,name:G,instance:f})||d)}}}},"forceUpdate"),update:Vp(function(){return new Promise(function(y){f.forceUpdate(),y(d)})}),destroy:p(function(){D(),m=!0},"destroy")};if(!km(u,l))return f;f.setOptions(c).then(function(y){!m&&c.onFirstUpdate&&c.onFirstUpdate(y)});function g(){d.orderedModifiers.forEach(function(y){var w=y.name,x=y.options,S=x===void 0?{}:x,T=y.effect;if(typeof T=="function"){var A=T({state:d,name:w,instance:f,options:S}),P=p(function(){},"noopFn");h.push(A||P)}})}p(g,"runModifierEffects");function D(){h.forEach(function(y){return y()}),h=[]}return p(D,"cleanupModifierEffects"),f},"createPopper")}p(Lm,"popperGenerator");var c4=[Em,Nm,Sm,wm,Bm,Rm,Fm,Tm,Pm],Wp=Lm({defaultModifiers:c4});function Up(r,n,e){let o=r;o.dragStartX=n,o.dragStartY=e}p(Up,"setDragStartOnEvent");function Wl(r){r.preventDefault()}p(Wl,"preventDefaultAlways");var Rr=class{constructor(n){this.currentlyDrawnRect=n;this.previouslySelectedElements=new Set}toggle(n){this.previouslySelectedElements.has(n)?this.previouslySelectedElements.delete(n):this.previouslySelectedElements.add(n)}finishCurrentRect(n){let e;if((e=this.currentlyDrawnRect)!==void 0){for(let o of n.components.all())o.isInRect(e)&&this.toggle(o);for(let o of n.linkMgr.wires)for(let i of o.waypoints)i.isInRect(e)&&this.toggle(i);this.currentlyDrawnRect=void 0}}isSelected(n){let e=this.previouslySelectedElements.has(n),o=this.currentlyDrawnRect;return o===void 0?e:n.isInRect(o)?!e:e}};p(Rr,"EditorSelection");var Ra=class{constructor(n){this._currentComponentUnderPointer=null;this._currentTooltip=null;this._currentPointerDownData=null;this._startHoverTimeoutHandle=null;this._longPressTimeoutHandle=null;this._lastTouchEnd=void 0;this.currentSelection=void 0;this.editor=n,this._currentAction="edit",this._currentHandlers=new Ma(n)}get currentComponentUnderPointer(){return this._currentComponentUnderPointer}get currentPointerDownData(){return this._currentPointerDownData}setHandlersFor(n,...e){if(n===this._currentAction)return!1;this._currentAction=n;let o=(()=>{switch(n){case"delete":return new Ul(this.editor);case"move":return new Gl(this.editor);case"setanchor":return new zl(this.editor,...e);case"edit":default:return new Ma(this.editor)}})();return this._currentHandlers.unmount(),this._currentHandlers=o,ap(n==="delete"),!0}startLongPressTimeout(n,e){let o=e;o._savedOffsetX=o.offsetX,o._savedOffsetY=o.offsetY,o._savedTarget=o.target,this._longPressTimeoutHandle=setTimeout(this.editor.wrapHandler(()=>{let i=!1,s=this._currentPointerDownData;if(s!==null&&(s.fireClickedOnFinish=!1,s.triggeredContextMenu&&(i=!0)),!i)if(e.pointerType==="mouse"){let[a,u]=this.editor.offsetXY(e,!0);Up(e,a,u),n.mainComp instanceof Ln&&this._currentHandlers.pointerDraggedOn(n.mainComp,e);for(let l of n.selectionComps)this._currentHandlers.pointerDraggedOn(l,e)}else this.editor.mode>=2&&n.mainComp instanceof Ln&&this._currentHandlers.contextMenuOn(n.mainComp,e)}),500)}clearLongPressTimeout(){this._longPressTimeoutHandle!==null&&(clearTimeout(this._longPressTimeoutHandle),this._longPressTimeoutHandle=null)}clearHoverTimeoutHandle(){this._startHoverTimeoutHandle!==null&&(clearTimeout(this._startHoverTimeoutHandle),this._startHoverTimeoutHandle=null)}setCurrentComponentUnderPointer(n){n!==this._currentComponentUnderPointer&&(this.clearTooltipIfNeeded(),this.clearHoverTimeoutHandle(),this._currentComponentUnderPointer=n,n!==null&&(this._startHoverTimeoutHandle=setTimeout(()=>{this._currentHandlers.pointerHoverOn(n),this._startHoverTimeoutHandle=null},1200)),this.editor.editTools.redrawMgr.requestRedraw({why:"pointerover changed"}))}currentSelectionEmpty(){return this.currentSelection===void 0||this.currentSelection.previouslySelectedElements.size===0}updateComponentUnderPointer([n,e],o,i,s){let u=p(()=>{let l=this._currentComponentUnderPointer;if(l!==null&&l.drawZIndex!==0&&!(l instanceof eo||l instanceof Yr||i&&!(l instanceof me))&&l.isOver(n,e))return this._currentComponentUnderPointer;let c=this.editor.editorRoot;if(!o){for(let d of c.components.withZIndex(Dn.Overlay))if(d.isOver(n,e))return d}for(let d of c.components.withZIndex(Dn.Normal)){let h,m=Number.POSITIVE_INFINITY;if(!i)for(let f of d.allNodes()){let g=f.distSquaredIfOver(n,e,s);g!==void 0&&g<m&&(m=g,h=f)}if(h!==void 0&&(!o||c.linkMgr.isValidNodeToConnect(h)))return h;if(!o&&d.isOver(n,e))return d}if(!o&&!i)for(let d of c.linkMgr.wires){for(let h of d.waypoints)if(h.isOver(n,e))return h;if(d.isOver(n,e))return d}if(!o){for(let d of c.components.withZIndex(Dn.Background))if(d.isOver(n,e))return d}return null},"findComponenentUnderPointer")();this.setCurrentComponentUnderPointer(u)}selectAll(){let n=new Rr(void 0);this.currentSelection=n;let e=this.editor.editorRoot;for(let o of e.components.all())n.previouslySelectedElements.add(o);for(let o of e.linkMgr.wires)for(let i of o.waypoints)n.previouslySelectedElements.add(i);this.editor.editTools.redrawMgr.requestRedraw({why:"selected all"})}toggleSelect(n){let e;(e=this.currentSelection)===void 0&&(e=new Rr(void 0),this.currentSelection=e),e.toggle(n),this.editor.editTools.redrawMgr.requestRedraw({why:"toggled selection"})}moveSelection(n,e,o){let i=this.currentSelection;if(i===void 0||i.previouslySelectedElements.size===0)return!1;for(let s of i.previouslySelectedElements)s instanceof Kn&&s.setPosition(s.posX+n,s.posY+e,o);return!0}clearTooltipIfNeeded(){if(this._currentTooltip!==null){let[n,e]=this._currentTooltip;e(),n.destroy(),this._currentTooltip=null,this.editor.html.tooltipElem.style.display="none"}}makeTooltip(n,e){let{tooltipContents:o,tooltipElem:i,mainCanvas:s}=this.editor.html;o.innerHTML="",n.applyTo(o),i.style.removeProperty("display");let a=Wp({getBoundingClientRect:e,contextElement:s},i,{placement:"right",modifiers:[{name:"offset",options:{offset:[4,8]}}]}),u=Q0(s),l=p(()=>a.update(),"scrollListener");u.addEventListener("scroll",l);let c=p(()=>u.removeEventListener("scroll",l),"removeListener");this._currentTooltip=[a,c],i.setAttribute("data-show",""),a.update()}hideContextMenuIfNeeded(n){this._currentHandlers.hideContextMenuIfNeeded(n)}registerCanvasListenersOn(n){let e=this.editor,o=p(()=>!1,"returnFalse"),i=p(f=>{this.editor.mode>=2&&f.preventDefault()},"preventDefaultIfCanConnect");n.ontouchstart=i,n.ontouchmove=i,n.ontouchend=Wl;let s=new Map,a,u,l=p(()=>{if(u!==void 0){let f=H/2,g=Math.round(e.translationX/f)*f,D=Math.round(e.translationY/f)*f;e.setTranslation(g,D),u=void 0}},"cancelZoomSession"),c=p((f,g,D,y,w)=>{let S=e.setZoom(f,!0)/100,T=y/S-g,A=w/S-D;e.setTranslation(T,A)},"applyZoomAndTranslation"),d=p(f=>{if(s.size!==2)throw new Error("Pointer distance called with "+s.size+" pointers instead of 2");let g=s.values(),D=g.next().value,y=g.next().value,[w,x]=e.offsetXY(D,f),[S,T]=e.offsetXY(y,f),A=(w+S)/2,P=(x+T)/2,R=w-S,L=x-T;return{dist:Math.sqrt(R*R+L*L),centerX:A,centerY:P}},"getTwoPointersLoc");n.onpointerdown=e.wrapHandler(f=>{let g=f.pointerId;n.setPointerCapture(g),s.set(g,f);let D=s.size;D===2?(this.doPointerUp(f),a=void 0,e.mode>=2&&(u={initialTransform:{zoom:this.editor.userDrawingScale*100,tX:this.editor.translationX,tY:this.editor.translationY},initialPointersLoc:d(!1)})):l(),D===1&&(a=g,this.doPointerDown(f))}),n.onpointermove=e.wrapHandler(f=>{let g=f.pointerId;s.has(g)&&s.set(g,f);let D=s.size,y=!1;if(D===2&&u!==void 0){let w=u.initialPointersLoc,x=d(!0),S=x.dist/w.dist*100/u.initialTransform.zoom,T=u.initialTransform.zoom*S,A=T>95&&T<105?100:T;c(A,w.centerX,w.centerY,x.centerX,x.centerY)}else y=g===a;(f.pointerType!=="touch"||y)&&this.doPointerMove(f)}),n.onpointerleave=this.clearTooltipIfNeeded.bind(this);let h=e.wrapHandler(f=>{let g=f.pointerId;s.delete(g),g===a&&(this.doPointerUp(f),a=void 0),l()});n.onpointerup=h,n.onpointercancel=h;let m=null;n.onwheel=e.wrapHandler(f=>{if(e.mode>=2){if(f.preventDefault(),f.ctrlKey||f.metaKey){let y=1+-f.deltaY*.005,w=e.userDrawingScale*100,[x,S]=e.offsetXY(f,!1),[T,A]=e.offsetXY(f,!0);c(w*y,x,S,T,A)}else{let D=1/e.userDrawingScale,y=-f.deltaX*D,w=-f.deltaY*D;e.setTranslation(e.translationX+y,e.translationY+w)}m!==null&&clearTimeout(m),m=setTimeout(()=>{m=null,e.finishAutoZoomTranslationIfActive()},200)}}),n.oncontextmenu=e.wrapHandler(f=>{f.preventDefault(),this.editor.mode>=2&&this._currentComponentUnderPointer!==null&&this._currentHandlers.contextMenuOn(this._currentComponentUnderPointer,f)}),n.addEventListener("keyup",e.wrapHandler(f=>{if(ir(f))return;switch(f.key.toLowerCase()){case"escape":{let D;D=e.eventMgr.tryDeleteComponentsWhere(y=>y.state===0,!1)>0,D||(D=e.linkMgr.tryCancelWireOrAnchor()),!D&&this.editor.editorRoot instanceof yn&&(D=this.editor.tryCloseCustomComponentEditor()),D||(D=e.setCurrentPointerAction("edit")),D&&f.preventDefault();return}case"backspace":case"delete":{if(f.preventDefault(),!e.deleteSelection()&&this.currentComponentUnderPointer!==null){let D=e.eventMgr.tryDeleteDrawable(this.currentComponentUnderPointer);D.isChange&&e.editTools.undoMgr.takeSnapshot(D)}return}case"e":e.setCurrentPointerAction("edit"),f.preventDefault();return;case"d":e.setCurrentPointerAction("delete"),f.preventDefault();return;case"m":e.setCurrentPointerAction("move"),f.preventDefault();return;case"t":if(e.editorRoot.testSuites.totalCases()>0){e.setTestsPaletteVisible(!0),e.editTools.testsPalette.runAllTestSuites(),f.preventDefault();return}}})),n.addEventListener("keydown",e.wrapAsyncHandler(async f=>{let g=f.ctrlKey||f.metaKey,D=f.key.toLowerCase(),y=f.shiftKey||D!==f.key;switch(D){case"a":g&&e.mode>=2&&!ir(f)&&(f.preventDefault(),this.selectAll());return;case"s":g&&e.isSingleton&&(f.preventDefault(),e.saveCurrentStateToUrl());return;case"z":g&&!ir(f)&&(f.preventDefault(),y?e.editTools.undoMgr.redoOrRepeat():e.editTools.undoMgr.undo());return;case"y":g&&!ir(f)&&(f.preventDefault(),e.editTools.undoMgr.redoOrRepeat());return;case"x":g&&!ir(f)&&(f.preventDefault(),await e.cut());return;case"c":g&&!ir(f)&&(f.preventDefault(),await e.copy());return;case"v":g&&!ir(f)&&(f.preventDefault(),await e.paste());return;case"g":g&&e.mode>=2&&(f.preventDefault(),e.makeGroupWithSelection());return;case"arrowright":if(this.moveSelection(g?1:H/2,0,f.altKey))return;break;case"arrowleft":if(this.moveSelection(g?-1:-H/2,0,f.altKey))return;break;case"arrowdown":if(this.moveSelection(0,g?1:H/2,f.altKey))return;break;case"arrowup":if(this.moveSelection(0,g?-1:-H/2,f.altKey))return;break}this._currentComponentUnderPointer!==null&&this._currentComponentUnderPointer.keyDown(f)})),n.ondragenter=o,n.ondragover=o,n.ondragend=o,n.ondrop=f=>{var D;if(f.dataTransfer===null)return!1;f.preventDefault();let g=(D=f.dataTransfer.files)==null?void 0:D[0];if(g!==void 0)e.tryLoadFrom(g);else{let y=f.dataTransfer.items;if(y!==void 0){for(let w of y)if(w.kind==="string"&&(w.type==="application/json"||w.type==="application/json5"||w.type==="text/plain")){w.getAsString(x=>{f.dataTransfer.dropEffect="copy",e.loadCircuitOrLibrary(x)});break}}}return!1}}doPointerDown(n){if(this.clearHoverTimeoutHandle(),this.clearTooltipIfNeeded(),this._currentPointerDownData===null){let e=this.editor.offsetXY(n);if(this.updateComponentUnderPointer(e,!1,!1,n.pointerType==="touch"),this._currentComponentUnderPointer!==null){let{wantsDragEvents:o}=this._currentHandlers.pointerDownOn(this._currentComponentUnderPointer,n);if(o){let i=this.currentSelection===void 0?[]:[...this.currentSelection.previouslySelectedElements];for(let a of i)a!==this._currentComponentUnderPointer&&this._currentHandlers.pointerDownOn(a,n);let s={mainComp:this._currentComponentUnderPointer,selectionComps:i,firedPointerDraggedAlready:!1,fireClickedOnFinish:!0,initialXY:e,triggeredContextMenu:!1};this._currentPointerDownData=s,this.startLongPressTimeout(s,n)}this.editor.editTools.redrawMgr.requestRedraw({why:"pointerdown"})}else this._currentPointerDownData={mainComp:this.editor.html.canvasContainer,selectionComps:[],firedPointerDraggedAlready:!1,fireClickedOnFinish:!0,initialXY:e,triggeredContextMenu:!1},this._currentHandlers.pointerDownOnBackground(n);this.editor.updateCursor(n)}}doPointerMove(n){if(this._currentPointerDownData!==null)if(this._currentPointerDownData.triggeredContextMenu)this._currentPointerDownData=null;else{let e=this._currentPointerDownData.initialXY;if(Up(n,e[0],e[1]),this._currentPointerDownData.mainComp instanceof Ln){let o=this._currentPointerDownData.firedPointerDraggedAlready;if(!o){let i=Jr(...this.editor.offsetXY(n),...this._currentPointerDownData.initialXY);o=isNaN(i)||i>=5*5}if(o){this.clearLongPressTimeout(),this._currentPointerDownData.fireClickedOnFinish=!1,this._currentHandlers.pointerDraggedOn(this._currentPointerDownData.mainComp,n);for(let i of this._currentPointerDownData.selectionComps)i!==this._currentPointerDownData.mainComp&&this._currentHandlers.pointerDraggedOn(i,n);this._currentPointerDownData.firedPointerDraggedAlready=!0}}else this._currentHandlers.pointerDraggedOnBackground(n)}else{let e=this.editor.editorRoot.linkMgr;this.updateComponentUnderPointer(this.editor.offsetXY(n),e.isAddingWire,e.isSettingAnchor,n.pointerType==="touch")}this.editor.updateCursor(n)}doPointerUp(n){var o,i,s,a;let e=(i=(o=this._currentPointerDownData)==null?void 0:o.mainComp)!=null?i:this._currentComponentUnderPointer;if(e instanceof Ln){this.clearLongPressTimeout();let u=this._currentHandlers.pointerUpOn(e,n);for(let d of(a=(s=this._currentPointerDownData)==null?void 0:s.selectionComps)!=null?a:[])if(d!==e){let h=this._currentHandlers.pointerUpOn(d,n);u=X.merge(u,h)}let l=this._currentPointerDownData;if(l===null?!1:l.fireClickedOnFinish&&!l.triggeredContextMenu){let d;this.isDoubleClick(e,n)?(d=this._currentHandlers.pointerDoubleClickedOn(e,n),d.isChange||(d=this._currentHandlers.pointerClickedOn(e,n))):d=this._currentHandlers.pointerClickedOn(e,n),u=X.merge(u,d)}u.isChange&&this.editor.editTools.undoMgr.takeSnapshot(u)}else this._currentHandlers.pointerUpOnBackground(n);this._currentPointerDownData=null,n.pointerType==="touch"?this.setCurrentComponentUnderPointer(null):(this.updateComponentUnderPointer(this.editor.offsetXY(n),!1,!1,!1),this.editor.updateCursor(n)),this.editor.editTools.redrawMgr.requestRedraw({why:"pointerup"}),this.editor.focus()}isDoubleClick(n,e){if(e.pointerType==="mouse")return e.detail===2;{let o=this._lastTouchEnd,i=new Date().getTime();if(this._lastTouchEnd=[n,i],o===void 0)return!1;let[s,a]=o,u=i-a,l=s===n&&u>0&&u<300;return l&&(this._lastTouchEnd=void 0),l}}registerButtonListenersOn(n,e){let o=this.editor,i=o.wrapHandler(a=>{this.doPointerMove(a)}),s=o.wrapHandler(a=>{this.doPointerUp(a)});for(let a of n)a.ontouchstart=Wl,a.ontouchmove=Wl,a.ontouchend=Wl,a.onpointermove=i,a.onpointerup=s,a.onpointerdown=o.wrapHandler(u=>{if(u.button===2||u.button===0&&u.ctrlKey)return;this.editor.setCurrentPointerAction("edit"),u.preventDefault(),a.setPointerCapture(u.pointerId),this.editor.eventMgr.currentSelection=void 0;let l=o.factory.makeFromButton(o.editorRoot,a);if(l===void 0)return;this._currentComponentUnderPointer=l;let{wantsDragEvents:c}=this._currentHandlers.pointerDownOn(l,u);c&&(this._currentPointerDownData={mainComp:this._currentComponentUnderPointer,selectionComps:[],firedPointerDraggedAlready:!1,fireClickedOnFinish:!1,initialXY:[NaN,NaN],triggeredContextMenu:!1});let[d,h]=o.offsetXY(u,!0);Up(u,d,h),this._currentHandlers.pointerDraggedOn(l,u)}),a.addEventListener("contextmenu",o.wrapHandler(u=>{u.preventDefault(),u.stopPropagation(),e&&this.editor.mode>=3&&this._currentHandlers.contextMenuOnButton(a.dataset,u)}))}registerTitleDragListenersOn(n,e){let o=!1,i,s,a,u,l;e&&(l=En("close"),l.classList.add("close-palette"),l.addEventListener("click",e),l.addEventListener("click",()=>{console.log("close palette")}),n.appendChild(l)),n.addEventListener("pointerdown",c=>{if(o||c.composedPath().includes(l))return;n.setPointerCapture(c.pointerId),o=!0,i=c.clientX,s=c.clientY;let d=n.parentElement,h=window.getComputedStyle(d);a=parseInt(h.top,10),u=parseInt(h.right,10),n.style.cursor="grabbing",c.preventDefault()}),n.addEventListener("pointermove",c=>{if(!o)return;let d=c.clientX-i,h=c.clientY-s,m=n.parentElement;m.style.top=`${a+h}px`,m.style.right=`${u-d}px`}),n.addEventListener("pointerup",()=>{o&&(o=!1,n.style.removeProperty("cursor"))})}tryDeleteDrawable(n){if(n instanceof me){let e=n.ref;if(this.editor.editorRoot.testSuites.hasReferenceTo(e)&&!window.confirm(C.Tests.ComponentUsedInTestSuite.expand({ref:e})))return X.NoChange;let o=this.tryDeleteComponentsWhere(i=>i===n,!0);return X.fromBoolean(o!==0)}else{if(n instanceof eo)return this.editor.editorRoot.linkMgr.deleteWire(n);if(n instanceof bn)return n.removeFromParent(),X.SimpleChange}return X.NoChange}tryDeleteComponentsWhere(n,e){let o=this.editor.editorRoot.components.tryDeleteWhere(n,e).length;return o>0&&(this.clearTooltipIfNeeded(),this.editor.editTools.redrawMgr.requestRedraw({why:"component(s) deleted",invalidateMask:!0,invalidateTests:!0})),o}};p(Ra,"UIEventManager");var xi=class{constructor(n){this.editor=n}pointerHoverOn(n){}pointerDownOn(n,e){return{wantsDragEvents:!0}}pointerDraggedOn(n,e){}pointerUpOn(n,e){return X.NoChange}pointerClickedOn(n,e){return X.NoChange}pointerDoubleClickedOn(n,e){return X.NoChange}contextMenuOn(n,e){return!1}contextMenuOnButton(n,e){}hideContextMenuIfNeeded(n){}pointerDownOnBackground(n){}pointerDraggedOnBackground(n){}pointerUpOnBackground(n){}unmount(){}};p(xi,"ToolHandlers");var Ma=class extends xi{constructor(e){super(e);this._openedContextMenu=null;this._currentPanningSession=void 0}pointerHoverOn(e){let o=this.editor;if(o.eventMgr.clearTooltipIfNeeded(),o.options.hideTooltips||e instanceof me&&e.state===2)return;let i=e.makeTooltip();if(i!==void 0){let s=p(()=>{let a=o.html.canvasContainer.getBoundingClientRect(),u=o.userDrawingScale,l=o.translationX,c=o.translationY,[d,h,m,f]=e instanceof Vn?[(e.posX+l)*u,(e.posY+c)*u,e.width*u,e.height*u]:[o.pointerX,o.pointerY,4,4];return new DOMRect(a.x+d-m/2,a.y+h-f/2,m,f)},"rect");o.eventMgr.makeTooltip(i,s)}}pointerDownOn(e,o){return e.pointerDown(o)}pointerDraggedOn(e,o){e.pointerDragged(o)}pointerUpOn(e,o){let i=e.pointerUp(o);return this.editor.editorRoot.linkMgr.tryCancelWireOrAnchor(),i}pointerClickedOn(e,o){return e.pointerClicked(o)}pointerDoubleClickedOn(e,o){return e.pointerDoubleClicked(o)}contextMenuOn(e,o){return this.showContextMenu(e.makeContextMenu(),o)}contextMenuOnButton(e,o){return this.showContextMenu(this.editor.factory.makeContextMenu(e.type),o)}pointerDownOnBackground(e){let o=this.editor;if(Gt.spaceDown&&o.mode>=2){o.setToolCursor("grabbing");let[i,s]=o.offsetXY(e,!0);this._currentPanningSession={startX:i,startY:s,initialTranslationX:o.translationX,initialTranslationY:o.translationY}}else{let i=o.eventMgr,s=i.currentSelection;if(s!==void 0){let a=o.mode>=2;if(e.shiftKey&&a){s.currentlyDrawnRect!==void 0&&console.log("unexpected defined current rect when about to begin a new one");let[u,l]=o.offsetXY(e),c=new DOMRect(u,l,1,1);s.currentlyDrawnRect=c}else i.currentSelection=void 0;o.editTools.redrawMgr.requestRedraw({why:"selection rect changed"})}}}pointerDraggedOnBackground(e){let o=this.editor;if(this._currentPanningSession!==void 0){let{startX:i,startY:s,initialTranslationX:a,initialTranslationY:u}=this._currentPanningSession,[l,c]=o.offsetXY(e,!0),d=l-i,h=c-s,m=o.userDrawingScale;o.setTranslation(a+d/m,u+h/m)}else if(o.mode>=2){let s=o.eventMgr,a=s.currentSelection,[u,l]=o.offsetXY(e);if(a===void 0){let c=new DOMRect(u,l,1,1);s.currentSelection=new Rr(c)}else{let c=a.currentlyDrawnRect;c===void 0?console.log("trying to update a selection rect that is not defined"):(c.width=u-c.x,c.height=l-c.y,o.editTools.redrawMgr.requestRedraw({why:"selection rect changed"}))}}}pointerUpOnBackground(e){let o=this.editor;o.linkMgr.tryCancelWireOrAnchor();let s=o.eventMgr.currentSelection;s!==void 0&&(s.finishCurrentRect(this.editor),o.editTools.redrawMgr.requestRedraw({why:"selection rect changed"})),o.setToolCursor(null),this._currentPanningSession!==void 0&&(o.finishAutoZoomTranslationIfActive(),this._currentPanningSession=void 0)}hideContextMenuIfNeeded(e){this._openedContextMenu!==null&&(e!==void 0&&this._openedContextMenu.contains(e.composedPath()[0])||(this._openedContextMenu.classList.remove("show-menu"),this._openedContextMenu.innerHTML="",this._openedContextMenu=null))}showContextMenu(e,o){if(this.hideContextMenuIfNeeded(),e===void 0)return!1;let i=this.editor.eventMgr.currentPointerDownData;i!==null&&(i.triggeredContextMenu=!0);let s=!1,a=p(f=>{var D;function g(y,w,x){return Li(Vo("button"),le(`menu-btn${x?" danger":""}`),y.icon===void 0?y.caption:W(En(y.icon),ke(le("menu-text"),y.caption)),w===void 0?mt:ke(le("menu-shortcut"),w))}switch(p(g,"mkButton"),s||(s=f._tag!=="sep"),f._tag){case"sep":return s?(s=!1,Vs(le("menu-separator")).render()):mt;case"text":return Vs(le("menu-item-static"),f.caption).render();case"item":{let y=g(f,f.shortcut,(D=f.danger)!=null?D:!1).render();return y.addEventListener("click",this.editor.wrapAsyncHandler(async w=>{this.hideContextMenuIfNeeded();let x=await Promise.resolve(f.action(w,o));this.editor.editTools.undoMgr.takeSnapshot(x),this.editor.focus()})),Vs(le("menu-item"),y).render()}case"submenu":return Vs(le("menu-item submenu"),g(f,void 0,!1),af(le("menu"),...f.items.map(a))).render()}},"defToElem"),u=e.map(a),l=this.editor.html.mainContextMenu;au(l,u),l.classList.add("show-menu");let c=o.pageY;l.style.top=c+"px",l.style.left=o.pageX+"px";let d=!1,h=l.getBoundingClientRect(),m=window.innerHeight-h.bottom;return m<0&&(c+=Math.min(0,m),c<5&&(c=5,d=!0),l.style.top=c+"px"),d?(l.style.setProperty("max-height",window.innerHeight-10+"px"),l.style.setProperty("overflow-y","scroll")):(l.style.removeProperty("max-height"),l.style.removeProperty("overflow-y")),this._openedContextMenu=l,!0}};p(Ma,"EditHandlers");var Ul=class extends xi{constructor(n){super(n)}pointerClickedOn(n,e){return this.editor.eventMgr.tryDeleteDrawable(n)}};p(Ul,"DeleteHandlers");var zl=class extends xi{constructor(e,o){super(e);this._from=o,e.linkMgr.startSettingAnchorFrom(o)}unmount(){this.editor.linkMgr.tryCancelSetAnchor()}finish(){this.editor.setCurrentPointerAction("edit")}pointerClickedOn(e,o){let i=X.NoChange;return e instanceof me?i=this.editor.linkMgr.trySetAnchor(this._from,e):this.editor.linkMgr.tryCancelSetAnchor(),this.finish(),i}pointerUpOnBackground(e){this.editor.linkMgr.tryCancelSetAnchor(),this.finish()}};p(zl,"SetAnchorHandlers");var Gl=class extends xi{constructor(n){super(n)}pointerDownOnBackground(n){for(let e of this.editor.components.all())e.pointerDown(n);for(let e of this.editor.linkMgr.wires)for(let o of e.waypoints)o.pointerDown(n)}pointerDraggedOnBackground(n){for(let e of this.editor.components.all())e.pointerDragged(n);for(let e of this.editor.linkMgr.wires)for(let o of e.waypoints)o.pointerDragged(n)}pointerUpOnBackground(n){for(let e of this.editor.components.all())e.pointerUp(n);for(let e of this.editor.linkMgr.wires)for(let o of e.waypoints)o.pointerUp(n)}};p(Gl,"MoveHandlers");var p4=100;function d4(r,n){return r.canUndo===n.canUndo&&r.canRedoOrRepeat===n.canRedoOrRepeat}p(d4,"areStatesEqual");var Oa=class{constructor(n){this._undoSnapshots=[];this._redoSnapshots=[];this.onStateChanged=p(n=>null,"onStateChanged");this.editor=n}get state(){return{canUndo:this.canUndo(),canRedoOrRepeat:this.canRedoOrRepeat()}}canUndo(){return this._undoSnapshots.length>1}canRedoOrRepeat(){return this._redoSnapshots.length>0||this._undoSnapshots.length>0&&this._undoSnapshots[this._undoSnapshots.length-1].repeatAction!==void 0}takeSnapshot(n,e){var s;if(!((s=n==null?void 0:n.isChange)!=null?s:!0))return;let i=n===void 0?void 0:n._tag==="RepeatableChange"?n.repeat:void 0;this.doTakeSnapshot(i,e)}doTakeSnapshot(n,e){let o=Date.now(),i=!(e!=null&&e),s=this.editor.save(),a=Pe.stringifyObject(s,!0);for(i&&this.editor.trySaveInBrowserStorage(s),this._undoSnapshots.push({time:o,circuitStr:a,repeatAction:n});this._undoSnapshots.length>p4;)this._undoSnapshots.shift();this._redoSnapshots.length>0&&(this._redoSnapshots=[]),this.fireStateChangedIfNeeded()}undo(){if(!this.canUndo()){this.editor.showMessage(C.Messages.NothingToUndo);return}let n=this._undoSnapshots.pop(),e=this._undoSnapshots[this._undoSnapshots.length-1];this._redoSnapshots.push(n),this.loadSnapshot(e),this.editor.trySaveInBrowserStorage(Pe.buildCircuitObject(this.editor)),this.editor.showMessage(C.Messages.DidUndo),this.fireStateChangedIfNeeded()}redoOrRepeat(){if(!this.canRedoOrRepeat()){this.editor.showMessage(C.Messages.NothingToRedo);return}let n=this._redoSnapshots.pop();if(n!==void 0)this._undoSnapshots.push(n),this.loadSnapshot(n),this.editor.trySaveInBrowserStorage(Pe.buildCircuitObject(this.editor)),this.editor.showMessage(C.Messages.DidRedo);else{let e=this._undoSnapshots[this._undoSnapshots.length-1].repeatAction;if(e!==void 0){let o=e(),i=o===!1?void 0:o===!0?e:o;this.doTakeSnapshot(i),this.editor.showMessage(C.Messages.DidRepeat)}}this.fireStateChangedIfNeeded()}dump(){function n(e,o){let i=e+(o.length===0?" (empty)":"");console.group(i);for(let s=o.length-1;s>=0;s--){let a=o[s],u=new Date(a.time).toISOString();console.log(u+"	"+a.circuitStr)}console.groupEnd()}p(n,"printStack"),n("Undo stack",this._undoSnapshots),n("Redo stack",this._redoSnapshots)}loadSnapshot(n){Pe.loadCircuitOrLibrary(this.editor,n.circuitStr,Qi)}fireStateChangedIfNeeded(){let n=this.state;(this._lastSentState===void 0||!d4(this._lastSentState,n))&&(this.onStateChanged(n),this._lastSentState=n)}};p(Oa,"UndoManager");var Vm={CharacterComparator:{v:5,in:[{pos:[50,130],id:0,val:1},{pos:[50,160],id:1,val:1},{pos:[50,190],id:2,val:1},{pos:[50,220],id:3,val:0},{pos:[50,250],id:4,val:1},{pos:[50,280],id:13,val:0},{pos:[50,310],id:14,val:1},{pos:[50,360],id:15,val:1},{pos:[50,390],id:16,val:0},{pos:[50,420],id:17,val:1},{pos:[50,450],id:18,val:0},{pos:[50,480],id:19,val:1},{pos:[50,510],id:20,val:0},{pos:[50,540],id:21,val:1}],out:[{pos:[870,310],id:5},{type:"ascii",pos:[180,60],id:[6,7,8,9,10,11,12]},{type:"ascii",pos:[180,620],id:[22,23,24,25,26,27,28]}],gates:[{type:"XOR",pos:[360,140],in:[29,30],out:31},{type:"XOR",pos:[360,200],in:[32,33],out:34},{type:"XOR",pos:[360,260],in:[35,36],out:37},{type:"XOR",pos:[360,320],in:[38,39],out:40},{type:"XOR",pos:[360,380],in:[41,42],out:43},{type:"XOR",pos:[360,440],in:[44,45],out:46},{type:"XOR",pos:[360,500],in:[47,48],out:49},{type:"OR",pos:[470,170],in:[68,69],out:70},{type:"OR",pos:[500,280],in:[71,72],out:73},{type:"OR",pos:[490,410],in:[74,75],out:76},{type:"OR",pos:[630,250],in:[77,78],out:79},{type:"OR",pos:[630,410],in:[80,81],out:82},{type:"OR",pos:[730,310],in:[83,84],out:85},{type:"NOT",pos:[800,310],in:50,out:51}],wires:[[0,6],[1,7],[2,8],[3,9],[4,10],[13,11],[14,12],[15,22],[16,23],[17,24],[18,25],[19,26],[20,27],[21,28],[0,29],[15,30],[79,83],[82,84],[31,68],[34,69],[37,71],[40,72],[43,74],[46,75],[49,81],[76,80],[73,78],[70,77],[85,50],[51,5],[1,32],[16,33],[2,35],[17,36],[18,39],[3,38],[4,41],[19,42],[13,44],[20,45],[21,48],[14,47]]},Counters:{v:5,in:[{type:"clock",pos:[70,40],id:0,name:"bit 0",period:2e3,phase:1e3,showLabel:!1},{type:"clock",pos:[70,80],id:10,name:"bit 1",period:4e3,phase:2e3,showLabel:!1},{type:"clock",pos:[70,120],id:23,name:"bit 2",period:8e3,phase:4e3,showLabel:!1},{type:"clock",pos:[70,160],id:24,name:"bit 3",period:16e3,phase:8e3,showLabel:!1},{type:"clock",pos:[430,30],id:5,period:500,phase:250,showLabel:!1},{type:"clock",pos:[430,70],id:6,period:1e3,phase:500,showLabel:!1},{type:"clock",pos:[430,110],id:7,period:2e3,phase:1e3,showLabel:!1},{type:"clock",pos:[430,150],id:8,period:4e3,phase:2e3,showLabel:!1},{type:"clock",pos:[430,190],id:9,period:8e3,phase:4e3,showLabel:!1},{type:"clock",pos:[430,230],id:11,period:16e3,phase:8e3,showLabel:!1},{type:"clock",pos:[430,270],id:12,period:32e3,phase:16e3,showLabel:!1}],out:[{type:"display",bits:4,pos:[240,90],id:[1,2,3,4]},{type:"ascii",pos:[580,150],id:[13,14,15,16,17,18,19]}],wires:[[0,1],[24,4],[23,3],[10,2],[5,13],[6,14],[7,15],[8,16],[9,17],[11,18],[12,19]]},AllGates:{v:5,in:[{pos:[40,320],id:0,val:0},{pos:[40,490],id:1,val:0}],out:[{pos:[400,30],id:48},{pos:[400,80],id:49},{pos:[400,140],id:50},{pos:[400,260],id:51},{pos:[400,380],id:52},{pos:[400,200],id:53},{pos:[400,320],id:54},{pos:[400,440],id:55},{pos:[400,560],id:56},{pos:[400,680],id:57},{pos:[400,500],id:58},{pos:[400,620],id:59},{pos:[400,740],id:60},{pos:[400,860],id:61},{pos:[400,800],id:62},{pos:[400,920],id:63}],gates:[{type:"NOT",pos:[290,80],in:2,out:3},{type:"BUF",pos:[290,30],in:4,out:5},{type:"AND",pos:[290,140],in:[6,7],out:8},{type:"OR",pos:[290,260],in:[9,10],out:11},{type:"XOR",pos:[290,380],in:[12,13],out:14},{type:"NAND",pos:[290,200],in:[15,16],out:17},{type:"NOR",pos:[290,320],in:[18,19],out:20},{type:"XNOR",pos:[290,440],in:[21,22],out:23},{type:"IMPLY",pos:[290,560],in:[24,25],out:26},{type:"RIMPLY",pos:[290,680],in:[27,28],out:29},{type:"NIMPLY",pos:[290,500],in:[30,31],out:32},{type:"RNIMPLY",pos:[290,620],in:[33,34],out:35},{type:"TXA",pos:[290,740],in:[36,37],out:38},{type:"TXB",pos:[290,860],in:[39,40],out:41},{type:"TXNA",pos:[290,800],in:[42,43],out:44},{type:"TXNB",pos:[290,920],in:[45,46],out:47}],wires:[[0,4],[0,2],[0,6],[0,9],[0,12],[0,15],[0,18],[0,21],[0,24],[0,27],[0,30],[0,33],[0,36],[0,39],[0,42],[0,45],[1,7],[1,10],[1,13],[1,16],[1,19],[1,22],[1,25],[1,28],[1,31],[1,34],[1,37],[1,40],[1,43],[1,46],[5,48],[3,49],[8,50],[11,51],[14,52],[17,53],[20,54],[23,55],[26,56],[29,57],[32,58],[35,59],[38,60],[41,61],[44,62],[47,63]]},SevenSegmentDisplay:{v:5,opts:{propagationDelay:20},in:[{type:"clock",pos:[90,60],orient:"s",id:21,period:16e3,phase:8e3},{type:"clock",pos:[130,60],orient:"s",id:22,period:8e3,phase:4e3},{type:"clock",pos:[170,60],orient:"s",id:23,period:4e3,phase:2e3},{type:"clock",pos:[210,60],orient:"s",id:24,period:2e3,phase:1e3}],out:[{type:"display",bits:4,pos:[1320,140],id:[132,133,134,135],radix:16},{type:"bar",pos:[1330,310],id:117,display:"h"},{type:"bar",pos:[1270,490],id:118,display:"v"},{type:"bar",pos:[1390,370],id:119,display:"v"},{type:"bar",pos:[1270,370],id:120,display:"v"},{type:"bar",pos:[1330,430],id:121,display:"h"},{type:"bar",pos:[1390,490],id:122,display:"v"},{type:"bar",pos:[1330,550],id:123,display:"h"}],gates:[{type:"NOT",pos:[1170,310],in:103,out:104},{type:"NOT",pos:[1170,350],in:105,out:106},{type:"NOT",pos:[1170,390],in:107,out:108},{type:"NOT",pos:[1170,430],in:109,out:110},{type:"NOT",pos:[1170,550],in:111,out:112},{type:"NOT",pos:[1170,510],in:113,out:114},{type:"NOT",pos:[1170,470],in:115,out:116},{type:"XOR",pos:[210,180],in:[0,1],out:2},{type:"AND",pos:[220,340],in:[3,4],out:5},{type:"XOR",pos:[200,420],in:[6,7],out:8},{type:"XOR",pos:[330,220],in:[9,10],out:11},{type:"XOR",pos:[340,280],in:[12,13],out:14},{type:"OR",pos:[320,480],in:[15,16],out:17},{type:"NOR",pos:[440,220],in:[18,19],out:20},{type:"XOR",pos:[450,290],in:[25,26],out:27},{type:"NOR",pos:[430,450],in:[31,32],out:33},{type:"NOR",pos:[560,410],in:[34,35],out:36},{type:"NOR",pos:[600,190],in:[37,38],out:39},{type:"NOR",pos:[540,360],in:[40,41],out:42},{type:"XOR",pos:[650,320],in:[43,44],out:45},{type:"OR",pos:[670,430],in:[46,47],out:48},{type:"XOR",pos:[770,490],in:[49,50],out:51},{type:"NOR",pos:[770,540],in:[52,53],out:54},{type:"NOR",pos:[800,390],in:[55,56],out:57},{type:"OR",pos:[960,250],in:[58,59],out:60},{type:"NOR",pos:[940,310],in:[61,62],out:63},{type:"AND",pos:[1050,270],in:[64,65],out:66},{type:"AND",pos:[950,380],in:[67,68],out:69},{type:"AND",pos:[950,440],in:[70,71],out:72},{type:"OR",pos:[1030,410],in:[73,74],out:75},{type:"XOR",pos:[1030,520],in:[76,77],out:78}],wires:[[104,117],[106,119],[108,122],[110,123],[112,121],[114,120],[116,118],[21,135],[22,134],[23,133],[24,132],[21,0],[23,1],[24,3],[22,4],[24,6],[21,7],[2,9],[22,10],[23,12],[5,13],[5,15],[8,16],[11,18],[14,19],[11,25],[8,26],[5,32],[14,31],[33,34],[21,35],[20,37],[2,38],[27,40],[8,41],[42,43],[21,44],[39,46],[17,47],[48,49],[21,50],[48,52],[33,53],[36,56],[45,55],[57,103],[39,58],[24,59],[60,64],[27,65],[66,109],[39,61],[45,62],[63,113],[69,73],[72,74],[75,105],[39,67],[24,68],[45,70],[22,71],[51,115],[20,111],[78,107],[72,76],[54,77]]},SevenSegmentBCDDisplay:{v:5,in:[{bits:4,pos:[50,80],id:[0,1,2,3],val:[0,1,0,1]}],out:[{type:"bar",pos:[560,100],id:4,display:"h"},{type:"bar",pos:[620,280],id:5,display:"v"},{type:"bar",pos:[500,160],id:6,display:"v"},{type:"bar",pos:[560,220],id:7,display:"h"},{type:"bar",pos:[560,340],id:8,display:"h"},{type:"bar",pos:[500,280],id:9,display:"v"},{type:"bar",pos:[620,160],id:10,display:"v"},{type:"bar",pos:[420,160],id:50,display:"v"},{type:"bar",pos:[420,280],id:51,display:"v"},{type:"display",bits:4,pos:[170,250],id:[11,23,24,25]}],ic:[{type:"decoder-7seg",pos:[280,60],in:[12,13,14,15],out:[16,17,18,19,20,21,22]},{type:"decoder-bcd4",pos:[180,80],in:[26,27,28,29],out:[30,31,32,33,34]}],wires:[[16,4],[17,10],[18,5],[19,8],[20,9],[21,6],[22,7],[0,11],[1,23],[2,24],[3,25],[0,26],[1,27],[2,28],[3,29],[30,12],[31,13],[32,14],[33,15],[34,50],[34,51]]},SixteenVsSevenSegmentDisplays:{v:5,in:[{bits:4,pos:[50,90],id:[74,75,76,77],val:[1,0,0,1]},{bits:4,pos:[50,170],id:[78,79,80,81],val:[1,1,0,0]}],out:[{type:"16seg",pos:[440,170],id:[57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73]},{type:"ascii",pos:[230,60],id:[82,83,84,85,86,87,88],additionalReprRadix:10},{type:"7seg",pos:[440,330],id:[93,94,95,96,97,98,99,100]}],gates:[{type:"OR",pos:[330,250],in:[90,91],out:92}],ic:[{type:"decoder-16seg",pos:[230,170],in:[34,35,36,37,38,39,40],out:[41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,89]},{type:"decoder-7seg",pos:[230,320],in:[101,102,103,104],out:[105,106,107,108,109,110,111]}],wires:[[74,82],[75,83],[76,84],[77,85],[78,86],[79,87],[80,88],[41,57],[42,58],[43,59],[44,60],[45,61],[46,62],[47,63],[48,64],[49,65],[50,66],[51,67],[52,68],[53,69],[54,70],[55,71],[56,72],[74,34],[75,35],[76,36],[77,37],[78,38],[79,39],[80,40],[89,90],[92,73],[81,91],[105,93],[106,94],[107,95],[108,96],[109,97],[110,98],[111,99],[74,101],[75,102],[76,103],[77,104],[81,100,{via:[[200,370]]}]]},NibbleAdder:{v:5,in:[{pos:[100,40],orient:"s",id:3,name:"A3",val:0},{pos:[200,40],orient:"s",id:0,name:"A2",val:0},{pos:[300,40],orient:"s",id:1,name:"A1",val:0},{pos:[400,40],orient:"s",id:2,name:"A0",val:0},{pos:[140,180],orient:"s",id:15,name:"B3",val:0},{pos:[240,180],orient:"s",id:14,name:"B2",val:0},{pos:[340,180],orient:"s",id:13,name:"B1",val:0},{pos:[440,180],orient:"s",id:12,name:"B0",val:0}],out:[{pos:[30,450],orient:"s",id:37,name:"S4"},{pos:[120,450],orient:"s",id:36,name:"S3"},{pos:[220,450],orient:"s",id:38,name:"S2"},{pos:[320,450],orient:"s",id:39,name:"S1"},{pos:[420,450],orient:"s",id:40,name:"S0"},{type:"display",bits:4,pos:[530,100],id:[4,5,6,7]},{type:"display",bits:4,pos:[530,240],id:[8,9,10,11]},{type:"display",bits:4,pos:[530,390],id:[41,42,43,44]}],ic:[{type:"adder",pos:[420,320],in:[16,17,18],out:[19,20]},{type:"adder",pos:[320,320],in:[21,22,23],out:[24,25]},{type:"adder",pos:[220,320],in:[26,27,28],out:[29,30]},{type:"adder",pos:[120,320],in:[31,32,33],out:[34,35]}],wires:[[12,8],[13,9],[14,10],[15,11],[2,4],[1,5],[0,6],[3,7],[20,23],[25,28],[30,33],[2,16],[12,17],[1,21],[13,22],[0,26],[14,27],[3,31],[15,32],[19,41],[24,42],[29,43],[34,44],[35,37],[34,36],[29,38],[24,39],[19,40]]},ALU:{v:5,in:[{pos:[290,60],orient:"s",id:16,name:"Op1",val:0},{pos:[330,60],orient:"s",id:17,name:"Op0",val:0},{pos:[50,140],id:18,val:0},{pos:[50,160],id:19,name:"A",val:0},{pos:[50,180],id:20,val:0},{pos:[50,200],id:21,val:0},{pos:[50,240],id:26,val:0},{pos:[50,260],id:27,name:"B",val:0},{pos:[50,280],id:28,val:0},{pos:[50,300],id:29,val:0}],out:[{pos:[420,320],id:38,name:"Zero"},{pos:[420,350],id:39,name:"oVerflow"},{type:"display",bits:4,pos:[110,60],orient:"n",id:[22,23,24,25],name:"A (non sign\xE9)"},{type:"display",bits:4,pos:[110,350],orient:"s",id:[30,31,32,33],name:"B (non sign\xE9)"},{type:"display",bits:4,pos:[420,250],id:[34,35,36,37],name:"Y (sign\xE9)",radix:-10},{type:"display",bits:4,pos:[420,150],id:[40,41,42,43],name:"Y (non sign\xE9)"},{type:"display",bits:4,pos:[210,60],orient:"n",id:[44,45,46,47],name:"A (sign\xE9)",radix:-10},{type:"display",bits:4,pos:[210,350],orient:"s",id:[48,49,50,51],name:"B (sign\xE9)",radix:-10}],ic:[{type:"alu",pos:[280,220],in:[0,1,2,3,4,5,6,7,8,9],out:[10,11,12,13,14,15]}],wires:[[16,9],[17,8],[21,3],[20,2],[19,1],[18,0],[18,22],[19,23],[20,24],[21,25],[26,4],[27,5],[28,6],[29,7],[26,30],[27,31],[28,32],[29,33],[10,34],[11,35],[12,36],[13,37],[15,38],[14,39],[10,40],[11,41],[12,42],[13,43],[18,44],[19,45],[20,46],[21,47],[26,48],[27,49],[28,50],[29,51]]},MiniAlu:{v:5,in:[{pos:[340,40],orient:"s",id:10,val:1},{pos:[470,40],orient:"s",id:11,val:1},{pos:[370,180],orient:"s",id:12,val:0},{pos:[500,180],orient:"s",id:13,val:1},{pos:[80,40],orient:"s",id:26,val:0},{pos:[210,40],orient:"s",id:27,val:0},{pos:[110,180],orient:"s",id:28,val:0},{pos:[240,180],orient:"s",id:34,val:0},{pos:[600,370],orient:"w",id:98,name:"Add/Sub",val:0}],out:[{pos:[600,690],id:49,name:"V"},{type:"display",bits:4,pos:[600,120],id:[18,19,20,21],name:"A"},{type:"display",bits:4,pos:[600,260],id:[22,23,24,25],name:"B"},{type:"display",bits:4,pos:[600,620],id:[45,46,47,48],name:"S"}],gates:[{type:"XOR",pos:[120,450],orient:"s",in:[86,87],out:88},{type:"XOR",pos:[250,450],orient:"s",in:[89,90],out:91},{type:"XOR",pos:[380,450],orient:"s",in:[92,93],out:94},{type:"XOR",pos:[510,450],orient:"s",in:[95,96],out:97}],ic:[{type:"adder",pos:[490,530],in:[0,1,2],out:[3,4]},{type:"adder",pos:[360,530],in:[5,6,7],out:[8,9]},{type:"adder",pos:[230,530],in:[35,36,37],out:[38,39]},{type:"adder",pos:[100,530],in:[40,41,42],out:[43,44]}],wires:[[4,7],[11,0],[10,5],[11,18],[10,19],[13,22],[12,23],[9,37],[39,42],[3,45],[8,46],[38,47],[43,48],[44,49,{via:[[50,690]]}],[27,35],[26,40],[28,87],[34,90],[34,24],[28,25],[27,20],[26,21],[12,93],[13,96],[97,1],[94,6],[91,36],[88,41],[98,2],[98,95],[98,92],[98,89],[98,86]]},LatchedAdder:{v:5,in:[{pos:[340,570],orient:"n",id:40,name:"Reset",val:0,isPushButton:!0},{pos:[40,220],id:41,val:0},{pos:[40,250],id:42,val:0},{pos:[40,280],id:43,val:0},{pos:[40,310],id:44,val:0},{pos:[280,570],orient:"n",id:45,name:"Horloge",val:0,isPushButton:!0},{pos:[190,400],orient:"n",id:60,name:"Add./soustr.",val:0}],out:[{pos:[550,380],id:61,name:"V"},{type:"display",bits:4,pos:[100,390],orient:"s",id:[50,51,52,53],name:"B"},{type:"display",bits:4,pos:[550,230],id:[46,47,48,49],name:"Acc."}],ic:[{type:"alu",pos:[180,210],in:[0,1,2,3,4,5,6,7,8,9],out:[10,11,12,13,14,15]},{type:"flipflop-d",pos:[390,100],in:[17,18,19,16],out:[20,21],state:0},{type:"flipflop-d",pos:[390,200],in:[23,24,25,22],out:[26,27],state:0},{type:"flipflop-d",pos:[390,300],in:[29,30,31,28],out:[32,33],state:0},{type:"flipflop-d",pos:[390,400],in:[35,36,37,34],out:[38,39],state:0},{type:"flipflop-d",pos:[390,500],in:[55,56,57,54],out:[58,59],state:0}],wires:[[10,16,{via:[[260,80]]}],[11,22,{via:[[260,180]]}],[12,28,{via:[[260,280]]}],[13,34,{via:[[260,380]]}],[40,37,{via:[[340,440]]}],[40,31,{via:[[340,340,"n"]]}],[40,25,{via:[[340,240,"n"]]}],[40,19,{via:[[340,140,"n"]]}],[20,0,{via:[[430,80],[430,50],[130,50],[130,130]]}],[26,1,{via:[[440,180],[440,40],[120,40],[120,150]]}],[32,2,{via:[[450,280],[450,30],[110,30],[110,170]]}],[38,3,{via:[[460,380,"n"],[460,20],[100,20],[100,190]]}],[41,4],[42,5],[43,6],[44,7],[45,35,{via:[[280,420]]}],[45,29,{via:[[280,320,"n"]]}],[45,23,{via:[[280,220,"n"]]}],[45,17,{via:[[280,120,"n"]]}],[41,50],[42,51],[43,52],[44,53],[20,46,{via:[[480,80]]}],[26,47,{via:[[480,180]]}],[32,48,{via:[[480,280]]}],[38,49,{via:[[480,380]]}],[60,8,{via:[[230,320,"n"],[230,110,"n"]]}],[40,57],[45,55,{via:[[280,520]]}],[14,54,{via:[[260,420,"s"],[260,480]]}],[58,61]]},LatchedCounter:{v:5,ic:[{type:"flipflop-d",pos:[170,160],in:[7,8,9,6],out:[10,11],state:0,trigger:"falling",showContent:!0},{type:"flipflop-d",pos:[300,160],in:[15,16,17,14],out:[18,19],state:0,trigger:"falling",showContent:!0},{type:"flipflop-d",pos:[440,160],in:[21,22,23,20],out:[24,25],state:0,trigger:"falling",showContent:!0},{type:"flipflop-d",pos:[580,160],in:[35,36,37,34],out:[38,39],state:0,trigger:"falling",showContent:!0}],in:[{pos:[100,180],id:12,name:"Horloge",val:0,isPushButton:!0},{pos:[100,240],id:41,name:"Reset",val:0,isPushButton:!0}],out:[{type:"display",bits:4,pos:[660,60],id:[26,27,28,29]}],wires:[[12,7],[10,15],[18,21],[19,14],[11,6],[25,20],[10,26,{via:[[400,30]]}],[18,27,{via:[[520,50]]}],[24,28],[39,34],[24,35],[38,29],[41,9],[41,17],[41,23],[41,37]]},Decoder2To4:{v:5,in:[{pos:[60,80],id:0,name:"S0",val:0},{pos:[60,220],id:1,name:"S1",val:0}],gates:[{type:"NOT",pos:[130,50],in:2,out:3},{type:"NOT",pos:[130,190],in:4,out:5},{type:"AND",pos:[280,60],in:[6,7],out:8},{type:"AND",pos:[280,120],in:[9,10],out:11},{type:"AND",pos:[280,180],in:[12,13],out:14},{type:"AND",pos:[280,240],in:[15,16],out:17},{type:"BUF",pos:[130,110],in:22,out:23},{type:"BUF",pos:[130,250],in:24,out:25}],out:[{pos:[370,60],id:18,name:"0"},{pos:[370,120],id:19,name:"1"},{pos:[370,180],id:20,name:"2"},{pos:[370,240],id:21,name:"3"}],wires:[[0,2],[1,4],[11,19],[17,21],[14,20],[8,18],[3,6],[5,7],[5,10],[3,12],[0,22],[1,24],[23,9],[23,15],[25,13],[25,16]]},Decoder3To8:{v:5,in:[{pos:[60,130],id:26,name:"S0",val:1},{pos:[60,290],id:27,name:"S1",val:1},{pos:[60,460],id:28,name:"S2",val:0}],gates:[{type:"NOT",pos:[130,90],in:30,out:31},{type:"NOT",pos:[130,250],in:32,out:33},{type:"NOT",pos:[130,420],in:34,out:35},{type:"AND",bits:3,pos:[340,120],in:[36,37,38],out:39},{type:"AND",bits:3,pos:[340,190],in:[40,41,42],out:43},{type:"AND",bits:3,pos:[340,260],in:[44,45,46],out:47},{type:"AND",bits:3,pos:[340,330],in:[48,49,50],out:51},{type:"AND",bits:3,pos:[340,400],in:[52,53,54],out:55},{type:"AND",bits:3,pos:[340,470],in:[56,57,58],out:59},{type:"AND",bits:3,pos:[340,540],in:[60,61,62],out:63},{type:"AND",bits:3,pos:[340,50],in:[64,65,66],out:67},{type:"BUF",pos:[130,170],in:76,out:77},{type:"BUF",pos:[130,330],in:78,out:79},{type:"BUF",pos:[130,500],in:80,out:81}],out:[{pos:[420,50],id:68,name:"0"},{pos:[420,120],id:69,name:"1"},{pos:[420,190],id:70,name:"2"},{pos:[420,260],id:71,name:"3"},{pos:[420,330],id:72,name:"4"},{pos:[420,400],id:73,name:"5"},{pos:[420,470],id:74,name:"6"},{pos:[420,540],id:75,name:"7"}],wires:[[26,30],[27,32],[28,34],[67,68],[39,69],[43,70],[47,71],[51,72],[55,73],[59,74],[63,75],[31,64],[33,65],[35,66],[26,76],[27,78],[28,80],[77,36],[33,37],[35,38],[31,40],[79,41],[35,42],[35,46],[79,45],[77,44],[31,48],[77,52],[31,56],[77,60],[33,49],[33,53],[79,57],[79,61],[81,50],[81,54],[81,58],[81,62]]},ParityGenerator:{v:5,in:[{pos:[70,180],id:0,name:"D1",val:0},{pos:[70,300],id:1,name:"D2",val:0},{pos:[70,360],id:2,name:"D3",val:0},{pos:[70,420],id:3,name:"D4",val:0}],out:[{pos:[530,60],id:4,name:"P1"},{pos:[530,120],id:5,name:"P2"},{pos:[530,180],id:6,name:"D1"},{pos:[530,240],id:7,name:"P3"},{pos:[530,300],id:8,name:"D2"},{pos:[530,360],id:9,name:"D3"},{pos:[530,420],id:10,name:"D4"}],gates:[{type:"XOR",pos:[460,240],in:[11,12],out:13},{type:"XOR",pos:[380,230],in:[14,15],out:16},{type:"XOR",pos:[340,120],in:[17,18],out:19},{type:"XOR",pos:[260,110],in:[20,21],out:22},{type:"XOR",pos:[300,60],in:[23,24],out:25},{type:"XOR",pos:[220,40],in:[26,27],out:28}],wires:[[3,10],[2,9],[1,8],[0,6],[22,17],[16,11],[28,23],[25,4],[19,5],[13,7],[3,18,{via:[[280,420],[280,130]]}],[3,12,{via:[[420,420]]}],[2,15,{via:[[340,360]]}],[1,14,{via:[[310,300],[310,220]]}],[2,21,{via:[[220,360]]}],[0,20,{via:[[190,180],[190,100]]}],[3,24,{via:[[150,420],[150,70]]}],[1,27,{via:[[120,300],[120,50]]}],[0,26,{via:[[100,30]]}]]},ShiftRegister:{v:5,in:[{pos:[110,130],id:0,name:"D",val:1},{pos:[100,210],id:1,name:"Horloge",val:0,isPushButton:!0},{pos:[100,260],id:38,name:"Reset",val:0,isPushButton:!0}],out:[{type:"display",bits:4,pos:[650,60],id:[39,40,41,42]}],ic:[{type:"flipflop-d",pos:[560,150],in:[21,22,23,20],out:[24,25],state:1,showContent:!0},{type:"flipflop-d",pos:[450,150],in:[15,16,17,14],out:[18,19],state:0,showContent:!0},{type:"flipflop-d",pos:[340,150],in:[9,10,11,8],out:[12,13],state:1,showContent:!0},{type:"flipflop-d",pos:[230,150],in:[3,4,5,2],out:[6,7],state:1,showContent:!0}],wires:[[6,8],[12,14],[18,20],[38,5,{via:[[230,260]]}],[38,11,{via:[[340,260]]}],[38,17,{via:[[450,260]]}],[38,23,{via:[[560,260]]}],[1,21,{via:[[490,210]]}],[1,15,{via:[[380,210]]}],[1,9,{via:[[270,210]]}],[1,3,{via:[[160,210]]}],[0,2],[24,39],[18,40,{via:[[530,50]]}],[12,41,{via:[[410,70]]}],[6,42,{via:[[300,90]]}]]},Muxes:{v:5,in:[{pos:[160,70],orient:"s",id:59,name:"S0",val:0},{pos:[160,340],orient:"s",id:64,name:"S0",val:0},{pos:[450,360],orient:"s",id:69,name:"S0",val:0},{bits:4,pos:[270,60],orient:"s",id:[0,1,2,3],val:[1,1,0,0]},{bits:4,pos:[460,70],orient:"s",id:[60,61,62,63],val:[0,0,0,0]},{bits:4,pos:[270,300],orient:"s",id:[65,66,67,68],val:[0,0,0,0]},{bits:4,pos:[110,180],id:[86,87,88,89],val:[0,0,0,0]},{bits:4,pos:[230,180],id:[90,91,92,93],val:[0,0,0,0]},{bits:4,pos:[400,170],id:[94,95,96,97],val:[0,0,0,0]},{bits:4,pos:[400,250],id:[98,99,100,101],val:[0,0,0,0]},{bits:4,pos:[110,420],id:[102,103,104,105],val:[0,0,0,0]},{bits:4,pos:[110,520],id:[106,107,108,109],val:[0,0,0,0]},{bits:4,pos:[400,540],id:[110,111,112,113],val:[0,0,0,0]},{bits:4,pos:[400,440],id:[114,115,116,117],val:[0,0,0,0]},{bits:4,pos:[230,400],id:[118,119,120,121],val:[0,0,0,0]},{bits:4,pos:[230,460],id:[122,123,124,125],val:[0,0,0,0]},{bits:4,pos:[230,520],id:[126,127,128,129],val:[0,0,0,0]},{bits:4,pos:[230,580],id:[130,131,132,133],val:[0,0,0,0]}],ic:[{type:"mux",from:2,to:1,pos:[160,160],in:[5,6,7],out:8},{type:"mux",from:4,to:1,pos:[290,180],in:[4,9,10,11,12,13],out:14},{type:"mux",from:8,to:1,pos:[470,210],in:[15,16,17,18,19,20,21,22,23,24,25],out:26},{type:"mux",from:4,to:2,pos:[160,470],in:[27,28,29,30,31],out:[32,33]},{type:"mux",from:8,to:2,pos:[290,490],in:[34,35,36,37,38,39,40,41,42,43],out:[44,45]},{type:"mux",from:8,to:4,pos:[450,490],in:[46,47,48,49,50,51,52,53,54],out:[55,56,57,58]},{type:"alu",pos:[630,450],in:[70,71,72,73,74,75,76,77,78,79],out:[80,81,82,83,84,85]}],wires:[[59,7],[0,12],[1,13],[60,23],[61,24],[62,25],[64,31],[65,42],[66,43],[69,54],[86,5],[87,6],[90,4],[91,9],[92,10],[93,11],[94,15],[95,16],[96,17],[97,18],[98,19],[99,20],[100,21],[101,22],[104,27],[105,28],[106,29],[107,30],[110,50],[111,51],[112,52],[113,53],[114,46],[115,47],[116,48],[117,49],[119,34],[120,35],[123,36],[124,37],[127,38],[128,39],[131,40],[132,41]]}};var xn=(s=>(s[s.STATIC=0]="STATIC",s[s.TRYOUT=1]="TRYOUT",s[s.CONNECT=2]="CONNECT",s[s.DESIGN=3]="DESIGN",s[s.FULL=4]="FULL",s))(xn||{}),h4=0,f4=4,ql=4,Pa=3,m4=3,zp="_main",Le={lang:"lang",singleton:"singleton",mode:"mode",id:"id",autosave:"autosave",norestore:"norestore",hidereset:"hidereset",exportformat:"exportformat",linkedto:"linkedto",name:"name",showonly:"showonly",showgatetypes:"showgatetypes",showdisconnectedpins:"showdisconnectedpins",showtooltips:"tooltips",src:"src",data:"data",modes:"modes",nomodes:"nomodes"},Gp={name:void 0,showOnly:void 0,initParams:void 0,showGateTypes:!1,showDisconnectedPins:!1,wireStyle:ct.auto,animateWires:!1,hideWireColors:!1,hideInputColors:!1,hideOutputColors:!1,hideMemoryContent:!1,hideTooltips:!1,groupParallelWires:!1,showHiddenWires:!1,showAnchors:!1,showIDs:!1,propagationDelay:100,allowPausePropagation:!1,zoom:100,origin:[0,0]},g4={edit:{cursor:null,paramTypes:[]},move:{cursor:"move",paramTypes:[]},delete:{cursor:"not-allowed",paramTypes:[]},setanchor:{cursor:"alias",paramTypes:k0}},vt=class extends HTMLElement{constructor(){super();this.factory=new ma(this);this.eventMgr=new Ra(this);this.timeline=new Ca(this);this.editTools={moveMgr:new ba(this),undoMgr:new Oa(this),redrawMgr:new aa,testsPalette:new va(this),setDirty:this.setDirty.bind(this),setToolCursor:this.setToolCursor.bind(this)};this.components=new bo;this.nodeMgr=new ai;this.testSuites=new $r(this);this.linkMgr=new oi(this);this.recalcMgr=new ui;this._ifEditing=this.editTools;this._isEmbedded=!1;this._isSingleton=!1;this._instanceId=void 0;this._idWhenExporting=void 0;this._autosave=!1;this._norestore=!1;this._linkedField=void 0;this._maxInstanceMode=Pa;this._isDirty=!1;this._isRunningOrCreatingTests=!1;this._dontHogFocus=!1;this._mode=m4;this._loadedFromStorage=!1;this._initialData=void 0;this._options={...Gp};this._hideResetButton=!1;this._exportformat=void 0;this._menu=void 0;this._topBar=void 0;this._messageBar=void 0;this._toolCursor=null;this._highlightedItems=void 0;this._nextAnimationFrameHandle=null;this._propagationPromise=Promise.resolve();this._propagationResolve=void 0;this._editorRoot=this;this.optionsHtml=void 0;this.userdata=void 0;this._baseUIDrawingScale=1;this._userDrawingScale=1;this._translationX=0;this._translationY=0;this.pointerX=-1e3;this.pointerY=-1e3;this.root=this.attachShadow({mode:"open"}),this.root.appendChild(window.Logic.template.content.cloneNode(!0));let e={rootDiv:this.elemWithId("logicEditorRoot"),centerCol:this.elemWithId("centerCol"),canvasContainer:this.elemWithId("canvas-sim"),mainCanvas:this.elemWithId("mainCanvas"),leftToolbar:this.elemWithId("leftToolbar"),rightToolbarContainer:this.elemWithId("rightToolbarContainer"),rightResetButton:this.elemWithId("rightResetButton"),tooltipElem:this.elemWithId("tooltip"),tooltipContents:this.elemWithId("tooltipContents"),mainContextMenu:this.elemWithId("mainContextMenu"),settingsPalette:this.elemWithId("settingsPalette"),fileChooser:this.elemWithId("fileChooser"),embedDialog:this.elemWithId("embedDialog"),embedUrl:this.elemWithId("embedUrl"),embedIframe:this.elemWithId("embedIframe"),embedWebcomp:this.elemWithId("embedWebcomp"),embedMarkdown:this.elemWithId("embedMarkdown")};this.html=e,ud.registerDialog(e.embedDialog)}static get spaceDown(){return vt._spaceDown}static get allConnectedEditors(){return vt._allConnectedEditors}isMainEditor(){return!0}get editor(){return this}get ifEditing(){return this._ifEditing}stopEditingThis(){this._ifEditing=void 0}startEditingThis(e){this._ifEditing=e}get isSingleton(){return this._isSingleton}get instanceId(){return this._instanceId}get persistenceKey(){return this._instanceId===void 0?void 0:"logic/"+this._instanceId}get idWhenExporting(){return this._idWhenExporting===void 0&&(this._idWhenExporting=L0(6)),this._idWhenExporting}get autosave(){return this._autosave}get mode(){return this._mode}get editorRoot(){return this._editorRoot}get userDrawingScale(){return this._userDrawingScale}get translationX(){return this._translationX}get translationY(){return this._translationY}elemWithId(e){let o=this.root.querySelector(`#${e}`);if(o===null&&(o=document.querySelector(`#${e}`),o!==null&&console.log(`WARNING found elem with id ${e} in document rather than in shadow root`)),o===null)throw console.log("root",this.root),new Error(`Could not find element with id '${e}'`);return o}static get observedAttributes(){return[]}get options(){return this._options}get documentDisplayName(){var e;return(e=this._options.name)!=null?e:C.Settings.DefaultFileName}setPartialOptions(e){var s,a;let o={...Gp,...e};this._isSingleton&&(o.showOnly=this._options.showOnly),this._options=o;let i;(i=this.optionsHtml)!==void 0&&(i.animateWiresCheckbox.checked=o.animateWires,i.hideWireColorsCheckbox.checked=o.hideWireColors,i.hideInputColorsCheckbox.checked=o.hideInputColors,i.hideOutputColorsCheckbox.checked=o.hideOutputColors,i.hideMemoryContentCheckbox.checked=o.hideMemoryContent,i.showGateTypesCheckbox.checked=o.showGateTypes,i.wireStylePopup.value=o.wireStyle,i.showDisconnectedPinsCheckbox.checked=o.showDisconnectedPins,i.hideTooltipsCheckbox.checked=o.hideTooltips,i.groupParallelWiresCheckbox.checked=o.groupParallelWires,i.showHiddenWiresCheckbox.checked=o.showHiddenWires,i.showAnchorsCheckbox.checked=o.showAnchors,i.showIdsCheckbox.checked=o.showIDs,i.propagationDelayField.valueAsNumber=o.propagationDelay,this.setWindowTitleFrom(o.name),(s=this._topBar)==null||s.setCircuitName(this.editor.options.name),(a=this._topBar)==null||a.setZoom(o.zoom),i.showUserDataLinkContainer.style.display=this.userdata!==void 0?"initial":"none"),this._userDrawingScale=o.zoom/100,this._translationX=-o.origin[0],this._translationY=-o.origin[1],this.editTools.redrawMgr.requestRedraw({why:"options changed",invalidateMask:!0,invalidateTests:!0})}setWindowTitleFrom(e){if(!this._isSingleton)return;let o="Logic";e===void 0?document.title=o:document.title=`${e} \u2013 ${o}`}nonDefaultOptions(){let e={},o=!1;for(let[i,s]of Object.entries(this._options)){let a=i;rr(s,Gp[a])||(e[a]=s,o=!0)}return o?e:void 0}runFileChooser(e,o){let i=this.html.fileChooser;i.setAttribute("accept",e),i.addEventListener("change",()=>{let s=this.html.fileChooser.files;s!==null&&s.length>0&&o(s[0])},{once:!0}),i.click()}setToolCursor(e){this._toolCursor=e}setCanvasSize(){var u;let{canvasContainer:e,mainCanvas:o}=this.html;o.style.setProperty("width","0"),o.style.setProperty("height","0");let i=e.clientWidth,s=e.clientHeight,a=(u=window.devicePixelRatio)!=null?u:1;o.setAttribute("width",String(i*a)),o.setAttribute("height",String(s*a)),o.style.setProperty("width",i+"px"),o.style.setProperty("height",s+"px"),this._baseUIDrawingScale=a}connectedCallback(){vt._allConnectedEditors.length===0&&this.setupLang(),vt._allConnectedEditors.push(this),this.setup()}disconnectedCallback(){let e=vt._allConnectedEditors;e.splice(e.indexOf(this),1)}setupLang(){var a,u,l,c;let e=p(()=>{var h,m;let d=(m=(h=navigator.languages)==null?void 0:h[0])!=null?m:navigator.language;if(d.length>2)return d.substring(0,2);if(d.length===2)return d},"getNavigatorLanguage"),o=p(()=>localStorage.getItem(Le.lang),"getSavedLang"),i=((c=(l=(u=(a=Nc(Le.lang))!=null?a:this.getAttribute(Le.lang))!=null?u:o())!=null?l:e())!=null?c:Gs).toLowerCase(),s=pf(i)?i:Gs;df(s)}setup(){var tt;let e=this.html.rootDiv,o=this.getAttribute("style");o!==null&&e.setAttribute("style",e.getAttribute("style")+o),this._isEmbedded=W0();let i=this.getAttribute(Le.singleton);if(this._isSingleton=!this._isEmbedded&&i!==null&&!Oi(i),this._maxInstanceMode=this._isSingleton&&!this._isEmbedded?ql:Pa,this._exportformat=(tt=this.getAttribute(Le.exportformat))!=null?tt:void 0,this._isSingleton||this._isEmbedded){let K=p(Ye=>{let Ve=Nc(Ye);Ve!==void 0&&this.setAttribute(Ye,Ve)},"transferUrlParamToAttribute");for(let Ye of[Le.mode,Le.id,Le.showonly,Le.showgatetypes,Le.showdisconnectedpins,Le.showtooltips,Le.data,Le.src,Le.hidereset])K(Ye);let de="user";new URL(window.location.href).searchParams.forEach((Ye,Ve)=>{if(Ve.startsWith(de))if(Ve=Ve.substring(de.length),Ve.startsWith(".")&&(Ve=Ve.substring(1)),Ve.length===0)this.userdata=Ye;else if(Ve=Ve[0].toLowerCase()+Ve.substring(1),typeof this.userdata!="object"&&(this.userdata={}),Ve in this.userdata){let Tn=this.userdata[Ve];ae(Tn)?Tn.push(Ye):this.userdata[Ve]=[Tn,Ye]}else this.userdata[Ve]=Ye}),this.userdata!==void 0&&console.log("Custom user data: ",this.userdata)}if(this._isSingleton){let K=window.matchMedia("(prefers-color-scheme: dark)");K.onchange=()=>{ei(K.matches,!1)},ei(K.matches,!0),window.JSON5=qp.default,window.Logic.singleton=this,window.load=this.loadCircuitOrLibrary.bind(this),window.save=this.save.bind(this),window.highlight=this.highlight.bind(this),window.logicalTime=()=>this.timeline.logicalTime();let de=V(le("noselect"),fe("position: absolute; bottom: 0; right: 0; padding: 5px 3px 2px 5px; color: rgba(128,128,128,0.2); border-radius: 10px 0 0 0; font-size: 69%; font-style: italic;"),C.Messages.DevelopedBy+" ",ho(fe("color: inherit"),zs("https://github.com/jppellet/Logic-Circuit-Simulator"),Hc("_blank"),"Jean-Philippe Pellet"),", ",ho(fe("color: inherit"),zs("https://www.hepl.ch/accueil/formation/unites-enseignement-et-recherche/medias-usages-numeriques-et-didactique-de-linformatique.html"),Hc("_blank"),"HEP Vaud")).render();this.html.canvasContainer.insertAdjacentElement("afterbegin",de),window.onbeforeunload=ge=>{this._isSingleton&&this._isDirty&&this.mode>=2&&(ge.preventDefault(),ge.returnValue=C.Messages.ReallyCloseWindow)},this.addEventListener("focusout",()=>{this._dontHogFocus||this.focus()}),this.focus()}let s=this.getAttribute(Le.mode);s!==null&&(s=s.toUpperCase())in xn&&(this._maxInstanceMode=xn[s]);let a=this.getAttribute(Le.autosave);this._autosave=a!==null&&!Oi(a);let u=this.getAttribute(Le.id),l=this.getAttribute(Le.norestore);if(this._norestore=l!==null&&!Oi(l),u!==null||this._isSingleton)u!==null?(this._instanceId=u,u!==zp&&(this._idWhenExporting=u)):this._instanceId=zp;else if(!this._norestore){let K=this._autosave?"error":"warn";console[K]("No id attribute set on logic-editor, undownloaded state will be lost",this),this._autosave=!1}this._norestore&&this._autosave&&(console.warn("norestore is set, but autosave is also set; disabling autosave"),this._autosave=!1);let c=this.getAttribute(Le.linkedto);if(c!==null){this._norestore=!1;let K=document.querySelector(c);if(K===null||!(K instanceof HTMLInputElement||K instanceof HTMLTextAreaElement))console.error(`Could not find element matching selector '${c}' to link to`);else{console.log(`Linked logic-editor to element '${c}'`,K),this._linkedField=K;let de;K.addEventListener("input",()=>{de!==void 0&&clearTimeout(de),de=setTimeout(()=>{let ge=K.value;if(ge!==null){this._linkedField=void 0;try{this.loadCircuitOrLibrary(ge)}finally{this._linkedField=K}}},1e3)}),this._autosave&&(console.warn("  Ignoring autosave because linkedto is set"),this._autosave=!1)}}let d=this.getAttribute(Le.showonly);d!==null&&(this._options.showOnly=d.toLowerCase().split(/[, +]+/).filter(K=>K.trim()));let h=this.getAttribute(Le.showgatetypes);h!==null&&(this._options.showGateTypes=Bc(h));let m=this.getAttribute(Le.showdisconnectedpins);m!==null&&(this._options.showDisconnectedPins=Bc(m));let f=this.getAttribute(Le.showtooltips);f!==null&&(this._options.hideTooltips=!Oi(f)),this._hideResetButton=this.getAttribute(Le.hidereset)!==null&&!Oi(this.getAttribute(Le.hidereset));let g;if((g=this.getAttribute(Le.data))!==null)this._initialData={_type:"compressed",str:g};else if((g=this.getAttribute(Le.src))!==null)this._initialData={_type:"url",url:g};else{let K=p(()=>{let de=this.findLightDOMChild("script");if(de!==null){this._initialData={_type:"json",json:de.innerHTML},de.remove();let ge=!this._norestore;return this._loadedFromStorage||(this.tryLoadCircuitFromData(ge,qu),this.doRedraw(!0)),!0}else return!1},"tryLoadFromLightDOM");setTimeout(()=>{K()||setTimeout(()=>{K()},100)})}let D=p((K,de)=>{let ge=this.elemWithId(K),[Ye,Ve]=Z(de)?[de,void 0]:de;ge.insertAdjacentText("beforeend",Ye),Ve!==void 0&&ge.setAttribute("title",Ve)},"setCaption"),y=C.Dialogs.Share;D("shareDialogTitle",y.title),D("shareDialogUrl",y.URL),D("shareDialogIframe",y.EmbedInIframe),D("shareDialogWebComp",y.EmbedWithWebComp),D("shareDialogMarkdown",y.EmbedInMarkdown),D("shareDialogClose",C.Dialogs.Generic.Close),this._topBar=new wa(this),this._menu=new ga(this,this.html.leftToolbar),this._messageBar=new Da(this);let w=this.elemWithId("testResultsPalette");w.parentElement.replaceChild(this.editTools.testsPalette.rootElem,w);let x=this.html.leftToolbar.querySelector("button.sim-component-button[data-type=rect]");if(x===null?this._options.showOnly===void 0&&console.log("ERROR: Could not find group button"):x.addEventListener("pointerdown",this.wrapHandler(K=>{this.makeGroupWithSelection()&&(K.preventDefault(),K.stopImmediatePropagation())})),this.eventMgr.registerCanvasListenersOn(this.html.mainCanvas),this.eventMgr.registerButtonListenersOn(this._menu.allFixedButtons(),!1),this.html.rightResetButton.addEventListener("click",this.wrapHandler(this.resetCircuit.bind(this))),this._maxInstanceMode>=4){let K=this.elemWithId("modeChangeMenu"),de=V(le("toolbar-title"),"Mode").render();this.eventMgr.registerTitleDragListenersOn(de),W(de,V(le("btn-group-vertical"),...[4,3,2,1,0].map(ge=>{let[[Ye,Ve],Tn]=(()=>{switch(ge){case 4:{let Oo=V(le("sim-mode-link"),pt(C.Settings.Settings),En("settings")).render();return Oo.addEventListener("click",()=>{z0(this.html.settingsPalette)}),[C.Modes.FULL,Oo]}case 3:return[C.Modes.DESIGN,mt];case 2:return[C.Modes.CONNECT,mt];case 1:return[C.Modes.TRYOUT,mt];case 0:return[C.Modes.STATIC,mt]}})(),Mo=V(le("sim-mode-link"),pt("Copie un lien vers ce contenu dans ce mode"),En("link")).render();Mo.addEventListener("click",Oo=>{this.shareSheetForMode(ge)});let Ze=V(le("btn btn-sm btn-outline-light sim-toolbar-button-right sim-mode-tool"),fe("display: flex; justify-content: space-between; align-items: center"),In("mode")(xn[ge].toLowerCase()),pt(Ve),Ye,Tn,Mo).render();return Ze.addEventListener("click",()=>this.setMode(ge,!0)),Ze}))).applyTo(K),we(K,!0)}let T=p(K=>{let de=K.target;de.focus(),de.select(),K.preventDefault()},"selectAllListener");for(let K of[this.html.embedUrl,this.html.embedIframe,this.html.embedWebcomp,this.html.embedMarkdown])K.addEventListener("pointerdown",T),K.addEventListener("focus",T);this.setCurrentPointerAction("edit",!0),this.timeline.reset();let A=this.html.settingsPalette,P=V(le("toolbar-title with-border"),C.Settings.Settings).render();this.eventMgr.registerTitleDragListenersOn(P,()=>{we(A,!1)}),A.insertAdjacentElement("afterbegin",P);let R=p((K,[de,ge],Ye=!1)=>{let Ve=Us(Vo("checkbox")).render();this.options[K]===!0&&(Ve.checked=!0),Ve.addEventListener("change",this.wrapHandler(()=>{this._options[K]=Ve.checked,this.editTools.redrawMgr.requestRedraw({why:"option changed: "+K,invalidateMask:!0,invalidateTests:!0}),this.focus()}));let Tn=V(fe("height: 20px"),lf(Ve,ke(fe("margin-left: 4px"),Zt("title",ge),de))).render();return A.appendChild(Tn),Ye&&we(Tn,!1),Ve},"makeCheckbox"),L=R("animateWires",C.Settings.animateWires),O=R("hideWireColors",C.Settings.hideWireColors),G=R("hideInputColors",C.Settings.hideInputColors),B=R("hideOutputColors",C.Settings.hideOutputColors),Q=R("hideMemoryContent",C.Settings.hideMemoryContent),oe=R("showGateTypes",C.Settings.showGateTypes),ne=R("showDisconnectedPins",C.Settings.showDisconnectedPins),Ue=R("hideTooltips",C.Settings.hideTooltips),ut=R("groupParallelWires",C.Settings.groupParallelWires,!0),$e=R("showHiddenWires",C.Settings.showHiddenWires),It=R("showAnchors",C.Settings.showAnchors),Ct=R("showIDs",C.Settings.showIds),kt=C.Components.Wire.contextMenu,Lt=uf(ki(Zt("value",ct.auto),kt.WireStyleAuto),ki(Zt("value",ct.straight),kt.WireStyleStraight),ki(Zt("value",ct.hv),kt.WireStyleSquareHV),ki(Zt("value",ct.vh),kt.WireStyleSquareVH),ki(Zt("value",ct.bezier),kt.WireStyleCurved)).render();Lt.addEventListener("change",this.wrapHandler(()=>{this._options.wireStyle=Lt.value,this.linkMgr.invalidateAllWirePaths(),this.editTools.redrawMgr.requestRedraw({why:"wire style changed",invalidateMask:!0})})),A.appendChild(V(fe("height: 20px"),C.Settings.wireStyle+" ",Lt).render());let nn=Us(Vo("number"),fe("margin: 0 4px; width: 4em"),Zt("min","0"),Zt("step","50"),Zt("value",String(this.options.propagationDelay)),Zt("title",C.Settings.propagationDelay)).render();nn.addEventListener("change",()=>{this._options.propagationDelay=nn.valueAsNumber}),A.appendChild(V(fe("height: 20px"),C.Settings.propagationDelayField[0],nn,C.Settings.propagationDelayField[1]).render());let Bn=ho(C.Settings.showUserDataLink[1],fe("text-decoration: underline; cursor: pointer")).render();Bn.addEventListener("click",()=>{alert(C.Settings.userDataHeader+`

`+qp.default.stringify(this.userdata,void 0,4))});let on=V(fe("margin-top: 5px; display: none"),C.Settings.showUserDataLink[0],Bn).render();A.appendChild(on),this.optionsHtml={animateWiresCheckbox:L,hideWireColorsCheckbox:O,hideInputColorsCheckbox:G,hideOutputColorsCheckbox:B,hideMemoryContentCheckbox:Q,wireStylePopup:Lt,showGateTypesCheckbox:oe,showDisconnectedPinsCheckbox:ne,hideTooltipsCheckbox:Ue,groupParallelWiresCheckbox:ut,showHiddenWiresCheckbox:$e,showAnchorsCheckbox:It,showIdsCheckbox:Ct,propagationDelayField:nn,showUserDataLinkContainer:on},this.setCanvasSize(),U0(this.html.canvasContainer,()=>{this.redraw()}),this.tryLoadCircuitFromData(!this._norestore,qu),this.setModeFromString(this.getAttribute(Le.mode)),this.setCanvasSize(),vt.installGlobalListeners(),this.doRedraw(!0)}findLightDOMChild(e){let o=e.toUpperCase();for(let i of this.children)if(i.tagName===o)return i;return null}static installGlobalListeners(){if(vt._globalListenersInstalled)return;window.decompress=Ba.decompressFromEncodedURIComponent,window.decodeOld=vt.decodeFromURLOld,window.formatString=$0,window.gallery=Vm;let e=p(u=>l=>{for(let c of vt._allConnectedEditors){let d=c.html.canvasContainer;if(d!==void 0){let h=d.getBoundingClientRect(),m=l.clientX-h.left,f=l.clientY-h.top;c.pointerX=m/c._userDrawingScale-c._translationX,c.pointerY=f/c._userDrawingScale-c._translationY}u&&c.eventMgr.hideContextMenuIfNeeded(l)}},"makeUpdatePointerPositionHandler");window.addEventListener("pointerdown",e(!0),!0),window.addEventListener("pointermove",e(!1),!0);let o=p(()=>{for(let u of vt._allConnectedEditors)u.updateCursor()},"updateCursors");window.addEventListener("keydown",u=>{u.key===" "&&(vt._spaceDown=!0,o())}),window.addEventListener("keyup",u=>{u.key===" "&&(vt._spaceDown=!1,o())}),window.addEventListener("resize",()=>{var u;for(let l of vt._allConnectedEditors)l.html.canvasContainer!==void 0&&l.wrapHandler(()=>{l.setCanvasSize(),l.editTools.redrawMgr.requestRedraw({why:"window resized",invalidateMask:!0})})(),(u=l._topBar)==null||u.updateCompactMode();s()});let i,s=p(()=>{i!==void 0&&(i.onchange=null);let u=`(resolution: ${window.devicePixelRatio}dppx)`;i=window.matchMedia(u),i.onchange=()=>{for(let l of vt._allConnectedEditors)l.wrapHandler(()=>{l.setCanvasSize(),l.editTools.redrawMgr.requestRedraw({why:"devicePixelRatio changed",invalidateMask:!0})})();s()}},"registerPixelRatioListener");s(),document.body.addEventListener("themechanged",u=>{var c;let l=!!((c=u.detail)!=null&&c.is_dark_theme);ei(l,!1)}),new MutationObserver(function(u){u.forEach(function(l){if(l.type==="attributes"&&l.attributeName==="data-md-color-switching"&&document.body.getAttribute("data-md-color-switching")===null){let c=getComputedStyle(document.body).backgroundColor;console.log("Logic: looks like new background color is "+c),window.Logic.setDarkMode(c)}})}).observe(document.body,{attributes:!0}),vt._globalListenersInstalled=!0}setMode(e,o){this.wrapHandler(()=>{var m;let i=xn[e].toLowerCase();e>this._maxInstanceMode&&(e=this._maxInstanceMode,console.log(`Cannot switch to mode ${i} because we are capped by ${xn[this._maxInstanceMode]}`),i=xn[e].toLowerCase()),this._mode=e;let s=[];for(let f=h4;f<=e;f++)s.push(xn[f].toLowerCase());this.html.rootDiv.setAttribute(Le.modes,s.join(" "));let a=[];for(let f=e+1;f<=f4;f++)a.push(xn[f].toLowerCase());this.html.rootDiv.setAttribute(Le.nomodes,a.join(" ")),this.editTools.redrawMgr.requestRedraw({why:"mode changed",invalidateMask:!0}),this.root.querySelectorAll(".sim-mode-tool").forEach(f=>{f.getAttribute("mode")===i?f.classList.add("active"):f.classList.remove("active")}),e<2&&this.setCurrentPointerAction("edit");let u=e>=3?"show":this._maxInstanceMode>=3?"inactive":"hide",l=u==="show",c=e>=1&&!this._hideResetButton,d=c&&!l,h=e<4;(m=this._topBar)==null||m.setButtonStateFromMode({showComponentsAndEditControls:u,showReset:c},e),we(this.html.rightToolbarContainer,d),h&&we(this.html.settingsPalette,!1),zr(this.html.leftToolbar,u),e<2?this.setTestsPaletteVisible(!1):this.didLoadTests(this.testSuites),o&&this.focus()})()}setModeFromString(e){let o=this._maxInstanceMode;e!==null&&(e=e.toUpperCase())in xn&&(o=xn[e]),this.setMode(o,!1)}setCircuitName(e){var o;this._options.name=e===void 0||e.length===0?void 0:e,(o=this._topBar)==null||o.setCircuitName(e),this.setWindowTitleFrom(this._options.name)}setZoom(e,o){var s;e=Math.max(10,Math.min(1e3,e));let i=Math.round(e);return this._options.zoom=i,this._userDrawingScale=e/100,o&&((s=this._topBar)==null||s.setZoom(i)),this.editTools.redrawMgr.requestRedraw({why:"zoom level changed",invalidateMask:!0}),e}setTranslation(e,o){this._translationX=e,this._translationY=o,this._options.origin=[-Math.round(e),-Math.round(o)],this.editTools.redrawMgr.requestRedraw({why:"translation changed",invalidateMask:!0})}finishAutoZoomTranslationIfActive(){this.setDirty("zoom/translation changed"),this.editTools.undoMgr.takeSnapshot()}updateCustomComponentButtons(){var e;this._menu!==void 0&&(this._menu.updateCustomComponentButtons(this.factory.customDefs()),this.eventMgr.registerButtonListenersOn(this._menu.allCustomButtons(),!0)),(e=this._topBar)==null||e.updateCustomComponentCaption()}allowGateType(e){var o,i;return(i=(o=this._menu)==null?void 0:o.allowGateType(e))!=null?i:!0}focus(){this.html.mainCanvas.focus()}trySaveInBrowserStorage(e){if(this._linkedField!==void 0){let a=this._linkedField.selectionStart,u=this._linkedField.selectionEnd;this._linkedField.value=Pe.stringifyObject(e,!1),a!==null&&u!==null&&this._linkedField.setSelectionRange(a,u)}if(this._norestore)return;let o=this.persistenceKey;if(o===void 0)return;let s=Date.now()+";"+Pe.stringifyObject(e,!0);try{sessionStorage.setItem(o,s),this._autosave&&localStorage.setItem(o,s)}catch(a){console.error("Failed to save circuit to browser storage",a)}}tryLoadFromSessionStorage(){let e=this.tryLoadFromStorage(sessionStorage,Qi);return e===void 0?!1:Z(e)?(console.error("Failed to load circuit from session storage",e),!1):(this.showLoadedMessage(e,!1),this._loadedFromStorage=!0,!0)}tryLoadFromLocalStorage(){let e=this.tryLoadFromStorage(localStorage,qu);return e===void 0?(window.alert(C.Messages.NoSavedData),!1):Z(e)?(window.alert(C.Messages.FailedToLoadCircuitFromStorage.expand({error:e})),console.error("Failed to load circuit from session storage",e),!1):(this.showLoadedMessage(e,!1),!0)}showLoadedMessage(e,o){let i=e.toLocaleDateString(void 0,{year:"2-digit",month:"2-digit",day:"2-digit"}),s=e.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit",second:void 0});this.showMessage(C.Messages.LoadedCircuitFromSessionStorage.expand({day:i,time:s}),o?0:2e3,o)}tryLoadFromStorage(e,o){let i=this.persistenceKey;if(i===void 0)return;let s=e.getItem(i);if(s===null||s.length===0)return;let a=-1;if((a=s.indexOf(";"))===-1)return"unparseable saved string";let u=s.substring(a+1),l=Pe.loadCircuitOrLibrary(this,u,o);if(l!==void 0)return l;try{return new Date(Number(s.substring(0,a)))}catch(c){return new Date}}tryClearBrowserStorage(){let e=this.persistenceKey;if(e!==void 0){try{localStorage.removeItem(e)}catch(o){}try{sessionStorage.removeItem(e)}catch(o){}}}tryLoadFrom(e){if(e.type==="application/json"||e.type==="application/json5"||e.type==="text/plain"){let o=new FileReader;o.onload=()=>{var s;let i=(s=o.result)==null?void 0:s.toString();i!==void 0&&this.loadCircuitOrLibrary(i)},o.readAsText(e,"utf-8")}else if(e.type==="image/png"){let o=new FileReader;o.onload=()=>{var s;let i=o.result;if(i instanceof ArrayBuffer){let a=new Uint8Array(i),l=(s=Mr.readMetadata(a).tEXt)==null?void 0:s.Description;Z(l)&&(this._initialData={_type:"compressed",str:l},this.wrapHandler(()=>{this.tryLoadCircuitFromData(!1,gp)})())}},o.readAsArrayBuffer(e)}else if(e.type==="image/svg+xml"){let o=new FileReader;o.onload=i=>{var a,u;let s=(u=(a=i.target)==null?void 0:a.result)==null?void 0:u.toString();if(s!==void 0){let l=document.createElement("div");l.innerHTML=s;let c=l.querySelector("svg metadata"),d=c==null?void 0:c.textContent;l.remove(),d!=null&&this.loadCircuitOrLibrary(d)}},o.readAsText(e,"utf-8")}else this.showMessage(C.Messages.UnsupportedFileType.expand({type:e.type}))}tryLoadCircuitFromData(e,o){var a;if(this._initialData!==void 0){if(this._initialData._type==="url"){let l=this._initialData.url;fetch(l,{mode:"cors"}).then(c=>c.text()).then(c=>{console.log(`Loaded initial data from URL '${l}'`),this._initialData={_type:"json",json:c},this.tryLoadCircuitFromData(e,o)});return}let u;if(this._initialData._type==="json")try{u=Pe.loadCircuitOrLibrary(this,this._initialData.json,o)}catch(l){u=String(l)+" (JSON)"}else{let l;try{if(l=Ba.decompressFromEncodedURIComponent(this._initialData.str),this._initialData.str.length!==0&&((a=l==null?void 0:l.length)!=null?a:0)===0)throw new Error("zero decoded length")}catch(c){u=String(c)+" (LZString)";try{l=vt.decodeFromURLOld(this._initialData.str),u=void 0}catch(d){}}u===void 0&&Z(l)&&(u=Pe.loadCircuitOrLibrary(this,l,o),u===void 0&&(this._initialData={_type:"json",json:l}))}u!==void 0&&console.log("ERROR could not not load initial data: "+u)}let i;this._linkedField!==void 0&&(i=this._linkedField.value)!==null&&(i=i.trim()).length>0&&Pe.loadCircuitOrLibrary(this,i,o)===void 0&&(this._initialData={_type:"json",json:i});let s=!1;e&&this.tryLoadFromSessionStorage()&&(s=!0),s||this.clearDirty()}resetCircuit(){this.tryClearBrowserStorage(),this.editor.tryLoadCircuitFromData(!1,Qi)}tryCloseCustomComponentEditor(){let e=this.editor.editorRoot;if(!(e instanceof yn))return!1;let o=e.customDef,i=this.editor.factory.tryModifyCustomComponent(o,e);if(i!==void 0)return i.length!==0&&window.alert(i),!0;for(let s of this.factory.getCustomComponentTypesWhichUse(o.type))this.components.updateCustomComponents(s);return this.setEditorRoot(this.editor),this.editTools.undoMgr.takeSnapshot(),!0}loadCircuitOrLibrary(e){this.wrapHandler(o=>Pe.loadCircuitOrLibrary(this,o,gp))(e)}makeGroupWithSelection(){var i;let e=((i=this.eventMgr.currentSelection)==null?void 0:i.previouslySelectedElements)||new Set;if(e.size===0)return!1;let o=at.make(this);if(o.setSpawned(),o instanceof vs){o.wrapContents(e);for(let s of e)s instanceof Kn&&s.anchor===void 0&&(s.anchor=o)}else console.log("ERROR: created component is not a Rectangle");return!0}setDirty(e){var o;this.mode>=2&&(this._isDirty=!0,(o=this._topBar)==null||o.setDirty(!0))}clearDirty(){var e;this._isDirty=!1,(e=this._topBar)==null||e.setDirty(!1)}setDark(e){this.html.rootDiv.classList.toggle("dark",e)}setEditorRoot(e){var s,a;if(e===this._editorRoot)return;this._editorRoot!==void 0&&this._editorRoot.stopEditingThis(),this._editorRoot=e,e.startEditingThis(this.editTools);let[o,i]=e instanceof yn?[e,this.factory.getCustomComponentTypesWhichUse(e.customDef.type)]:[void 0,[]];(s=this._menu)==null||s.setCustomComponentsHidden(i),(a=this._topBar)==null||a.setEditingCustomComponent(o==null?void 0:o.customDef),this._highlightedItems=void 0,this.eventMgr.currentSelection=void 0,this.eventMgr.clearTooltipIfNeeded(),this.eventMgr.updateComponentUnderPointer([this.pointerX,this.pointerY],!1,!1,!1),this.editTools.testsPalette.update(),this.editTools.moveMgr.clear(),this.editTools.redrawMgr.requestRedraw({why:"editor root changed",invalidateMask:!0,invalidateTests:!0}),this.focus()}setCurrentPointerAction(e,o=!1,...i){var a;let s=this.eventMgr.setHandlersFor(e,...i);return(o||s)&&(this.setToolCursor(g4[e].cursor),(a=this._topBar)==null||a.updateActiveTool(e),this.editTools.redrawMgr.requestRedraw({why:"mouse action changed"}),this.editor.focus()),s}updateCursor(e){var i,s,a;let o=this.editTools.moveMgr.areDrawablesMoving()?"grabbing":(a=(s=this._toolCursor)!=null?s:(i=this.eventMgr.currentComponentUnderPointer)==null?void 0:i.cursorWhenMouseover(e))!=null?a:vt._spaceDown&&this._mode>=2?"grab":"default";this.html.canvasContainer.style.cursor=o}showMessage(e,o=2e3,i=!1){var s,a;return(a=(s=this._messageBar)==null?void 0:s.showMessage(e,o,i))!=null?a:()=>{}}offsetXYForContextMenu(e,o=!1){let i=this.html.mainCanvas,s,a;if("offsetX"in e&&e.offsetX===0&&e.offsetY===0&&e.target===i){let u=i.getBoundingClientRect();s=e.clientX-u.x,a=e.clientY-u.y}else{if("dragStartX"in e)return[e.dragStartX,e.dragStartY];[s,a]=this.offsetXY(e)}return o&&(s=Math.round(s/H)*H,a=Math.round(a/H)*H),[s,a]}offsetXY(e,o=!1){let[i,s]=(()=>{let c=this.html.mainCanvas,d=e.target;if("offsetX"in e){let h=c.getBoundingClientRect(),m=e.offsetX,f=e.offsetY;if(m===0&&f===0){let g=e;"_savedOffsetX"in g?(m=g._savedOffsetX,f=g._savedOffsetY,d=g._savedTarget):"layerX"in e&&(m=g.layerX+h.x,f=g.layerY+h.y)}if(d===c)return[m,f];{let g=d.getBoundingClientRect();return[Math.max(H*2,m+g.x-h.x),Math.max(H*2,f+g.y-h.y)]}}else throw console.error("calling offsetXY with TouchEvent"),new Error("not implemented")})(),[a,u,l]=o?[1,0,0]:[this._userDrawingScale,this._translationX,this._translationY];return[i/a-u,s/a-l]}offsetXYForComponent(e,o){let i=this.offsetXY(e);if(o.orient===ce.default)return i;let[s,a]=i,u=s-o.posX,l=a-o.posY;switch(o.orient){case"e":return i;case"w":return[o.posX-u,o.posY-l];case"s":return[o.posX-l,o.posY-u];case"n":return[o.posX+l,o.posY+u]}}guessAdequateCanvasSize(e){let o=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,u=[...this.editorRoot.components.all()];for(let h of this.linkMgr.wires)u.push(...h.waypoints);for(let h of u){let m=h.posX,f=h.width,g=m-f/2,D=g+f;D>o&&(o=D),g<i&&(i=g);let y=h.posY,w=h.height,x=y-w/2,S=x+w;S>s&&(s=S),x<a&&(a=x)}i=Math.max(0,i);let l=o+i;isNaN(l)&&(l=300),a=Math.max(0,a);let c=a+s;isNaN(c)&&(c=150);let d=e?this._userDrawingScale:1;return[d*l,d*c]}async shareSheetForMode(e){this._mode>Pa&&(this._mode=Pa);let o=xn[e].toLowerCase(),i=this.idWhenExporting,{fullJson:s,compressedJsonForUri:a,showOnlyArr:u}=this.fullJsonStateAndCompressedForUri(!0);console.log(`JSON:
`+s);let l=this.fullUrlForMode(e,a,u,i);this.html.embedUrl.value=l;let c=e===Pa?"":`:mode: ${o}`,d=this.guessAdequateCanvasSize(!0)[1],h=u===void 0?void 0:u.join(" "),m=this._exportformat==="superfence"?`\`\`\`{.logic id=${i} height=${d} mode=${o}${h===void 0?"":`showonly=${h}`}}
${s}
\`\`\``:`\`\`\`{logic}
:id: ${i}
:height: ${d}
${c}
${h===void 0?"":`:showonly: ${h}
`}
${s}
\`\`\``;this.html.embedMarkdown.value=m;let f=h===void 0?"":` showonly="${h}"`,g=`<iframe style="width: 100%; height: ${d}px; border: 0"${f} src="${l}"></iframe>`;this.html.embedIframe.value=g;let D=`<div style="width: 100%; height: ${d}px">
  <logic-editor id="${i}" mode="${xn[e].toLowerCase()}"${f}>
    <script type="application/json5">
      ${s.replace(/\n/g,`
      `)}
    <\/script>
  </logic-editor>
</div>`;this.html.embedWebcomp.value=D,this.saveToUrl(a,u),G0(this.html.embedDialog)||(await Ic(l)?console.log("  -> Copied!"):console.log("  -> Could not copy!"))}saveCurrentStateToUrl(){let{fullJson:e,compressedJsonForUri:o,showOnlyArr:i}=this.fullJsonStateAndCompressedForUri(!0);console.log(`Saved to URL compressed version of:
`+e),this.saveToUrl(o,i)}save(){return Pe.buildCircuitObject(this)}saveToUrl(e,o){this._isSingleton&&(history.pushState(null,"",this.fullUrlForMode(ql,e,o,this.instanceId)),this.clearDirty(),this.showMessage(C.Messages.SavedToUrl))}fullJsonStateAndCompressedForUri(e){let o,i=Pe.buildCircuitObject(this);e&&(o=Pe.removeShowOnlyFrom(i));let s=Pe.stringifyObject(i,!1);e||(o=Pe.removeShowOnlyFrom(i));let a=Pe.stringifyObject(i,!0),u=Ba.compressToEncodedURIComponent(a);return{fullJson:s,compressedJsonForUri:u,showOnlyArr:o}}fullUrlForMode(e,o,i,s){let a=window.location,u=i===void 0?"":`&${Le.showonly}=${i.join(",")}`,l=hf(),d=new URL(a.href).searchParams.get(Le.lang)===l?`&${Le.lang}=${l}`:"";s===zp&&(s=void 0);let h=s===void 0?"":`id=${s}&`;return`${a.protocol}//${a.host}${a.pathname}?${h}${Le.mode}=${xn[e].toLowerCase()}${d}${u}&${Le.data}=${o}`}toBase64(e){return new Promise((o,i)=>{if(e==null){o(void 0);return}let s=new FileReader;s.onloadend=()=>{let a=s.result,u=a.substring(a.indexOf(",")+1);o(u)},s.readAsDataURL(e)})}async toPNG(e,o){let i=await new Promise(l=>{let[d,h]=this.guessAdequateCanvasSize(!1);o!==void 0&&(h=o),d*=3,h*=3;let m=new DOMMatrix().scale(3),f=document.createElement("canvas");f.width=d,f.height=h;let g=vt.getGraphics(f),D=Wf();D&&ei(!1,!1),this.doDrawWithContext(g,d,h,m,m,!0,!0,!1),D&&ei(!0,!1),f.toBlob(l,"image/png"),f.remove()});if(i===null)return;if(!e)return i;let{compressedJsonForUri:s}=this.fullJsonStateAndCompressedForUri(!1),a=new Uint8Array(await i.arrayBuffer()),u=Mr.extractChunks(a);return Mr.insertMetadata(u,{tEXt:{Description:s}}),new Blob([Mr.encodeChunks(u)],{type:"image/png"})}async toSVG(e){let o=e?Pe.stringifyObject(Pe.buildCircuitObject(this),!1):void 0,[i,s]=this.guessAdequateCanvasSize(!1),a=new DOMMatrix,u=new yo({width:i,height:s,metadata:o});this.doDrawWithContext(u,i,s,a,a,!0,!0,!1);let l=u.getSerializedSvg();return Promise.resolve(new Blob([l],{type:"image/svg+xml"}))}async download(e,o){let i=await e;if(i===void 0)return;let s=this.documentDisplayName+o;(0,Hm.saveAs)(i,s)}setTestsPaletteVisible(e){var o;this.editTools.testsPalette.setVisible(e),(o=this._topBar)==null||o.updateTestPaletteVisible(e)}didLoadTests(e){var i;let o=e.totalCases();(i=this._topBar)==null||i.setTestPaletteButtonVisible(o),this.setTestsPaletteVisible(o>0)}addTestCases(e){var i,s,a;let o;this.testSuites.suites.length>0?o=this.testSuites.suites[0]:(o=new gn,this.testSuites.push(o)),ae(e)?o.testCases.push(...e):o.testCases.push(e),(i=this.ifEditing)==null||i.setDirty("added test case"),(s=this.ifEditing)==null||s.undoMgr.takeSnapshot(),(a=this.ifEditing)==null||a.testsPalette.update()}removeTestCase(e){var o,i,s;for(let a of this.testSuites.suites){let u=a.testCases.indexOf(e);if(u>=0){a.testCases.splice(u,1),(o=this.ifEditing)==null||o.setDirty("removed test case"),(i=this.ifEditing)==null||i.undoMgr.takeSnapshot(),(s=this.ifEditing)==null||s.testsPalette.update();return}}}async disableUIWhile(e,o){if(this._isRunningOrCreatingTests)return;this._isRunningOrCreatingTests=!0;let i=this.mode,s=new Map,a=this.showMessage(e,0);try{return this.setMode(0,!1),await o(s)}finally{a(),this.setMode(i,!0);for(let[u,l]of s)u.setValue(l);this.recalcPropagateAndDrawIfNeeded(),await this.waitForPropagation(),this._isRunningOrCreatingTests=!1}}async runAllCircuitTestSuites(e){let o=this.editTools.testsPalette;if(o!==void 0)return await o.runAllTestSuites(e)}async runTestSuite(e,o){var l,c,d;let i=this.editTools.testsPalette;if(i===void 0)return;let s=(l=o==null?void 0:o.noUI)!=null?l:!1,a=s||((c=o==null?void 0:o.fast)!=null?c:!1),u=(d=o==null?void 0:o.doLog)!=null?d:!1;if(!(e instanceof gn)){let h=Fn(e,gn.Repr,"test suite");if(h===void 0)return;e=new gn([h,this.editor.components])}return this.disableUIWhile(C.Messages.RunningTests,async h=>{this.setTestsPaletteVisible(!0);let m=new qs(e),f=s?void 0:i.getOrMakeUIFor(e),g=!0,D=!1;for(let y=0;y<e.testCases.length;y++){let w=e.testCases[y];f==null||f.setRunning(y),g?g=!1:!D&&!a&&await new Promise(S=>setTimeout(S,2e3));let x;if(D)x=Vi.Skip;else{let[S,T]=await this.runTestCase(w,e,u);x=T;for(let[A,P]of S)h.has(A)||h.set(A,P)}m.addTestCaseResult(w,x),f==null||f.setResult(y,x),w.stopOnFail&&x._tag==="fail"&&(D=!0)}return m})}trySetInputsAndRecalc(e){for(let[o,i]of e)Z(o)?console.error(`Input component ${o} not found`):o.setValue(Ni(i,o.numBits));this.recalcPropagateAndDrawIfNeeded(!1)}async runTestCase(e,o,i){if(i){let a=[o.name,e.name].filter(Boolean),u=a.length===0?C.Tests.DefaultTestCaseName:a.join("/");console.group("Running test case "+u)}e.tryFixReferences(this.editorRoot.components);let s=new Map;try{for(let[u,l]of e.in){if(Z(u))return[s,Vi.Error(`Input component ${u} not found`)];s.set(u,u.value),u.setValue(Ni(l,u.numBits))}this.recalcPropagateAndDrawIfNeeded(!0),await this.waitForPropagation();let a=[];for(let[u,l]of e.out){if(Z(u))return[s,Vi.Error(`Output component ${u} not found`)];let c=u.value,d=Ni(l,u.numBits);if(rr(c,d)){if(i){let h=`${u.ref} is ${d}`;console.log(`%cPASS:%c ${h}`,"color: green; font-weight: bold;","")}}else if(a.push({output:u,expected:d,actual:c}),i){let h=`${u.ref} is ${c} instead of ${d}`;console.log(`%cFAIL:%c ${h}`,"color: red; font-weight: bold;","")}}return[s,a.length===0?Vi.Pass:Vi.Fail(a)]}finally{i&&console.groupEnd()}}waitForPropagation(){return this._propagationPromise}recalcPropagateAndDrawIfNeeded(e=!1){var d,h;if(this._nextAnimationFrameHandle!==null)if(e)cancelAnimationFrame(this._nextAnimationFrameHandle),this._nextAnimationFrameHandle=null;else return;let o=this.recalcMgr.recalcAndPropagateIfNeeded(),i=this.editTools.redrawMgr,s=this._editorRoot.linkMgr;(s.isAddingWire||s.isSettingAnchor)&&i.requestRedraw({why:"adding a wire/setting anchor"});let a=this._options.animateWires,u=i.getReasonsAndClear();if(u===void 0&&!a)return;u!==void 0&&this._propagationResolve===void 0&&(this._propagationPromise=new Promise(m=>{this._propagationResolve=m}));let l=(d=u==null?void 0:u.redrawMask)!=null?d:!1;this.doRedraw(l),((h=u==null?void 0:u.invalidateTests)!=null?h:!1)&&!this._isRunningOrCreatingTests&&(this.editTools.testsPalette.clearDisplayedResults(),this.dispatchEvent(new CustomEvent("testsinvalidated")),console.log("Dispatched testsinvalidated event")),i.isAnyValuePropagating()||this._propagationResolve!==void 0&&(this.timeline.hasPendingCallbacksNow()||(this._propagationResolve(),this._propagationResolve=void 0)),(a||i.hasReasons())&&(this._nextAnimationFrameHandle=requestAnimationFrame(()=>{this._nextAnimationFrameHandle=null,this.recalcPropagateAndDrawIfNeeded()}))}highlight(e){if(e===void 0){this._highlightedItems=void 0;return}Z(e)&&(e=[e]);let o=[],i=[];if(!ae(e))o.push(e);else{for(let a of this.components.all())a.ref!==void 0&&e.includes(a.ref)&&o.push(a);for(let a of this.linkMgr.wires)a.ref!==void 0&&e.includes(a.ref)&&i.push(a);if(o.length===0&&i.length===0){console.log(`Nothing to highlight for ref '${e}'`),this._highlightedItems=void 0;return}}let s=this.timeline.unadjustedTime();this._highlightedItems={comps:o,wires:i,start:s},this.editTools.redrawMgr.requestRedraw({why:"highlighting component"}),this.recalcPropagateAndDrawIfNeeded()}redraw(){this.setCanvasSize(),this.editTools.redrawMgr.requestRedraw({why:"explicit redraw call",invalidateMask:!0}),this.recalcPropagateAndDrawIfNeeded()}doRedraw(e){var d;(d=this._topBar)==null||d.updateTimeLabelIfNeeded();let o=vt.getGraphics(this.html.mainCanvas),i=this.html.mainCanvas,s=this._baseUIDrawingScale,a=i.width/s,u=i.height/s,l=new DOMMatrix().scale(this._baseUIDrawingScale),c=l.scale(this._userDrawingScale).translate(this._translationX,this._translationY);this.doDrawWithContext(o,a,u,l,c,!1,!1,e)}doDrawWithContext(e,o,i,s,a,u,l,c){var O,G;e.setTransform(s),e.lineCap="square",e.textBaseline="alphabetic",e.fillStyle=ot,l?e.clearRect(0,0,o,i):e.fillRect(0,0,o,i),e.setTransform(a);let d=p(B=>{let oe=B.unrotatedWidth+15+15,ne=B.unrotatedHeight+15+15;if(ce.isVertical(B.orient)){let Ue=oe;oe=ne,ne=Ue}return new DOMRect(B.posX-oe/2,B.posY-ne/2,oe,ne)},"highlightRectFor"),h=this._highlightedItems,m;if(h!==void 0){let ne=this.timeline.unadjustedTime()-h.start,Ue=ne<2e3?.4:.4*(1-(ne-2e3)/200);if(Ue<=0)this._highlightedItems=void 0;else{e.beginPath();for(let ut of h.comps){let $e=d(ut);e.moveTo($e.x,$e.y),e.lineTo($e.right,$e.y),e.lineTo($e.right,$e.bottom),e.lineTo($e.x,$e.bottom),e.closePath()}m=`rgba(238,241,0,${Ue})`,e.shadowColor=m,e.shadowBlur=20,e.shadowOffsetX=0,e.shadowOffsetY=0,e.fillStyle=m,e.fill(),e.shadowBlur=0,this.editTools.redrawMgr.requestRedraw({why:"highlight animation"})}}let f=this.editTools.moveMgr;if(f.areDrawablesMoving()){e.setTransform(s),e.scale(this._userDrawingScale,this._userDrawingScale),e.beginGroup("grid");let B=o/this._userDrawingScale,Q=i/this._userDrawingScale,oe=H;e.strokeStyle=$i,e.lineWidth=1,e.beginPath();for(let ne=oe;ne<B;ne+=oe)e.moveTo(ne,0),e.lineTo(ne,Q);for(let ne=oe;ne<Q;ne+=oe)e.moveTo(0,ne),e.lineTo(B,ne);e.stroke(),e.endGroup(),e.setTransform(a)}(!u&&this.translationX!==0||this.translationY!==0)&&(e.beginGroup("axes"),e.strokeStyle=$i,e.fillStyle=$i,e.lineWidth=1,e.beginPath(),e.moveTo(0,-10),e.lineTo(0,20),e.moveTo(-10,0),e.lineTo(20,0),e.stroke(),e.beginPath(),e.moveTo(22,0),e.lineTo(15,-3),e.lineTo(15,3),e.closePath(),e.fill(),e.beginPath(),e.moveTo(0,22),e.lineTo(-3,15),e.lineTo(3,15),e.closePath(),e.fill(),e.font="10px sans-serif",e.textAlign="right",se(e,te.bottom,"0",-3,-3),e.endGroup());let D=f.getSingleMovingWaypoint();if(D!==void 0){e.beginGroup("guides");let B=D.getPrevAndNextAnchors();e.strokeStyle=Au,e.lineWidth=1.5,e.beginPath();for(let Q of B)e.moveTo(Q.posX,0),e.lineTo(Q.posX,i),e.moveTo(0,Q.posY),e.lineTo(o,Q.posY);e.stroke(),e.endGroup()}if(!u&&(this._mode>=2||this._maxInstanceMode===ql)){if(e.beginGroup("border"),e.setTransform(s),e.strokeStyle=Tu,e.lineWidth=2,this._maxInstanceMode===ql&&this._mode<this._maxInstanceMode){e.strokeRect(0,0,o,i);let B=this.guessAdequateCanvasSize(!0)[1];na(e,0,B,o,B),e.fillStyle=wu,e.fillRect(0,B,o,i-B)}else{let B=this.html.mainCanvas.getBoundingClientRect().x,[Q,oe]=(G=(O=this._topBar)==null?void 0:O.getActiveTabCoords())!=null?G:[0,0];e.beginPath(),e.moveTo(Q-B,0),e.lineTo(0,0),e.lineTo(0,i),e.lineTo(o,i),e.lineTo(o,0),e.lineTo(oe-B,0),e.stroke()}e.setTransform(a),e.endGroup()}let y=this.timeline.logicalTime(),w=this._options.animateWires?y/1e3%1:void 0;e.strokeStyle=J;let x=this.eventMgr.currentComponentUnderPointer,S={drawTime:y,drawTimeAnimationFraction:w,currentCompUnderPointer:x,highlightedItems:h,highlightColor:m,currentSelection:void 0,anythingMoving:f.areDrawablesMoving()},T=this.eventMgr.currentSelection;S.currentSelection=T;let A=p(B=>{e.beginGroup(B.constructor.name);try{B.draw(e,S);for(let Q of B.allNodes())Q.draw(e,S)}finally{e.endGroup()}},"drawComp"),P=this._editorRoot;e.beginGroup("background");for(let B of P.components.withZIndex(Dn.Background))A(B);e.endGroup(),e.beginGroup("wires"),P.linkMgr.draw(e,S),e.endGroup(),e.beginGroup("components");for(let B of P.components.withZIndex(Dn.Normal))A(B);e.endGroup();let R=f.getSingleMovingComponentWithAnchors();if(R!==void 0)e.beginGroup("anchors"),pp(e,R,!0),e.endGroup();else if(this._options.showAnchors){e.beginGroup("anchors");for(let B of P.components.all())pp(e,B,!1);e.endGroup()}e.beginGroup("overlays");for(let B of P.components.withZIndex(Dn.Overlay))A(B);if(e.endGroup(),this._options.showIDs){e.beginGroup("refs"),e.font="bold 14px sans-serif",e.strokeStyle="white",e.lineWidth=3,e.fillStyle=Su,e.textAlign="center";for(let B of P.components.all())B.ref!==void 0&&($f(e,te.middle,B.ref,B.posX,B.posY),se(e,te.middle,B.ref,B.posX,B.posY));e.endGroup()}let L;T!==void 0&&(L=T.currentlyDrawnRect)!==void 0&&(e.beginGroup("selection"),e.lineWidth=1.5,e.strokeStyle="rgb(100,100,255)",e.fillStyle="rgba(100,100,255,0.2)",e.beginPath(),e.rect(L.x,L.y,L.width,L.height),e.stroke(),e.fill(),e.endGroup())}drawDebugInfo(e){o(0,0);for(let i of[100,200])for(let[s,a]of[[-i,-i],[-i,0],[-i,i],[0,-i],[0,i],[i,i],[i,0],[i,-i]])o(s,a);function o(i,s){e.lineWidth=2,e.strokeStyle="red",e.beginPath(),e.moveTo(i-10,s),e.lineTo(i+10,s),e.moveTo(i,s-10),e.lineTo(i,s+10),e.stroke(),e.fillStyle="black",e.font="bold 10px sans-serif",e.textAlign="left",se(e,te.top,`${i},${s}`,i+4,s+4)}p(o,"drawPoint")}deleteSelection(){var o,i;if(this.eventMgr.currentSelectionEmpty())return!1;let e=!1;for(let s of(i=(o=this.eventMgr.currentSelection)==null?void 0:o.previouslySelectedElements)!=null?i:[])e=this.eventMgr.tryDeleteDrawable(s).isChange||e;return e?(this.editTools.undoMgr.takeSnapshot(),!0):!1}async cut(){await this.copy()&&await this.deleteSelection()}async copy(){var a,u;if(this.eventMgr.currentSelectionEmpty())return!1;let e=[];for(let l of(u=(a=this.eventMgr.currentSelection)==null?void 0:a.previouslySelectedElements)!=null?u:[])l instanceof me&&e.push(l);let o=Pe.buildComponentsAndWireObject(e,[],[this.pointerX,this.pointerY]);if(o.components===void 0&&o.wires===void 0)return!1;let i=Pe.stringifyObject(o,!1),s=await Ic(i);return console.log(s?`Copied:
`+i:"Could not copy"),this.focus(),s}async paste(){let e=this._dontHogFocus;this._dontHogFocus=!0;let o;try{o=await j0()}finally{this._dontHogFocus=e}if(o===void 0||o==="")return;let i=Pe.pasteComponents(this,o);if(Z(i))console.log(i);else{let s=new Rr(void 0);for(let a of i)s.toggle(a);this.eventMgr.currentSelection=s}this.focus()}wrapHandler(e){return(...o)=>{let i=e(...o);return this.recalcPropagateAndDrawIfNeeded(),i}}wrapAsyncHandler(e){return async(...o)=>{let i=await e(...o);return this.recalcPropagateAndDrawIfNeeded(),i}}static decodeFromURLOld(e){return decodeURIComponent(atob(e.replace(/-/g,"+").replace(/_/g,"/").replace(/%3D/g,"=")))}static getGraphics(e){let o=e.getContext("2d");return o.createPath=i=>new Path2D(i),o.beginGroup=()=>{},o.endGroup=()=>{},o}},Gt=vt;p(Gt,"LogicEditor"),Gt._globalListenersInstalled=!1,Gt._spaceDown=!1,Gt._allConnectedEditors=[];var $l=class{constructor(n){this.template=n;this.tests=new ya;this.Serialization=Pe}highlight(n,e){var o;Z(n)&&(n=[n]);for(let i of n){let s=(o=document.getElementById("logic_"+i))!=null?o:document.getElementById(i);if(s===null){console.log(`Cannot find logic diagram with reference '${i}'`);return}if(!(s instanceof Gt)){console.log(`Element with id '${i}' is not a logic editor`);return}s.highlight(e)}}runSampleTestSuite(n){setTimeout(p(async()=>{if(this.singleton){let o=new gn([{name:"Simple XOR gate test suite",cases:[{name:"false false -> false",in:{in0:0,in1:0},out:{out0:0},stopOnFail:!0},{name:"false true -> true",in:{in0:1,in1:0},out:{out0:1}},{name:"true false -> true",in:{in0:0,in1:1},out:{out0:1}},{name:"true true -> false",in:{in0:1,in1:1},out:{out0:0}}]},this.singleton.editorRoot.components]),i=Kt(n)?n:{},s=await this.singleton.runTestSuite(o,i);s===void 0?console.error("Could not run test suite"):s.dump()}},"f"),0)}printUndoStack(){var n;(n=this.singleton)==null||n.editTools.undoMgr.dump()}setDarkMode(n){if(n==="auto")n=window.matchMedia("(prefers-color-scheme: dark)").matches;else if(n==="false")n=!1;else if(Z(n)){let e=Gf(n);if(e!==void 0){let o=e[3]===255?`rgb(${e[0]}, ${e[1]}, ${e[2]})`:`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]/255})`;rp.COLOR_BACKGROUND=o;let i=e[0]+e[1]+e[2]<3*128;console.log(`Will use '${o}' as background color, interpreted as a ${i?"dark":"light"} theme`),n=i}}ei(!!n,!0)}};p($l,"LogicStatic");if(Xa){let r=(()=>{let n=document.createElement("template");n.innerHTML=jp;let e=[Qp,Kp];return n.content.querySelector("#inlineStyle").innerHTML=e.join(`


`),n.content.querySelectorAll("i.svgicon").forEach(cf),n})();window.Logic=new $l(r),window.customElements.define("logic-editor",Gt),document.addEventListener("toggle",n=>{n.target instanceof HTMLDetailsElement&&n.target.open&&n.target.querySelectorAll("logic-editor").forEach(e=>{e instanceof Gt&&e.redraw()})},!0)}else console.log("cli");})();
//# sourceMappingURL=bundle.js.map
